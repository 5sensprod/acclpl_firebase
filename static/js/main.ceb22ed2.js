/*! For license information please see main.ceb22ed2.js.LICENSE.txt */
(()=>{var e={694:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&e.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},176:e=>{"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},559:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function i(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function s(e){return"_leaflet_id"in e||(e._leaflet_id=++o),e._leaflet_id}function a(e,t,n){var r,i,o,s;return s=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(s,t),r=!0)},o}function l(e,t,n){var r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function d(e){return h(e).split(/\s+/)}function f(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function p(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,(function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"===typeof r&&(r=r(t)),r}))}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function x(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var E=window.requestAnimationFrame||b("RequestAnimationFrame")||x,S=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function T(e,t,n){if(!n||E!==x)return E.call(window,i(e,t));e.call(t)}function C(e){e&&S.call(window,e)}var A={__proto__:null,extend:n,create:r,bind:i,get lastId(){return o},stamp:s,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:h,splitWords:d,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:E,cancelFn:S,requestAnimFrame:T,cancelAnimFrame:C};function k(){}function P(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}k.extend=function(e){var t=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,o=r(i);for(var s in o.constructor=t,t.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(t[s]=this[s]);return e.statics&&n(t,e.statics),e.includes&&(P(e.includes),n.apply(null,[o].concat(e.includes))),n(o,e),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;e<t;e++)o._initHooks[e].call(this)}},t},k.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},k.mergeOptions=function(e){return n(this.prototype.options,e),this},k.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var O={on:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t);else for(var i=0,o=(e=d(e)).length;i<o;i++)this._on(e[i],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var r in e)this._off(r,e[r],t);else{e=d(e);for(var i=1===arguments.length,o=0,s=e.length;o<s;o++)i?this._off(e[o]):this._off(e[o],t,n)}else delete this._events;return this},_on:function(e,t,n,r){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var i={fn:t,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(i)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var r,i,o;if(this._events&&(r=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var s=this._listens(e,t,n);if(!1!==s){var a=r[s];this._firingCount&&(a.fn=c,this._events[e]=r=r.slice()),r.splice(s,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(i=0,o=r.length;i<o;i++)r[i].fn=c;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var i=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var l=o[s],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(e,t,n,r){"string"!==typeof e&&console.warn('"string" type argument expected');var i=t;"function"!==typeof t&&(r=!!t,i=void 0,n=void 0);var o=this._events&&this._events[e];if(o&&o.length&&!1!==this._listens(e,i,n))return!0;if(r)for(var s in this._eventParents)if(this._eventParents[s].listens(e,t,n,r))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var i=0,o=r.length;i<o;i++)if(r[i].fn===t&&r[i].ctx===n)return i;return!1},once:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t,!0);else for(var i=0,o=(e=d(e)).length;i<o;i++)this._on(e[i],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[s(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[s(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};O.addEventListener=O.on,O.removeEventListener=O.clearAllEventListeners=O.off,O.addOneTimeEventListener=O.once,O.fireEvent=O.fire,O.hasEventListeners=O.listens;var I=k.extend(O);function R(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var N=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function D(e,t,n){return e instanceof R?e:v(e)?new R(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new R(e.x,e.y):new R(e,t,n)}function M(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function j(e,t){return!e||e instanceof M?e:new M(e,t)}function F(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function z(e,t){return e instanceof F?e:new F(e,t)}function U(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function B(e,t,n){return e instanceof U?e:v(e)&&"object"!==typeof e[0]?3===e.length?new U(e[0],e[1],e[2]):2===e.length?new U(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new U(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new U(e,t,n)}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(e){return this.clone()._add(D(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(D(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new R(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new R(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(e){var t=(e=D(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=D(e)).x===this.x&&e.y===this.y},contains:function(e){return e=D(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},M.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof R||"number"===typeof e[0]||"x"in e)t=n=D(e);else if(t=(e=j(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof R?D(e):j(e))instanceof M?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>=t.x&&r.x<=n.x,s=i.y>=t.y&&r.y<=n.y;return o&&s},overlaps:function(e){e=j(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>t.x&&r.x<n.x,s=i.y>t.y&&r.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,i=Math.abs(t.y-n.y)*e;return j(D(t.x-r,t.y-i),D(n.x+r,n.y+i))},equals:function(e){return!!e&&(e=j(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},F.prototype={extend:function(e){var t,n,r=this._southWest,i=this._northEast;if(e instanceof U)t=e,n=e;else{if(!(e instanceof F))return e?this.extend(B(e)||z(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||i?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new U(t.lat,t.lng),this._northEast=new U(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new F(new U(t.lat-r,t.lng-i),new U(n.lat+r,n.lng+i))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof U||"lat"in e?B(e):z(e);var t,n,r=this._southWest,i=this._northEast;return e instanceof F?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=i.lat&&t.lng>=r.lng&&n.lng<=i.lng},intersects:function(e){e=z(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&r.lat<=n.lat,s=i.lng>=t.lng&&r.lng<=n.lng;return o&&s},overlaps:function(e){e=z(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&r.lat<n.lat,s=i.lng>t.lng&&r.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=z(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(e,t){return!!e&&(e=B(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return H.distance(this,B(e))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return z([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var V={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new M(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new U(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(0===r&&0===i)return e;var o=e.getSouthWest(),s=e.getNorthEast();return new F(new U(o.lat-r,o.lng-i),new U(s.lat-r,s.lng-i))}},H=n({},V,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin((t.lat-e.lat)*n/2),s=Math.sin((t.lng-e.lng)*n/2),a=o*o+Math.cos(r)*Math.cos(i)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),q=6378137,W={R:q,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new R(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new U((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=q*Math.PI;return new M([-e,-e],[e,e])}()};function K(e,t,n,r){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function Z(e,t,n,r){return new K(e,t,n,r)}K.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new R((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var G=n({},H,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return Z(e,.5,-e,.5)}()}),Q=n({},G,{code:"EPSG:900913"});function Y(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function X(e,t){var n,r,i,o,s,a,l="";for(n=0,i=e.length;n<i;n++){for(r=0,o=(s=e[n]).length;r<o;r++)l+=(r?"L":"M")+(a=s[r]).x+" "+a.y;l+=t?Me.svg?"z":"x":""}return l||"M0 0"}var J=document.documentElement.style,$="ActiveXObject"in window,ee=$&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=De("webkit"),re=De("android"),ie=De("android 2")||De("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),se=re&&De("Google")&&oe<537&&!("AudioNode"in window),ae=!!window.opera,le=!te&&De("chrome"),ce=De("gecko")&&!ne&&!ae&&!$,ue=!le&&De("safari"),he=De("phantom"),de="OTransition"in J,fe=0===navigator.platform.indexOf("Win"),pe=$&&"transition"in J,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,ge="MozPerspective"in J,ve=!window.L_DISABLE_3D&&(pe||me||ge)&&!de&&!he,ye="undefined"!==typeof orientation||De("mobile"),_e=ye&&ne,be=ye&&me,we=!window.PointerEvent&&window.MSPointerEvent,xe=!(!window.PointerEvent&&!we),Ee="ontouchstart"in window||!!window.TouchEvent,Se=!window.L_NO_TOUCH&&(Ee||xe),Te=ye&&ae,Ce=ye&&ce,Ae=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ke=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Pe=!!document.createElement("canvas").getContext,Oe=!(!document.createElementNS||!Y("svg").createSVGRect),Ie=!!Oe&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Re=!Oe&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Ne=0===navigator.platform.indexOf("Mac"),Le=0===navigator.platform.indexOf("Linux");function De(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Me={ie:$,ielt9:ee,edge:te,webkit:ne,android:re,android23:ie,androidStock:se,opera:ae,chrome:le,gecko:ce,safari:ue,phantom:he,opera12:de,win:fe,ie3d:pe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:_e,mobileWebkit3d:be,msPointer:we,pointer:xe,touch:Se,touchNative:Ee,mobileOpera:Te,mobileGecko:Ce,retina:Ae,passiveEvents:ke,canvas:Pe,svg:Oe,vml:Re,inlineSvg:Ie,mac:Ne,linux:Le},je=Me.msPointer?"MSPointerDown":"pointerdown",Fe=Me.msPointer?"MSPointerMove":"pointermove",ze=Me.msPointer?"MSPointerUp":"pointerup",Ue=Me.msPointer?"MSPointerCancel":"pointercancel",Be={touchstart:je,touchmove:Fe,touchend:ze,touchcancel:Ue},Ve={touchstart:Je,touchmove:Xe,touchend:Xe,touchcancel:Xe},He={},qe=!1;function We(e,t,n){return"touchstart"===t&&Ye(),Ve[t]?(n=Ve[t].bind(this,n),e.addEventListener(Be[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ke(e,t,n){Be[t]?e.removeEventListener(Be[t],n,!1):console.warn("wrong event specified:",t)}function Ze(e){He[e.pointerId]=e}function Ge(e){He[e.pointerId]&&(He[e.pointerId]=e)}function Qe(e){delete He[e.pointerId]}function Ye(){qe||(document.addEventListener(je,Ze,!0),document.addEventListener(Fe,Ge,!0),document.addEventListener(ze,Qe,!0),document.addEventListener(Ue,Qe,!0),qe=!0)}function Xe(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],He)t.touches.push(He[n]);t.changedTouches=[t],e(t)}}function Je(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Zt(t),Xe(e,t)}function $e(e){var t,n,r={};for(n in e)t=e[n],r[n]=t&&t.bind?t.bind(e):t;return e=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,r=0;function i(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var i=Qt(e);if(!i.some((function(e){return e instanceof HTMLLabelElement&&e.attributes.for}))||i.some((function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement}))){var o=Date.now();o-r<=et?2===++n&&t($e(e)):n=1,r=o}}}else n=e.detail}return e.addEventListener("click",i),{dblclick:t,simDblclick:i}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var rt,it,ot,st,at,lt=Tt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=Tt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function ht(e){return"string"===typeof e?document.getElementById(e):e}function dt(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function ft(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function pt(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=xt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function _t(e,t){if(void 0!==e.classList)for(var n=d(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!yt(e,t)){var o=xt(e);wt(e,(o?o+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):wt(e,h((" "+xt(e)+" ").replace(" "+t+" "," ")))}function wt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function xt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function Et(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&St(e,t)}function St(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(i){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function Tt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Ct(e,t,n){var r=t||new R(0,0);e.style[lt]=(Me.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function At(e,t){e._leaflet_pos=t,Me.any3d?Ct(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function kt(e){return e._leaflet_pos||new R(0,0)}if("onselectstart"in document)rt=function(){jt(window,"selectstart",Zt)},it=function(){zt(window,"selectstart",Zt)};else{var Pt=Tt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rt=function(){if(Pt){var e=document.documentElement.style;ot=e[Pt],e[Pt]="none"}},it=function(){Pt&&(document.documentElement.style[Pt]=ot,ot=void 0)}}function Ot(){jt(window,"dragstart",Zt)}function It(){zt(window,"dragstart",Zt)}function Rt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Nt(),st=e,at=e.style.outlineStyle,e.style.outlineStyle="none",jt(window,"keydown",Nt))}function Nt(){st&&(st.style.outlineStyle=at,st=void 0,at=void 0,zt(window,"keydown",Nt))}function Lt(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Dt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Mt={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:ht,getStyle:dt,create:ft,remove:pt,empty:mt,toFront:gt,toBack:vt,hasClass:yt,addClass:_t,removeClass:bt,setClass:wt,getClass:xt,setOpacity:Et,testProp:Tt,setTransform:Ct,setPosition:At,getPosition:kt,get disableTextSelection(){return rt},get enableTextSelection(){return it},disableImageDrag:Ot,enableImageDrag:It,preventOutline:Rt,restoreOutline:Nt,getSizedParentNode:Lt,getScale:Dt};function jt(e,t,n,r){if(t&&"object"===typeof t)for(var i in t)Vt(e,i,t[i],n);else for(var o=0,s=(t=d(t)).length;o<s;o++)Vt(e,t[o],n,r);return this}var Ft="_leaflet_events";function zt(e,t,n,r){if(1===arguments.length)Ut(e),delete e[Ft];else if(t&&"object"===typeof t)for(var i in t)Ht(e,i,t[i],n);else if(t=d(t),2===arguments.length)Ut(e,(function(e){return-1!==y(t,e)}));else for(var o=0,s=t.length;o<s;o++)Ht(e,t[o],n,r);return this}function Ut(e,t){for(var n in e[Ft]){var r=n.split(/\d/)[0];t&&!t(r)||Ht(e,r,null,null,n)}}var Bt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vt(e,t,n,r){var i=t+s(n)+(r?"_"+s(r):"");if(e[Ft]&&e[Ft][i])return this;var o=function(t){return n.call(r||e,t||window.event)},a=o;!Me.touchNative&&Me.pointer&&0===t.indexOf("touch")?o=We(e,t,o):Me.touch&&"dblclick"===t?o=tt(e,o):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Bt[t]||t,o,!!Me.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,$t(e,t)&&a(t)},e.addEventListener(Bt[t],o,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,o),e[Ft]=e[Ft]||{},e[Ft][i]=o}function Ht(e,t,n,r,i){i=i||t+s(n)+(r?"_"+s(r):"");var o=e[Ft]&&e[Ft][i];if(!o)return this;!Me.touchNative&&Me.pointer&&0===t.indexOf("touch")?Ke(e,t,o):Me.touch&&"dblclick"===t?nt(e,o):"removeEventListener"in e?e.removeEventListener(Bt[t]||t,o,!1):e.detachEvent("on"+t,o),e[Ft][i]=null}function qt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Wt(e){return Vt(e,"wheel",qt),this}function Kt(e){return jt(e,"mousedown touchstart dblclick contextmenu",qt),e._leaflet_disable_click=!0,this}function Zt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Gt(e){return Zt(e),qt(e),this}function Qt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Yt(e,t){if(!t)return new R(e.clientX,e.clientY);var n=Dt(t),r=n.boundingClientRect;return new R((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Xt=Me.linux&&Me.chrome?window.devicePixelRatio:Me.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Jt(e){return Me.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Xt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function $t(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e}var en={__proto__:null,on:jt,off:zt,stopPropagation:qt,disableScrollPropagation:Wt,disableClickPropagation:Kt,preventDefault:Zt,stop:Gt,getPropagationPath:Qt,getMousePosition:Yt,getWheelDelta:Jt,isExternalTarget:$t,addListener:jt,removeListener:zt},tn=I.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=kt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),At(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=I.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=f(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(B(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Me.any3d&&!Me.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),jt(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(B(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Me.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),o=(e instanceof R?e:this.latLngToContainerPoint(e)).subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(o));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():z(e);var n=D(t.paddingTopLeft||t.padding||[0,0]),r=D(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if((i="number"===typeof t.maxZoom?Math.min(t.maxZoom,i):i)===1/0)return{center:e.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),s=this.project(e.getSouthWest(),i),a=this.project(e.getNorthEast(),i);return{center:this.unproject(s.add(a).divideBy(2).add(o),i),zoom:i}},fitBounds:function(e,t){if(!(e=z(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=D(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){_t(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Me.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),i=this.project(e),o=this.getSize(),s=this._zoom;e=B(e),t=void 0===t?s:t;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,t),c=i.distanceTo(r)||1,u=1.42,h=u*u;function d(e){var t=(l*l-a*a+(e?-1:1)*h*h*c*c)/(2*(e?l:a)*h*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function f(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return f(e)/p(e)}var g=d(0);function v(e){return a*(p(g)/p(g+u*e))}function y(e){return a*(p(g)*m(g+u*e)-f(g))/h}function _(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),w=(d(1)-g)/u,x=n.duration?1e3*n.duration:1e3*w*.8;function E(){var n=(Date.now()-b)/x,o=_(n)*w;n<=1?(this._flyToFrame=T(E,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(y(o)/c)),s),this.getScaleZoom(a/v(o),s),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),E.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=z(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,z(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=D((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=D(t.paddingBottomRight||t.padding||[0,0]),i=this.project(this.getCenter()),o=this.project(e),s=this.getPixelBounds(),a=j([s.min.add(n),s.max.subtract(r)]),l=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var c=o.subtract(a.getCenter()),u=a.extend(o).getSize().subtract(l);i.x+=c.x<0?-u.x:u.x,i.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(i),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=t.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new U(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:t,bounds:n,timestamp:e.timestamp};for(var s in e.coords)"number"===typeof e.coords[s]&&(o[s]=e.coords[s]);this.fire("locationfound",o)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)pt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=ft("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new F(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=z(e),n=D(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),s=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),c=j(this.project(a,r),this.project(s,r)).getSize(),u=Me.any3d?this.options.zoomSnap:1,h=l.x/c.x,d=l.y/c.y,f=t?Math.max(h,d):Math.min(h,d);return r=this.getScaleZoom(f,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new M(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(B(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(D(e),t)},layerPointToLatLng:function(e){var t=D(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(B(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(B(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(z(e))},distance:function(e,t){return this.options.crs.distance(B(e),B(t))},containerPointToLayerPoint:function(e){return D(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return D(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(D(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(e)))},mouseEventToContainerPoint:function(e){return Yt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ht(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");jt(t,"scroll",this._onScroll,this),this._containerId=s(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Me.any3d,_t(e,"leaflet-container"+(Me.touch?" leaflet-touch":"")+(Me.retina?" leaflet-retina":"")+(Me.ielt9?" leaflet-oldie":"")+(Me.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=dt(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),At(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(e.markerPane,"leaflet-zoom-hide"),_t(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){At(this._mapPane,new R(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var i=this._zoom!==t;this._moveStart(i,n)._move(e,t)._moveEnd(i),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,r){void 0===t&&(t=this._zoom);var i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire("zoom",n):((i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){At(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[s(this._container)]=this;var t=e?zt:jt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Me.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=T((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],i="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(i&&!$t(o,e))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||a||i||!this.listens(t,!0)||(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Rt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var i=n({},e);i.type="preclick",this._fireDOMEvent(i,i.type,r)}var o=this._findEventTargets(e,t);if(r){for(var s=[],a=0;a<r.length;a++)r[a].listens(t,!0)&&s.push(r[a]);o=s.concat(o)}if(o.length){"contextmenu"===t&&Zt(e);var l=o[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(t,c,!0),c.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return kt(this._mapPane)||new R(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return j([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),o=new M(r.subtract(i),r.add(i)),s=this._getBoundsOffset(o,n,t);return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?e:this.unproject(r.add(s),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new M(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=j(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),o=r.max.subtract(e.max);return new R(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Me.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",(function(e){var t=lt,n=this._proxy.style[t];Ct(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Ct(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(T((function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)}),this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var on=k.extend({options:{position:"topright"},initialize:function(e){f(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return _t(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),sn=function(e){return new on(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=ft("div",t+"control-container",this._container);function r(r,i){var o=t+r+" "+t+i;e[r+i]=ft("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)pt(this._controlCorners[e]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return on.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(s(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=ft("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Kt(t),Wt(t);var r=this._section=ft("section",e+"-list");n&&(this._map.on("click",this.collapse,this),jt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=ft("a",e+"-toggle",t);i.href="#",i.title="Layers",i.setAttribute("role","button"),jt(i,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Zt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=ft("div",e+"-base",r),this._separator=ft("div",e+"-separator",r),this._overlaysList=ft("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&s(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)}),this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&i>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(s(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+s(this),r),this._layerControlInputs.push(t),t.layerId=s(e.layer),jt(t,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(t),o.appendChild(i),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||i.push(t);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,jt(e,"click",Zt),this.expand();var t=this;setTimeout((function(){zt(e,"click",Zt),t._preventClick=!1}))}}),ln=function(e,t,n){return new an(e,t,n)},cn=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=ft("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var o=ft("a",n,r);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Kt(o),jt(o,"click",Gt),jt(o,"click",i,this),jt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(_t(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(_t(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))}));var un=function(e){return new cn(e)},hn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=ft("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=ft("div",t,n)),e.imperial&&(this._iScale=ft("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),dn=function(e){return new hn(e)},fn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Me.inlineSvg?fn+" ":"")+"Leaflet</a>"},initialize:function(e){f(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),Kt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",(function(){this.removeAttribution(e.layer.getAttribution())}),this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook((function(){this.options.attributionControl&&(new pn).addTo(this)}));var mn=function(e){return new pn(e)};on.Layers=an,on.Zoom=cn,on.Scale=hn,on.Attribution=pn,sn.layers=ln,sn.zoom=un,sn.scale=dn,sn.attribution=mn;var gn=k.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:O},yn=Me.touch?"touchstart mousedown":"mousedown",_n=I.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){f(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(jt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(_n._dragging=this,this._preventOutline&&Rt(this._element),Ot(),rt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Lt(this._element);this._startPoint=new R(t.clientX,t.clientY),this._startPos=kt(this._element),this._parentScale=Dt(n);var r="mousedown"===e.type;jt(document,r?"mousemove":"touchmove",this._onMove,this),jt(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new R(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Zt(e),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),At(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),It(),it();var t=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var r,i,o,s,a,l,c,u,h,d=[1,4,2,8];for(i=0,c=e.length;i<c;i++)e[i]._code=Nn(e[i],t);for(s=0;s<4;s++){for(u=d[s],r=[],i=0,o=(c=e.length)-1;i<c;o=i++)a=e[i],l=e[o],a._code&u?l._code&u||((h=Rn(l,a,u,t,n))._code=Nn(h,t),r.push(h)):(l._code&u&&((h=Rn(l,a,u,t,n))._code=Nn(h,t),r.push(h)),r.push(a));e=r}return e}function wn(e,t){var n,r,i,o,s,a,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");Mn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=B([0,0]),d=z(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(h=xn(e));var f=e.length,p=[];for(n=0;n<f;n++){var m=B(e[n]);p.push(t.project(B([m.lat-h.lat,m.lng-h.lng])))}for(a=l=c=0,n=0,r=f-1;n<f;r=n++)i=p[n],o=p[r],s=i.y*o.x-o.y*i.x,l+=(i.x+o.x)*s,c+=(i.y+o.y)*s,a+=3*s;u=0===a?p[0]:[l/a,c/a];var g=t.unproject(D(u));return B([g.lat+h.lat,g.lng+h.lng])}function xn(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var o=B(e[i]);t+=o.lat,n+=o.lng,r++}return B([t/r,n/r])}var En,Sn={__proto__:null,clipPolygon:bn,polygonCenter:wn,centroid:xn};function Tn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=kn(e=On(e,n),n)}function Cn(e,t,n){return Math.sqrt(Dn(e,t,n,!0))}function An(e,t,n){return Dn(e,t,n)}function kn(e,t){var n=e.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,Pn(e,r,t,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(e[i]);return o}function Pn(e,t,n,r,i){var o,s,a,l=0;for(s=r+1;s<=i-1;s++)(a=Dn(e[s],e[r],e[i],!0))>l&&(o=s,l=a);l>n&&(t[o]=1,Pn(e,t,n,r,o),Pn(e,t,n,o,i))}function On(e,t){for(var n=[e[0]],r=1,i=0,o=e.length;r<o;r++)Ln(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<o-1&&n.push(e[o-1]),n}function In(e,t,n,r,i){var o,s,a,l=r?En:Nn(e,n),c=Nn(t,n);for(En=c;;){if(!(l|c))return[e,t];if(l&c)return!1;a=Nn(s=Rn(e,t,o=l||c,n,i),n),o===l?(e=s,l=a):(t=s,c=a)}}function Rn(e,t,n,r,i){var o,s,a=t.x-e.x,l=t.y-e.y,c=r.min,u=r.max;return 8&n?(o=e.x+a*(u.y-e.y)/l,s=u.y):4&n?(o=e.x+a*(c.y-e.y)/l,s=c.y):2&n?(o=u.x,s=e.y+l*(u.x-e.x)/a):1&n&&(o=c.x,s=e.y+l*(c.x-e.x)/a),new R(o,s,i)}function Nn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Ln(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Dn(e,t,n,r){var i,o=t.x,s=t.y,a=n.x-o,l=n.y-s,c=a*a+l*l;return c>0&&((i=((e.x-o)*a+(e.y-s)*l)/c)>1?(o=n.x,s=n.y):i>0&&(o+=a*i,s+=l*i)),a=e.x-o,l=e.y-s,r?a*a+l*l:new R(o,s)}function Mn(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function jn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mn(e)}function Fn(e,t){var n,r,i,o,s,a,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Mn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=B([0,0]),h=z(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(u=xn(e));var d=e.length,f=[];for(n=0;n<d;n++){var p=B(e[n]);f.push(t.project(B([p.lat-u.lat,p.lng-u.lng])))}for(n=0,r=0;n<d-1;n++)r+=f[n].distanceTo(f[n+1])/2;if(0===r)c=f[0];else for(n=0,o=0;n<d-1;n++)if(s=f[n],a=f[n+1],(o+=i=s.distanceTo(a))>r){l=(o-r)/i,c=[a.x-l*(a.x-s.x),a.y-l*(a.y-s.y)];break}var m=t.unproject(D(c));return B([m.lat+u.lat,m.lng+u.lng])}var zn={__proto__:null,simplify:Tn,pointToSegmentDistance:Cn,closestPointOnSegment:An,clipSegment:In,_getEdgeIntersection:Rn,_getBitCode:Nn,_sqClosestPointOnSegment:Dn,isFlat:Mn,_flat:jn,polylineCenter:Fn},Un={project:function(e){return new R(e.lng,e.lat)},unproject:function(e){return new U(e.y,e.x)},bounds:new M([-180,-90],[180,90])},Bn={R:6378137,R_MINOR:6356752.314245179,bounds:new M([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),s=o*Math.sin(r),a=Math.tan(Math.PI/4-r/2)/Math.pow((1-s)/(1+s),o/2);return r=-n*Math.log(Math.max(a,1e-10)),new R(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),s=Math.exp(-e.y/r),a=Math.PI/2-2*Math.atan(s),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=o*Math.sin(a),t=Math.pow((1-t)/(1+t),o/2),a+=c=Math.PI/2-2*Math.atan(s*t)-a;return new U(a*n,e.x*n/r)}},Vn={__proto__:null,LonLat:Un,Mercator:Bn,SphericalMercator:W},Hn=n({},H,{code:"EPSG:3395",projection:Bn,transformation:function(){var e=.5/(Math.PI*Bn.R);return Z(e,.5,-e,.5)}()}),qn=n({},H,{code:"EPSG:4326",projection:Un,transformation:Z(1/180,1,-1/180,.5)}),Wn=n({},V,{projection:Un,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});V.Earth=H,V.EPSG3395=Hn,V.EPSG3857=G,V.EPSG900913=Q,V.EPSG4326=qn,V.Simple=Wn;var Kn=I.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[s(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[s(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",(function(){t.off(n,this)}),this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=s(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=s(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return s(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[s(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=s(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=void 0===i.minZoom?e:Math.min(e,i.minZoom),t=void 0===i.maxZoom?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zn=Kn.extend({initialize:function(e,t){var n,r;if(f(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return s(e)}}),Gn=function(e,t){return new Zn(e,t)},Qn=Zn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Zn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Zn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new F;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Yn=function(e,t){return new Qn(e,t)},Xn=k.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){f(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"===typeof r&&(r=[r,r]);var i=D(r),o=D("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Me.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Jn(e){return new Xn(e)}var $n=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof $n.imagePath&&($n.imagePath=this._detectIconPath()),(this.options.imagePath||$n.imagePath)+Xn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=ft("div","leaflet-default-icon-path",document.body),t=dt(e,"background-image")||dt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),er=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=kt(t._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=j(s.min._subtract(a).add(i),s.max._subtract(a).subtract(i));if(!l.contains(o)){var c=D((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),At(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=T(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=kt(t._icon),i=t._map.layerPointToLatLng(r);n&&At(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),tr=Kn.extend({options:{icon:new $n,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){f(this,t),this._latlng=B(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=B(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),_t(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jt(n,"focus",this._panOnFocus,this);var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(_t(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&At(this._icon,e),this._shadow&&At(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),er)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new er(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Et(this._icon,e),this._shadow&&Et(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?D(t.iconSize):D(0,0),r=t.iconAnchor?D(t.iconAnchor):D(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nr(e,t){return new tr(e,t)}var rr=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return f(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ir=rr.extend({options:{fill:!0,radius:10},initialize:function(e,t){f(this,t),this._latlng=B(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=B(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return rr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new M(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function or(e,t){return new ir(e,t)}var sr=ir.extend({initialize:function(e,t,r){if("number"===typeof t&&(t=n({},r,{radius:t})),f(this,t),this._latlng=B(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new F(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:rr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===H.distance){var i=Math.PI/180,o=this._mRadius/H.R/i,s=n.project([t+o,e]),a=n.project([t-o,e]),l=s.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(o*i)-Math.sin(t*i)*Math.sin(c*i))/(Math.cos(t*i)*Math.cos(c*i)))/i;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-s.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function ar(e,t,n){return new sr(e,t,n)}var lr=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){f(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,i=null,o=Dn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],c=1,u=l.length;c<u;c++){var h=o(e,t=l[c-1],n=l[c],!0);h<r&&(r=h,i=o(e,t,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=B(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new F,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Mn(e),r=0,i=e.length;r<i;r++)n?(t[r]=B(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new M;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new R(e,e);this._rawPxBounds&&(this._pxBounds=new M([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r,i,o=e[0]instanceof U,s=e.length;if(o){for(i=[],r=0;r<s;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<s;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,i,o,s,a,l=this._parts;for(t=0,r=0,i=this._rings.length;t<i;t++)for(n=0,o=(a=this._rings[t]).length;n<o-1;n++)(s=In(a[n],a[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[r].push(s[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=Tn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,o,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(s=(a=this._parts[n]).length)-1;r<s;i=r++)if((t||0!==r)&&Cn(e,a[i],a[r])<=l)return!0;return!1}});function cr(e,t){return new lr(e,t)}lr._flat=jn;var ur=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=lr.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof U&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){lr.prototype._setLatLngs.call(this,e),Mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new R(t,t);if(e=new M(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=bn(this._rings[i],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,i,o,s,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,a=this._parts.length;i<a;i++)for(o=0,s=(l=(t=this._parts[i]).length)-1;o<l;s=o++)n=t[o],r=t[s],n.y>e.y!==r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||lr.prototype._containsPoint.call(this,e,!0)}});function hr(e,t){return new ur(e,t)}var dr=Qn.extend({initialize:function(e,t){f(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,i=v(e)?e:e.features;if(i){for(t=0,n=i.length;t<n;t++)((r=i[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var s=fr(e,o);return s?(s.feature=br(e),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(e,s),this.addLayer(s)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function fr(e,t){var n,r,i,o,s="Feature"===e.type?e.geometry:e,a=s?s.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||mr;if(!a&&!s)return null;switch(s.type){case"Point":return pr(c,e,n=u(a),t);case"MultiPoint":for(i=0,o=a.length;i<o;i++)n=u(a[i]),l.push(pr(c,e,n,t));return new Qn(l);case"LineString":case"MultiLineString":return r=gr(a,"LineString"===s.type?0:1,u),new lr(r,t);case"Polygon":case"MultiPolygon":return r=gr(a,"Polygon"===s.type?1:2,u),new ur(r,t);case"GeometryCollection":for(i=0,o=s.geometries.length;i<o;i++){var h=fr({geometry:s.geometries[i],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Qn(l);case"FeatureCollection":for(i=0,o=s.features.length;i<o;i++){var d=fr(s.features[i],t);d&&l.push(d)}return new Qn(l);default:throw new Error("Invalid GeoJSON object.")}}function pr(e,t,n,r){return e?e(t,n):new tr(n,r&&r.markersInheritOptions&&r)}function mr(e){return new U(e[1],e[0],e[2])}function gr(e,t,n){for(var r,i=[],o=0,s=e.length;o<s;o++)r=t?gr(e[o],t-1,n):(n||mr)(e[o]),i.push(r);return i}function vr(e,t){return void 0!==(e=B(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function yr(e,t,n,r){for(var i=[],o=0,s=e.length;o<s;o++)i.push(t?yr(e[o],Mn(e[o])?0:t-1,n,r):vr(e[o],r));return!t&&n&&i.length>0&&i.push(i[0].slice()),i}function _r(e,t){return e.feature?n({},e.feature,{geometry:t}):br(t)}function br(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var wr={toGeoJSON:function(e){return _r(this,{type:"Point",coordinates:vr(this.getLatLng(),e)})}};function xr(e,t){return new dr(e,t)}tr.include(wr),sr.include(wr),ir.include(wr),lr.include({toGeoJSON:function(e){var t=!Mn(this._latlngs);return _r(this,{type:(t?"Multi":"")+"LineString",coordinates:yr(this._latlngs,t?1:0,!1,e)})}}),ur.include({toGeoJSON:function(e){var t=!Mn(this._latlngs),n=t&&!Mn(this._latlngs[0]),r=yr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),_r(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Zn.include({toMultiPoint:function(e){var t=[];return this.eachLayer((function(n){t.push(n.toGeoJSON(e).geometry.coordinates)})),_r(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer((function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{var o=br(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?_r(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Er=xr,Sr=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=z(t),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=z(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ft("img");_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=i(this.fire,this,"load"),t.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Ct(this._image,n,t)},_reset:function(){var e=this._image,t=new M(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();At(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){Et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Tr=function(e,t,n){return new Sr(e,t,n)},Cr=Sr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ft("video");if(_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=i(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var a=ft("source");a.src=this._url[s],t.appendChild(a)}}}});function Ar(e,t,n){return new Cr(e,t,n)}var kr=Sr.extend({_initImage:function(){var e=this._image=this._url;_t(e,"leaflet-image-layer"),this._zoomAnimated&&_t(e,"leaflet-zoom-animated"),this.options.className&&_t(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Pr(e,t,n){return new kr(e,t,n)}var Or=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof U||v(e))?(this._latlng=B(e),f(this,t)):(f(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Et(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Et(this._container,0),this._removeTimeout=setTimeout(i(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=B(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Qn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?At(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,r){var i=t;return i instanceof e||(i=new e(r).setContent(t)),n&&i.setLatLng(n),i}}),Kn.include({_initOverlay:function(e,t,n,r){var i=n;return i instanceof e?(f(i,r),i._source=this):(i=t&&!r?t:new e(r,this)).setContent(n),i}});var Ir=Or.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Or.prototype.openOn.call(this,e)},onAdd:function(e){Or.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",qt))},onRemove:function(e){Or.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",qt))},getEvents:function(){var e=Or.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=ft("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ft("div",e+"-content-wrapper",t);if(this._contentNode=ft("div",e+"-content",n),Kt(t),Wt(this._contentNode),jt(t,"contextmenu",qt),this._tipContainer=ft("div",e+"-tip-container",t),this._tip=ft("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ft("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',jt(r,"click",(function(e){Zt(e),this.close()}),this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(t.height=i+"px",_t(e,o)):bt(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();At(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(dt(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new R(this._containerLeft,-n-this._containerBottom);i._add(kt(this._container));var o=e.layerPointToContainerPoint(i),s=D(this.options.autoPanPadding),a=D(this.options.autoPanPaddingTopLeft||s),l=D(this.options.autoPanPaddingBottomRight||s),c=e.getSize(),u=0,h=0;o.x+r+l.x>c.x&&(u=o.x+r-c.x+l.x),o.x-u-a.x<0&&(u=o.x-a.x),o.y+n+l.y>c.y&&(h=o.y+n-c.y+l.y),o.y-h-a.y<0&&(h=o.y-a.y),(u||h)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,h]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Rr=function(e,t){return new Ir(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ir,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Kn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ir,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Qn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Gt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof rr?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Nr=Or.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Or.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Or.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Or.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),s=r.layerPointToContainerPoint(e),a=this.options.direction,l=i.offsetWidth,c=i.offsetHeight,u=D(this.options.offset),h=this._getAnchor();"top"===a?(t=l/2,n=c):"bottom"===a?(t=l/2,n=0):"center"===a?(t=l/2,n=c/2):"right"===a?(t=0,n=c/2):"left"===a?(t=l,n=c/2):s.x<o.x?(a="right",t=0,n=c/2):(a="left",t=l+2*(u.x+h.x),n=c/2),e=e.subtract(D(t,n,!0)).add(u).add(h),bt(i,"leaflet-tooltip-right"),bt(i,"leaflet-tooltip-left"),bt(i,"leaflet-tooltip-top"),bt(i,"leaflet-tooltip-bottom"),_t(i,"leaflet-tooltip-"+a),At(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Et(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Lr=function(e,t){return new Nr(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Nr,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Kn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nr,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Qn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(jt(t,"focus",(function(){this._tooltip._source=e,this.openTooltip()}),this),jt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",(function(){t._openOnceFlag=!1,t._openTooltip(e)}))}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Dr=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=D(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Mr(e){return new Dr(e)}Xn.Default=$n;var jr=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Me.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){f(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),pt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof R?e:new R(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),i=0,o=n.length;i<o;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Me.ielt9){Et(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(e-i.loaded)/200);Et(i.el,o),o<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(C(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(pt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||((r=this._levels[e]={}).el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),c(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)pt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),o=Math.floor(t/2),s=n-1,a=new R(+i,+o);a.z=+s;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),s>r&&this._retainParent(i,o,s,r))},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var o=2*t;o<2*t+2;o++){var s=new R(i,o);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=Math.round(t);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Me.any3d?Ct(e.el,i,r):At(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*r);return new M(i.subtract(o),i.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),o=i.getCenter(),s=[],a=this.options.keepBuffer,l=new M(i.getBottomLeft().subtract([a,-a]),i.getTopRight().add([a,-a]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new R(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var d=i.min.x;d<=i.max.x;d++){var f=new R(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:s.push(f)}}if(s.sort((function(e,t){return e.distanceTo(o)-t.distanceTo(o)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return z(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n);return[t.unproject(r,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new F(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new R(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(pt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){_t(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Me.ielt9&&this.options.opacity<1&&Et(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(o),this.createTile.length<2&&T(i(this._tileReady,this,e,null,o)),At(o,n),this._tiles[r]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(Et(n.el,0),C(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(_t(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Me.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new R(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new M(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Fr(e){return new jr(e)}var zr=jr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=f(this,t)).detectRetina&&Me.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return jt(n,"load",i(this._tileOnLoad,this,t,n)),jt(n,"error",i(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Me.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Me.ielt9?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=_;var n=this._tiles[e].coords;pt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",_),jr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==_))return jr.prototype._tileReady.call(this,e,t,n)}});function Ur(e,t){return new zr(e,t)}var Br=zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var i in t)i in this.options||(r[i]=t[i]);var o=(t=f(this,t)).detectRetina&&Me.retina?2:1,s=this.getTileSize();r.width=s.x*o,r.height=s.y*o,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,zr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=j(n.project(t[0]),n.project(t[1])),i=r.min,o=r.max,s=(this._wmsVersion>=1.3&&this._crs===qn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),a=zr.prototype.getTileUrl.call(this,e);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Vr(e,t){return new Br(e,t)}zr.WMS=Br,Ur.wms=Vr;var Hr=Kn.extend({options:{padding:.1},initialize:function(e){f(this,e),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,t),o=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(e,t));Me.any3d?Ct(this._container,o,n):At(this._container,o)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new M(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qr=Hr.extend({options:{tolerance:0},getEvents:function(){var e=Hr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");jt(e,"mousemove",this._onMouseMove,this),jt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),jt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,pt(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Me.retina?2:1;At(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Me.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Hr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[s(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[s(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;i.push(t)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new M,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,o,s=e._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(r=0,i=s[n].length;r<i;r++)o=s[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),i=this._drawFirst;i;i=i.next)(t=i.layer).options.interactive&&t._containsPoint(r)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(_t(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Wr(e){return Me.canvas?new qr(e):null}var Kr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zr={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Kr("shape");_t(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Kr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;pt(t),e.removeInteractiveTarget(t),delete this._layers[s(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Kr("stroke")),i.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=Kr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Gr=Me.vml?Kr:Y,Qr=Hr.extend({_initContainer:function(){this._container=Gr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),At(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Gr("path");e.options.className&&_t(t,e.options.className),e.options.interactive&&_t(t,"leaflet-interactive"),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){pt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[s(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,X(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",i=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,i)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Yr(e){return Me.svg||Me.vml?new Qr(e):null}Me.vml&&Qr.include(Zr),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Wr(e)||Yr(e)}});var Xr=ur.extend({initialize:function(e,t){ur.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=z(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Jr(e,t){return new Xr(e,t)}Qr.create=Gr,Qr.pointsToPath=X,dr.geometryToLayer=fr,dr.coordsToLatLng=mr,dr.coordsToLatLngs=gr,dr.latLngToCoords=vr,dr.latLngsToCoords=yr,dr.getFeature=_r,dr.asFeature=br,nn.mergeOptions({boxZoom:!0});var $r=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){jt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),rt(),Ot(),this._startPoint=this._map.mouseEventToContainerPoint(e),jt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new M(this._point,this._startPoint),n=t.getSize();At(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pt(this._box),bt(this._container,"leaflet-crosshair")),it(),It(),zt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",$r),nn.mergeOptions({doubleClickZoom:!0});var ei=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});nn.addInitHook("addHandler","doubleClickZoom",ei),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ti=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=z(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,o=(r+t+n)%e-t-n,s=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=i.multiplyBy(s/o),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),h=c/(n.inertiaDeceleration*s),d=u.multiplyBy(-h/2).round();d.x||d.y?(d=t._limitOffset(d,t.options.maxBounds),T((function(){t.panBy(d,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})}))):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",ti),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ni=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),jt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;t<n;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;t<n;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;t<n;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;t<n;t++)r[i.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;t<n;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;t<n;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){jt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=D(t).multiplyBy(3)),r.options.maxBounds&&(t=r._limitOffset(D(t),r.options.maxBounds)),r.options.worldCopyJump){var i=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(t)));r.panTo(i)}else r.panBy(t)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Gt(e)}}});nn.addInitHook("addHandler","keyboard",ni),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ri=gn.extend({addHooks:function(){jt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Jt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Gt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,s=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});nn.addInitHook("addHandler","scrollWheelZoom",ri);var ii=600;nn.mergeOptions({tapHold:Me.touchNative&&Me.safari&&Me.mobile,tapTolerance:15});var oi=gn.extend({addHooks:function(){jt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new R(t.clientX,t.clientY),this._holdTimeout=setTimeout(i((function(){this._cancel(),this._isTapValid()&&(jt(document,"touchend",Zt),jt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))}),this),ii),jt(document,"touchend touchcancel contextmenu",this._cancel,this),jt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){zt(document,"touchend",Zt),zt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new R(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",oi),nn.mergeOptions({touchZoom:Me.touch,bounceAtZoomLimits:!0});var si=gn.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),jt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),jt(document,"touchmove",this._onTouchMove,this),jt(document,"touchend touchcancel",this._onTouchEnd,this),Zt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&o<1||this._zoom>t.getMaxZoom()&&o>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var a=i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=T(a,this,!0),Zt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",si),nn.BoxZoom=$r,nn.DoubleClickZoom=ei,nn.Drag=ti,nn.Keyboard=ni,nn.ScrollWheelZoom=ri,nn.TapHold=oi,nn.TouchZoom=si,e.Bounds=M,e.Browser=Me,e.CRS=V,e.Canvas=qr,e.Circle=sr,e.CircleMarker=ir,e.Class=k,e.Control=on,e.DivIcon=Dr,e.DivOverlay=Or,e.DomEvent=en,e.DomUtil=Mt,e.Draggable=_n,e.Evented=I,e.FeatureGroup=Qn,e.GeoJSON=dr,e.GridLayer=jr,e.Handler=gn,e.Icon=Xn,e.ImageOverlay=Sr,e.LatLng=U,e.LatLngBounds=F,e.Layer=Kn,e.LayerGroup=Zn,e.LineUtil=zn,e.Map=nn,e.Marker=tr,e.Mixin=vn,e.Path=rr,e.Point=R,e.PolyUtil=Sn,e.Polygon=ur,e.Polyline=lr,e.Popup=Ir,e.PosAnimation=tn,e.Projection=Vn,e.Rectangle=Xr,e.Renderer=Hr,e.SVG=Qr,e.SVGOverlay=kr,e.TileLayer=zr,e.Tooltip=Nr,e.Transformation=K,e.Util=A,e.VideoOverlay=Cr,e.bind=i,e.bounds=j,e.canvas=Wr,e.circle=ar,e.circleMarker=or,e.control=sn,e.divIcon=Mr,e.extend=n,e.featureGroup=Yn,e.geoJSON=xr,e.geoJson=Er,e.gridLayer=Fr,e.icon=Jn,e.imageOverlay=Tr,e.latLng=B,e.latLngBounds=z,e.layerGroup=Gn,e.map=rn,e.marker=nr,e.point=D,e.polygon=hr,e.polyline=cr,e.popup=Rr,e.rectangle=Jr,e.setOptions=f,e.stamp=s,e.svg=Yr,e.svgOverlay=Pr,e.tileLayer=Ur,e.tooltip=Lr,e.transformation=Z,e.version=t,e.videoOverlay=Ar;var ai=window.L;e.noConflict=function(){return window.L=ai,this},window.L=e}(t)},136:(e,t,n)=>{e.exports=n(166)},872:e=>{"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n},811:e=>{var t,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g=!1;function v(){if(!g){g=!0;var e=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),y=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(d=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),u=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),h=!!/Win64/.exec(e),v){(t=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var _=/(?:Trident\/(\d+.\d+))/.exec(e);s=_?parseFloat(_[1])+4:t,n=v[2]?parseFloat(v[2]):NaN,r=v[3]?parseFloat(v[3]):NaN,(i=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(e),o=v&&v[1]?parseFloat(v[1]):NaN):o=NaN}else t=n=r=o=i=NaN;if(y){if(y[1]){var b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);a=!b||parseFloat(b[1].replace("_","."))}else a=!1;l=!!y[2],c=!!y[3]}else a=l=c=!1}}var y={ie:function(){return v()||t},ieCompatibilityMode:function(){return v()||s>t},ie64:function(){return y.ie()&&h},firefox:function(){return v()||n},opera:function(){return v()||r},webkit:function(){return v()||i},safari:function(){return y.webkit()},chrome:function(){return v()||o},windows:function(){return v()||l},osx:function(){return v()||a},linux:function(){return v()||c},iphone:function(){return v()||d},mobile:function(){return v()||d||f||u||m},nativeApp:function(){return v()||p},android:function(){return v()||u},ipad:function(){return v()||f}};e.exports=y},780:(e,t,n)=>{"use strict";var r,i=n(872);i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var s=document.createElement("div");s.setAttribute(n,"return;"),o="function"===typeof s[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},166:(e,t,n)=>{"use strict";var r=n(811),i=n(780);function o(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,i=10*n,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1==e.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}o.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},e.exports=o},573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(54),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},54:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,o,s){var a=i||"<<anonymous>>",l=s||r;if(null==n[r])return t?new Error("Required "+o+" `"+l+"` was not specified in `"+a+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),h=6;h<c;h++)u[h-6]=arguments[h];return e.apply(void 0,[n,r,a,o,l].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case T:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,Se=null;function Te(e){if(e=_i(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ce(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ae(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function ke(e,t){return e(t)}function Pe(){}var Oe=!1;function Ie(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return ke(e,t,n)}finally{Oe=!1,(null!==Ee||null!==Se)&&(Pe(),Ae())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Ne=!1}function De(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,je=null,Fe=!1,ze=null,Ue={onError:function(e){Me=!0,je=e}};function Be(e,t,n,r,i,o,s,a,l){Me=!1,je=null,De.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qe(i),e;if(s===r)return qe(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ze=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,Et,St,Tt,Ct=!1,At=[],kt=null,Pt=null,Ot=null,It=new Map,Rt=new Map,Nt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Ct=!1,null!==kt&&Ft(kt)&&(kt=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Ot&&Ft(Ot)&&(Ot=null),It.forEach(zt),Rt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<At.length){Bt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Bt(kt,e),null!==Pt&&Bt(Pt,e),null!==Ot&&Bt(Ot,e),It.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)jt(n),null===n.blockedOn&&Nt.shift()}var Ht=b.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=1,Zt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function Kt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=4,Zt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function Zt(e,t,n,r){if(qt){var i=Qt(e,t,n,r);if(null===i)qr(e,t,r,Gt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Mt(kt,e,t,n,r,i),!0;case"dragenter":return Pt=Mt(Pt,e,t,n,r,i),!0;case"mouseover":return Ot=Mt(Ot,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Mt(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Mt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&wt(o),null===(o=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=j({},cn,{view:0,detail:0}),dn=on(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(j({},fn,{dataTransfer:0})),gn=on(j({},hn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(yn),bn=on(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Sn}var Cn=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(Cn),kn=on(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),On=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(In),Nn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Dn,jn=u&&(!Ln||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Zn=null;function Gn(e){Fr(e,0)}function Qn(e){if(Z(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Zn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Zn)){var t=[];Wn(t,Zn,e,we(e)),Ie(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Zn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Zn)}function or(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},Sr={};function Tr(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Tr("animationend"),Ar=Tr("animationiteration"),kr=Tr("animationstart"),Pr=Tr("transitionend"),Or=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Or.set(e,t),l(t,[e])}for(var Nr=0;Nr<Ir.length;Nr++){var Lr=Ir[Nr];Rr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Ar,"onAnimationIteration"),Rr(kr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=je;Me=!1,je=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;jr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;jr(i,a,c),o=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ie((function(){var r=o,i=we(n),s=[];e:{var a=Or.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Cr:case Ar:case kr:l=vn;break;case Pr:l=On;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=kn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Zr(f))p++;for(f=0,m=d;m;m=Zr(m))f++;for(;0<p-f;)u=Zr(u),p--;for(;0<f-p;)d=Zr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Zr(u),d=Zr(d)}u=null}else u=null;null!==l&&Gr(s,a,l,u,!1),null!==c&&null!==h&&Gr(s,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(qn(a))if(Xn)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Ln)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vn?Un(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(v=Kr(r,_)).length&&(_=new bn(_,e,null,n,i),s.push({event:_,listeners:v}),y?_.data=y:null!==(y=Bn(n))&&(_.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Ln&&Un(e,t)?(e=en(),$t=Jt=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Re(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Re(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var xi=[],Ei=-1;function Si(e){return{current:e}}function Ti(e){0>Ei||(e.current=xi[Ei],xi[Ei]=null,Ei--)}function Ci(e,t){Ei++,xi[Ei]=e.current,e.current=t}var Ai={},ki=Si(Ai),Pi=Si(!1),Oi=Ai;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ti(Pi),Ti(ki)}function Li(e,t,n){if(ki.current!==Ai)throw Error(o(168));Ci(ki,t),Ci(Pi,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Oi=ki.current,Ci(ki,e),Ci(Pi,Pi.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ti(Pi),Ti(ki),Ci(ki,e)):Ti(Pi),Ci(Pi,n)}var Fi=null,zi=!1,Ui=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=_t;try{var n=Fi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ze($e,Vi),i}finally{_t=t,Ui=!1}}return null}var Hi=[],qi=0,Wi=null,Ki=0,Zi=[],Gi=0,Qi=null,Yi=1,Xi="";function Ji(e,t){Hi[qi++]=Ki,Hi[qi++]=Wi,Wi=e,Ki=t}function $i(e,t,n){Zi[Gi++]=Yi,Zi[Gi++]=Xi,Zi[Gi++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,Xi=o+e}else Yi=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&(Ji(e,1),$i(e,1,0))}function to(e){for(;e===Wi;)Wi=Hi[--qi],Hi[qi]=null,Ki=Hi[--qi],Hi[qi]=null;for(;e===Qi;)Qi=Zi[--Gi],Zi[Gi]=null,Xi=Zi[--Gi],Zi[Gi]=null,Yi=Zi[--Gi],Zi[Gi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Si(null),_o=null,bo=null,wo=null;function xo(){wo=bo=_o=null}function Eo(e){var t=yo.current;Ti(yo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t){_o=e,wo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===_o)throw Error(o(308));bo=e,_o.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Ao=null;function ko(e){null===Ao?Ao=[e]:Ao.push(e)}function Po(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ko(t)):(n.next=i.next,i.next=n),t.interleaved=n,Oo(e,r)}function Oo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Io=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Oo(e,n)}return null===(i=r.interleaved)?(t.next=t,ko(r)):(t.next=i.next,i.next=t),r.interleaved=t,Oo(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function jo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Io=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Io=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=s,e.lanes=s,e.memoizedState=h}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Uo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(rc(t,e,r,n),Mo(t,e,r))}};function Ho(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function qo(e,t,n){var r=!1,i=Ai,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Ri(t)?Oi:ki.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Ko(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Uo,Ro(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Ri(t)?Oi:ki.current,i.context=Ii(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Zo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Uo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Go(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Qo(o)===t.type)?((r=i(t,n.props)).ref=Zo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Zo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Zo(e,null,t),n.return=e,n;case x:return(t=zc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Go(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Go(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Go(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),io&&Ji(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Ji(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(i,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),a=s(_,a,g),null===h?u=_:h.sibling=_,h=_,m=v}if(y.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return io&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===E){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Zo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===E?((o=Mc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=Zo(r,o,s),l.return=r,r=l)}return a(r);case x:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(s,r.mode,l)).return=r,r=o}return a(r);case R:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(D(s))return g(r,o,s,l);Go(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Xo=Yo(!0),Jo=Yo(!1),$o={},es=Si($o),ts=Si($o),ns=Si($o);function rs(e){if(e===$o)throw Error(o(174));return e}function is(e,t){switch(Ci(ns,t),Ci(ts,e),Ci(es,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(es),Ci(es,t)}function os(){Ti(es),Ti(ts),Ti(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ci(ts,e),Ci(es,n))}function as(e){ts.current===e&&(Ti(es),Ti(ts))}var ls=Si(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ps=0,ms=null,gs=null,vs=null,ys=!1,_s=!1,bs=0,ws=0;function xs(){throw Error(o(321))}function Es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Ss(e,t,n,r,i,s){if(ps=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_s){s=0;do{if(_s=!1,bs=0,25<=s)throw Error(o(301));s+=1,vs=gs=null,t.updateQueue=null,ds.current=ca,e=n(r,i)}while(_s)}if(ds.current=sa,t=null!==gs&&null!==gs.next,ps=0,vs=gs=ms=null,ys=!1,t)throw Error(o(300));return e}function Ts(){var e=0!==bs;return bs=0,e}function Cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?ms.memoizedState=vs=e:vs=vs.next=e,vs}function As(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===vs?ms.memoizedState:vs.next;if(null!==t)vs=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===vs?ms.memoizedState=vs=e:vs=vs.next=e}return vs}function ks(e,t){return"function"===typeof t?t(e):t}function Ps(e){var t=As(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ps&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,ms.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,jl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Os(e){var t=As(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function Rs(e,t){var n=ms,r=As(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,qs(Ds.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,zs(9,Ls.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(o(349));0!==(30&ps)||Ns(n,t,i)}return i}function Ns(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,r){t.value=n,t.getSnapshot=r,Ms(t)&&js(e)}function Ds(e,t,n){return n((function(){Ms(t)&&js(e)}))}function Ms(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function js(e){var t=Oo(e,1);null!==t&&rc(t,e,1,-1)}function Fs(e){var t=Cs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function zs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Us(){return As().memoizedState}function Bs(e,t,n,r){var i=Cs();ms.flags|=e,i.memoizedState=zs(1|t,n,void 0,void 0===r?null:r)}function Vs(e,t,n,r){var i=As();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&Es(r,s.deps))return void(i.memoizedState=zs(t,n,o,r))}ms.flags|=e,i.memoizedState=zs(1|t,n,o,r)}function Hs(e,t){return Bs(8390656,8,e,t)}function qs(e,t){return Vs(2048,8,e,t)}function Ws(e,t){return Vs(4,2,e,t)}function Ks(e,t){return Vs(4,4,e,t)}function Zs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Gs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,Zs.bind(null,t,e),n)}function Qs(){}function Ys(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xs(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Js(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,jl|=n,e.baseState=!0),t)}function $s(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{_t=n,fs.transition=r}}function ea(){return As().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Po(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,ko(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Po(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ia(e,t){_s=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Co,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},aa={readContext:Co,useCallback:function(e,t){return Cs().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4194308,4,Zs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=Cs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Cs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Cs().memoizedState=e},useState:Fs,useDebugValue:Qs,useDeferredValue:function(e){return Cs().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=$s.bind(null,e[1]),Cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=Cs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ol)throw Error(o(349));0!==(30&ps)||Ns(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Hs(Ds.bind(null,r,s,e),[e]),r.flags|=2048,zs(9,Ls.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Cs(),t=Ol.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Co,useCallback:Ys,useContext:Co,useEffect:qs,useImperativeHandle:Gs,useInsertionEffect:Ws,useLayoutEffect:Ks,useMemo:Xs,useReducer:Ps,useRef:Us,useState:function(){return Ps(ks)},useDebugValue:Qs,useDeferredValue:function(e){return Js(As(),gs.memoizedState,e)},useTransition:function(){return[Ps(ks)[0],As().memoizedState]},useMutableSource:Is,useSyncExternalStore:Rs,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Co,useCallback:Ys,useContext:Co,useEffect:qs,useImperativeHandle:Gs,useInsertionEffect:Ws,useLayoutEffect:Ks,useMemo:Xs,useReducer:Os,useRef:Us,useState:function(){return Os(ks)},useDebugValue:Qs,useDeferredValue:function(e){var t=As();return null===gs?t.memoizedState=e:Js(t,gs.memoizedState,e)},useTransition:function(){return[Os(ks)[0],As().memoizedState]},useMutableSource:Is,useSyncExternalStore:Rs,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),da(0,t)},n}function ma(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Zl?Zl=new Set([this]):Zl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=b.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Xo(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var o=t.ref;return To(t,i),r=Ss(e,t,n,r,o,i),n=Ts(),null===e||ba?(io&&n&&eo(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Lc(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Aa(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ll,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ll,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Ll,Nl),Nl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Ll,Nl),Nl|=r;return wa(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var o=Ri(n)?Oi:ki.current;return o=Ii(t,o),To(t,i),n=Ss(e,t,n,r,o,i),r=Ts(),null===e||ba?(io&&r&&eo(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function ka(e,t,n,r,i){if(Ri(n)){var o=!0;Mi(t)}else o=!1;if(To(t,i),null===t.stateNode)qa(e,t),qo(t,n,r),Ko(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Ii(t,c=Ri(n)?Oi:ki.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Wo(t,s,r,c),Io=!1;var d=t.memoizedState;s.state=d,Fo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Pi.current||Io?("function"===typeof u&&(Bo(t,n,u,r),l=t.memoizedState),(a=Io||Ho(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,No(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Ii(t,l=Ri(n)?Oi:ki.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Wo(t,s,r,l),Io=!1,d=t.memoizedState,s.state=d,Fo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Pi.current||Io?("function"===typeof f&&(Bo(t,n,f,r),p=t.memoizedState),(c=Io||Ho(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,o,i)}function Pa(e,t,n,r,i,o){Ca(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&ji(t,n,!1),Wa(e,t,o);r=t.stateNode,_a.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Xo(t,e.child,null,o),t.child=Xo(t,null,a,o)):wa(e,t,a,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),is(e,t.containerInfo)}function Ia(e,t,n,r,i){return po(),mo(i),t.flags|=256,wa(e,t,n,r),t.child}var Ra,Na,La,Da,Ma={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=Ma,e):za(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(s=Mc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Xo(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Ma,s);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Oo(e,i),rc(r,e,i,-1))}return gc(),Ua(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Zi[Gi++]=Yi,Zi[Gi++]=Xi,Zi[Gi++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&mo(r),Xo(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Za(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(t),null;case 1:case 17:return Ri(t.type)&&Ni(),Za(t),null;case 3:return r=t.stateNode,os(),Ti(Pi),Ti(ki),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Na(e,t),Za(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Za(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ie(r,s),zr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),$(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",e):null!=u&&_(e,s,u,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Za(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Za(t),null;case 13:if(Ti(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Za(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Za(t),null);case 4:return os(),Na(e,t),null===e&&Vr(t.stateNode.containerInfo),Za(t),null;case 10:return Eo(t.type._context),Za(t),null;case 19:if(Ti(ls),null===(s=t.memoizedState))return Za(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ka(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ka(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Hl&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Za(t),null}else 2*Xe()-s.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=ls.current,Ci(ls,r?1&n|2:1&n),t):(Za(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Za(t),6&t.subtreeFlags&&(t.flags|=8192)):Za(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qa(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ti(Pi),Ti(ki),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ti(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ls),null;case 4:return os(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));pl(s,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Tc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),_e(l,a);var u=_e(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,gl(t,e),Xa=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,$a=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){$a=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=s,(Xa=l)&&!c)for($a=i;null!==$a;)l=(s=$a).child,22===s.tag&&null!==s.memoizedState?El(i):null!==l?(l.return=s,$a=l):El(i);for(;null!==o;)$a=o,bl(o,t,n),o=o.sibling;$a=i,Ya=a,Xa=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$a=o):wl(e)}}function wl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&zo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Xa||512&t.flags&&ol(t)}catch(f){Tc(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function xl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Tc(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Tc(t,s,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,Tl=Math.ceil,Cl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,Pl=0,Ol=null,Il=null,Rl=0,Nl=0,Ll=Si(0),Dl=0,Ml=null,jl=0,Fl=0,zl=0,Ul=null,Bl=null,Vl=0,Hl=1/0,ql=null,Wl=!1,Kl=null,Zl=null,Gl=!1,Ql=null,Yl=0,Xl=0,Jl=null,$l=-1,ec=0;function tc(){return 0!==(6&Pl)?Xe():-1!==$l?$l:$l=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Rl?Rl&-Rl:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(o(185));vt(e,n,r),0!==(2&Pl)&&e===Ol||(e===Ol&&(0===(2&Pl)&&(Fl|=n),4===Dl&&lc(e,Rl)),ic(e,r),1===n&&0===Pl&&0===(1&t.mode)&&(Hl=Xe()+500,zi&&Vi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Ol?Rl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),si((function(){0===(6&Pl)&&Vi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Oc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if($l=-1,ec=0,0!==(6&Pl))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Ol?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Pl;Pl|=2;var s=mc();for(Ol===e&&Rl===t||(ql=null,Hl=Xe()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}xo(),Cl.current=s,Pl=i,null!==Il?t=0:(Ol=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Xe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Bl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Bl,ql),t);break}xc(e,Bl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Bl,ql),r);break}xc(e,Bl,ql);break;default:throw Error(o(329))}}}return ic(e,Xe()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~zl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Pl))throw Error(o(327));Ec();var t=dt(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bl,ql),ic(e,Xe()),null}function uc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Hl=Xe()+500,zi&&Vi())}}function hc(e){null!==Ql&&0===Ql.tag&&0===(6&Pl)&&Ec();var t=Pl;Pl|=1;var n=kl.transition,r=_t;try{if(kl.transition=null,_t=1,e)return e()}finally{_t=r,kl.transition=n,0===(6&(Pl=t))&&Vi()}}function dc(){Nl=Ll.current,Ti(Ll)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:os(),Ti(Pi),Ti(ki),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ti(ls);break;case 10:Eo(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Ol=e,Il=e=Lc(e.current,null),Rl=Nl=t,Dl=0,Ml=null,zl=Fl=jl=0,Bl=Ul=null,null!==Ao){for(t=0;t<Ao.length;t++)if(null!==(r=(n=Ao[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Ao=null}return e}function pc(e,t){for(;;){var n=Il;try{if(xo(),ds.current=sa,ys){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(ps=0,vs=gs=ms=null,_s=!1,bs=0,Al.current=null,null===n||null===n.return){Dl=1,Ml=t,Il=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),mo(ua(c,l));break e}}s=c=ua(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[s]:Ul.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,jo(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Zl||!Zl.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,jo(s,ma(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=sa,null===e?sa:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ol||0===(268435455&jl)&&0===(268435455&Fl)||lc(Ol,Rl)}function vc(e,t){var n=Pl;Pl|=2;var r=mc();for(Ol===e&&Rl===t||(ql=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(xo(),Pl=n,Cl.current=r,null!==Il)throw Error(o(261));return Ol=null,Rl=0,Dl}function yc(){for(;null!==Il;)bc(Il)}function _c(){for(;null!==Il&&!Qe();)bc(Il)}function bc(e){var t=Sl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?wc(e):Il=t,Al.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Nl)))return void(Il=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Dl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Dl&&(Dl=5)}function xc(e,t,n){var r=_t,i=kl.transition;try{kl.transition=null,_t=1,function(e,t,n,r){do{Ec()}while(null!==Ql);if(0!==(6&Pl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Ol&&(Il=Ol=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Oc(tt,(function(){return Ec(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=kl.transition,kl.transition=null;var a=_t;_t=1;var l=Pl;Pl|=4,Al.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Ye(),Pl=l,_t=a,kl.transition=s}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),s=e.pendingLanes,0===s&&(Zl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),s=e.pendingLanes,0!==(1&s)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Vi()}(e,t,n,r)}finally{kl.transition=i,_t=r}return null}function Ec(){if(null!==Ql){var e=bt(Yl),t=kl.transition,n=_t;try{if(kl.transition=null,_t=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Pl))throw Error(o(331));var i=Pl;for(Pl|=4,$a=e.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(sl(h),h===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else e:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,$a=y;break e}$a=s.return}}var _=e.current;for($a=_;null!==$a;){var b=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,$a=b;else e:for(a=_;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Tc(l,l.return,x)}if(l===a){$a=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$a=w;break e}$a=l.return}}if(Pl=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{_t=n,kl.transition=t}}return!1}function Sc(e,t,n){e=Do(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zl||!Zl.has(r))){t=Do(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Xe()-Vl?fc(e,0):zl|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Oo(e,t))&&(vt(e,t,n),ic(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ac(e,n)}function Oc(e,t){return Ze(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ic(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Mc(n.children,i,s,t);case S:a=8,i|=8;break;case T:return(e=Rc(12,n,t,2|i)).elementType=T,e.lanes=s,e;case P:return(e=Rc(13,n,t,i)).elementType=P,e.lanes=s,e;case O:return(e=Rc(19,n,t,i)).elementType=O,e.lanes=s,e;case N:return jc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case A:a=9;break e;case k:a=11;break e;case I:a=14;break e;case R:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,s,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),e}function Vc(e){if(!e)return Ai;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Di(e,n,t)}return t}function Hc(e,t,n,r,i,o,s,a,l){return(e=Bc(n,r,!0,e,0,o,0,a,l)).context=Vc(null),n=e.current,(o=Lo(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function qc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,s))&&(rc(e,i,s,o),Mo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Zc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),po();break;case 5:ss(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ci(ls,1&ls.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ci(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ii(t,ki.current);To(t,n),i=Ss(null,t,r,e,i,n);var s=Ts();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ro(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Ko(t,r,e,n),t=Pa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===I)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Oa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,No(e,t),Fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ia(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ca(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fa(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xo(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Pi.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Lo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),So(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,To(t,n),r=r(i=Co(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Ea(e,t,r,i=vo(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,To(t,n),qo(t,r,i),Ko(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return Ha(e,t,n);case 22:return Ta(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}qc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=Hc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,Vr(8===e.nodeType?e.parentNode:e),hc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),hc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Xe()),0===(6&Pl)&&(Hl=Xe()+500,Vi()))}break;case 13:hc((function(){var t=Oo(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Zc(e,1)}},xt=function(e){if(13===e.tag){var t=Oo(e,134217728);if(null!==t)rc(t,e,134217728,tc());Zc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Oo(e,t);if(null!==n)rc(n,e,t,tc());Zc(e,t)}},St=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));Z(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=uc,Pe=hc;var tu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Ce,Ae,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+k(l,0):o,w(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),P(s,t,i,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+k(a=e[c],c);l+=P(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,i,u=o+k(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},N={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:N,ReactCurrentOwner:E};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,N(x);else{var t=r(u);null!==t&&L(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!P());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&L(w,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,T=null,C=-1,A=5,k=-1;function P(){return!(t.unstable_now()-k<A)}function O(){if(null!==T){var e=t.unstable_now();k=e;var n=!0;try{n=T(!0,e)}finally{n?E():(S=!1,T=null)}}else S=!1}if("function"===typeof _)E=function(){_(O)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,R=I.port2;I.port1.onmessage=O,E=function(){R.postMessage(null)}}else E=function(){v(O,0)};function N(e){T=e,S||(S=!0,E())}function L(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,L(w,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,N(x))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},391:e=>{"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/acclpl_firebase/",(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>ek,hasStandardBrowserEnv:()=>tk,hasStandardBrowserWebWorkerEnv:()=>rk});var t,r=n(791),i=n.t(r,2),o=n(250);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const a="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Yv){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),s({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:c=!1}=i,f=o.history,p=t.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:n})}function _(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:d(e);return l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(s({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(o,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(a,y),m=e,()=>{o.removeEventListener(a,y),m=null}},createHref:e=>n(o,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let i=h(b.location,e,n);r&&r(i,e),g=v()+1;let s=u(i,g),a=b.createHref(i);try{f.pushState(s,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;o.location.assign(a)}c&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,n){p=t.Replace;let i=h(b.location,e,n);r&&r(i,e),g=v();let o=u(i,g),s=b.createHref(i);f.replaceState(o,"",s),c&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){void 0===n&&(n="/");let r=O(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=v(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s)o=A(i[s],P(r));return o}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(l(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=D([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),v(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:C(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)})),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=y(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:\w+$/,b=3,w=2,x=1,E=10,S=-2,T=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=S),t&&(r+=w),n.filter((e=>!T(e))).reduce(((e,t)=>e+(_.test(t)?b:""===t?x:E)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=k({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:D([i,c.pathname]),pathnameBase:M(D([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=D([i,c.pathnameBase]))}return o}function k(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return c(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{});return{params:l,pathname:o,pathnameBase:s,pattern:e}}function P(e){try{return decodeURI(e)}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function I(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function N(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=s({},e),l(!i.pathname||!i.pathname.includes("?"),I("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),I("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),I("#","search","hash",i)));let o,a=""===e||""===i.pathname,c=a?"/":i.pathname;if(r||null==c)o=n;else{let e=t.length-1;if(c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:j(r),hash:F(i)}}(i,o),h=c&&"/"!==c&&c.endsWith("/"),d=(a||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const D=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],B=(new Set(U),["get",...U]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const H=r.createContext(null);const q=r.createContext(null);const W=r.createContext(null);const K=r.createContext(null);const Z=r.createContext({outlet:null,matches:[],isDataRoute:!1});const G=r.createContext(null);function Q(){return null!=r.useContext(K)}function Y(){return Q()||l(!1),r.useContext(K).location}function X(e){r.useContext(W).static||r.useLayoutEffect(e)}function J(){let{isDataRoute:e}=r.useContext(Z);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=he(le.UseNavigateStable),n=r.useRef(!1);X((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,V({fromRouteId:t},i)))}),[e,t]);return i}():function(){Q()||l(!1);let e=r.useContext(H),{basename:t,navigator:n}=r.useContext(W),{matches:i}=r.useContext(Z),{pathname:o}=Y(),s=JSON.stringify(R(i).map((e=>e.pathnameBase))),a=r.useRef(!1);X((()=>{a.current=!0}));let c=r.useCallback((function(r,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof r)return void n.go(r);let l=N(r,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:D([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[t,n,s,o,e]);return c}()}const $=r.createContext(null);function ee(e,t){let{relative:n}=void 0===t?{}:t,{matches:i}=r.useContext(Z),{pathname:o}=Y(),s=JSON.stringify(R(i).map((e=>e.pathnameBase)));return r.useMemo((()=>N(e,JSON.parse(s),o,"path"===n)),[e,s,o,n])}function te(e,n,i){Q()||l(!1);let{navigator:o}=r.useContext(W),{matches:s}=r.useContext(Z),a=s[s.length-1],c=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let h,d=Y();if(n){var p;let e="string"===typeof n?f(n):n;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||l(!1),h=e}else h=d;let m=h.pathname||"/",v=g(e,{pathname:"/"===u?m:m.slice(u.length)||"/"});let y=se(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:D([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,i);return n&&y?r.createElement(K.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},y):y}function ne(){let e=function(){var e;let t=r.useContext(G),n=ue(le.UseRouteError),i=he(le.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?r.createElement(Z.Provider,{value:this.props.routeContext},r.createElement(G.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(H);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Z.Provider,{value:t},i)}function se(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let s=e,a=null==(i=n)?void 0:i.errors;if(null!=a){let e=s.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||l(!1),s=s.slice(0,Math.min(s.length,e+1))}return s.reduceRight(((e,i,o)=>{let l=i.route.id?null==a?void 0:a[i.route.id]:null,c=null;n&&(c=i.route.errorElement||re);let u=t.concat(s.slice(0,o+1)),h=()=>{let t;return t=l?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(oe,{match:i,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(ie,{location:n.location,revalidation:n.revalidation,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):h()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=r.useContext(H);return t||l(!1),t}function ue(e){let t=r.useContext(q);return t||l(!1),t}function he(e){let t=function(e){let t=r.useContext(Z);return t||l(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}i.startTransition;function de(e){let{to:t,replace:n,state:i,relative:o}=e;Q()||l(!1);let{matches:s}=r.useContext(Z),{pathname:a}=Y(),c=J(),u=N(t,R(s).map((e=>e.pathnameBase)),a,"path"===o),h=JSON.stringify(u);return r.useEffect((()=>c(JSON.parse(h),{replace:n,state:i,relative:o})),[c,h,o,n,i]),null}function fe(e){return function(e){let t=r.useContext(Z).outlet;return t?r.createElement($.Provider,{value:e},t):t}(e.context)}function pe(e){l(!1)}function me(e){let{basename:n="/",children:i=null,location:o,navigationType:s=t.Pop,navigator:a,static:c=!1}=e;Q()&&l(!1);let u=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:u,navigator:a,static:c})),[u,a,c]);"string"===typeof o&&(o=f(o));let{pathname:d="/",search:p="",hash:m="",state:g=null,key:v="default"}=o,y=r.useMemo((()=>{let e=O(d,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:v},navigationType:s}}),[u,d,p,m,g,v,s]);return null==y?null:r.createElement(W.Provider,{value:h},r.createElement(K.Provider,{children:i,value:y}))}function ge(e){let{children:t,location:n}=e;return te(ve(t),n)}new Promise((()=>{}));r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,o));e.type!==pe&&l(!1),e.props.index&&e.props.children&&l(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,o)),n.push(s)})),n}const ye=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ye(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new be;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function(e){return function(e){const t=ye(e);return _e.encodeByteArray(t,!0)}(e).replace(/\./g,"")},xe=function(e){try{return _e.decodeString(e,!0)}catch(Yv){console.error("base64Decode failed: ",Yv)}return null};const Ee=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Se=()=>{try{return Ee()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/acclpl_firebase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCUxvttTrBFtrVnHANg8V_CxXlKN9GCYM8",REACT_APP_FIREBASE_APP_ID:"1:15341024536:web:2a55c674cecbfb63595a6d",REACT_APP_FIREBASE_AUTH_DOMAIN:"acclpl.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-4N2BNBVLS3",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"15341024536",REACT_APP_FIREBASE_PROJECT_ID:"acclpl",REACT_APP_FIREBASE_STORAGE_BUCKET:"acclpl.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Yv){return}const t=e&&xe(e[1]);return t&&JSON.parse(t)})()}catch(Yv){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Yv))}},Te=e=>{var t,n;return null===(n=null===(t=Se())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ce=e=>{const t=Te(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ae=()=>{var e;return null===(e=Se())||void 0===e?void 0:e.config},ke=e=>{var t;return null===(t=Se())||void 0===t?void 0:t["_".concat(e)]};class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Oe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(o)),""].join(".")}function Ie(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Re(){var e;const t=null===(e=Se())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Yv){return!1}}class Ne extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(De,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ne(n,o,t)}}const De=/\{\$([^}]+)}/g;function Me(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(je(n)&&je(o)){if(!Me(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function je(e){return null!==e&&"object"===typeof e}function Fe(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ze(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ue(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Be{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ve),void 0===r.error&&(r.error=Ve),void 0===r.complete&&(r.complete=Ve);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Yv){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Yv){"undefined"!==typeof console&&console.error&&console.error(Yv)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ve(){}function He(e){return e&&e._delegate?e._delegate:e}class qe{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const We="[DEFAULT]";class Ke{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Pe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Yv){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Yv){if(r)return null;throw Yv}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:We})}catch(Yv){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Yv){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===We?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;return this.component?this.component.multipleInstances?e:We:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ze{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ke(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ge=[];var Qe;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Qe||(Qe={}));const Ye={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},Xe=Qe.INFO,Je={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},$e=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Je[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class et{constructor(e){this.name=e,this._logLevel=Xe,this._logHandler=$e,this._userLogHandler=null,Ge.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ye[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...t),this._logHandler(this,Qe.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...t),this._logHandler(this,Qe.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...t),this._logHandler(this,Qe.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...t),this._logHandler(this,Qe.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...t),this._logHandler(this,Qe.ERROR,...t)}}const tt=(e,t)=>t.some((t=>e instanceof t));let nt,rt;const it=new WeakMap,ot=new WeakMap,st=new WeakMap,at=new WeakMap,lt=new WeakMap;let ct={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ot.get(e);if("objectStoreNames"===t)return e.objectStoreNames||st.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ut(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(rt||(rt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ft(this),n),dt(it.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dt(e.apply(ft(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(ft(this),t,...r);return st.set(o,t.sort?t.sort():[t]),dt(o)}}function ht(e){return"function"===typeof e?ut(e):(e instanceof IDBTransaction&&function(e){if(ot.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));ot.set(e,t)}(e),tt(e,nt||(nt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ct):e)}function dt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(dt(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&it.set(t,e)})).catch((()=>{})),lt.set(t,e),t}(e);if(at.has(e))return at.get(e);const t=ht(e);return t!==e&&(at.set(e,t),lt.set(t,e)),t}const ft=e=>lt.get(e);const pt=["get","getKey","getAll","getAllKeys","count"],mt=["put","add","delete","clear"],gt=new Map;function vt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(gt.get(t))return gt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=mt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!pt.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return gt.set(t,o),o}ct=(e=>({...e,get:(t,n,r)=>vt(t,n)||e.get(t,n,r),has:(t,n)=>!!vt(t,n)||e.has(t,n)}))(ct);class yt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const _t="@firebase/app",bt="0.9.23",wt=new et("@firebase/app"),xt="[DEFAULT]",Et={[_t]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,Tt=new Map;function Ct(e,t){try{e.container.addComponent(t)}catch(Yv){wt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Yv)}}function At(e){const t=e.name;if(Tt.has(t))return wt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tt.set(t,e);for(const n of St.values())Ct(n,e);return!0}function kt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Pt=new Le("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ot{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new qe("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}}const It="10.6.0";function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:xt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Pt.create("bad-app-name",{appName:String(i)});if(n||(n=Ae()),!n)throw Pt.create("no-options");const o=St.get(i);if(o){if(Me(n,o.options)&&Me(r,o.config))return o;throw Pt.create("duplicate-app",{appName:i})}const s=new Ze(i);for(const l of Tt.values())s.addComponent(l);const a=new Ot(n,r,s);return St.set(i,a),a}function Nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;const t=St.get(e);if(!t&&e===xt&&Ae())return Rt();if(!t)throw Pt.create("no-app",{appName:e});return t}function Lt(e,t,n){var r;let i=null!==(r=Et[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void wt.warn(e.join(" "))}At(new qe("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Dt="firebase-heartbeat-database",Mt=1,jt="firebase-heartbeat-store";let Ft=null;function zt(){return Ft||(Ft=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=dt(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(dt(s.result),e.oldVersion,e.newVersion,dt(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Dt,Mt,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(jt)}}).catch((e=>{throw Pt.create("idb-open",{originalErrorMessage:e.message})}))),Ft}async function Ut(e,t){try{const n=(await zt()).transaction(jt,"readwrite"),r=n.objectStore(jt);await r.put(t,Bt(e)),await n.done}catch(Yv){if(Yv instanceof Ne)wt.warn(Yv.message);else{const t=Pt.create("idb-set",{originalErrorMessage:null===Yv||void 0===Yv?void 0:Yv.message});wt.warn(t.message)}}}function Bt(e){return"".concat(e.name,"!").concat(e.options.appId)}class Vt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e;const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Ht();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ht(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Wt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=we(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ht(){return(new Date).toISOString().substring(0,10)}class qt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(Yv){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await zt();return await t.transaction(jt).objectStore(jt).get(Bt(e))}catch(Yv){if(Yv instanceof Ne)wt.warn(Yv.message);else{const t=Pt.create("idb-get",{originalErrorMessage:null===Yv||void 0===Yv?void 0:Yv.message});wt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wt(e){return we(JSON.stringify({version:2,heartbeats:e})).length}var Kt;Kt="",At(new qe("platform-logger",(e=>new yt(e)),"PRIVATE")),At(new qe("heartbeat",(e=>new Vt(e)),"PRIVATE")),Lt(_t,bt,Kt),Lt(_t,bt,"esm2017"),Lt("fire-js","");function Zt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Gt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qt=Gt,Yt=new Le("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xt=new et("@firebase/auth");function Jt(e){if(Xt.logLevel<=Qe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xt.error("Auth (".concat(It,"): ").concat(e),...n)}}function $t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw rn(e,...n)}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rn(e,...n)}function tn(e,t,n){const r=Object.assign(Object.assign({},Qt()),{[t]:n});return new Le("auth","Firebase",r).create(t,{appName:e.name})}function nn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$t(e,"argument-error"),tn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function rn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Yt.create(e,...n)}function on(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw rn(t,...r)}}function sn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Jt(t),new Error(t)}function an(e,t){e||sn(t)}function ln(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function cn(){return"http:"===un()||"https:"===un()}function un(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function hn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(cn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class dn{constructor(e,t){this.shortDelay=e,this.longDelay=t,an(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return hn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fn(e,t){an(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class pn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gn=new dn(3e4,6e4);function vn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function yn(e,t,n,r){return _n(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=Fe(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),pn.fetch()(wn(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function _n(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},mn),t);try{const t=new En(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Sn(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Sn(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Sn(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Sn(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw tn(e,a,s);$t(e,a)}}catch(Yv){if(Yv instanceof Ne)throw Yv;$t(e,"network-request-failed",{message:String(Yv)})}}async function bn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await yn(e,t,n,r,i);return"mfaPendingCredential"in o&&$t(e,"multi-factor-auth-required",{_serverResponse:o}),o}function wn(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function xn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class En{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(en(this.auth,"network-request-failed"))),gn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=en(e,t,r);return i.customData._tokenResponse=n,i}function Tn(e){return void 0!==e&&void 0!==e.enterprise}class Cn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function An(e,t){return yn(e,"GET","/v2/recaptchaConfig",vn(e,t))}function kn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Yv){}}function Pn(e){return 1e3*Number(e)}function On(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Jt("JWT malformed, contained fewer than 3 sections"),null;try{const e=xe(n);return e?JSON.parse(e):(Jt("Failed to decode base64 JWT payload"),null)}catch(Yv){return Jt("Caught error parsing JWT payload as JSON",null===Yv||void 0===Yv?void 0:Yv.toString()),null}}async function In(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Yv){throw Yv instanceof Ne&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Yv)&&e.auth.currentUser===e&&await e.auth.signOut(),Yv}}class Rn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Yv){return void((null===Yv||void 0===Yv?void 0:Yv.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Nn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kn(this.lastLoginAt),this.creationTime=kn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ln(e){var t;const n=e.auth,r=await e.getIdToken(),i=await In(e,async function(e,t){return yn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));on(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=Zt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Nn(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class Dn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){on(e.idToken,"internal-error"),on("undefined"!==typeof e.idToken,"internal-error"),on("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=On(e);return on(t,"internal-error"),on("undefined"!==typeof t.exp,"internal-error"),on("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return on(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await _n(e,{},(async()=>{const n=Fe({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=wn(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",pn.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Dn;return n&&(on("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(on("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(on("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dn,this.toJSON())}_performRefresh(){return sn("not implemented")}}function Mn(e,t){on("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class jn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Zt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await In(this,this.stsTokenManager.getToken(this.auth,e));return on(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=He(e),r=await n.getIdToken(t),i=On(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:kn(Pn(i.auth_time)),issuedAtTime:kn(Pn(i.iat)),expirationTime:kn(Pn(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=He(e);await Ln(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(on(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ln(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await In(this,async function(e,t){return yn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=t;on(y&&x,e,"internal-error");const E=Dn.fromJSON(this.name,x);on("string"===typeof y,e,"internal-error"),Mn(u,e.name),Mn(h,e.name),on("boolean"===typeof _,e,"internal-error"),on("boolean"===typeof b,e,"internal-error"),Mn(d,e.name),Mn(f,e.name),Mn(p,e.name),Mn(m,e.name),Mn(g,e.name),Mn(v,e.name);const S=new jn({uid:y,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(S.providerData=w.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Dn;r.updateFromServerResponse(t);const i=new jn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ln(i),i}}const Fn=new Map;function zn(e){an(e instanceof Function,"Expected a class definition");let t=Fn.get(e);return t?(an(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fn.set(e,t),t)}class Un{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Un.type="NONE";const Bn=Un;function Vn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Hn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Vn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Vn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Hn(zn(Bn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||zn(Bn);const o=Vn(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=jn._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new Hn(i,e,n)):new Hn(i,e,n)}}function qn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Gn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Yn(t))return"Blackberry";if(Xn(t))return"Webos";if(Kn(t))return"Safari";if((t.includes("chrome/")||Zn(t))&&!t.includes("edge/"))return"Chrome";if(Qn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/firefox\//i.test(e)}function Kn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/crios\//i.test(e)}function Gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iemobile/i.test(e)}function Qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/android/i.test(e)}function Yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/blackberry/i.test(e)}function Xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/webos/i.test(e)}function Jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $n(){return function(){const e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return Jn(e)||Qn(e)||Xn(e)||Yn(e)||/windows phone/i.test(e)||Gn(e)}function tr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qn(Ie());break;case"Worker":t="".concat(qn(Ie()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(It,"/").concat(r)}class nr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Yv){r(Yv)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Yv){t.reverse();for(const n of t)try{n()}catch(gy){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Yv||void 0===Yv?void 0:Yv.message})}}}class rr{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ir{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sr(this),this.idTokenSubscription=new sr(this),this.beforeStateQueue=new nr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zn(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Hn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Yv){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Yv){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Yv)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Yv){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ln(e)}catch(Yv){if((null===Yv||void 0===Yv?void 0:Yv.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?He(e):null;return t&&on(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&on(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(zn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return yn(e,"GET","/v2/passwordPolicy",vn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new rr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Le("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return yn(e,"POST","/v2/accounts:revokeToken",vn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zn(e)||this._popupRedirectResolver;on(t,this,"argument-error"),this.redirectPersistenceManager=await Hn.create(this,[zn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xt.logLevel<=Qe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xt.warn("Auth (".concat(It,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function or(e){return He(e)}class sr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Be(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ar(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=en("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function lr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class cr{constructor(e){this.type="recaptcha-enterprise",this.auth=or(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Tn(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{An(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Cn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Tn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));ar("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ur(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new cr(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function hr(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ur(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ur(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function dr(e,t,n){const r=or(e);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=fr(t),{host:s,port:a}=function(e){const t=fr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:pr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:pr(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sn("not implemented")}_getIdTokenResponse(e){return sn("not implemented")}_linkToIdToken(e,t){return sn("not implemented")}_getReauthenticationResolver(e){return sn("not implemented")}}async function gr(e,t){return yn(e,"POST","/v1/accounts:signUp",t)}async function vr(e,t){return bn(e,"POST","/v1/accounts:signInWithPassword",vn(e,t))}class yr extends mr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new yr(e,t,"password")}static _fromEmailAndCode(e,t){return new yr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return hr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vr);case"emailLink":return async function(e,t){return bn(e,"POST","/v1/accounts:signInWithEmailLink",vn(e,t))}(e,{email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return hr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gr);case"emailLink":return async function(e,t){return bn(e,"POST","/v1/accounts:signInWithEmailLink",vn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _r(e,t){return bn(e,"POST","/v1/accounts:signInWithIdp",vn(e,t))}class br extends mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$t("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Zt(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new br(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return _r(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_r(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_r(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fe(t)}return e}}const wr={USER_NOT_FOUND:"user-not-found"};class xr extends mr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new xr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new xr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return bn(e,"POST","/v1/accounts:signInWithPhoneNumber",vn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await bn(e,"POST","/v1/accounts:signInWithPhoneNumber",vn(e,t));if(n.temporaryProof)throw Sn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return bn(e,"POST","/v1/accounts:signInWithPhoneNumber",vn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),wr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new xr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Er{constructor(e){var t,n,r,i,o,s;const a=ze(Ue(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);on(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=ze(Ue(e)).link,n=t?ze(Ue(t)).deep_link_id:null,r=ze(Ue(e)).deep_link_id;return(r?ze(Ue(r)).link:null)||r||n||t||e}(e);try{return new Er(t)}catch(n){return null}}}class Sr{constructor(){this.providerId=Sr.PROVIDER_ID}static credential(e,t){return yr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Er.parseLink(t);return on(n,"argument-error"),yr._fromEmailAndCode(e,n.code,n.tenantId)}}Sr.PROVIDER_ID="password",Sr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Sr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Cr extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ar extends Cr{constructor(){super("facebook.com")}static credential(e){return br._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ar.credential(t.oauthAccessToken)}catch(n){return null}}}Ar.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ar.PROVIDER_ID="facebook.com";class kr extends Cr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return br._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return kr.credential(n,r)}catch(i){return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com",kr.PROVIDER_ID="google.com";class Pr extends Cr{constructor(){super("github.com")}static credential(e){return br._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pr.credential(t.oauthAccessToken)}catch(n){return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com",Pr.PROVIDER_ID="github.com";class Or extends Cr{constructor(){super("twitter.com")}static credential(e,t){return br._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Or.credential(n,r)}catch(i){return null}}}async function Ir(e,t){return bn(e,"POST","/v1/accounts:signUp",vn(e,t))}Or.TWITTER_SIGN_IN_METHOD="twitter.com",Or.PROVIDER_ID="twitter.com";class Rr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await jn._fromIdTokenResponse(e,n,r),o=Nr(n);return new Rr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Nr(n);return new Rr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Nr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Lr extends Ne{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Lr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Lr(e,t,n,r)}}function Dr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Lr._fromErrorAndOperation(e,n,t,r);throw n}))}async function Mr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await In(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Rr._forOperation(e,"link",r)}async function jr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await In(e,Dr(r,i,t,e),n);on(o.idToken,r,"internal-error");const s=On(o.idToken);on(s,r,"internal-error");const{sub:a}=s;return on(e.uid===a,r,"user-mismatch"),Rr._forOperation(e,i,o)}catch(Yv){throw(null===Yv||void 0===Yv?void 0:Yv.code)==="auth/".concat("user-not-found")&&$t(r,"user-mismatch"),Yv}}async function Fr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Dr(e,r,t),o=await Rr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function zr(e,t){return Fr(or(e),t)}async function Ur(e,t){return jr(He(e),t)}async function Br(e){const t=or(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Vr(e,t,n){const r=or(e),i=hr(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ir),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Br(e),t})),s=await Rr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}async function Hr(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await In(e,async function(e,t){return yn(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}function qr(e){return He(e).signOut()}new WeakMap;const Wr="__sak";class Kr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wr,"1"),this.storage.removeItem(Wr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Zr extends Kr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ie();return Kn(e)||Jn(e)}()&&function(){try{return!(!window||window===window.top)}catch(Yv){return!1}}(),this.fallbackToPolling=er(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);$n()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zr.type="LOCAL";const Gr=Zr;class Qr extends Kr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qr.type="SESSION";const Yr=Qr;class Xr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Xr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Xr.receivers=[];class $r{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=Jr("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function ei(){return window}function ti(){return"undefined"!==typeof ei().WorkerGlobalScope&&"function"===typeof ei().importScripts}const ni="firebaseLocalStorageDb",ri="firebaseLocalStorage",ii="fbase_key";class oi{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function si(e,t){return e.transaction([ri],t?"readwrite":"readonly").objectStore(ri)}function ai(){const e=indexedDB.open(ni,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ri,{keyPath:ii})}catch(Yv){n(Yv)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ri)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ni);return new oi(e).toPromise()}(),t(await ai()))}))}))}async function li(e,t,n){const r=si(e,!0).put({[ii]:t,value:n});return new oi(r).toPromise()}function ci(e,t){const n=si(e,!0).delete(t);return new oi(n).toPromise()}class ui{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ai()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Yv){if(t++>3)throw Yv;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ti()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xr._getInstance(ti()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new $r(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ai();return await li(e,Wr,"1"),await ci(e,Wr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>li(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=si(e,!1).get(t),r=await new oi(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ci(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=si(e,!1).getAll();return new oi(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ui.type="LOCAL";const hi=ui;lr("rcb"),new dn(3e4,6e4);const di="recaptcha";async function fi(e,t,n){var r;const i=await n.verify();try{let o;if(on("string"===typeof i,e,"argument-error"),on(n.type===di,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){on("enroll"===t.type,e,"internal-error");const n=await function(e,t){return yn(e,"POST","/v2/accounts/mfaEnrollment:start",vn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{on("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;on(n,e,"missing-multi-factor-info");const s=await function(e,t){return yn(e,"POST","/v2/accounts/mfaSignIn:start",vn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return yn(e,"POST","/v1/accounts:sendVerificationCode",vn(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class pi{constructor(e){this.providerId=pi.PROVIDER_ID,this.auth=or(e)}verifyPhoneNumber(e,t){return fi(this.auth,e,He(t))}static credential(e,t){return xr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return pi.credentialFromTaggedObject(t)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?xr._fromTokenResponse(n,r):null}}function mi(e,t){return t?zn(t):(on(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}pi.PROVIDER_ID="phone",pi.PHONE_SIGN_IN_METHOD="phone";class gi extends mr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _r(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _r(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _r(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vi(e){return Fr(e.auth,new gi(e),e.bypassAuthState)}function yi(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),jr(n,new gi(e),e.bypassAuthState)}async function _i(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),Mr(n,new gi(e),e.bypassAuthState)}class bi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Yv){this.reject(Yv)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(Yv){this.reject(Yv)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vi;case"linkViaPopup":case"linkViaRedirect":return _i;case"reauthViaPopup":case"reauthViaRedirect":return yi;default:$t(this.auth,"internal-error")}}resolve(e){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){an(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wi=new dn(2e3,1e4);async function xi(e,t,n){const r=or(e);nn(e,t,Tr);const i=mi(r,n);return new Ei(r,"signInViaPopup",t,i).executeNotNull()}class Ei extends bi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ei.currentPopupAction&&Ei.currentPopupAction.cancel(),Ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return on(e,this.auth,"internal-error"),e}async onExecution(){an(1===this.filter.length,"Popup operations only handle one event");const e=Jr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(en(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,wi.get())};e()}}Ei.currentPopupAction=null;const Si="pendingRedirect",Ti=new Map;class Ci extends bi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ti.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Pi(t),r=ki(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Yv){e=()=>Promise.reject(Yv)}Ti.set(this.auth._key(),e)}return this.bypassAuthState||Ti.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ai(e,t){Ti.set(e._key(),t)}function ki(e){return zn(e._redirectPersistence)}function Pi(e){return Vn(Si,e.config.apiKey,e.name)}async function Oi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=or(e),i=mi(r,t),o=new Ci(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Ii{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ni(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ni(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(en(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ri(e))}saveEventToCache(e){this.cachedEventUids.add(Ri(e)),this.lastProcessedEventTime=Date.now()}}function Ri(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ni(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Li=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Di=/^https?/;async function Mi(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return yn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ji(r))return}catch(n){}$t(e,"unauthorized-domain")}function ji(e){const t=ln(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Di.test(n))return!1;if(Li.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Fi=new dn(3e4,6e4);function zi(){const e=ei().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Ui=null;function Bi(e){return Ui=Ui||function(e){return new Promise(((t,n)=>{var r,i,o;function s(){zi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{zi(),n(en(e,"network-request-failed"))},timeout:Fi.get()})}if(null===(i=null===(r=ei().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=ei().gapi)||void 0===o?void 0:o.load)){const t=lr("iframefcb");return ei()[t]=()=>{gapi.load?s():n(en(e,"network-request-failed"))},ar("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw Ui=null,e}))}(e),Ui}const Vi=new dn(5e3,15e3),Hi="__/auth/iframe",qi="emulator/auth/iframe",Wi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ki=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zi(e){const t=e.config;on(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fn(t,qi):"https://".concat(e.config.authDomain,"/").concat(Hi),r={apiKey:t.apiKey,appName:e.name,v:It},i=Ki.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Fe(r).slice(1))}const Gi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Yv){}}}function Yi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Gi),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Ie().toLowerCase();n&&(a=Zn(c)?"_blank":n),Wn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Jn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Qi(null);const h=window.open(t||"",a,u);on(h,e,"popup-blocked");try{h.focus()}catch(Yv){}return new Qi(h)}const Xi="__/auth/handler",Ji="emulator/auth/handler",$i=encodeURIComponent("fac");async function eo(e,t,n,r,i,o){on(e.config.authDomain,e,"auth-domain-config-required"),on(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:It,eventId:i};if(t instanceof Tr){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Cr){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat($i,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Xi);return fn(t,Ji)}(e),"?").concat(Fe(a).slice(1)).concat(c)}const to="webStorageSupport";const no=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yr,this._completeRedirectFn=Oi,this._overrideRedirectResult=Ai}async _openPopup(e,t,n,r){var i;an(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Yi(e,await eo(e,t,n,ln(),r),Jr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ei().location.href=e}(await eo(e,t,n,ln(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(an(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Bi(e),n=ei().gapi;return on(n,e,"internal-error"),t.open({where:document.body,url:Zi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wi,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=en(e,"network-request-failed"),o=ei().setTimeout((()=>{r(i)}),Vi.get());function s(){ei().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}(e),n=new Ii(e);return t.register("authEvent",(t=>{on(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(to,{type:to},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[to];void 0!==i&&t(!!i),$t(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Mi(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return er()||Kn()||Jn()}};var ro="@firebase/auth",io="1.4.0";class oo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const so=ke("authIdTokenMaxAge")||300;let ao=null;var lo;lo="Browser",At(new qe("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;on(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:lo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tr(lo)},c=new ir(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),At(new qe("auth-internal",(e=>(e=>new oo(e))(or(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Lt(ro,io,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(lo)),Lt(ro,io,"esm2017");Lt("firebase","10.6.0","app");var co,uo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ho={},fo=fo||{},po=uo||self;function mo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function go(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var vo="closure_uid_"+(1e9*Math.random()>>>0),yo=0;function _o(e,t,n){return e.call.apply(e.bind,arguments)}function bo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wo(e,t,n){return(wo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_o:bo).apply(null,arguments)}function xo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Eo(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function So(){this.s=this.s,this.o=this.o}So.prototype.s=!1,So.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,vo)&&e[vo]||(e[vo]=++yo)}(this)},So.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const To=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Co(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ao(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(mo(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function ko(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ko.prototype.h=function(){this.defaultPrevented=!0};var Po=function(){if(!po.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{po.addEventListener("test",(()=>{}),t),po.removeEventListener("test",(()=>{}),t)}catch(sy){}return e}();function Oo(e){return/^[\s\xa0]*$/.test(e)}function Io(){var e=po.navigator;return e&&(e=e.userAgent)?e:""}function Ro(e){return-1!=Io().indexOf(e)}function No(e){return No[" "](e),e}No[" "]=function(){};var Lo,Do,Mo=Ro("Opera"),jo=Ro("Trident")||Ro("MSIE"),Fo=Ro("Edge"),zo=Fo||jo,Uo=Ro("Gecko")&&!(-1!=Io().toLowerCase().indexOf("webkit")&&!Ro("Edge"))&&!(Ro("Trident")||Ro("MSIE"))&&!Ro("Edge"),Bo=-1!=Io().toLowerCase().indexOf("webkit")&&!Ro("Edge");function Vo(){var e=po.document;return e?e.documentMode:void 0}e:{var Ho="",qo=function(){var e=Io();return Uo?/rv:([^\);]+)(\)|;)/.exec(e):Fo?/Edge\/([\d\.]+)/.exec(e):jo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Bo?/WebKit\/(\S+)/.exec(e):Mo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qo&&(Ho=qo?qo[1]:""),jo){var Wo=Vo();if(null!=Wo&&Wo>parseFloat(Ho)){Lo=String(Wo);break e}}Lo=Ho}if(po.document&&jo){var Ko=Vo();Do=Ko||(parseInt(Lo,10)||void 0)}else Do=void 0;var Zo=Do;function Go(e,t){if(ko.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Uo){e:{try{No(t.nodeName);var i=!0;break e}catch(cy){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Qo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Go.$.h.call(this)}}Eo(Go,ko);var Qo={2:"touch",3:"pen",4:"mouse"};Go.prototype.h=function(){Go.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yo="closure_listenable_"+(1e6*Math.random()|0),Xo=0;function Jo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Xo,this.fa=this.ia=!1}function $o(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function es(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ts(e){const t={};for(const n in e)t[n]=e[n];return t}const ns="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rs(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<ns.length;t++)n=ns[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function is(e){this.src=e,this.g={},this.h=0}function os(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=To(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&($o(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ss(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}is.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=ss(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Jo(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var as="closure_lm_"+(1e6*Math.random()|0),ls={};function cs(e,t,n,r,i){if(r&&r.once)return hs(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)cs(e,t[o],n,r,i);return null}return n=ys(n),e&&e[Yo]?e.O(t,n,go(r)?!!r.capture:!!r,i):us(e,t,n,!1,r,i)}function us(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=go(i)?!!i.capture:!!i,a=gs(e);if(a||(e[as]=a=new is(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ms;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Po||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ps(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function hs(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)hs(e,t[o],n,r,i);return null}return n=ys(n),e&&e[Yo]?e.P(t,n,go(r)?!!r.capture:!!r,i):us(e,t,n,!0,r,i)}function ds(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ds(e,t[o],n,r,i);else r=go(r)?!!r.capture:!!r,n=ys(n),e&&e[Yo]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ss(o=e.g[t],n,r,i))&&($o(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=gs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ss(t,n,r,i)),(n=-1<e?t[e]:null)&&fs(n))}function fs(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Yo])os(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ps(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=gs(t))?(os(n,e),0==n.h&&(n.src=null,t[as]=null)):$o(e)}}}function ps(e){return e in ls?ls[e]:ls[e]="on"+e}function ms(e,t){if(e.fa)e=!0;else{t=new Go(t,this);var n=e.listener,r=e.la||e.src;e.ia&&fs(e),e=n.call(r,t)}return e}function gs(e){return(e=e[as])instanceof is?e:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ys(e){return"function"===typeof e?e:(e[vs]||(e[vs]=function(t){return e.handleEvent(t)}),e[vs])}function _s(){So.call(this),this.i=new is(this),this.S=this,this.J=null}function bs(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ko(t,e);else if(t instanceof ko)t.target=t.target||e;else{var i=t;rs(t=new ko(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ws(s,r,!0,t)&&i}if(i=ws(s=t.g=e,r,!0,t)&&i,i=ws(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ws(s=t.g=n[o],r,!1,t)&&i}function ws(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&os(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Eo(_s,So),_s.prototype[Yo]=!0,_s.prototype.removeEventListener=function(e,t,n,r){ds(this,e,t,n,r)},_s.prototype.N=function(){if(_s.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$o(n[r]);delete t.g[e],t.h--}}this.J=null},_s.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},_s.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var xs=po.JSON.stringify;function Es(){var e=Os;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ss=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ts),(e=>e.reset()));class Ts{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Cs(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function As(e){po.setTimeout((()=>{throw e}),0)}let ks,Ps=!1,Os=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ss.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Is=()=>{const e=po.Promise.resolve(void 0);ks=()=>{e.then(Rs)}};var Rs=()=>{for(var e;e=Es();){try{e.h.call(e.g)}catch(sy){As(sy)}var t=Ss;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ps=!1};function Ns(e,t){_s.call(this),this.h=e||1,this.g=t||po,this.j=wo(this.qb,this),this.l=Date.now()}function Ls(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ds(e,t,n){if("function"===typeof e)n&&(e=wo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wo(e.handleEvent,e)}return 2147483647<Number(t)?-1:po.setTimeout(e,t||0)}function Ms(e){e.g=Ds((()=>{e.g=null,e.i&&(e.i=!1,Ms(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Eo(Ns,_s),(co=Ns.prototype).ga=!1,co.T=null,co.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bs(this,"tick"),this.ga&&(Ls(this),this.start()))}},co.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},co.N=function(){Ns.$.N.call(this),Ls(this),delete this.g};class js extends So{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(po.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(e){So.call(this),this.h=e,this.g={}}Eo(Fs,So);var zs=[];function Us(e,t,n,r){Array.isArray(n)||(n&&(zs[0]=n.toString()),n=zs);for(var i=0;i<n.length;i++){var o=cs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Bs(e){es(e.g,(function(e,t){this.g.hasOwnProperty(t)&&fs(e)}),e),e.g={}}function Vs(){this.g=!0}function Hs(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return xs(n)}catch(Jv){return t}}(e,n)+(r?" "+r:"")}))}Fs.prototype.N=function(){Fs.$.N.call(this),Bs(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vs.prototype.Ea=function(){this.g=!1},Vs.prototype.info=function(){};var qs={},Ws=null;function Ks(){return Ws=Ws||new _s}function Zs(e){ko.call(this,qs.Ta,e)}function Gs(e){const t=Ks();bs(t,new Zs(t))}function Qs(e,t){ko.call(this,qs.STAT_EVENT,e),this.stat=t}function Ys(e){const t=Ks();bs(t,new Qs(t,e))}function Xs(e,t){ko.call(this,qs.Ua,e),this.size=t}function Js(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return po.setTimeout((function(){e()}),t)}qs.Ta="serverreachability",Eo(Zs,ko),qs.STAT_EVENT="statevent",Eo(Qs,ko),qs.Ua="timingevent",Eo(Xs,ko);var $s={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ea={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ta(){}function na(e){return e.h||(e.h=e.i())}function ra(){}ta.prototype.h=null;var ia,oa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sa(){ko.call(this,"d")}function aa(){ko.call(this,"c")}function la(){}function ca(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Fs(this),this.P=ha,e=zo?125:void 0,this.V=new Ns(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ua}function ua(){this.i=null,this.g="",this.h=!1}Eo(sa,ko),Eo(aa,ko),Eo(la,ta),la.prototype.g=function(){return new XMLHttpRequest},la.prototype.i=function(){return{}},ia=new la;var ha=45e3,da={},fa={};function pa(e,t,n){e.L=1,e.v=Na(ka(t)),e.s=n,e.S=!0,ma(e,null)}function ma(e,t){e.G=Date.now(),_a(e),e.A=ka(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ka(n.i,"t",r),e.C=0,n=e.l.J,e.h=new ua,e.g=Kl(e.l,n?t:null,!e.s),0<e.O&&(e.M=new js(wo(e.Pa,e,e.g),e.O)),Us(e.U,e.g,"readystatechange",e.nb),t=e.I?ts(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Gs(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function ga(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function va(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=ya(e,n),r==fa){4==t&&(e.o=4,Ys(14),i=!1),Hs(e.j,e.m,null,"[Incomplete Response]");break}if(r==da){e.o=4,Ys(15),Hs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Hs(e.j,e.m,r,null),Sa(e,r)}ga(e)&&r!=fa&&r!=da&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ys(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fl(t),t.M=!0,Ys(11))):(Hs(e.j,e.m,n,"[Invalid Chunked Response]"),Ea(e),xa(e))}function ya(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?fa:(n=Number(t.substring(n,r)),isNaN(n)?da:(r+=1)+n>t.length?fa:(t=t.slice(r,r+n),e.C=r+n,t))}function _a(e){e.Y=Date.now()+e.P,ba(e,e.P)}function ba(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Js(wo(e.lb,e),t)}function wa(e){e.B&&(po.clearTimeout(e.B),e.B=null)}function xa(e){0==e.l.H||e.J||Bl(e.l,e)}function Ea(e){wa(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ls(e.V),Bs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Sa(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||$a(n.i,e)))if(!e.K&&$a(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(dy){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ul(n),Ol(n)}jl(n),Ys(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Js(wo(n.ib,n),6e3));if(1>=Ja(n.i)&&n.oa){try{n.oa()}catch(dy){}n.oa=void 0}}else Hl(n,11)}else if((e.K||n.g==e)&&Ul(n),!Oo(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(el(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ra(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Wl(r,r.J?r.pa:null,r.Y),s.K){tl(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.B&&(wa(a),_a(a)),r.g=s}else Ml(r);0<n.j.length&&Rl(n)}else"stop"!=c[0]&&"close"!=c[0]||Hl(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Hl(n,7):Pl(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Gs()}catch(dy){}}function Ta(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(mo(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(mo(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(mo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(co=ca.prototype).setTimeout=function(e){this.P=e},co.nb=function(e){e=e.target;const t=this.M;t&&3==El(e)?t.l():this.Pa(e)},co.Pa=function(e){try{if(e==this.g)e:{const u=El(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||zo||this.g&&(this.h.h||this.g.ja()||Sl(this.g)))){this.J||4!=u||7==t||Gs(),wa(this);var n=this.g.da();this.ca=n;t:if(ga(this)){var r=Sl(this.g);e="";var i=r.length,o=4==El(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ea(this),xa(this);var s="";break t}this.h.i=new po.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oo(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ys(12),Ea(this),xa(this);break e}Hs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sa(this,n)}this.S?(va(this,u,s),zo&&this.i&&3==u&&(Us(this.U,this.V,"tick",this.mb),this.V.start())):(Hs(this.j,this.m,s,null),Sa(this,s)),4==u&&Ea(this),this.i&&!this.J&&(4==u?Bl(this.l,this):(this.i=!1,_a(this)))}else(function(e){const t={};e=(e.g&&2<=El(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Oo(e[r]))continue;var n=Cs(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.o=3,Ys(12)):(this.o=0,Ys(13)),Ea(this),xa(this)}}}catch(iy){}},co.mb=function(){if(this.g){var e=El(this.g),t=this.g.ja();this.C<t.length&&(wa(this),va(this,e,t),this.i&&4!=e&&_a(this))}},co.cancel=function(){this.J=!0,Ea(this)},co.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Gs(),Ys(17)),Ea(this),this.o=2,xa(this)):ba(this,this.Y-e)};var Ca=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aa(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Aa){this.h=e.h,Pa(this,e.j),this.s=e.s,this.g=e.g,Oa(this,e.m),this.l=e.l;var t=e.i,n=new Va;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ia(this,n),this.o=e.o}else e&&(t=String(e).match(Ca))?(this.h=!1,Pa(this,t[1]||"",!0),this.s=La(t[2]||""),this.g=La(t[3]||"",!0),Oa(this,t[4]),this.l=La(t[5]||"",!0),Ia(this,t[6]||"",!0),this.o=La(t[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}function ka(e){return new Aa(e)}function Pa(e,t,n){e.j=n?La(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Oa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ia(e,t,n){t instanceof Va?(e.i=t,function(e,t){t&&!e.j&&(Ha(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(qa(this,t),Ka(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Da(t,Ua)),e.i=new Va(t,e.h))}function Ra(e,t,n){e.i.set(t,n)}function Na(e){return Ra(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function La(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Da(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ma),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ma(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Aa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Da(t,ja,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Da(t,ja,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Da(n,"/"==n.charAt(0)?za:Fa,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Da(n,Ba)),e.join("")};var ja=/[#\/\?@]/g,Fa=/[#\?:]/g,za=/[#\?]/g,Ua=/[#\?@]/g,Ba=/#/g;function Va(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ha(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function qa(e,t){Ha(e),t=Za(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Wa(e,t){return Ha(e),t=Za(e,t),e.g.has(t)}function Ka(e,t,n){qa(e,t),0<n.length&&(e.i=null,e.g.set(Za(e,t),Co(n)),e.h+=n.length)}function Za(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(co=Va.prototype).add=function(e,t){Ha(this),this.i=null,e=Za(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},co.forEach=function(e,t){Ha(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},co.ta=function(){Ha(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},co.Z=function(e){Ha(this);let t=[];if("string"===typeof e)Wa(this,e)&&(t=t.concat(this.g.get(Za(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},co.set=function(e,t){return Ha(this),this.i=null,Wa(this,e=Za(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},co.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},co.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Ga=class{constructor(e,t){this.g=e,this.map=t}};function Qa(e){this.l=e||Ya,po.PerformanceNavigationTiming?e=0<(e=po.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(po.g&&po.g.Ka&&po.g.Ka()&&po.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ya=10;function Xa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ja(e){return e.h?1:e.g?e.g.size:0}function $a(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function el(e,t){e.g?e.g.add(t):e.h=t}function tl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nl(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Co(e.i)}Qa.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rl=class{stringify(e){return po.JSON.stringify(e,void 0)}parse(e){return po.JSON.parse(e,void 0)}};function il(){this.g=new rl}function ol(e,t,n){const r=n||"";try{Ta(e,(function(e,n){let i=e;go(e)&&(i=xs(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Yv){throw t.push(r+"type="+encodeURIComponent("_badmap")),Yv}}function sl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(cy){}}function al(e){this.l=e.ec||null,this.j=e.ob||!1}function ll(e,t){_s.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=cl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Eo(al,ta),al.prototype.g=function(){return new ll(this.l,this.j)},al.prototype.i=function(e){return function(){return e}}({}),Eo(ll,_s);var cl=0;function ul(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function hl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dl(e)}function dl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(co=ll.prototype).open=function(e,t){if(this.readyState!=cl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dl(this)},co.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||po).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},co.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hl(this)),this.readyState=cl},co.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dl(this)),this.g&&(this.readyState=3,dl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof po.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ul(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},co.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hl(this):dl(this),3==this.readyState&&ul(this)}},co.Za=function(e){this.g&&(this.response=this.responseText=e,hl(this))},co.Ya=function(e){this.g&&(this.response=e,hl(this))},co.ka=function(){this.g&&hl(this)},co.setRequestHeader=function(e,t){this.v.append(e,t)},co.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},co.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fl=po.JSON.parse;function pl(e){_s.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ml,this.L=this.M=!1}Eo(pl,_s);var ml="",gl=/^https?$/i,vl=["POST","PUT"];function yl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_l(e),wl(e)}function _l(e){e.F||(e.F=!0,bs(e,"complete"),bs(e,"error"))}function bl(e){if(e.h&&"undefined"!=typeof fo&&(!e.C[1]||4!=El(e)||2!=e.da()))if(e.v&&4==El(e))Ds(e.La,0,e);else if(bs(e,"readystatechange"),4==El(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var i=String(e.I).match(Ca)[1]||null;!i&&po.self&&po.self.location&&(i=po.self.location.protocol.slice(0,-1)),r=!gl.test(i?i.toLowerCase():"")}n=r}if(n)bs(e,"complete"),bs(e,"success");else{e.m=6;try{var o=2<El(e)?e.g.statusText:""}catch(Jv){o=""}e.j=o+" ["+e.da()+"]",_l(e)}}finally{wl(e)}}}function wl(e,t){if(e.g){xl(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||bs(e,"ready");try{n.onreadystatechange=r}catch(Yv){}}}function xl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(po.clearTimeout(e.A),e.A=null)}function El(e){return e.g?e.g.readyState:0}function Sl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ml:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ic){return null}}function Tl(e){let t="";return es(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Cl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tl(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ra(e,t,n))}function Al(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kl(e){this.Ga=0,this.j=[],this.l=new Vs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Al("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Al("baseRetryDelayMs",5e3,e),this.hb=Al("retryDelaySeedMs",1e4,e),this.eb=Al("forwardChannelMaxRetries",2,e),this.xa=Al("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Qa(e&&e.concurrentRequestLimit),this.Ja=new il,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Pl(e){if(Il(e),3==e.H){var t=e.W++,n=ka(e.I);if(Ra(n,"SID",e.K),Ra(n,"RID",t),Ra(n,"TYPE","terminate"),Ll(e,n),(t=new ca(e,e.l,t)).L=2,t.v=Na(ka(n)),n=!1,po.navigator&&po.navigator.sendBeacon)try{n=po.navigator.sendBeacon(t.v.toString(),"")}catch(ly){}!n&&po.Image&&((new Image).src=t.v,n=!0),n||(t.g=Kl(t.l,null),t.g.ha(t.v)),t.G=Date.now(),_a(t)}ql(e)}function Ol(e){e.g&&(Fl(e),e.g.cancel(),e.g=null)}function Il(e){Ol(e),e.u&&(po.clearTimeout(e.u),e.u=null),Ul(e),e.i.cancel(),e.m&&("number"===typeof e.m&&po.clearTimeout(e.m),e.m=null)}function Rl(e){if(!Xa(e.i)&&!e.m){e.m=!0;var t=e.Na;ks||Is(),Ps||(ks(),Ps=!0),Os.add(t,e),e.C=0}}function Nl(e,t){var n;n=t?t.m:e.W++;const r=ka(e.I);Ra(r,"SID",e.K),Ra(r,"RID",n),Ra(r,"AID",e.V),Ll(e,r),e.o&&e.s&&Cl(r,e.o,e.s),n=new ca(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Dl(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),el(e.i,n),pa(n,r,t)}function Ll(e,t){e.na&&es(e.na,(function(e,n){Ra(t,n,e)})),e.h&&Ta({},(function(e,n){Ra(t,n,e)}))}function Dl(e,t,n){n=Math.min(e.j.length,n);var r=e.h?wo(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{ol(a,e,"req"+n+"_")}catch(L){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ml(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ks||Is(),Ps||(ks(),Ps=!0),Os.add(t,e),e.A=0}}function jl(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Js(wo(e.Ma,e),Vl(e,e.A)),e.A++,!0)}function Fl(e){null!=e.B&&(po.clearTimeout(e.B),e.B=null)}function zl(e){e.g=new ca(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ka(e.wa);Ra(t,"RID","rpc"),Ra(t,"SID",e.K),Ra(t,"AID",e.V),Ra(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ra(t,"TO",e.qa),Ra(t,"TYPE","xmlhttp"),Ll(e,t),e.o&&e.s&&Cl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Na(ka(t)),n.s=null,n.S=!0,ma(n,e)}function Ul(e){null!=e.v&&(po.clearTimeout(e.v),e.v=null)}function Bl(e,t){var n=null;if(e.g==t){Ul(e),Fl(e),e.g=null;var r=2}else{if(!$a(e.i,t))return;n=t.F,tl(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;bs(r=Ks(),new Xs(r,n)),Rl(e)}else Ml(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ja(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Js(wo(e.Na,e,t),Vl(e,e.C)),e.C++,!0))}(e,t)||2==r&&jl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Hl(e,5);break;case 4:Hl(e,10);break;case 3:Hl(e,6);break;default:Hl(e,2)}}function Vl(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Hl(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=wo(e.pb,e);n||(n=new Aa("//www.google.com/images/cleardot.gif"),po.location&&"http"==po.location.protocol||Pa(n,"https"),Na(n)),function(e,t){const n=new Vs;if(po.Image){const r=new Image;r.onload=xo(sl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=xo(sl,n,r,"TestLoadImage: error",!1,t),r.onabort=xo(sl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=xo(sl,n,r,"TestLoadImage: timeout",!1,t),po.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ys(2);e.H=0,e.h&&e.h.za(t),ql(e),Il(e)}function ql(e){if(e.H=0,e.ma=[],e.h){const t=nl(e.i);0==t.length&&0==e.j.length||(Ao(e.ma,t),Ao(e.ma,e.j),e.i.i.length=0,Co(e.j),e.j.length=0),e.h.ya()}}function Wl(e,t,n){var r=n instanceof Aa?ka(n):new Aa(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Oa(r,r.m);else{var i=po.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Aa(null);r&&Pa(o,r),t&&(o.g=t),i&&Oa(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Ra(r,n,t),Ra(r,"VER",e.ra),Ll(e,r),r}function Kl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new pl(new al({ob:!0})):new pl(e.va)).Oa(e.J),t}function Zl(){}function Gl(){if(jo&&!(10<=Number(Zo)))throw Error("Environmental error: no available transport.")}function Ql(e,t){_s.call(this),this.g=new kl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Oo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Oo(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Jl(this)}function Yl(e){sa.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Xl(){aa.call(this),this.status=1}function Jl(e){this.g=e}function $l(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ec(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function tc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(co=pl.prototype).Oa=function(e){this.M=e},co.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ia.g(),this.C=this.u?na(this.u):na(ia),this.g.onreadystatechange=wo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(cy){return void yl(this,cy)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=po.FormData&&e instanceof po.FormData,!(0<=To(vl,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xl(this),0<this.B&&((this.L=function(e){return jo&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wo(this.ua,this)):this.A=Ds(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(cy){yl(this,cy)}},co.ua=function(){"undefined"!=typeof fo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bs(this,"timeout"),this.abort(8))},co.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,bs(this,"complete"),bs(this,"abort"),wl(this))},co.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wl(this,!0)),pl.$.N.call(this)},co.La=function(){this.s||(this.G||this.v||this.l?bl(this):this.kb())},co.kb=function(){bl(this)},co.isActive=function(){return!!this.g},co.da=function(){try{return 2<El(this)?this.g.status:-1}catch(ry){return-1}},co.ja=function(){try{return this.g?this.g.responseText:""}catch(ry){return""}},co.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fl(t)}},co.Ia=function(){return this.m},co.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(co=kl.prototype).ra=8,co.H=1,co.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ca(this,this.l,e);let o=this.s;if(this.U&&(o?(o=ts(o),rs(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Dl(this,i,t),Ra(n=ka(this.I),"RID",e),Ra(n,"CVER",22),this.F&&Ra(n,"X-HTTP-Session-Id",this.F),Ll(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Tl(o)))+"&"+t:this.o&&Cl(n,this.o,o)),el(this.i,i),this.bb&&Ra(n,"TYPE","init"),this.P?(Ra(n,"$req",t),Ra(n,"SID","null"),i.aa=!0,pa(i,n,null)):pa(i,n,t),this.H=2}}else 3==this.H&&(e?Nl(this,e):0==this.j.length||Xa(this.i)||Nl(this))},co.Ma=function(){if(this.u=null,zl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Js(wo(this.jb,this),e)}},co.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ys(10),Ol(this),zl(this))},co.ib=function(){null!=this.v&&(this.v=null,Ol(this),jl(this),Ys(19))},co.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ys(2)):(this.l.info("Failed to ping google.com"),Ys(1))},co.isActive=function(){return!!this.h&&this.h.isActive(this)},(co=Zl.prototype).Ba=function(){},co.Aa=function(){},co.za=function(){},co.ya=function(){},co.isActive=function(){return!0},co.Va=function(){},Gl.prototype.g=function(e,t){return new Ql(e,t)},Eo(Ql,_s),Ql.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ys(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Wl(e,null,e.Y),Rl(e)},Ql.prototype.close=function(){Pl(this.g)},Ql.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=xs(e),e=n);t.j.push(new Ga(t.fb++,e)),3==t.H&&Rl(t)},Ql.prototype.N=function(){this.g.h=null,delete this.j,Pl(this.g),delete this.g,Ql.$.N.call(this)},Eo(Yl,sa),Eo(Xl,aa),Eo(Jl,Zl),Jl.prototype.Ba=function(){bs(this.g,"a")},Jl.prototype.Aa=function(e){bs(this.g,new Yl(e))},Jl.prototype.za=function(e){bs(this.g,new Xl)},Jl.prototype.ya=function(){bs(this.g,"b")},Eo($l,(function(){this.blockSize=-1})),$l.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},$l.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)ec(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){ec(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){ec(this,r),i=0;break}}this.h=i,this.i+=t},$l.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var nc={};function rc(e){return-128<=e&&128>e?function(e,t){var n=nc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new tc([0|e],0>e?-1:0)})):new tc([0|e],0>e?-1:0)}function ic(e){if(isNaN(e)||!isFinite(e))return sc;if(0>e)return hc(ic(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=oc;return new tc(t,0)}var oc=4294967296,sc=rc(0),ac=rc(1),lc=rc(16777216);function cc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function uc(e){return-1==e.h}function hc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new tc(n,~e.h).add(ac)}function dc(e,t){return e.add(hc(t))}function fc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function pc(e,t){this.g=e,this.h=t}function mc(e,t){if(cc(t))throw Error("division by zero");if(cc(e))return new pc(sc,sc);if(uc(e))return t=mc(hc(e),t),new pc(hc(t.g),hc(t.h));if(uc(t))return t=mc(e,hc(t)),new pc(hc(t.g),t.h);if(30<e.g.length){if(uc(e)||uc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ac,r=t;0>=r.X(e);)n=gc(n),r=gc(r);var i=vc(n,1),o=vc(r,1);for(r=vc(r,2),n=vc(n,2);!cc(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=vc(r,1),n=vc(n,1)}return t=dc(e,i.R(t)),new pc(i,t)}for(i=sc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=ic(n)).R(t);uc(s)||0<s.X(e);)s=(o=ic(n-=r)).R(t);cc(o)&&(o=ac),i=i.add(o),e=dc(e,s)}return new pc(i,e)}function gc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new tc(n,e.h)}function vc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new tc(i,e.h)}(co=tc.prototype).ea=function(){if(uc(this))return-hc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:oc+r)*t,t*=oc}return e},co.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(cc(this))return"0";if(uc(this))return"-"+hc(this).toString(e);for(var t=ic(Math.pow(e,6)),n=this,r="";;){var i=mc(n,t).g,o=((0<(n=dc(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(cc(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},co.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},co.X=function(e){return uc(e=dc(this,e))?-1:cc(e)?0:1},co.abs=function(){return uc(this)?hc(this):this},co.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new tc(n,-2147483648&n[n.length-1]?-1:0)},co.R=function(e){if(cc(this)||cc(e))return sc;if(uc(this))return uc(e)?hc(this).R(hc(e)):hc(hc(this).R(e));if(uc(e))return hc(this.R(hc(e)));if(0>this.X(lc)&&0>e.X(lc))return ic(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,fc(n,2*r+2*i),n[2*r+2*i+1]+=o*l,fc(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,fc(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,fc(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new tc(n,0)},co.gb=function(e){return mc(this,e).h},co.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new tc(n,this.h&e.h)},co.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new tc(n,this.h|e.h)},co.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new tc(n,this.h^e.h)},Gl.prototype.createWebChannel=Gl.prototype.g,Ql.prototype.send=Ql.prototype.u,Ql.prototype.open=Ql.prototype.m,Ql.prototype.close=Ql.prototype.close,$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,ea.COMPLETE="complete",ra.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",_s.prototype.listen=_s.prototype.O,pl.prototype.listenOnce=pl.prototype.P,pl.prototype.getLastError=pl.prototype.Sa,pl.prototype.getLastErrorCode=pl.prototype.Ia,pl.prototype.getStatus=pl.prototype.da,pl.prototype.getResponseJson=pl.prototype.Wa,pl.prototype.getResponseText=pl.prototype.ja,pl.prototype.send=pl.prototype.ha,pl.prototype.setWithCredentials=pl.prototype.Oa,$l.prototype.digest=$l.prototype.l,$l.prototype.reset=$l.prototype.reset,$l.prototype.update=$l.prototype.j,tc.prototype.add=tc.prototype.add,tc.prototype.multiply=tc.prototype.R,tc.prototype.modulo=tc.prototype.gb,tc.prototype.compare=tc.prototype.X,tc.prototype.toNumber=tc.prototype.ea,tc.prototype.toString=tc.prototype.toString,tc.prototype.getBits=tc.prototype.D,tc.fromNumber=ic,tc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return hc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ic(Math.pow(n,8)),i=sc,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=ic(Math.pow(n,s)),i=i.R(s).add(ic(a))):i=(i=i.R(r)).add(ic(a))}return i};var yc=ho.createWebChannelTransport=function(){return new Gl},_c=ho.getStatEventTarget=function(){return Ks()},bc=ho.ErrorCode=$s,wc=ho.EventType=ea,xc=ho.Event=qs,Ec=ho.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sc=ho.FetchXmlHttpFactory=al,Tc=ho.WebChannel=ra,Cc=ho.XhrIo=pl,Ac=ho.Md5=$l,kc=ho.Integer=tc;const Pc="@firebase/firestore";class Oc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Oc.UNAUTHENTICATED=new Oc(null),Oc.GOOGLE_CREDENTIALS=new Oc("google-credentials-uid"),Oc.FIRST_PARTY=new Oc("first-party-uid"),Oc.MOCK_USER=new Oc("mock-user");let Ic="10.5.2";const Rc=new et("@firebase/firestore");function Nc(){return Rc.logLevel}function Lc(e){if(Rc.logLevel<=Qe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jc);Rc.debug("Firestore (".concat(Ic,"): ").concat(e),...i)}}function Dc(e){if(Rc.logLevel<=Qe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jc);Rc.error("Firestore (".concat(Ic,"): ").concat(e),...i)}}function Mc(e){if(Rc.logLevel<=Qe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jc);Rc.warn("Firestore (".concat(Ic,"): ").concat(e),...i)}}function jc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Xv){return e}}function Fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ic,") INTERNAL ASSERTION FAILED: ")+e;throw Dc(t),new Error(t)}function zc(e,t){e||Fc()}function Uc(e,t){return e}const Bc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vc extends Ne{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Hc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Wc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Oc.UNAUTHENTICATED)))}shutdown(){}}class Kc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Zc{constructor(e){this.t=e,this.currentUser=Oc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Hc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hc,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Lc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Lc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hc)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Lc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(zc("string"==typeof t.accessToken),new qc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zc(null===e||"string"==typeof e),new Oc(e)}}class Gc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Oc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Gc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Oc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Lc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Lc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Lc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Lc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(zc("string"==typeof e.token),this.R=e.token,new Yc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class $c{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Jc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function eu(e,t){return e<t?-1:e>t?1:0}function tu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class nu{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vc(Bc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vc(Bc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Vc(Bc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vc(Bc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nu.fromMillis(Date.now())}static fromDate(e){return nu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new nu(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?eu(this.nanoseconds,e.nanoseconds):eu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ru{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ru(e)}static min(){return new ru(new nu(0,0))}static max(){return new ru(new nu(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class iu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Fc(),void 0===n?n=e.length-t:n>e.length-t&&Fc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===iu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ou extends iu{construct(e,t,n){return new ou(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Vc(Bc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ou(e)}static emptyPath(){return new ou([])}}const su=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class au extends iu{construct(e,t,n){return new au(e,t,n)}static isValidIdentifier(e){return su.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),au.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new au(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Vc(Bc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Vc(Bc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Vc(Bc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Vc(Bc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new au(t)}static emptyPath(){return new au([])}}class lu{constructor(e){this.path=e}static fromPath(e){return new lu(ou.fromString(e))}static fromName(e){return new lu(ou.fromString(e).popFirst(5))}static empty(){return new lu(ou.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ou.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ou.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lu(new ou(e.slice()))}}class cu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}cu.UNKNOWN_ID=-1;function uu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ru.fromTimestamp(1e9===r?new nu(n+1,0):new nu(n,r));return new du(i,lu.empty(),t)}function hu(e){return new du(e.readTime,e.key,-1)}class du{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new du(ru.min(),lu.empty(),-1)}static max(){return new du(ru.max(),lu.empty(),-1)}}function fu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=lu.comparator(e.documentKey,t.documentKey),0!==n?n:eu(e.largestBatchId,t.largestBatchId))}const pu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gu(e){if(e.code!==Bc.FAILED_PRECONDITION||e.message!==pu)throw e;Lc("LocalStore","Unexpectedly lost primary lease")}class vu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vu(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof vu?t:vu.resolve(t)}catch(e){return vu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):vu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):vu.reject(t)}static resolve(e){return new vu(((t,n)=>{t(e)}))}static reject(e){return new vu(((t,n)=>{n(e)}))}static waitFor(e){return new vu(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=vu.resolve(!1);for(const n of e)t=t.next((e=>e?vu.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new vu(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new vu(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function yu(e){return"IndexedDbTransactionError"===e.name}class _u{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function bu(e){return null==e}function wu(e){return 0===e&&1/e==-1/0}function xu(e){return"number"==typeof e&&Number.isInteger(e)&&!wu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}_u._e=-1;const Eu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Su=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tu=Su;function Cu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Au(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ku(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Pu{constructor(e,t){this.comparator=e,this.root=t||Iu.EMPTY}insert(e,t){return new Pu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Iu.BLACK,null,null))}remove(e){return new Pu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Iu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Iu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Iu.RED,this.left=null!=r?r:Iu.EMPTY,this.right=null!=i?i:Iu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Iu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Iu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Iu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Iu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Iu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fc();if(this.right.isRed())throw Fc();const e=this.left.check();if(e!==this.right.check())throw Fc();return e+(this.isRed()?0:1)}}Iu.EMPTY=null,Iu.RED=!0,Iu.BLACK=!1,Iu.EMPTY=new class{constructor(){this.size=0}get key(){throw Fc()}get value(){throw Fc()}get color(){throw Fc()}get left(){throw Fc()}get right(){throw Fc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Iu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ru{constructor(e){this.comparator=e,this.data=new Pu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nu(this.data.getIterator())}getIteratorFrom(e){return new Nu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ru))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ru(this.comparator);return t.data=e,t}}class Nu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Lu{constructor(e){this.fields=e,e.sort(au.comparator)}static empty(){return new Lu([])}unionWith(e){let t=new Ru(au.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Lu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Du extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Du("Invalid base64 string: "+e):e}}(e);return new Mu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Mu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return eu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mu.EMPTY_BYTE_STRING=new Mu("");const ju=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fu(e){if(zc(!!e),"string"==typeof e){let t=0;const n=ju.exec(e);if(zc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zu(e.seconds),nanos:zu(e.nanos)}}function zu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Uu(e){return"string"==typeof e?Mu.fromBase64String(e):Mu.fromUint8Array(e)}function Bu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vu(e){const t=e.mapValue.fields.__previous_value__;return Bu(t)?Vu(t):t}function Hu(e){const t=Fu(e.mapValue.fields.__local_write_time__.timestampValue);return new nu(t.seconds,t.nanos)}class qu{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Wu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}const Ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Bu(e)?4:ah(e)?9007199254740991:10:Fc()}function Gu(e,t){if(e===t)return!0;const n=Zu(e);if(n!==Zu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hu(e).isEqual(Hu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Fu(e.timestampValue),r=Fu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Uu(e.bytesValue).isEqual(Uu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zu(e.geoPointValue.latitude)===zu(t.geoPointValue.latitude)&&zu(e.geoPointValue.longitude)===zu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zu(e.integerValue)===zu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=zu(e.doubleValue),r=zu(t.doubleValue);return n===r?wu(n)===wu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return tu(e.arrayValue.values||[],t.arrayValue.values||[],Gu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cu(n)!==Cu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gu(n[i],r[i])))return!1;return!0}(e,t);default:return Fc()}}function Qu(e,t){return void 0!==(e.values||[]).find((e=>Gu(e,t)))}function Yu(e,t){if(e===t)return 0;const n=Zu(e),r=Zu(t);if(n!==r)return eu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return eu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=zu(e.integerValue||e.doubleValue),r=zu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xu(e.timestampValue,t.timestampValue);case 4:return Xu(Hu(e),Hu(t));case 5:return eu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Uu(e),r=Uu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=eu(n[i],r[i]);if(0!==e)return e}return eu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=eu(zu(e.latitude),zu(t.latitude));return 0!==n?n:eu(zu(e.longitude),zu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Yu(n[i],r[i]);if(e)return e}return eu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ku.mapValue&&t===Ku.mapValue)return 0;if(e===Ku.mapValue)return 1;if(t===Ku.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=eu(r[s],o[s]);if(0!==e)return e;const t=Yu(n[r[s]],i[o[s]]);if(0!==t)return t}return eu(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Fc()}}function Xu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return eu(e,t);const n=Fu(e),r=Fu(t),i=eu(n.seconds,r.seconds);return 0!==i?i:eu(n.nanos,r.nanos)}function Ju(e){return $u(e)}function $u(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Fu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Uu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return lu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$u(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat($u(e.fields[i]));return n+"}"}(e.mapValue):Fc()}function eh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function th(e){return!!e&&"integerValue"in e}function nh(e){return!!e&&"arrayValue"in e}function rh(e){return!!e&&"nullValue"in e}function ih(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oh(e){return!!e&&"mapValue"in e}function sh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Au(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=sh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=sh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ah(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class lh{constructor(e){this.value=e}static empty(){return new lh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(t)}setAll(e){let t=au.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=sh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];oh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Au(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new lh(sh(this.value))}}function ch(e){const t=[];return Au(e.fields,((e,n)=>{const r=new au([e]);if(oh(n)){const e=ch(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Lu(t)}class uh{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new uh(e,0,ru.min(),ru.min(),ru.min(),lh.empty(),0)}static newFoundDocument(e,t,n,r){return new uh(e,1,t,ru.min(),n,r,0)}static newNoDocument(e,t){return new uh(e,2,t,ru.min(),ru.min(),lh.empty(),0)}static newUnknownDocument(e,t){return new uh(e,3,t,ru.min(),ru.min(),lh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ru.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ru.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof uh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new uh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class hh{constructor(e,t){this.position=e,this.inclusive=t}}function dh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?lu.comparator(lu.fromName(s.referenceValue),n.key):Yu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function fh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gu(e.position[n],t.position[n]))return!1;return!0}class ph{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function mh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class gh{}class vh extends gh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Th(e,t,n):"array-contains"===t?new Ph(e,n):"in"===t?new Oh(e,n):"not-in"===t?new Ih(e,n):"array-contains-any"===t?new Rh(e,n):new vh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ch(e,n):new Ah(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yu(t,this.value)):null!==t&&Zu(this.value)===Zu(t)&&this.matchesComparison(Yu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yh extends gh{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new yh(e,t)}matches(e){return _h(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function _h(e){return"and"===e.op}function bh(e){return wh(e)&&_h(e)}function wh(e){for(const t of e.filters)if(t instanceof yh)return!1;return!0}function xh(e){if(e instanceof vh)return e.field.canonicalString()+e.op.toString()+Ju(e.value);if(bh(e))return e.filters.map((e=>xh(e))).join(",");{const t=e.filters.map((e=>xh(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Eh(e,t){return e instanceof vh?function(e,t){return t instanceof vh&&e.op===t.op&&e.field.isEqual(t.field)&&Gu(e.value,t.value)}(e,t):e instanceof yh?function(e,t){return t instanceof yh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Eh(n,t.filters[r])),!0)}(e,t):void Fc()}function Sh(e){return e instanceof vh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ju(e.value))}(e):e instanceof yh?function(e){return e.op.toString()+" {"+e.getFilters().map(Sh).join(" ,")+"}"}(e):"Filter"}class Th extends vh{constructor(e,t,n){super(e,t,n),this.key=lu.fromName(n.referenceValue)}matches(e){const t=lu.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ch extends vh{constructor(e,t){super(e,"in",t),this.keys=kh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ah extends vh{constructor(e,t){super(e,"not-in",t),this.keys=kh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>lu.fromName(e.referenceValue)))}class Ph extends vh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nh(t)&&Qu(t.arrayValue,this.value)}}class Oh extends vh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qu(this.value.arrayValue,t)}}class Ih extends vh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qu(this.value.arrayValue,t)}}class Rh extends vh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Qu(this.value.arrayValue,e)))}}class Nh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function Lh(e){return new Nh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Dh(e){const t=Uc(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>xh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),bu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ju(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ju(e))).join(",")),t.ce=e}return t.ce}function Mh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!mh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Eh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fh(e.startAt,t.startAt)&&fh(e.endAt,t.endAt)}function jh(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Fh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function zh(e,t,n,r,i,o,s,a){return new Fh(e,t,n,r,i,o,s,a)}function Uh(e){return new Fh(e)}function Bh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vh(e){return null!==e.collectionGroup}function Hh(e){const t=Uc(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ru(au.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new ph(r,n))})),e.has(au.keyField().canonicalString())||t.le.push(new ph(au.keyField(),n))}return t.le}function qh(e){const t=Uc(e);return t.he||(t.he=Wh(t,Hh(e))),t.he}function Wh(e,t){if("F"===e.limitType)return Lh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ph(e.field,t)}));const n=e.endAt?new hh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new hh(e.startAt.position,e.startAt.inclusive):null;return Lh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Kh(e,t){const n=e.filters.concat([t]);return new Fh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Zh(e,t,n){return new Fh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gh(e,t){return Mh(qh(e),qh(t))&&e.limitType===t.limitType}function Qh(e){return"".concat(Dh(qh(e)),"|lt:").concat(e.limitType)}function Yh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Sh(e))).join(", "),"]")),bu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ju(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ju(e))).join(",")),"Target(".concat(t,")")}(qh(e)),"; limitType=").concat(e.limitType,")")}function Xh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):lu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Hh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=dh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Hh(e),t))&&!(e.endAt&&!function(e,t,n){const r=dh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Hh(e),t))}(e,t)}function Jh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $h(e){return(t,n)=>{let r=!1;for(const i of Hh(e)){const e=ed(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ed(e,t,n){const r=e.field.isKeyField()?lu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yu(r,i):Fc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fc()}}class td{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Au(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ku(this.inner)}size(){return this.innerSize}}const nd=new Pu(lu.comparator);function rd(){return nd}const id=new Pu(lu.comparator);function od(){let e=id;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function sd(e){let t=id;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ad(){return cd()}function ld(){return cd()}function cd(){return new td((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ud=new Pu(lu.comparator),hd=new Ru(lu.comparator);function dd(){let e=hd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const fd=new Ru(eu);function pd(){return fd}function md(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(t)?"-0":t}}function gd(e){return{integerValue:""+e}}function vd(e,t){return xu(t)?gd(t):md(e,t)}class yd{constructor(){this._=void 0}}function _d(e,t,n){return e instanceof xd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Bu(t)&&(t=Vu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ed?Sd(e,t):e instanceof Td?Cd(e,t):function(e,t){const n=wd(e,t),r=kd(n)+kd(e.Ie);return th(n)&&th(e.Ie)?gd(r):md(e.serializer,r)}(e,t)}function bd(e,t,n){return e instanceof Ed?Sd(e,t):e instanceof Td?Cd(e,t):n}function wd(e,t){return e instanceof Ad?function(e){return th(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class xd extends yd{}class Ed extends yd{constructor(e){super(),this.elements=e}}function Sd(e,t){const n=Pd(t);for(const r of e.elements)n.some((e=>Gu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Td extends yd{constructor(e){super(),this.elements=e}}function Cd(e,t){let n=Pd(t);for(const r of e.elements)n=n.filter((e=>!Gu(e,r)));return{arrayValue:{values:n}}}class Ad extends yd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function kd(e){return zu(e.integerValue||e.doubleValue)}function Pd(e){return nh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Od{constructor(e,t){this.field=e,this.transform=t}}class Id{constructor(e,t){this.version=e,this.transformResults=t}}class Rd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rd}static exists(e){return new Rd(void 0,e)}static updateTime(e){return new Rd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ld{}function Dd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Wd(e.key,Rd.none()):new Ud(e.key,e.data,Rd.none());{const n=e.data,r=lh.empty();let i=new Ru(au.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Bd(e.key,r,new Lu(i.toArray()),Rd.none())}}function Md(e,t,n){e instanceof Ud?function(e,t,n){const r=e.value.clone(),i=Hd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Bd?function(e,t,n){if(!Nd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Hd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jd(e,t,n,r){return e instanceof Ud?function(e,t,n,r){if(!Nd(e.precondition,t))return n;const i=e.value.clone(),o=qd(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Bd?function(e,t,n,r){if(!Nd(e.precondition,t))return n;const i=qd(e.fieldTransforms,r,t),o=t.data;return o.setAll(Vd(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Nd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Fd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=wd(r.transform,e||null);null!=i&&(null===n&&(n=lh.empty()),n.set(r.field,i))}return n||null}function zd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&tu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ed&&t instanceof Ed||e instanceof Td&&t instanceof Td?tu(e.elements,t.elements,Gu):e instanceof Ad&&t instanceof Ad?Gu(e.Ie,t.Ie):e instanceof xd&&t instanceof xd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ud extends Ld{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bd extends Ld{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Hd(e,t,n){const r=new Map;zc(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,bd(s,a,n[i]))}return r}function qd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,_d(e,o,t))}return r}class Wd extends Ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kd extends Ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Md(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ld();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Dd(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(ru.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dd())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,((e,t)=>zd(e,t)))&&tu(this.baseMutations,e.baseMutations,((e,t)=>zd(e,t)))}}class Gd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){zc(e.mutations.length===n.length);let r=ud;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Gd(e,t,n,r)}}class Qd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Yd{constructor(e,t){this.count=e,this.unchangedNames=t}}var Xd,Jd;function $d(e){switch(e){default:return Fc();case Bc.CANCELLED:case Bc.UNKNOWN:case Bc.DEADLINE_EXCEEDED:case Bc.RESOURCE_EXHAUSTED:case Bc.INTERNAL:case Bc.UNAVAILABLE:case Bc.UNAUTHENTICATED:return!1;case Bc.INVALID_ARGUMENT:case Bc.NOT_FOUND:case Bc.ALREADY_EXISTS:case Bc.PERMISSION_DENIED:case Bc.FAILED_PRECONDITION:case Bc.ABORTED:case Bc.OUT_OF_RANGE:case Bc.UNIMPLEMENTED:case Bc.DATA_LOSS:return!0}}function ef(e){if(void 0===e)return Dc("GRPC error has no .code"),Bc.UNKNOWN;switch(e){case Xd.OK:return Bc.OK;case Xd.CANCELLED:return Bc.CANCELLED;case Xd.UNKNOWN:return Bc.UNKNOWN;case Xd.DEADLINE_EXCEEDED:return Bc.DEADLINE_EXCEEDED;case Xd.RESOURCE_EXHAUSTED:return Bc.RESOURCE_EXHAUSTED;case Xd.INTERNAL:return Bc.INTERNAL;case Xd.UNAVAILABLE:return Bc.UNAVAILABLE;case Xd.UNAUTHENTICATED:return Bc.UNAUTHENTICATED;case Xd.INVALID_ARGUMENT:return Bc.INVALID_ARGUMENT;case Xd.NOT_FOUND:return Bc.NOT_FOUND;case Xd.ALREADY_EXISTS:return Bc.ALREADY_EXISTS;case Xd.PERMISSION_DENIED:return Bc.PERMISSION_DENIED;case Xd.FAILED_PRECONDITION:return Bc.FAILED_PRECONDITION;case Xd.ABORTED:return Bc.ABORTED;case Xd.OUT_OF_RANGE:return Bc.OUT_OF_RANGE;case Xd.UNIMPLEMENTED:return Bc.UNIMPLEMENTED;case Xd.DATA_LOSS:return Bc.DATA_LOSS;default:return Fc()}}(Jd=Xd||(Xd={}))[Jd.OK=0]="OK",Jd[Jd.CANCELLED=1]="CANCELLED",Jd[Jd.UNKNOWN=2]="UNKNOWN",Jd[Jd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jd[Jd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jd[Jd.NOT_FOUND=5]="NOT_FOUND",Jd[Jd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jd[Jd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jd[Jd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jd[Jd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jd[Jd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jd[Jd.ABORTED=10]="ABORTED",Jd[Jd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jd[Jd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jd[Jd.INTERNAL=13]="INTERNAL",Jd[Jd.UNAVAILABLE=14]="UNAVAILABLE",Jd[Jd.DATA_LOSS=15]="DATA_LOSS";let tf=null;function nf(){return new TextEncoder}const rf=new kc([4294967295,4294967295],0);function of(e){const t=nf().encode(e),n=new Ac;return n.update(t),new Uint8Array(n.digest())}function sf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new kc([n,r],0),new kc([i,o],0)]}class af{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new lf("Invalid padding: ".concat(t));if(n<0)throw new lf("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new lf("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new lf("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=kc.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(kc.fromNumber(n)));return 1===r.compare(rf)&&(r=new kc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=of(e),[n,r]=sf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new af(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=of(e),[n,r]=sf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class lf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class cf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,uf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new cf(ru.min(),r,new Pu(eu),rd(),dd())}}class uf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new uf(n,t,dd(),dd(),dd())}}class hf{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class df{constructor(e,t){this.targetId=e,this.fe=t}}class ff{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class pf{constructor(){this.ge=0,this.pe=vf(),this.ye=Mu.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=dd(),t=dd(),n=dd();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fc()}})),new uf(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=vf()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class mf{constructor(e){this.Le=e,this.ke=new Map,this.qe=rd(),this.Qe=gf(),this.Ke=new Pu(eu)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Fc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(jh(i))if(0===n){const e=new lu(i.path);this.We(t,e,uh.newNoDocument(e,ru.min()))}else zc(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==tf||tf.tt(function(e,t,n,r,i){var o,s,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=Uu(n).toUint8Array()}catch(e){if(e instanceof Du)return Mc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new af(o,r,i)}catch(e){return Mc(e instanceof lf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&jh(i.target)){const t=new lu(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,uh.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=dd();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new cf(e,t,this.Ke,this.qe,n);return this.qe=rd(),this.Qe=gf(),this.Ke=new Pu(eu),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new pf,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ru(eu),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Lc("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new pf),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function gf(){return new Pu(lu.comparator)}function vf(){return new Pu(lu.comparator)}const yf={asc:"ASCENDING",desc:"DESCENDING"},_f={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bf={and:"AND",or:"OR"};class wf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xf(e,t){return e.useProto3Json||bu(t)?t:{value:t}}function Ef(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Tf(e,t){return Ef(e,t.toTimestamp())}function Cf(e){return zc(!!e),ru.fromTimestamp(function(e){const t=Fu(e);return new nu(t.seconds,t.nanos)}(e))}function Af(e,t){return function(e){return new ou(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function kf(e){const t=ou.fromString(e);return zc(Gf(t)),t}function Pf(e,t){return Af(e.databaseId,t.path)}function Of(e,t){const n=kf(t);if(n.get(1)!==e.databaseId.projectId)throw new Vc(Bc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vc(Bc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new lu(Lf(n))}function If(e,t){return Af(e.databaseId,t)}function Rf(e){const t=kf(e);return 4===t.length?ou.emptyPath():Lf(t)}function Nf(e){return new ou(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lf(e){return zc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Df(e,t,n){return{name:Pf(e,t),fields:n.value.mapValue.fields}}function Mf(e,t){let n;if(t instanceof Ud)n={update:Df(e,t.key,t.value)};else if(t instanceof Wd)n={delete:Pf(e,t.key)};else if(t instanceof Bd)n={update:Df(e,t.key,t.data),updateMask:Zf(t.fieldMask)};else{if(!(t instanceof Kd))return Fc();n={verify:Pf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof xd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ed)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Td)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Fc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Tf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fc()}(e,t.precondition)),n}function jf(e,t){return{documents:[If(e,t.path)]}}function Ff(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=If(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=If(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Kf(yh.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:qf(e.field),direction:Bf(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=xf(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function zf(e){let t=Rf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){zc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Uf(e);return t instanceof yh&&bh(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new ph(Wf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,bu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new hh(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new hh(n,t)}(n.endAt)),zh(t,i,s,o,a,"F",l,c)}function Uf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Wf(e.unaryFilter.field);return vh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Wf(e.unaryFilter.field);return vh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wf(e.unaryFilter.field);return vh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wf(e.unaryFilter.field);return vh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fc()}}(e):void 0!==e.fieldFilter?function(e){return vh.create(Wf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return yh.create(e.compositeFilter.filters.map((e=>Uf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fc()}}(e.compositeFilter.op))}(e):Fc()}function Bf(e){return yf[e]}function Vf(e){return _f[e]}function Hf(e){return bf[e]}function qf(e){return{fieldPath:e.canonicalString()}}function Wf(e){return au.fromServerFormat(e.fieldPath)}function Kf(e){return e instanceof vh?function(e){if("=="===e.op){if(ih(e.value))return{unaryFilter:{field:qf(e.field),op:"IS_NAN"}};if(rh(e.value))return{unaryFilter:{field:qf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ih(e.value))return{unaryFilter:{field:qf(e.field),op:"IS_NOT_NAN"}};if(rh(e.value))return{unaryFilter:{field:qf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qf(e.field),op:Vf(e.op),value:e.value}}}(e):e instanceof yh?function(e){const t=e.getFilters().map((e=>Kf(e)));return 1===t.length?t[0]:{compositeFilter:{op:Hf(e.op),filters:t}}}(e):Fc()}function Zf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Gf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Qf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ru.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ru.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Qf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yf{constructor(e){this.ut=e}}function Xf(e){const t=zf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zh(t,t.limit,"L"):t}class Jf{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(zu(e.integerValue));else if("doubleValue"in e){const n=zu(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),wu(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Uu(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?ah(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Fc()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),lu.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}Jf.St=new Jf;class $f{constructor(){this.on=new ep}addToCollectionParentIndex(e,t){return this.on.add(t),vu.resolve()}getCollectionParents(e,t){return vu.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return vu.resolve()}deleteFieldIndex(e,t){return vu.resolve()}deleteAllFieldIndexes(e){return vu.resolve()}createTargetIndexes(e,t){return vu.resolve()}getDocumentsMatchingTarget(e,t){return vu.resolve(null)}getIndexType(e,t){return vu.resolve(0)}getFieldIndexes(e,t){return vu.resolve([])}getNextCollectionGroupToUpdate(e){return vu.resolve(null)}getMinOffset(e,t){return vu.resolve(du.min())}getMinOffsetFromCollectionGroup(e,t){return vu.resolve(du.min())}updateCollectionGroup(e,t,n){return vu.resolve()}updateIndexEntries(e,t){return vu.resolve()}}class ep{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ru(ou.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ru(ou.comparator)).toArray()}}new Uint8Array(0);class tp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new tp(e,tp.DEFAULT_COLLECTION_PERCENTILE,tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}tp.DEFAULT_COLLECTION_PERCENTILE=10,tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tp.DEFAULT=new tp(41943040,tp.DEFAULT_COLLECTION_PERCENTILE,tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tp.DISABLED=new tp(-1,0,0);class np{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new np(0)}static Nn(){return new np(-1)}}class rp{constructor(){this.changes=new td((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,uh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?vu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ip{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class op{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&jd(n.mutation,e,Lu.empty(),nu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,dd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dd();const r=ad();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=od();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ad();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,dd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=rd();const o=cd(),s=cd();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Bd)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),jd(s.mutation,t,s.mutation.getFieldMask(),nu.now())):o.set(t.key,Lu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new ip(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=cd();let r=new Pu(((e,t)=>e-t)),i=dd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Lu.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||dd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=ld();l.forEach((e=>{if(!i.has(e)){const r=Dd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return vu.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):vu.resolve(ad());let s=-1,a=i;return o.next((t=>vu.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?vu.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,dd()))).next((e=>({batchId:s,changes:sd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lu(t)).next((e=>{let t=od();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=od();return this.indexManager.getCollectionParents(e,i).next((s=>vu.forEach(s,(s=>{const a=function(e,t){return new Fh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,uh.newInvalidDocument(r)))}));let n=od();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&jd(o.mutation,r,Lu.empty(),nu.now()),Xh(t,r)&&(n=n.insert(e,r))})),n}))}}class sp{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return vu.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Cf(e.createTime)}}(t)),vu.resolve()}getNamedQuery(e,t){return vu.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Xf(e.bundledQuery),readTime:Cf(e.readTime)}}(t)),vu.resolve()}}class ap{constructor(){this.overlays=new Pu(lu.comparator),this.lr=new Map}getOverlay(e,t){return vu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ad();return vu.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),vu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),vu.resolve()}getOverlaysForCollection(e,t,n){const r=ad(),i=t.length+1,o=new lu(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return vu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Pu(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ad(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=ad(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return vu.resolve(s)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Qd(t,n));let i=this.lr.get(t);void 0===i&&(i=dd(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class lp{constructor(){this.hr=new Ru(cp.Pr),this.Ir=new Ru(cp.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new cp(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new cp(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new lu(new ou([])),n=new cp(t,e),r=new cp(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new lu(new ou([])),n=new cp(t,e),r=new cp(t,e+1);let i=dd();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new cp(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class cp{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return lu.comparator(e.key,t.key)||eu(e.gr,t.gr)}static Tr(e,t){return eu(e.gr,t.gr)||lu.comparator(e.key,t.key)}}class up{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Ru(cp.Pr)}checkEmpty(e){return vu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Zd(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.yr=this.yr.add(new cp(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return vu.resolve(o)}lookupMutationBatch(e,t){return vu.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return vu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vu.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return vu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new cp(t,0),r=new cp(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),vu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ru(eu);return t.forEach((e=>{const t=new cp(e,0),r=new cp(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),vu.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;lu.isDocumentKey(i)||(i=i.child(""));const o=new cp(new lu(i),0);let s=new Ru(eu);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.gr)),!0)}),o),vu.resolve(this.br(s))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){zc(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return vu.forEach(t.mutations,(r=>{const i=new cp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new cp(t,0),r=this.yr.firstAfterOrEqual(n);return vu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,vu.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hp{constructor(e){this.Cr=e,this.docs=new Pu(lu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return vu.resolve(n?n.document.mutableCopy():uh.newInvalidDocument(t))}getEntries(e,t){let n=rd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():uh.newInvalidDocument(e))})),vu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=rd();const o=t.path,s=new lu(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||fu(hu(s),n)<=0||(r.has(s.key)||Xh(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return vu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Fc()}vr(e,t){return vu.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new dp(this)}getSize(e){return vu.resolve(this.size)}}class dp extends rp{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),vu.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class fp{constructor(e){this.persistence=e,this.Fr=new td((e=>Dh(e)),Mh),this.lastRemoteSnapshotVersion=ru.min(),this.highestTargetId=0,this.Mr=0,this.Or=new lp,this.targetCount=0,this.Nr=np.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),vu.resolve()}getLastRemoteSnapshotVersion(e){return vu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vu.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),vu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),vu.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new np(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,vu.resolve()}updateTargetData(e,t){return this.kn(t),vu.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,vu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),vu.waitFor(i).next((()=>r))}getTargetCount(e){return vu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return vu.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),vu.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),vu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),vu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return vu.resolve(n)}containsKey(e,t){return vu.resolve(this.Or.containsKey(t))}}class pp{constructor(e,t){this.Br={},this.overlays={},this.Lr=new _u(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new fp(this),this.indexManager=new $f,this.remoteDocumentCache=function(e){return new hp(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new Yf(t),this.Kr=new sp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ap,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new up(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Lc("MemoryPersistence","Starting transaction:",e);const r=new mp(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return vu.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class mp extends mu{constructor(e){super(),this.currentSequenceNumber=e}}class gp{constructor(e){this.persistence=e,this.Gr=new lp,this.zr=null}static jr(e){return new gp(e)}get Hr(){if(this.zr)return this.zr;throw Fc()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),vu.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),vu.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),vu.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vu.forEach(this.Hr,(n=>{const r=lu.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,ru.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return vu.or([()=>vu.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class vp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=dd(),r=dd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new vp(e,t.fromCache,n,r)}}class yp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _p{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new yp;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Nc()<=Qe.DEBUG&&Lc("QueryEngine","SDK will not create cache indexes for query:",Yh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),vu.resolve()):(Nc()<=Qe.DEBUG&&Lc("QueryEngine","Query:",Yh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Nc()<=Qe.DEBUG&&Lc("QueryEngine","The SDK decides to create cache indexes for query:",Yh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qh(t))):vu.resolve())}zi(e,t){if(Bh(t))return vu.resolve(null);let n=qh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Zh(t,null,"F"),n=qh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=dd(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Yi(t,r);return this.Zi(t,o,i,n.readTime)?this.zi(e,Zh(t,null,"F")):this.Xi(e,o,t,n)}))))})))))}ji(e,t,n,r){return Bh(t)||r.isEqual(ru.min())?vu.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const o=this.Yi(t,i);return this.Zi(t,o,n,r)?vu.resolve(null):(Nc()<=Qe.DEBUG&&Lc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yh(t)),this.Xi(e,o,t,uu(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Ru($h(e));return t.forEach(((t,r)=>{Xh(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Nc()<=Qe.DEBUG&&Lc("QueryEngine","Using full collection scan to execute query:",Yh(t)),this.Gi.getDocumentsMatchingQuery(e,t,du.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class bp{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Pu(eu),this.ns=new td((e=>Dh(e)),Mh),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new op(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function wp(e,t,n,r){return new bp(e,t,n,r)}async function xp(e,t){const n=Uc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=dd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Ep(e){const t=Uc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Sp(e,t,n){let r=dd(),i=dd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=rd();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ru.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Lc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{us:r,cs:i}}))}function Tp(e,t){const n=Uc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Cp(e,t){const n=Uc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,vu.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new Qf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function Ap(e,t,n){const r=Uc(e),i=r.ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!yu(e))throw e;Lc("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function kp(e,t,n){const r=Uc(e);let i=ru.min(),o=dd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Uc(e),i=r.ns.get(n);return void 0!==i?vu.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,qh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:ru.min(),n?o:dd()))).next((e=>(Pp(r,Jh(t),e),{documents:e,ls:o})))))}function Pp(e,t,n){let r=e.rs.get(t)||ru.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}class Op{constructor(){this.activeTargetIds=pd()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ip{constructor(){this.eo=new Op,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Op,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rp{ro(e){}shutdown(){}}class Np{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Lc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Lc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Lp=null;function Dp(){return null===Lp?Lp=268435456+Math.round(2147483648*Math.random()):Lp++,"0x"+Lp.toString(16)}const Mp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jp{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Fp="WebChannelConnection";class zp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const o=Dp(),s=this.So(e,t);Lc("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,s,a,n).then((t=>(Lc("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Mc("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}Co(e,t,n,r,i,o){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ic,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=Mp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=Dp();return new Promise(((o,s)=>{const a=new Cc;a.setWithCredentials(!0),a.listenOnce(wc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case bc.NO_ERROR:const t=a.getResponseJson();Lc(Fp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case bc.TIMEOUT:Lc(Fp,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Vc(Bc.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const n=a.getStatus();if(Lc(Fp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bc).indexOf(t)>=0?t:Bc.UNKNOWN}(t.status);s(new Vc(e,t.message))}else s(new Vc(Bc.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Vc(Bc.UNAVAILABLE,"Connection failed."));break;default:Fc()}}finally{Lc(Fp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Lc(Fp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=Dp(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yc(),s=_c(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Sc({})),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Lc(Fp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let h=!1,d=!1;const f=new jp({co:t=>{d?Lc(Fp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Lc(Fp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Lc(Fp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Tc.EventType.OPEN,(()=>{d||Lc(Fp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Tc.EventType.CLOSE,(()=>{d||(d=!0,Lc(Fp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,Tc.EventType.ERROR,(t=>{d||(d=!0,Mc(Fp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Vc(Bc.UNAVAILABLE,"The operation could not be completed")))})),p(u,Tc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];zc(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Lc(Fp,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Xd[e];if(void 0!==t)return ef(t)}(t),i=s.message;void 0===n&&(n=Bc.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Ro(new Vc(n,i)),u.close()}else Lc(Fp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(s,xc.STAT_EVENT,(t=>{t.stat===Ec.PROXY?Lc(Fp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ec.NOPROXY&&Lc(Fp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function Up(){return"undefined"!=typeof document?document:null}function Bp(e){return new wf(e,!0)}class Vp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Lc("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Hp{constructor(e,t,n,r,i,o,s,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Vp(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Bc.RESOURCE_EXHAUSTED?(Dc(t.toString()),Dc("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Bc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Vc(Bc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Lc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Lc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qp extends Hp{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(zc(void 0===t||"string"==typeof t),Mu.fromBase64String(t||"")):(zc(void 0===t||t instanceof Uint8Array),Mu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Bc.UNKNOWN:ef(e.code);return new Vc(t,e.message||"")}(s);n=new ff(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Of(e,r.document.name),o=Cf(r.document.updateTime),s=r.document.createTime?Cf(r.document.createTime):ru.min(),a=new lh({mapValue:{fields:r.document.fields}}),l=uh.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new hf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Of(e,r.document),o=r.readTime?Cf(r.readTime):ru.min(),s=uh.newNoDocument(i,o),a=r.removedTargetIds||[];n=new hf([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Of(e,r.document),o=r.removedTargetIds||[];n=new hf([],o,i,null)}else{if(!("filter"in t))return Fc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Yd(r,i),s=e.targetId;n=new df(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ru.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ru.min():t.readTime?Cf(t.readTime):ru.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Nf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=jh(r)?{documents:jf(e,r)}:{query:Ff(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Sf(e,t.resumeToken);const r=xf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ru.min())>0){n.readTime=Ef(e,t.snapshotVersion.toTimestamp());const r=xf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Nf(this.serializer),t.removeTarget=e,this.e_(t)}}class Wp extends Hp{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(zc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(zc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Cf(e.updateTime):Cf(t);return n.isEqual(ru.min())&&(n=Cf(t)),new Id(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Cf(e.commitTime);return this.listener.I_(n,t)}return zc(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Nf(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Mf(this.serializer,e)))};this.e_(t)}}class Kp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Vc(Bc.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.wo(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vc(Bc.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Co(e,t,n,o,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Vc(Bc.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class Zp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Dc(t),this.f_=!1):Lc("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Gp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{rm(this)&&(Lc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Uc(e);t.C_.add(4),await Yp(t),t.M_.set("Unknown"),t.C_.delete(4),await Qp(t)}(this))}))})),this.M_=new Zp(n,r)}}async function Qp(e){if(rm(e))for(const t of e.v_)await t(!0)}async function Yp(e){for(const t of e.v_)await t(!1)}function Xp(e,t){const n=Uc(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),nm(n)?tm(n):wm(n).Ho()&&$p(n,t))}function Jp(e,t){const n=Uc(e),r=wm(n);n.D_.delete(t),r.Ho()&&em(n,t),0===n.D_.size&&(r.Ho()?r.Zo():rm(n)&&n.M_.set("Unknown"))}function $p(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ru.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}wm(e).u_(t)}function em(e,t){e.x_.Oe(t),wm(e).c_(t)}function tm(e){e.x_=new mf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),wm(e).start(),e.M_.g_()}function nm(e){return rm(e)&&!wm(e).jo()&&e.D_.size>0}function rm(e){return 0===Uc(e).C_.size}function im(e){e.x_=void 0}async function om(e){e.D_.forEach(((t,n)=>{$p(e,t)}))}async function sm(e,t){im(e),nm(e)?(e.M_.w_(t),tm(e)):e.M_.set("Unknown")}async function am(e,t,n){if(e.M_.set("Online"),t instanceof ff&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Lc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await lm(e,n)}else if(t instanceof hf?e.x_.$e(t):t instanceof df?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(ru.min()))try{const t=await Ep(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(Mu.EMPTY_BYTE_STRING,r.snapshotVersion)),em(e,t);const i=new Qf(r.target,t,n,r.sequenceNumber);$p(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Lc("RemoteStore","Failed to raise snapshot:",t),await lm(e,t)}}async function lm(e,t,n){if(!yu(t))throw t;e.C_.add(1),await Yp(e),e.M_.set("Offline"),n||(n=()=>Ep(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Lc("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Qp(e)}))}function cm(e,t){return t().catch((n=>lm(e,n,t)))}async function um(e){const t=Uc(e),n=xm(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;hm(t);)try{const e=await Tp(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,dm(t,e)}catch(e){await lm(t,e)}fm(t)&&pm(t)}function hm(e){return rm(e)&&e.b_.length<10}function dm(e,t){e.b_.push(t);const n=xm(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function fm(e){return rm(e)&&!xm(e).jo()&&e.b_.length>0}function pm(e){xm(e).start()}async function mm(e){xm(e).E_()}async function gm(e){const t=xm(e);for(const n of e.b_)t.P_(n.mutations)}async function vm(e,t,n){const r=e.b_.shift(),i=Gd.from(r,t,n);await cm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await um(e)}async function ym(e,t){t&&xm(e).h_&&await async function(e,t){if(function(e){return $d(e)&&e!==Bc.ABORTED}(t.code)){const n=e.b_.shift();xm(e).Yo(),await cm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await um(e)}}(e,t),fm(e)&&pm(e)}async function _m(e,t){const n=Uc(e);n.asyncQueue.verifyOperationInProgress(),Lc("RemoteStore","RemoteStore received new credentials");const r=rm(n);n.C_.add(3),await Yp(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Qp(n)}async function bm(e,t){const n=Uc(e);t?(n.C_.delete(2),await Qp(n)):t||(n.C_.add(2),await Yp(n),n.M_.set("Unknown"))}function wm(e){return e.O_||(e.O_=function(e,t,n){const r=Uc(e);return r.A_(),new qp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:om.bind(null,e),Io:sm.bind(null,e),a_:am.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),nm(e)?tm(e):e.M_.set("Unknown")):(await e.O_.stop(),im(e))}))),e.O_}function xm(e){return e.N_||(e.N_=function(e,t,n){const r=Uc(e);return r.A_(),new Wp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:mm.bind(null,e),Io:ym.bind(null,e),T_:gm.bind(null,e),I_:vm.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await um(e)):(await e.N_.stop(),e.b_.length>0&&(Lc("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class Em{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Em(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vc(Bc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sm(e,t){if(Dc("AsyncQueue","".concat(t,": ").concat(e)),yu(e))return new Vc(Bc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Tm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||lu.comparator(t.key,n.key):(e,t)=>lu.comparator(e.key,t.key),this.keyedMap=od(),this.sortedSet=new Pu(this.comparator)}static emptySet(e){return new Tm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Tm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Cm{constructor(){this.B_=new Pu(lu.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Fc():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Am{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Am(e,t,Tm.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class km{constructor(){this.k_=void 0,this.listeners=[]}}class Pm{constructor(){this.queries=new td((e=>Qh(e)),Gh),this.onlineState="Unknown",this.q_=new Set}}async function Om(e,t){const n=Uc(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new km),i)try{o.k_=await n.onListen(r)}catch(e){const n=Sm(e,"Initialization of query '".concat(Yh(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Q_(n.onlineState),o.k_&&t.K_(o.k_)&&Lm(n)}async function Im(e,t){const n=Uc(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Rm(e,t){const n=Uc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&Lm(n)}function Nm(e,t,n){const r=Uc(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function Lm(e){e.q_.forEach((e=>{e.next()}))}class Dm{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Am(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=Am.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Mm{constructor(e){this.key=e}}class jm{constructor(e){this.key=e}}class Fm{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=dd(),this.mutatedKeys=dd(),this._a=$h(e),this.aa=new Tm(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new Cm,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Xh(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:o,la:n,Zi:s,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const i=e.la.L_();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fc()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n);const o=t?this.Ia():[],s=0===this.oa.size&&this.current?1:0,a=s!==this.sa;return this.sa=s,0!==i.length||a?{snapshot:new Am(this.query,e.aa,r,i,e.mutatedKeys,0===s,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Cm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=dd(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new jm(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Mm(n))})),t}da(e){this.ia=e.ls,this.oa=dd();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Am.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class zm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Um{constructor(e){this.key=e,this.Ra=!1}}class Bm{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new td((e=>Qh(e)),Gh),this.fa=new Map,this.ga=new Set,this.pa=new Pu(lu.comparator),this.ya=new Map,this.wa=new lp,this.Sa={},this.ba=new Map,this.Da=np.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Vm(e,t){const n=sg(e);let r,i;const o=n.ma.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const e=await Cp(n.localStore,qh(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Hm(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&Xp(n.remoteStore,e)}return i}async function Hm(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await kp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o);return eg(e,t.targetId,s.Ta),s.snapshot}(e,t,n,r);const o=await kp(e.localStore,t,!0),s=new Fm(t,o.ls),a=s.ca(o.documents),l=uf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);eg(e,n,c.Ta);const u=new zm(t,n,s);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function qm(e,t){const n=Uc(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!Gh(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ap(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Jp(n.remoteStore,r.targetId),Jm(n,r.targetId)})).catch(gu)):(Jm(n,r.targetId),await Ap(n.localStore,r.targetId,!0))}async function Wm(e,t){const n=Uc(e);try{const e=await function(e,t){const n=Uc(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Mu.EMPTY_BYTE_STRING,ru.min()).withLastLimboFreeSnapshotVersion(ru.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.qr.updateTargetData(e,c))}));let a=rd(),l=dd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Sp(e,o,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(ru.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return vu.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(zc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?zc(r.Ra):e.removedDocuments.size>0&&(zc(r.Ra),r.Ra=!1))})),await rg(n,e,t)}catch(e){await gu(e)}}function Km(e,t,n){const r=Uc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Uc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&Lm(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Zm(e,t,n){const r=Uc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),o=i&&i.key;if(o){let e=new Pu(lu.comparator);e=e.insert(o,uh.newNoDocument(o,ru.min()));const n=dd().add(o),i=new cf(ru.min(),new Map,new Pu(eu),e,n);await Wm(r,i),r.pa=r.pa.remove(o),r.ya.delete(t),ng(r)}else await Ap(r.localStore,t,!1).then((()=>Jm(r,t,n))).catch(gu)}async function Gm(e,t){const n=Uc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Uc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=vu.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);zc(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=dd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Xm(n,r,null),Ym(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rg(n,e)}catch(e){await gu(e)}}async function Qm(e,t,n){const r=Uc(e);try{const e=await function(e,t){const n=Uc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(zc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Xm(r,t,n),Ym(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await rg(r,e)}catch(n){await gu(n)}}function Ym(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function Xm(e,t,n){const r=Uc(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function Jm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||$m(e,t)}))}function $m(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Jp(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),ng(e))}function eg(e,t,n){for(const r of n)r instanceof Mm?(e.wa.addReference(r.key,t),tg(e,r)):r instanceof jm?(Lc("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||$m(e,r.key)):Fc()}function tg(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Lc("SyncEngine","New document in limbo: "+n),e.ga.add(r),ng(e))}function ng(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new lu(ou.fromString(t)),r=e.Da.next();e.ya.set(r,new Um(n)),e.pa=e.pa.insert(n,r),Xp(e.remoteStore,new Qf(qh(Uh(n.path)),r,"TargetPurposeLimboResolution",_u._e))}}async function rg(e,t,n){const r=Uc(e),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{s.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=vp.Qi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Va.a_(i),await async function(e,t){const n=Uc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>vu.forEach(t,(t=>vu.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>vu.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!yu(e))throw e;Lc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,o))}async function ig(e,t){const n=Uc(e);if(!n.currentUser.isEqual(t)){Lc("SyncEngine","User change. New user:",t.toKey());const e=await xp(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Vc(Bc.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await rg(n,e._s)}}function og(e,t){const n=Uc(e),r=n.ya.get(t);if(r&&r.Ra)return dd().add(r.key);{let e=dd();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}function sg(e){const t=Uc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=og.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zm.bind(null,t),t.Va.a_=Rm.bind(null,t.eventManager),t.Va.Fa=Nm.bind(null,t.eventManager),t}function ag(e){const t=Uc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qm.bind(null,t),t}class lg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return wp(this.persistence,new _p,e.initialUser,this.serializer)}createPersistence(e){return new pp(gp.jr,this.serializer)}createSharedClientState(e){return new Ip}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Km(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ig.bind(null,this.syncEngine),await bm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Pm}createDatastore(e){const t=Bp(e.databaseInfo.databaseId),n=function(e){return new zp(e)}(e.databaseInfo);return function(e,t,n,r){return new Kp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Gp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Km(this.syncEngine,e,0)),Np.D()?new Np:new Rp)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Bm(e,t,n,r,i,o);return s&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Uc(e);Lc("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await Yp(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}class ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Dc("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class hg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Oc.UNAUTHENTICATED,this.clientId=$c.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Lc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Lc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Vc(Bc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Xv){const n=Sm(Xv,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function dg(e,t){e.asyncQueue.verifyOperationInProgress(),Lc("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await xp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function fg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mg(e);Lc("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>_m(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>_m(t.remoteStore,n))),e._onlineComponents=t}function pg(e){return"FirebaseError"===e.name?e.code===Bc.FAILED_PRECONDITION||e.code===Bc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function mg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Lc("FirestoreClient","Using user provided OfflineComponentProvider");try{await dg(e,e._uninitializedComponentsProvider._offline)}catch(Xv){const n=Xv;if(!pg(n))throw n;Mc("Error using user provided cache. Falling back to memory cache: "+n),await dg(e,new lg)}}else Lc("FirestoreClient","Using default OfflineComponentProvider"),await dg(e,new lg);return e._offlineComponents}async function gg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Lc("FirestoreClient","Using user provided OnlineComponentProvider"),await fg(e,e._uninitializedComponentsProvider._online)):(Lc("FirestoreClient","Using default OnlineComponentProvider"),await fg(e,new cg))),e._onlineComponents}function vg(e){return gg(e).then((e=>e.syncEngine))}async function yg(e){const t=await gg(e),n=t.eventManager;return n.onListen=Vm.bind(null,t.syncEngine),n.onUnlisten=qm.bind(null,t.syncEngine),n}function _g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Hc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new ug({next:o=>{t.enqueueAndForget((()=>Im(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new Vc(Bc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Vc(Bc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Dm(Uh(n.path),o,{includeMetadataChanges:!0,J_:!0});return Om(e,s)}(await yg(e),e.asyncQueue,t,n,r))),r.promise}function bg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Hc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new ug({next:n=>{t.enqueueAndForget((()=>Im(e,s))),n.fromCache&&"server"===r.source?i.reject(new Vc(Bc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Dm(n,o,{includeMetadataChanges:!0,J_:!0});return Om(e,s)}(await yg(e),e.asyncQueue,t,n,r))),r.promise}function wg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const xg=new Map;function Eg(e,t,n){if(!n)throw new Vc(Bc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Sg(e){if(!lu.isDocumentKey(e))throw new Vc(Bc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Tg(e){if(lu.isDocumentKey(e))throw new Vc(Bc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Fc()}function Ag(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vc(Bc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cg(e);throw new Vc(Bc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class kg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Vc(Bc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Vc(Bc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Vc(Bc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Vc(Bc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Vc(Bc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Vc(Bc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Vc(Bc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Vc(Bc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wc;switch(e.type){case"firstParty":return new Qc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Vc(Bc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xg.get(e);t&&(Lc("ComponentProvider","Removing Datastore"),xg.delete(e),t.terminate())}(this),Promise.resolve()}}class Og{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Og(this.firestore,e,this._query)}}class Ig{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ig(this.firestore,e,this._key)}}class Rg extends Og{constructor(e,t,n){super(e,t,Uh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ig(this.firestore,null,new lu(e))}withConverter(e){return new Rg(this.firestore,e,this._path)}}function Ng(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=He(e),Eg("collection","path",t),e instanceof Pg){const n=ou.fromString(t,...r);return Tg(n),new Rg(e,null,n)}{if(!(e instanceof Ig||e instanceof Rg))throw new Vc(Bc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ou.fromString(t,...r));return Tg(n),new Rg(e.firestore,null,n)}}function Lg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=He(e),1===arguments.length&&(t=$c.newId()),Eg("doc","path",t),e instanceof Pg){const n=ou.fromString(t,...r);return Sg(n),new Ig(e,null,new lu(n))}{if(!(e instanceof Ig||e instanceof Rg))throw new Vc(Bc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ou.fromString(t,...r));return Sg(n),new Ig(e.firestore,e instanceof Rg?e.converter:null,new lu(n))}}class Dg{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Vp(this,"async_queue_retry"),this.iu=()=>{const e=Up();e&&Lc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Up();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Up();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Hc;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(Yv){if(!yu(Yv))throw Yv;Lc("AsyncQueue","Operation failed with retryable error: "+Yv)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Dc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=Em.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Fc()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function Mg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jg extends Pg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Dg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zg(this),this._firestoreClient.terminate()}}function Fg(e){return e._firestoreClient||zg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zg(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new qu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new hg(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Ug{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ug(Mu.fromBase64String(e))}catch(e){throw new Vc(Bc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Ug(Mu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Vc(Bc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new au(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vg{constructor(e){this._methodName=e}}class Hg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vc(Bc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vc(Bc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return eu(this._lat,e._lat)||eu(this._long,e._long)}}const qg=/^__.*__$/;class Wg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ud(e,this.data,t,this.fieldTransforms)}}class Kg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fc()}}class Gg{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return dv(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Zg(this.Iu)&&qg.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Qg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bp(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Gg({Iu:e,methodName:t,gu:n,path:au.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yg(e){const t=e._freezeSettings(),n=Bp(e._databaseId);return new Qg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Xg(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.pu(o.merge||o.mergeFields?2:0,t,n,i);lv("Data must be an object, but it was:",s,r);const a=sv(r,s);let l,c;if(o.merge)l=new Lu(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=cv(t,r,n);if(!s.contains(i))throw new Vc(Bc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));fv(e,i)||e.push(i)}l=new Lu(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new Wg(new lh(a),l,c)}class Jg extends Vg{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jg}}function $g(e,t,n){return new Gg({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ev extends Vg{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=$g(this,e,!0),n=this.yu.map((e=>ov(e,t))),r=new Ed(n);return new Od(e.path,r)}isEqual(e){return this===e}}class tv extends Vg{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new Ad(e.serializer,vd(e.serializer,this.wu));return new Od(e.path,t)}isEqual(e){return this===e}}function nv(e,t,n,r){const i=e.pu(1,t,n);lv("Data must be an object, but it was:",i,r);const o=[],s=lh.empty();Au(r,((e,r)=>{const a=hv(t,e,n);r=He(r);const l=i.Ru(a);if(r instanceof Jg)o.push(a);else{const e=ov(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Lu(o);return new Kg(s,a,i.fieldTransforms)}function rv(e,t,n,r,i,o){const s=e.pu(1,t,n),a=[cv(t,r,n)],l=[i];if(o.length%2!=0)throw new Vc(Bc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(cv(t,o[d])),l.push(o[d+1]);const c=[],u=lh.empty();for(let d=a.length-1;d>=0;--d)if(!fv(c,a[d])){const e=a[d];let t=l[d];t=He(t);const n=s.Ru(e);if(t instanceof Jg)c.push(e);else{const r=ov(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Lu(c);return new Kg(u,h,s.fieldTransforms)}function iv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ov(n,e.pu(r?4:3,t))}function ov(e,t){if(av(e=He(e)))return lv("Unsupported field value:",t,e),sv(e,t);if(e instanceof Vg)return function(e,t){if(!Zg(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ov(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=He(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nu.fromDate(e);return{timestampValue:Ef(t.serializer,n)}}if(e instanceof nu){const n=new nu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ef(t.serializer,n)}}if(e instanceof Hg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ug)return{bytesValue:Sf(t.serializer,e._byteString)};if(e instanceof Ig){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Af(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(Cg(e)))}(e,t)}function sv(e,t){const n={};return ku(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Au(e,((e,r)=>{const i=ov(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function av(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nu||e instanceof Hg||e instanceof Ug||e instanceof Ig||e instanceof Vg)}function lv(e,t,n){if(!av(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Cg(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function cv(e,t,n){if((t=He(t))instanceof Bg)return t._internalPath;if("string"==typeof t)return hv(e,t);throw dv("Field path arguments must be of type string or ",e,!1,void 0,n)}const uv=new RegExp("[~\\*/\\[\\]]");function hv(e,t,n){if(t.search(uv)>=0)throw dv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Bg(...t.split("."))._internalPath}catch(Eo){throw dv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dv(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Vc(Bc.INVALID_ARGUMENT,a+e+l)}function fv(e,t){return e.some((e=>e.isEqual(t)))}class pv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ig(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mv extends pv{data(){return super.data()}}function gv(e,t){return"string"==typeof t?hv(e,t):t instanceof Bg?t._internalPath:t._delegate._internalPath}function vv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Vc(Bc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yv{}class _v extends yv{}function bv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof yv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Ev)).length,n=e.filter((e=>e instanceof wv)).length;if(t>1||t>0&&n>0)throw new Vc(Bc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class wv extends _v{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new wv(e,t,n)}_apply(e){const t=this._parse(e);return Cv(e._query,t),new Og(e.firestore,e.converter,Kh(e._query,t))}_parse(e){const t=Yg(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Vc(Bc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Tv(s,o);const t=[];for(const n of s)t.push(Sv(r,e,n));a={arrayValue:{values:t}}}else a=Sv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Tv(s,o),a=iv(n,t,s,"in"===o||"not-in"===o);return vh.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function xv(e,t,n){const r=t,i=gv("where",e);return wv._create(i,r,n)}class Ev extends yv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ev(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:yh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Cv(n,i),n=Kh(n,i)}(e._query,t),new Og(e.firestore,e.converter,Kh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Sv(e,t,n){if("string"==typeof(n=He(n))){if(""===n)throw new Vc(Bc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vh(t)&&-1!==n.indexOf("/"))throw new Vc(Bc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ou.fromString(n));if(!lu.isDocumentKey(r))throw new Vc(Bc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return eh(e,new lu(r))}if(n instanceof Ig)return eh(e,n._key);throw new Vc(Bc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Cg(n),"."))}function Tv(e,t){if(!Array.isArray(e)||0===e.length)throw new Vc(Bc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Cv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Vc(Bc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Vc(Bc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Av{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Au(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Hg(zu(e.latitude),zu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Hu(e));default:return null}}convertTimestamp(e){const t=Fu(e);return new nu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ou.fromString(e);zc(Gf(n));const r=new Wu(n.get(1),n.get(3)),i=new lu(n.popFirst(5));return r.isEqual(t)||Dc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function kv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Pv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ov extends pv{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Iv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(gv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Iv extends Ov{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Rv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Iv(this._firestore,this._userDataWriter,n.key,n,new Pv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Vc(Bc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Iv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Pv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Iv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Nv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Nv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fc()}}function Lv(e){e=Ag(e,Ig);const t=Ag(e.firestore,jg);return _g(Fg(t),e._key).then((n=>Bv(t,e,n)))}class Dv extends Av{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ug(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ig(this.firestore,null,t)}}function Mv(e){e=Ag(e,Og);const t=Ag(e.firestore,jg),n=Fg(t),r=new Dv(t);return vv(e._query),bg(n,e._query).then((n=>new Rv(t,r,e,n)))}function jv(e,t,n){e=Ag(e,Ig);const r=Ag(e.firestore,jg),i=Yg(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=He(t))||t instanceof Bg?rv(i,"updateDoc",e._key,t,n,a):nv(i,"updateDoc",e._key,t),Uv(r,[o.toMutation(e._key,Rd.exists(!0))])}function Fv(e,t){const n=Ag(e.firestore,jg),r=Lg(e),i=kv(e.converter,t);return Uv(n,[Xg(Yg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rd.exists(!1))]).then((()=>r))}function zv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=He(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Mg(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Mg(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,h,d;if(e instanceof Ig)h=Ag(e.firestore,jg),d=Uh(e._key.path),u={next:t=>{n[l]&&n[l](Bv(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Ag(e,Og);h=Ag(t.firestore,jg),d=t._query;const r=new Dv(h);u={next:e=>{n[l]&&n[l](new Rv(h,r,t,e))},error:n[l+1],complete:n[l+2]},vv(e._query)}return function(e,t,n,r){const i=new ug(r),o=new Dm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Om(await yg(e),o))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>Im(await yg(e),o)))}}(Fg(h),d,c,u)}function Uv(e,t){return function(e,t){const n=new Hc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ag(e);try{const e=await function(e,t){const n=Uc(e),r=nu.now(),i=t.reduce(((e,t)=>e.add(t.key)),dd());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=rd(),l=dd();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Fd(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Bd(e.key,t,ch(t.value.mapValue),Rd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:sd(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new Pu(eu)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await rg(r,e.changes),await um(r.remoteStore)}catch(e){const t=Sm(e,"Failed to persist write");n.reject(t)}}(await vg(e),t,n))),n.promise}(Fg(e),t)}function Bv(e,t,n){const r=n.docs.get(t._key),i=new Dv(e);return new Ov(e,i,t._key,r,new Pv(n.hasPendingWrites,n.fromCache),t.converter)}function Vv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ev("arrayUnion",t)}function Hv(e){return new tv("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ic=e}(It),At(new qe("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new jg(new Zc(e.getProvider("auth-internal")),new Xc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vc(Bc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Lt(Pc,"4.3.2",e),Lt(Pc,"4.3.2","esm2017")}();const qv=Rt({apiKey:"AIzaSyCUxvttTrBFtrVnHANg8V_CxXlKN9GCYM8",authDomain:"acclpl.firebaseapp.com",projectId:"acclpl",storageBucket:"acclpl.appspot.com",messagingSenderId:"15341024536",appId:"1:15341024536:web:2a55c674cecbfb63595a6d",measurementId:"G-4N2BNBVLS3"}),Wv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt();const t=kt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=kt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Me(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;$t(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:no,persistence:[hi,Gr,Yr]}),r=ke("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>so)return;const r=null===t||void 0===t?void 0:t.token;ao!==r&&(ao=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){He(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){He(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const o=Te("auth");return o&&dr(n,"http://".concat(o)),n}(),Kv=function(e,t){const n="string"==typeof e?e:t||"(default)",r=kt("object"==typeof e?e:Nt(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Ce("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Ag(e,Pg))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Mc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Oc.MOCK_USER;else{t=Oe(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Vc(Bc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Oc(o)}e._authCredentials=new Kc(new qc(t,n))}}(r,...e)}return r}();const Zv=class{constructor(e){let{userID:t,displayName:n,email:r,joinedDate:i,observationRefs:o=[]}=e;this.userID=t,this.displayName=n,this.email=r,this.joinedDate=i,this.observationRefs=o}validate(){if(!this.userID||""===this.userID.trim())throw new Error("User ID is required");if(!this.displayName||""===this.displayName.trim())throw new Error("Display Name is required");if(!this.email||""===this.email.trim()||!this.email.includes("@"))throw new Error("Valid email is required");if(!this.joinedDate||isNaN(new Date(this.joinedDate).getTime()))throw new Error("Valid joined date is required");if(!Array.isArray(this.observationRefs))throw new Error("Observation references should be an array")}toFirebaseObject(){return{userID:this.userID,displayName:this.displayName,email:this.email,joinedDate:this.joinedDate,observationRefs:this.observationRefs}}};async function Gv(e){const t=new Zv(e);t.validate();try{const e=Lg(Kv,"users",t.userID);return await function(e,t,n){e=Ag(e,Ig);const r=Ag(e.firestore,jg),i=kv(e.converter,t,n);return Uv(r,[Xg(Yg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rd.none())])}(e,t.toFirebaseObject()),t.userID}catch(Yv){throw console.error("Error adding user document: ",Yv),Yv}}async function Qv(e){const t=Lg(Kv,"users",e),n=await Lv(t);if(n.exists())return{...n.data(),docId:n.id};throw new Error("No user found with userID: "+e)}const Yv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Xv=Object.keys,Jv=Array.isArray;function $v(e,t){return"object"!=typeof t||Xv(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||Yv.Promise||(Yv.Promise=Promise);const ey=Object.getPrototypeOf,ty={}.hasOwnProperty;function ny(e,t){return ty.call(e,t)}function ry(e,t){"function"==typeof t&&(t=t(ey(e))),("undefined"==typeof Reflect?Xv:Reflect.ownKeys)(t).forEach((n=>{oy(e,n,t[n])}))}const iy=Object.defineProperty;function oy(e,t,n,r){iy(e,t,$v(n&&ny(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function sy(e){return{from:function(t){return e.prototype=Object.create(t.prototype),oy(e.prototype,"constructor",e),{extend:ry.bind(null,e.prototype)}}}}const ay=Object.getOwnPropertyDescriptor;function ly(e,t){let n;return ay(e,t)||(n=ey(e))&&ly(n,t)}const cy=[].slice;function uy(e,t,n){return cy.call(e,t,n)}function hy(e,t){return t(e)}function dy(e){if(!e)throw new Error("Assertion Failed")}function fy(e){Yv.setImmediate?setImmediate(e):setTimeout(e,0)}function py(e,t){return e.reduce(((e,n,r)=>{var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function my(e,t){if(ny(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=my(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return void 0===a?void 0:my(a,t.substr(s+1))}}function gy(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){dy("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)gy(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?Jv(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l&&ny(e,s)||(l=e[s]={}),gy(l,a,n)}}else void 0===n?Jv(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function vy(e){var t={};for(var n in e)ny(e,n)&&(t[n]=e[n]);return t}const yy=[].concat;function _y(e){return yy.apply([],e)}const by="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(_y([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>Yv[e])),wy=by.map((e=>Yv[e]));py(by,(e=>[e,!0]));let xy=null;function Ey(e){xy="undefined"!=typeof WeakMap&&new WeakMap;const t=Sy(e);return xy=null,t}function Sy(e){if(!e||"object"!=typeof e)return e;let t=xy&&xy.get(e);if(t)return t;if(Jv(e)){t=[],xy&&xy.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Sy(e[n]))}else if(wy.indexOf(e.constructor)>=0)t=e;else{const n=ey(e);for(var i in t=n===Object.prototype?{}:Object.create(n),xy&&xy.set(e,t),e)ny(e,i)&&(t[i]=Sy(e[i]))}return t}const{toString:Ty}={};function Cy(e){return Ty.call(e).slice(8,-1)}const Ay="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",ky="symbol"==typeof Ay?function(e){var t;return null!=e&&(t=e[Ay])&&t.apply(e)}:function(){return null},Py={};function Oy(e){var t,n,r,i;if(1===arguments.length){if(Jv(e))return e.slice();if(this===Py&&"string"==typeof e)return[e];if(i=ky(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Iy="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var Ry="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ny(e,t){Ry=e,Ly=t}var Ly=()=>!0;const Dy=!new Error("").stack;function My(){if(Dy)try{throw My.arguments,new Error}catch(Yv){return Yv}return new Error}function jy(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Ly).map((e=>"\n"+e)).join("")):""}var Fy=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],zy=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Fy),Uy={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function By(e,t){this._e=My(),this.name=e,this.message=t}function Vy(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function Hy(e,t,n,r){this._e=My(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Vy(e,t)}function qy(e,t){this._e=My(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Vy(e,t)}sy(By).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+jy(this._e,2))}},toString:function(){return this.name+": "+this.message}}),sy(Hy).from(By),sy(qy).from(By);var Wy=zy.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Ky=By;var Zy=zy.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=My(),this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=Uy[t]||n,this.inner=null)}return sy(r).from(Ky),e[t]=r,e}),{});Zy.Syntax=SyntaxError,Zy.Type=TypeError,Zy.Range=RangeError;var Gy=Fy.reduce(((e,t)=>(e[t+"Error"]=Zy[t],e)),{}),Qy=zy.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Zy[t]),e)),{});function Yy(){}function Xy(e){return e}function Jy(e,t){return null==e||e===Xy?t:function(n){return t(e(n))}}function $y(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function e_(e,t){return e===Yy?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?$y(r,this.onsuccess):r),i&&(this.onerror=this.onerror?$y(i,this.onerror):i),void 0!==o?o:n}}function t_(e,t){return e===Yy?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?$y(n,this.onsuccess):n),r&&(this.onerror=this.onerror?$y(r,this.onerror):r)}}function n_(e,t){return e===Yy?t:function(n){var r=e.apply(this,arguments);$v(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?$y(i,this.onsuccess):i),o&&(this.onerror=this.onerror?$y(o,this.onerror):o),void 0===r?void 0===s?void 0:s:$v(r,s)}}function r_(e,t){return e===Yy?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function i_(e,t){return e===Yy?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}Qy.ModifyError=Hy,Qy.DexieError=By,Qy.BulkError=qy;var o_={};const s_=100,[a_,l_,c_]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,ey(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ey(t),e]})(),u_=l_&&l_.then,h_=a_&&a_.constructor,d_=!!c_;var f_=!1,p_=c_?()=>{c_.then(j_)}:Yv.setImmediate?setImmediate.bind(null,j_):Yv.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{j_(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(j_,0)},m_=function(e,t){S_.push([e,t]),v_&&(p_(),v_=!1)},g_=!0,v_=!0,y_=[],__=[],b_=null,w_=Xy,x_={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:lb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{lb(e[0],e[1])}catch(e){}}))}},E_=x_,S_=[],T_=0,C_=[];function A_(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Yy,this._lib=!1;var t=this._PSD=E_;if(Ry&&(this._stackHolder=My(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==o_)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&I_(this,this._value))}this._state=null,this._value=null,++t.ref,O_(this,e)}const k_={get:function(){var e=E_,t=Z_;function n(n,r){var i=!e.global&&(e!==E_||t!==Z_);const o=i&&!X_();var s=new A_(((t,s)=>{N_(this,new P_(ob(n,e,i,o),ob(r,e,i,o),t,s,e))}));return Ry&&M_(s,this),s}return n.prototype=o_,n},set:function(e){oy(this,"then",e&&e.prototype===o_?k_:{get:function(){return e},set:k_.set})}};function P_(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function O_(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&F_();t&&"function"==typeof t.then?O_(e,((e,n)=>{t instanceof A_?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,R_(e)),n&&z_()}}),I_.bind(null,e))}catch(t){I_(e,t)}}function I_(e,t){if(__.push(t),null===e._state){var n=e._lib&&F_();t=w_(t),e._state=!1,e._value=t,Ry&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=ly(t,"stack");t._promise=e,oy(t,"stack",{get:()=>f_?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){y_.some((t=>t._value===e._value))||y_.push(e)}(e),R_(e),n&&z_()}}function R_(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)N_(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===T_&&(++T_,m_((()=>{0==--T_&&U_()}),[]))}function N_(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++T_,m_(L_,[n,e,t])}else e._listeners.push(t)}function L_(e,t,n){try{b_=t;var r,i=t._value;t._state?r=e(i):(__.length&&(__=[]),r=e(i),-1===__.indexOf(i)&&function(e){for(var t=y_.length;t;)if(y_[--t]._value===e._value)return void y_.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{b_=null,0==--T_&&U_(),--n.psd.ref||n.psd.finalize()}}function D_(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,s=e._value;null!=s?(i=s.name||"Error",o=s.message||s,r=jy(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return Ry&&((r=jy(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&D_(e._prev,t,n)),t}function M_(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function j_(){F_()&&z_()}function F_(){var e=g_;return g_=!1,v_=!1,e}function z_(){var e,t,n;do{for(;S_.length>0;)for(e=S_,S_=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(S_.length>0);g_=!0,v_=!0}function U_(){var e=y_;y_=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=C_.slice(0),n=t.length;n;)t[--n]()}function B_(e){return new A_(o_,!1,e)}function V_(e,t){var n=E_;return function(){var r=F_(),i=E_;try{return tb(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{tb(i,!1),r&&z_()}}}ry(A_.prototype,{then:k_,_then:function(e,t){N_(this,new P_(null,null,e,t,E_))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):B_(e))):this.then(null,(e=>e&&e.name===t?n(e):B_(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),B_(t))))},stack:{get:function(){if(this._stack)return this._stack;try{f_=!0;var e=D_(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{f_=!1}}},timeout:function(e,t){return e<1/0?new A_(((n,r)=>{var i=setTimeout((()=>r(new Zy.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&oy(A_.prototype,Symbol.toStringTag,"Dexie.Promise"),x_.env=nb(),ry(A_,{all:function(){var e=Oy.apply(null,arguments).map(J_);return new A_((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((i,o)=>A_.resolve(i).then((n=>{e[o]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof A_)return e;if(e&&"function"==typeof e.then)return new A_(((t,n)=>{e.then(t,n)}));var t=new A_(o_,!0,e);return M_(t,b_),t},reject:B_,race:function(){var e=Oy.apply(null,arguments).map(J_);return new A_(((t,n)=>{e.map((e=>A_.resolve(e).then(t,n)))}))},PSD:{get:()=>E_,set:e=>E_=e},totalEchoes:{get:()=>Z_},newPSD:Q_,usePSD:rb,scheduler:{get:()=>m_,set:e=>{m_=e}},rejectionMapper:{get:()=>w_,set:e=>{w_=e}},follow:(e,t)=>new A_(((n,r)=>Q_(((t,n)=>{var r=E_;r.unhandleds=[],r.onunhandled=n,r.finalize=$y((function(){!function(e){C_.push((function t(){e(),C_.splice(C_.indexOf(t),1)})),++T_,m_((()=>{0==--T_&&U_()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),h_&&(h_.allSettled&&oy(A_,"allSettled",(function(){const e=Oy.apply(null,arguments).map(J_);return new A_((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,i)=>A_.resolve(e).then((e=>r[i]={status:"fulfilled",value:e}),(e=>r[i]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),h_.any&&"undefined"!=typeof AggregateError&&oy(A_,"any",(function(){const e=Oy.apply(null,arguments).map(J_);return new A_(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach(((e,o)=>A_.resolve(e).then((e=>t(e)),(e=>{i[o]=e,--r||n(new AggregateError(i))}))))}))})));const H_={awaits:0,echoes:0,id:0};var q_=0,W_=[],K_=0,Z_=0,G_=0;function Q_(e,t,n,r){var i=E_,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++G_;var s=x_.env;o.env=d_?{Promise:A_,PromiseProp:{value:A_,configurable:!0,writable:!0},all:A_.all,race:A_.race,allSettled:A_.allSettled,any:A_.any,resolve:A_.resolve,reject:A_.reject,nthen:sb(s.nthen,o),gthen:sb(s.gthen,o)}:{},t&&$v(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=rb(o,e,n,r);return 0===o.ref&&o.finalize(),a}function Y_(){return H_.id||(H_.id=++q_),++H_.awaits,H_.echoes+=s_,H_.id}function X_(){return!!H_.awaits&&(0==--H_.awaits&&(H_.id=0),H_.echoes=H_.awaits*s_,!0)}function J_(e){return H_.echoes&&e&&e.constructor===h_?(Y_(),e.then((e=>(X_(),e)),(e=>(X_(),cb(e))))):e}function $_(e){++Z_,H_.echoes&&0!=--H_.echoes||(H_.echoes=H_.id=0),W_.push(E_),tb(e,!0)}function eb(){var e=W_[W_.length-1];W_.pop(),tb(e,!1)}function tb(e,t){var n=E_;if((t?!H_.echoes||K_++&&e===E_:!K_||--K_&&e===E_)||ib(t?$_.bind(null,e):eb),e!==E_&&(E_=e,n===x_&&(x_.env=nb()),d_)){var r=x_.env.Promise,i=e.env;l_.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Yv,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function nb(){var e=Yv.Promise;return d_?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Yv,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:l_.then,gthen:e.prototype.then}:{}}function rb(e,t,n,r,i){var o=E_;try{return tb(e,!0),t(n,r,i)}finally{tb(o,!1)}}function ib(e){u_.call(a_,e)}function ob(e,t,n,r){return"function"!=typeof e?e:function(){var i=E_;n&&Y_(),tb(t,!0);try{return e.apply(this,arguments)}finally{tb(i,!1),r&&ib(X_)}}}function sb(e,t){return function(n,r){return e.call(this,ob(n,t),ob(r,t))}}-1===(""+u_).indexOf("[native code]")&&(Y_=X_=Yy);const ab="unhandledrejection";function lb(e,t){var n;try{n=t.onuncatched(e)}catch(Yv){}if(!1!==n)try{var r,i={promise:t,reason:e};if(Yv.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ab,!0,!0),$v(r,i)):Yv.CustomEvent&&$v(r=new CustomEvent(ab,{detail:i}),i),r&&Yv.dispatchEvent&&(dispatchEvent(r),!Yv.PromiseRejectionEvent&&Yv.onunhandledrejection))try{Yv.onunhandledrejection(r)}catch(Yv){}Ry&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: ".concat(e.stack||e))}catch(Yv){}}var cb=A_.reject;function ub(e,t,n,r){if(e.idbdb&&(e._state.openComplete||E_.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===Wy.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>ub(e,t,n,r)))):cb(i)}return i._promise(t,((e,t)=>Q_((()=>(E_.trans=i,r(e,t,i)))))).then((e=>i._completion.then((()=>e))))}if(e._state.openComplete)return cb(new Zy.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return cb(new Zy.DatabaseClosed);e.open().catch(Yy)}return e._state.dbReadyPromise.then((()=>ub(e,t,n,r)))}const hb="3.2.4",db=String.fromCharCode(65535),fb=-1/0,pb="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mb="String expected.",gb=[],vb="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),yb=vb,_b=vb,bb=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),wb="__dbnames",xb="readonly",Eb="readwrite";function Sb(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Tb={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Cb(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=Ey(t))[e],t)}class Ab{_trans(e,t,n){const r=this._tx||E_.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new Zy.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}const s=F_();try{return r&&r.db===this.db?r===E_.trans?r._promise(e,o,n):Q_((()=>r._promise(e,o,n)),{trans:r,transless:E_.transless||E_}):ub(this.db,e,[this.name],o)}finally{s&&z_()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(Jv(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));const t=Xv(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==db)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&Ry&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit of a compound index [").concat(t.join("+"),"]"));const{idxByName:r}=this.schema,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}const[s,a]=t.reduce(((t,n)=>{let[i,s]=t;const a=r[n],l=e[n];return[i||a,i||!a?Sb(s,a&&a.multi?e=>{const t=my(e,n);return Jv(t)&&t.some((e=>o(l,e)))}:e=>o(l,my(e,n))):s]}),[null,null]);return s?this.where(s.name).equals(e[s.keyPath]).filter(a):n?this.filter(a):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Jv(e)?"[".concat(e.join("+"),"]"):e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(ny(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){$v(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=Cb(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]}))).then((e=>e.numFailures?A_.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{gy(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||Jv(e))return this.where(":id").equals(e).modify(t);{const n=my(e,this.schema.primKey.keyPath);if(void 0===n)return cb(new Zy.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?Xv(t).forEach((n=>{gy(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=Cb(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null}))).then((e=>e.numFailures?A_.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{gy(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?A_.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:Tb}))).then((e=>e.numFailures?A_.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new Zy.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new Zy.InvalidArgument("Arguments objects and keys must have the same length");const s=e.length;let a=o&&n?e.map(Cb(o)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:a,wantResults:i}).then((e=>{let{numFailures:t,results:n,lastResult:r,failures:o}=e;if(0===t)return i?n:r;throw new qy("".concat(this.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),o)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new Zy.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new Zy.InvalidArgument("Arguments objects and keys must have the same length");const s=e.length;let a=o&&n?e.map(Cb(o)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:a,wantResults:i}).then((e=>{let{numFailures:t,results:n,lastResult:r,failures:o}=e;if(0===t)return i?n:r;throw new qy("".concat(this.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),o)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((e=>{let{numFailures:n,lastResult:r,failures:i}=e;if(0===n)return r;throw new qy("".concat(this.name,".bulkDelete(): ").concat(n," of ").concat(t," operations failed"),i)}))}}function kb(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"!=typeof e){var s;r||(r=r_),i||(i=Yy);var a={subscribers:[],fire:i,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,i)}};return t[e]=n[e]=a,a}Xv(s=e).forEach((function(e){var t=s[e];if(Jv(t))o(e,s[e][0],s[e][1]);else{if("asap"!==t)throw new Zy.InvalidArgument("Invalid event config");var n=o(e,Xy,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){fy((function(){e.apply(null,t)}))}))}))}}))}}function Pb(e,t){return sy(t).from({prototype:e}),t}function Ob(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ib(e,t){e.filter=Sb(e.filter,t)}function Rb(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Sb(r(),t()):t,e.justLimit=n&&!r}function Nb(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new Zy.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Lb(e,t,n){const r=Nb(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Db(e,t,n,r){const i=e.replayFilter?Sb(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},s=(e,n,r)=>{if(!i||i(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var s=n.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),ny(o,a)||(o[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(s,n),Mb(Lb(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return Mb(Lb(e,r,n),Sb(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Mb(e,t,n,r){var i=V_(r?(e,t,i)=>n(r(e),t,i):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=Yy}),(t=>{e.fail(t),n=Yy}))||i(e.value,e,(e=>n=e)),n()}))}))}function jb(e,t){try{const n=Fb(e),r=Fb(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(zb(e),zb(t));case"Array":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let o=0;o<i;++o){const n=jb(e[o],t[o]);if(0!==n)return n}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Fb(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=Cy(e);return"ArrayBuffer"===n?"binary":n}function zb(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Ub{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,cb.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,cb.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Sb(t.algorithm,e)}_iterate(e,t){return Db(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&$v(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Db(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Ob(t,!0))return n.count({trans:e,query:{index:Nb(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Db(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-s:n>r?s:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Ob(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Nb(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((e=>{let{result:t}=e;return n?t.map(n):t}))}{const n=[];return Db(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Ob(t)?Rb(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):Rb(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Rb(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Ib(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Ib(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Sb(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Ob(t,!0)&&t.limit>0)return this._read((e=>{var n=Nb(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((e=>{let{result:t}=e;return t})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ib(this._ctx,(function(e){var t=e.primaryKey.toString(),r=ny(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var i=Xv(e),o=i.length;r=function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s];my(t,s)!==a&&(gy(t,s,a),n=!0)}return n}}const s=t.table.core,{outbound:a,extractKey:l}=s.schema.primaryKey,c=this.db._options.modifyChunkSize||200,u=[];let h=0;const d=[],f=(e,t)=>{const{failures:n,numFailures:r}=t;h+=e-r;for(let i of Xv(n))u.push(n[i])};return this.clone().primaryKeys().then((i=>{const o=u=>{const h=Math.min(c,i.length-u);return s.getMany({trans:n,keys:i.slice(u,u+h),cache:"immutable"}).then((d=>{const p=[],m=[],g=a?[]:null,v=[];for(let e=0;e<h;++e){const t=d[e],n={value:Ey(t),primKey:i[u+e]};!1!==r.call(n,n.value,n)&&(null==n.value?v.push(i[u+e]):a||0===jb(l(t),l(n.value))?(m.push(n.value),a&&g.push(i[u+e])):(v.push(i[u+e]),p.push(n.value)))}const y=Ob(t)&&t.limit===1/0&&("function"!=typeof e||e===Bb)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&s.mutate({trans:n,type:"add",values:p}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);f(p.length,e)}))).then((()=>(m.length>0||y&&"object"==typeof e)&&s.mutate({trans:n,type:"put",keys:g,values:m,criteria:y,changeSpec:"function"!=typeof e&&e}).then((e=>f(m.length,e))))).then((()=>(v.length>0||y&&e===Bb)&&s.mutate({trans:n,type:"delete",keys:v,criteria:y}).then((e=>f(v.length,e))))).then((()=>i.length>u+h&&o(u+c)))}))};return o(0).then((()=>{if(u.length>0)throw new Hy("Error modifying one or more objects",u,h,d);return i.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Ob(e)&&(e.isPrimKey&&!_b||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((e=>{let{failures:n,lastResult:r,results:i,numFailures:o}=e;if(o)throw new Hy("Could not delete some values",Object.keys(n).map((e=>n[e])),t-o);return t-o}))))})):this.modify(Bb)}}const Bb=(e,t)=>t.value=null;function Vb(e,t){return e<t?-1:e===t?0:1}function Hb(e,t){return e>t?-1:e===t?0:1}function qb(e,t,n){var r=e instanceof Yb?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Wb(e){return new e.Collection(e,(()=>Qb(""))).limit(0)}function Kb(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,l=0;l<s;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[l],c)<0&&(a=l)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Zb(e,t,n,r){var i,o,s,a,l,c,u,h=n.length;if(!n.every((e=>"string"==typeof e)))return qb(e,mb);function d(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),o=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),s="next"===e?Vb:Hb;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}d("next");var f=new e.Collection(e,(()=>Gb(a[0],l[h-1]+r)));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var d=o(i);if(t(d,l,p))return!0;for(var f=null,m=p;m<h;++m){var g=Kb(i,d,a[m],l[m],s,c);null===g&&null===f?p=m+1:(null===f||s(f,g)>0)&&(f=g)}return n(null!==f?function(){e.continue(f+u)}:r),!1})),f}function Gb(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Qb(e){return{type:1,lower:e,upper:e}}class Yb{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Wb(this):new this.Collection(this,(()=>Gb(e,t,!n,!r)))}catch(e){return qb(this,pb)}}equals(e){return null==e?qb(this,pb):new this.Collection(this,(()=>Qb(e)))}above(e){return null==e?qb(this,pb):new this.Collection(this,(()=>Gb(e,void 0,!0)))}aboveOrEqual(e){return null==e?qb(this,pb):new this.Collection(this,(()=>Gb(e,void 0,!1)))}below(e){return null==e?qb(this,pb):new this.Collection(this,(()=>Gb(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?qb(this,pb):new this.Collection(this,(()=>Gb(void 0,e)))}startsWith(e){return"string"!=typeof e?qb(this,mb):this.between(e,e+db,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Zb(this,((e,t)=>0===e.indexOf(t[0])),[e],db)}equalsIgnoreCase(e){return Zb(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=Oy.apply(Py,arguments);return 0===e.length?Wb(this):Zb(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=Oy.apply(Py,arguments);return 0===e.length?Wb(this):Zb(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,db)}anyOf(){const e=Oy.apply(Py,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return qb(this,pb)}if(0===e.length)return Wb(this);const n=new this.Collection(this,(()=>Gb(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,i,o)=>{const s=n.key;for(;t(s,e[r])>0;)if(++r,r===e.length)return i(o),!1;return 0===t(s,e[r])||(i((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[fb,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Oy.apply(Py,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return qb(this,pb)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[fb,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,i=this._descending,o=this._min,s=this._max;if(0===e.length)return Wb(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return qb(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Zy.InvalidArgument);const a=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;let c,u=r;function h(e,t){return u(e[0],t[0])}try{c=e.reduce((function(e,t){let r=0,i=e.length;for(;r<i;++r){const i=e[r];if(n(t[0],i[1])<0&&n(t[1],i[0])>0){i[0]=o(i[0],t[0]),i[1]=s(i[1],t[1]);break}}return r===i&&e.push(t),e}),[]),c.sort(h)}catch(e){return qb(this,pb)}let d=0;const f=l?e=>r(e,c[d][1])>0:e=>r(e,c[d][1])>=0,p=a?e=>i(e,c[d][0])>0:e=>i(e,c[d][0])>=0;let m=f;const g=new this.Collection(this,(()=>Gb(c[0][0],c[c.length-1][1],!a,!l)));return g._ondirectionchange=e=>{"next"===e?(m=f,u=r):(m=p,u=i),c.sort(h)},g._addAlgorithm(((e,t,n)=>{for(var i=e.key;m(i);)if(++d,d===c.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(i)||(0===this._cmp(i,c[d][1])||0===this._cmp(i,c[d][0])||t((()=>{u===r?e.continue(c[d][0]):e.continue(c[d][1])})),!1)})),g}startsWithAnyOf(){const e=Oy.apply(Py,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Wb(this):this.inAnyRange(e.map((e=>[e,e+db]))):qb(this,"startsWithAnyOf() only works with strings")}}function Xb(e){return V_((function(t){return Jb(t),e(t.target.error),!1}))}function Jb(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const $b="storagemutated",ew="x-storagemutated-1",tw=kb(null,$b);class nw{_lock(){return dy(!E_.global),++this._reculock,1!==this._reculock||E_.global||(E_.lockOwnerFor=this),this}_unlock(){if(dy(!E_.global),0==--this._reculock)for(E_.global||(E_.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{rb(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&E_.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(dy(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new Zy.DatabaseClosed(n);case"MissingAPIError":throw new Zy.MissingAPI(n.message,n);default:throw new Zy.OpenFailed(n)}if(!this.active)throw new Zy.TransactionInactive;return dy(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=V_((t=>{Jb(t),this._reject(e.error)})),e.onabort=V_((t=>{Jb(t),this.active&&this._reject(new Zy.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=V_((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&tw.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return cb(new Zy.ReadOnly("Transaction is readonly"));if(!this.active)return cb(new Zy.TransactionInactive);if(this._locked())return new A_(((r,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,i)},E_])}));if(n)return Q_((()=>{var e=new A_(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new A_(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=A_.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new A_(((e,r)=>{n.then((n=>t._waitingQueue.push(V_(e.bind(null,n)))),(e=>t._waitingQueue.push(V_(r.bind(null,e))))).finally((()=>{t._waitingFor===i&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Zy.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(ny(t,e))return t[e];const n=this.schema[e];if(!n)throw new Zy.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function rw(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+iw(t)}}function iw(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function ow(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:py(n,(e=>[e.name,e]))}}let sw=e=>{try{return e.only([[]]),sw=()=>[[]],[[]]}catch(e){return sw=()=>db,db}};function aw(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>my(t,e)}(e):t=>my(t,e)}function lw(e){return[].slice.call(e)}let cw=0;function uw(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function hw(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:i,upperOpen:o}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}const{schema:i,hasGetAll:o}=function(e,t){const n=lw(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=Jv(t),i=null==t,o={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:aw(t)},indexes:lw(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:i}=e,s={name:t,compound:Jv(i),keyPath:i,unique:n,multiEntry:r,extractKey:aw(i)};return o[uw(i)]=s,s})),getIndexByKeyPath:e=>o[uw(e)]};return o[":id"]=s.primaryKey,null!=t&&(o[uw(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function(e){let{trans:n,type:i,keys:o,values:s,range:a}=e;return new Promise(((e,l)=>{e=V_(e);const c=n.objectStore(t),u=null==c.keyPath,h="put"===i||"add"===i;if(!h&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);const{length:d}=o||s||{length:1};if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],m=[];let g=0;const v=e=>{++g,Jb(e)};if("deleteRange"===i){if(4===a.type)return e({numFailures:g,failures:m,results:[],lastResult:void 0});3===a.type?p.push(f=c.clear()):p.push(f=c.delete(r(a)))}else{const[e,t]=h?u?[s,o]:[s,null]:[o,null];if(h)for(let n=0;n<d;++n)p.push(f=t&&void 0!==t[n]?c[i](e[n],t[n]):c[i](e[n])),f.onerror=v;else for(let n=0;n<d;++n)p.push(f=c[i](e[n])),f.onerror=v}const y=t=>{const n=t.target.result;p.forEach(((e,t)=>null!=e.error&&(m[t]=e.error))),e({numFailures:g,failures:m,results:"delete"===i?o:p.map((e=>e.result)),lastResult:n})};f.onerror=e=>{v(e),y(e)},f.onsuccess=y}))},getMany:e=>{let{trans:n,keys:r}=e;return new Promise(((e,i)=>{e=V_(e);const o=n.objectStore(t),s=r.length,a=new Array(s);let l,c=0,u=0;const h=t=>{const n=t.target;a[n._pos]=n.result,++u===c&&e(a)},d=Xb(i);for(let t=0;t<s;++t)null!=r[t]&&(l=o.get(r[t]),l._pos=t,l.onsuccess=h,l.onerror=d,++c);0===c&&e(a)}))},get:e=>{let{trans:n,key:r}=e;return new Promise(((e,i)=>{e=V_(e);const o=n.objectStore(t).get(r);o.onsuccess=t=>e(t.target.result),o.onerror=Xb(i)}))},query:function(e){return n=>new Promise(((i,o)=>{i=V_(i);const{trans:s,values:a,limit:l,query:c}=n,u=l===1/0?void 0:l,{index:h,range:d}=c,f=s.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),m=r(d);if(0===l)return i({result:[]});if(e){const e=a?p.getAll(m,u):p.getAllKeys(m,u);e.onsuccess=e=>i({result:e.target.result}),e.onerror=Xb(o)}else{let e=0;const t=a||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),n=[];t.onsuccess=r=>{const o=t.result;return o?(n.push(a?o.value:o.primaryKey),++e===l?i({result:n}):void o.continue()):i({result:n})},t.onerror=Xb(o)}}))}(o),openCursor:function(e){let{trans:n,values:i,query:o,reverse:s,unique:a}=e;return new Promise(((e,l)=>{e=V_(e);const{index:c,range:u}=o,h=n.objectStore(t),d=c.isPrimaryKey?h:h.index(c.name),f=s?a?"prevunique":"prev":a?"nextunique":"next",p=i||!("openKeyCursor"in d)?d.openCursor(r(u),f):d.openKeyCursor(r(u),f);p.onerror=Xb(l),p.onsuccess=V_((t=>{const r=p.result;if(!r)return void e(null);r.___id=++cw,r.done=!1;const i=r.continue.bind(r);let o=r.continuePrimaryKey;o&&(o=o.bind(r));const s=r.advance.bind(r),a=()=>{throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=()=>{throw new Error("Cursor not started")},r.fail=V_(l),r.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},r.start=e=>{const t=new Promise(((e,t)=>{e=V_(e),p.onerror=Xb(t),r.fail=t,r.stop=t=>{r.stop=r.continue=r.continuePrimaryKey=r.advance=a,e(t)}})),n=()=>{if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=()=>{throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=V_((e=>{p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=s,n(),t},e(r)}),l)}))},count(e){let{query:n,trans:i}=e;const{index:o,range:s}=n;return new Promise(((e,n)=>{const a=i.objectStore(t),l=o.isPrimaryKey?a:a.index(o.name),c=r(s),u=c?l.count(c):l.count();u.onsuccess=V_((t=>e(t.target.result))),u.onerror=Xb(n)}))}}}(e))),a={};return s.forEach((e=>a[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!a[e])throw new Error("Table '".concat(e,"' not found"));return a[e]},MIN_KEY:-1/0,MAX_KEY:sw(t),schema:i}}function dw(e,t){let{_novip:n}=e;const r=t.db,i=function(e,t,n,r){let{IDBKeyRange:i,indexedDB:o}=n;const s=function(e,t){return t.reduce(((e,t)=>{let{create:n}=t;return{...e,...n(e)}}),e)}(hw(t,i,r),e.dbcore);return{dbcore:s}}(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((e=>{const t=e.name;n.core.schema.tables.some((e=>e.name===t))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function fw(e,t,n,r){let{_novip:i}=e;n.forEach((e=>{const n=r[e];t.forEach((t=>{const r=ly(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?oy(t,e,{get(){return this.table(e)},set(t){iy(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function pw(e,t){let{_novip:n}=e;t.forEach((e=>{for(let t in e)e[t]instanceof n.Table&&delete e[t]}))}function mw(e,t){return e._cfg.version-t._cfg.version}function gw(e,t,n,r){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),a=E_.transless||E_;Q_((()=>{E_.trans=o,E_.transless=a,0===t?(Xv(i).forEach((e=>{yw(n,e,i[e].primKey,i[e].indexes)})),dw(e,n),A_.follow((()=>e.on.populate.fire(o))).catch(s)):function(e,t,n,r){let{_novip:i}=e;const o=[],s=i._versions;let a=i._dbSchema=bw(i,i.idbdb,r),l=!1;const c=s.filter((e=>e._cfg.version>=t));return c.forEach((e=>{o.push((()=>{const o=a,s=e._cfg.dbschema;ww(i,o,r),ww(i,s,r),a=i._dbSchema=s;const c=vw(o,s);c.add.forEach((e=>{yw(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new Zy.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>_w(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),_w(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const u=e._cfg.contentUpgrade;if(u&&e._cfg.version>t){dw(i,r),n._memoizedTables={},l=!0;let e=vy(s);c.del.forEach((t=>{e[t]=o[t]})),pw(i,[i.Transaction.prototype]),fw(i,[i.Transaction.prototype],Xv(e),e),n.schema=e;const t=Iy(u);let a;t&&Y_();const h=A_.follow((()=>{if(a=u(n),a&&t){var e=X_.bind(null,null);a.then(e,e)}}));return a&&"function"==typeof a.then?A_.resolve(a):h.then((()=>a))}})),o.push((t=>{l&&yb||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(e._cfg.dbschema,t),pw(i,[i.Transaction.prototype]),fw(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema}))})),function e(){return o.length?A_.resolve(o.shift()(n.idbtrans)).then(e):A_.resolve()}().then((()=>{var e,t;t=r,Xv(e=a).forEach((n=>{t.db.objectStoreNames.contains(n)||yw(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(s)}))}function vw(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const e={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!vb)e.recreate=!0,n.change.push(e);else{const t=i.idxByName,r=o.idxByName;let s;for(s in t)r[s]||e.del.push(s);for(s in r){const n=t[s],i=r[s];n?n.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,o])}return n}function yw(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>_w(i,e))),i}function _w(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function bw(e,t,n){const r={};return uy(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let i=t.keyPath;const o=rw(iw(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),s=[];for(let n=0;n<t.indexNames.length;++n){const e=t.index(t.indexNames[n]);i=e.keyPath;var a=rw(e.name,i,!!e.unique,!!e.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(a)}r[e]=ow(e,o,s)})),r}function ww(e,t,n){let{_novip:r}=e;const i=n.db.objectStoreNames;for(let o=0;o<i.length;++o){const e=i[o],s=n.objectStore(e);r._hasGetAll="getAll"in s;for(let n=0;n<s.indexNames.length;++n){const r=s.indexNames[n],i=s.index(r).keyPath,o="string"==typeof i?i:"["+uy(i).join("+")+"]";if(t[e]){const n=t[e].idxByName[o];n&&(n.name=r,delete t[e].idxByName[o],t[e].idxByName[r]=n)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Yv.WorkerGlobalScope&&Yv instanceof Yv.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}class xw{_parseStoresSpec(e,t){Xv(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return rw(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Jv(r),0===t)})),i=r.shift();if(i.multi)throw new Zy.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new Zy.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Zy.Schema("Index must have a name and cannot be an empty string")})),t[n]=ow(n,i,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?$v(this._cfg.storesSource,e):e;const n=t._versions,r={};let i={};return n.forEach((e=>{$v(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,pw(t,[t._allTables,t,t.Transaction.prototype]),fw(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],Xv(i),i),t._storeNames=Xv(i),this}upgrade(e){return this._cfg.contentUpgrade=i_(this._cfg.contentUpgrade||Yy,e),this}}function Ew(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new qw(wb,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Sw(e){return e&&"function"==typeof e.databases}function Tw(e){return Q_((function(){return E_.letThrough=!0,e()}))}function Cw(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Aw(e){var t=t=>e.next(t),n=i(t),r=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):Jv(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function kw(e,t,n){var r=arguments.length;if(r<2)throw new Zy.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,_y(i),n]}function Pw(e,t,n,r,i){return A_.resolve().then((()=>{const o=E_.transless||E_,s=e._createTransaction(t,n,e._dbSchema,r),a={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===Wy.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Pw(e,t,n,null,i)))):cb(r)}const l=Iy(i);let c;l&&Y_();const u=A_.follow((()=>{if(c=i.call(s,s),c)if(l){var e=X_.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=Aw(c))}),a);return(c&&"function"==typeof c.then?A_.resolve(c).then((e=>s.active?e:cb(new Zy.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):u.then((()=>c))).then((e=>(r&&s._resolve(),s._completion.then((()=>e))))).catch((e=>(s._reject(e),cb(e))))}))}function Ow(e,t,n){const r=Jv(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const Iw={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function s(e,t,n){const r=uw(e),a=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u={...n,isVirtual:c,keyTail:t,keyLength:l,extractKey:aw(e),unique:!c&&n.unique};return a.push(u),u.isPrimaryKey||o.push(u),l>1&&s(2===l?e[0]:e.slice(0,l-1),t+1,n),a.sort(((e,t)=>e.keyTail-t.keyTail)),u}const a=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const e of r.indexes)s(e.keyPath,0,e);function l(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,i=n.keyTail,{type:1===r.type?2:r.type,lower:Ow(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Ow(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var r,i}const c={...n,schema:{...r,primaryKey:a,indexes:o,getIndexByKeyPath:function(e){const t=i[uw(e)];return t&&t[0]}},count:e=>n.count(l(e)),query:e=>n.query(l(e)),openCursor(t){const{keyTail:r,isVirtual:i,keyLength:o}=t.query.index;return i?n.openCursor(l(t)).then((n=>n&&function(n){const i=Object.create(n,{continue:{value:function(i){null!=i?n.continue(Ow(i,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,i){n.continuePrimaryKey(Ow(t,e.MAX_KEY,r),i)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:()=>n.value}});return i}(n))):n.openCursor(t)}};return c}}}};function Rw(e,t,n,r){return n=n||{},r=r||"",Xv(e).forEach((i=>{if(ny(t,i)){var o=e[i],s=t[i];if("object"==typeof o&&"object"==typeof s&&o&&s){const e=Cy(o);e!==Cy(s)?n[r+i]=t[i]:"Object"===e?Rw(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0})),Xv(t).forEach((i=>{ny(e,i)||(n[r+i]=t[i])})),n}const Nw={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,i={...n,mutate(e){const i=E_.trans,{deleting:o,creating:s,updating:a}=i.table(t).hook;switch(e.type){case"add":if(s.fire===Yy)break;return i._promise("readwrite",(()=>l(e)),!0);case"put":if(s.fire===Yy&&a.fire===Yy)break;return i._promise("readwrite",(()=>l(e)),!0);case"delete":if(o.fire===Yy)break;return i._promise("readwrite",(()=>l(e)),!0);case"deleteRange":if(o.fire===Yy)break;return i._promise("readwrite",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=E_.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((l=>{const c=i.map(((n,i)=>{const c=l[i],u={onerror:null,onsuccess:null};if("delete"===e.type)o.fire.call(u,n,c,t);else if("add"===e.type||void 0===c){const o=s.fire.call(u,n,e.values[i],t);null==n&&null!=o&&(n=o,e.keys[i]=n,r.outbound||gy(e.values[i],r.keyPath,n))}else{const r=Rw(c,e.values[i]),o=a.fire.call(u,r,n,c,t);if(o){const t=e.values[i];Object.keys(o).forEach((e=>{ny(t,e)?t[e]=o[e]:gy(t,e,o[e])}))}}return u}));return n.mutate(e).then((t=>{let{failures:n,results:r,numFailures:o,lastResult:s}=t;for(let a=0;a<i.length;++a){const t=r?r[a]:i[a],o=c[a];null==t?o.onerror&&o.onerror(n[a]):o.onsuccess&&o.onsuccess("put"===e.type&&l[a]?e.values[a]:t)}return{failures:n,results:r,numFailures:o,lastResult:s}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((n=>{let{result:r}=n;return l({type:"delete",keys:r,trans:e}).then((n=>n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:r[r.length-1],lowerOpen:!0},i)))}))}}};return i}})};function Lw(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)0===jb(t.keys[i],e[o])&&(r.push(n?Ey(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}const Dw={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Lw(e.keys,e.trans._cache,"clone"===e.cache);return t?A_.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?Ey(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Mw(e){return!("from"in e)}const jw=function(e,t){if(!this){const t=new jw;return e&&"d"in e&&$v(t,e),t}$v(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Fw(e,t,n){const r=jb(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Mw(e))return $v(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(jb(n,e.from)<0)return i?Fw(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Bw(e);if(jb(t,e.to)>0)return o?Fw(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Bw(e);jb(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),jb(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;i&&!e.l&&zw(e,i),o&&s&&zw(e,o)}function zw(e,t){Mw(t)||function e(t,n){let{from:r,to:i,l:o,r:s}=n;Fw(t,r,i),o&&e(t,o),s&&e(t,s)}(e,t)}function Uw(e){let t=Mw(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&jb(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||jb(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Bw(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const t="r"===i?"l":"r",n={...e},r=e[i];e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],e[t]=n,n.d=Vw(n)}e.d=Vw(e)}function Vw(e){let{r:t,l:n}=e;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}ry(jw.prototype,{add(e){return zw(this,e),this},addKey(e){return Fw(this,e,e),this},addKeys(e){return e.forEach((e=>Fw(this,e,e))),this},[Ay](){return Uw(this)}});const Hw={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new jw(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:a,outbound:l}=s,c={...i,mutate:e=>{const s=e.trans,a=s.mutatedParts||(s.mutatedParts={}),l=e=>{const n="idb://".concat(t,"/").concat(r,"/").concat(e);return a[n]||(a[n]=new jw)},c=l(""),u=l(":dels"),{type:h}=e;let[d,f]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const p=e.trans._cache;return i.mutate(e).then((e=>{if(Jv(d)){"delete"!==h&&(d=e.results),c.addKeys(d);const t=Lw(d,p);t||"add"===h||u.addKeys(d),(t||f)&&function(e,t,n,r){t.indexes.forEach((function(t){const i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}const s=e=>t.multiEntry&&Jv(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(n||r).forEach(((e,t)=>{const i=n&&o(n[t]),a=r&&o(r[t]);0!==jb(i,a)&&(null!=i&&s(i),null!=a&&s(a))}))}))}(l,o,t,f)}else if(d){const e={from:d.lower,to:d.upper};u.add(e),c.add(e)}else c.add(n),u.add(n),o.indexes.forEach((e=>l(e.name).add(n)));return e}))}},u=t=>{let{query:{index:n,range:r}}=t;var i,o;return[n,new jw(null!==(i=r.lower)&&void 0!==i?i:e.MIN_KEY,null!==(o=r.upper)&&void 0!==o?o:e.MAX_KEY)]},h={get:e=>[s,new jw(e.key)],getMany:e=>[s,(new jw).addKeys(e.keys)],count:u,query:u,openCursor:u};return Xv(h).forEach((e=>{c[e]=function(o){const{subscr:s}=E_;if(s){const c=e=>{const n="idb://".concat(t,"/").concat(r,"/").concat(e);return s[n]||(s[n]=new jw)},u=c(""),d=c(":dels"),[f,p]=h[e](o);if(c(f.name||"").add(p),!f.isPrimaryKey){if("count"!==e){const t="query"===e&&l&&o.values&&i.query({...o,values:!1});return i[e].apply(this,arguments).then((n=>{if("query"===e){if(l&&o.values)return t.then((e=>{let{result:t}=e;return u.addKeys(t),n}));const e=o.values?n.result.map(a):n.result;o.values?u.addKeys(e):d.addKeys(e)}else if("openCursor"===e){const e=n,t=o.values;return e&&Object.create(e,{key:{get:()=>(d.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return d.addKey(t),t}},value:{get:()=>(t&&u.addKey(e.primaryKey),e.value)}})}return n}))}d.add(n)}}return i[e].apply(this,arguments)}})),c}}}};class qw{constructor(e,t){this._middlewares={},this.verno=0;const n=qw.dependencies;this._options=t={addons:qw.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Yy,dbReadyPromise:null,cancelOpen:Yy,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new A_((e=>{i.dbReadyResolve=e})),i.openCanceller=new A_(((e,t)=>{i.cancelOpen=t})),this._state=i,this.name=e,this.on=kb(this,"populate","blocked","versionchange","close",{ready:[i_,Yy]}),this.on.ready.subscribe=hy(this.on.ready.subscribe,(e=>(t,n)=>{qw.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||A_.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(o=this,Pb(Ub.prototype,(function(e,t){this.db=o;let n=Tb,r=null;if(t)try{n=t()}catch(e){r=e}const i=e._ctx,s=i.table,a=s.hook.reading.fire;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a!==Xy?a:null}}))),this.Table=function(e){return Pb(Ab.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:kb(null,{creating:[e_,Yy],reading:[Jy,Xy],updating:[n_,Yy],deleting:[t_,Yy]})}))}(this),this.Transaction=function(e){return Pb(nw.prototype,(function(t,n,r,i,o){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=kb(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new A_(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),cb(e)}))}))}(this),this.Version=function(e){return Pb(xw.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Pb(Yb.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const i=e._deps.indexedDB;if(!i)throw new Zy.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(this.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(this.name,"'. Closing db now to resume the delete request.")),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(this.name,"') was blocked")):console.warn("Upgrade '".concat(this.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=sw(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),gb.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Iw),this.use(Nw),this.use(Hw),this.use(Dw),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new Zy.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Zy.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(mw),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||E_.letThrough||this._vip)?e():new A_(((e,t)=>{if(this._state.openComplete)return t(new Zy.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new Zy.DatabaseClosed);this.open().catch(Yy)}this._state.dbReadyPromise.then(e,t)})).then(e)}use(e){let{stack:t,create:n,level:r,name:i}=e;i&&this.unuse({stack:t,name:i});const o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort(((e,t)=>e.level-t.level)),this}unuse(e){let{stack:t,name:n,create:r}=e;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((e=>r?e.create!==r:!!n&&e.name!==n))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?cb(t.dbOpenError):e));Ry&&(t.openCanceller._stackHolder=My()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new Zy.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,a=!1;return A_.race([r,("undefined"==typeof navigator?A_.resolve():Cw()).then((()=>new A_(((r,o)=>{if(i(),!n)throw new Zy.MissingAPI;const l=e.name,c=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!c)throw new Zy.MissingAPI;c.onerror=Xb(o),c.onblocked=V_(e._fireOnBlocked),c.onupgradeneeded=V_((r=>{if(s=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=Jb,s.abort(),c.result.close();const e=n.deleteDatabase(l);e.onsuccess=e.onerror=V_((()=>{o(new Zy.NoSuchDatabase("Database ".concat(l," doesnt exist")))}))}else{s.onerror=Xb(o);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;a=i<1,e._novip.idbdb=c.result,gw(e,i/10,s,o)}}),o),c.onsuccess=V_((()=>{s=null;const n=e._novip.idbdb=c.result,i=uy(n.objectStoreNames);if(i.length>0)try{const r=n.transaction(1===(o=i).length?o[0]:o,"readonly");t.autoSchema?function(e,t,n){let{_novip:r}=e;r.verno=t.version/10;const i=r._dbSchema=bw(0,t,n);r._storeNames=uy(t.objectStoreNames,0),fw(r,[r._allTables],Xv(i),i)}(e,n,r):(ww(e,e._dbSchema,r),function(e,t){const n=vw(bw(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),dw(e,r)}catch(e){}var o;gb.push(e),n.onversionchange=V_((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=V_((t=>{e.on("close").fire(t)})),a&&function(e,t){let{indexedDB:n,IDBKeyRange:r}=e;!Sw(n)&&t!==wb&&Ew(n,r).put({name:t}).catch(Yy)}(e._deps,l),r()}),o)}))))]).then((()=>(i(),t.onReadyBeingFired=[],A_.resolve(Tw((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(i_,Yy);return t.onReadyBeingFired=[],A_.resolve(Tw((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),cb(n)})).finally((()=>{t.openComplete=!0,o()}))}(this)}_close(){const e=this._state,t=gb.indexOf(this);if(t>=0&&gb.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new A_((t=>{e.dbReadyResolve=t})),e.openCanceller=new A_(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Zy.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new A_(((n,r)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=V_((()=>{!function(e,t){let{indexedDB:n,IDBKeyRange:r}=e;!Sw(n)&&t!==wb&&Ew(n,r).delete(t).catch(Yy)}(this._deps,this.name),n()})),e.onerror=Xb(r),e.onblocked=this._fireOnBlocked};if(e)throw new Zy.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Xv(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=kw.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=E_.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const i=-1!==e.indexOf("?");let o,s;e=e.replace("!","").replace("?","");try{if(s=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===xb)o=xb;else{if("rw"!=e&&e!=Eb)throw new Zy.InvalidArgument("Invalid transaction mode: "+e);o=Eb}if(r){if(r.mode===xb&&o===Eb){if(!i)throw new Zy.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&s.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new Zy.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):cb(e)}const a=Pw.bind(null,this,o,s,r,n);return r?r._promise(o,a,"lock"):E_.trans?rb(E_.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!ny(this._allTables,e))throw new Zy.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]}}const Ww="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class Kw{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[Ww](){return this}}function Zw(e,t){return Xv(t).forEach((n=>{zw(e[n]||(e[n]=new jw),t[n])})),e}let Gw;try{Gw={indexedDB:Yv.indexedDB||Yv.mozIndexedDB||Yv.webkitIndexedDB||Yv.msIndexedDB,IDBKeyRange:Yv.IDBKeyRange||Yv.webkitIDBKeyRange}}catch(Yv){Gw={indexedDB:null,IDBKeyRange:null}}const Qw=qw;function Yw(e){let t=Xw;try{Xw=!0,tw.storagemutated.fire(e)}finally{Xw=t}}ry(Qw,{...Qy,delete:e=>new Qw(e,{addons:[]}).delete(),exists:e=>new Qw(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function(e){let{indexedDB:t,IDBKeyRange:n}=e;return Sw(t)?Promise.resolve(t.databases()).then((e=>e.map((e=>e.name)).filter((e=>e!==wb)))):Ew(t,n).toCollection().primaryKeys()}(Qw.dependencies).then(e)}catch(e){return cb(new Zy.MissingAPI)}},defineClass:()=>function(e){$v(this,e)},ignoreTransaction:e=>E_.trans?rb(E_.transless,e):e(),vip:Tw,async:function(e){return function(){try{var t=Aw(e.apply(this,arguments));return t&&"function"==typeof t.then?t:A_.resolve(t)}catch(e){return cb(e)}}},spawn:function(e,t,n){try{var r=Aw(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:A_.resolve(r)}catch(e){return cb(e)}},currentTransaction:{get:()=>E_.trans||null},waitFor:function(e,t){const n=A_.resolve("function"==typeof e?Qw.ignoreTransaction(e):e).timeout(t||6e4);return E_.trans?E_.trans.waitFor(n):n},Promise:A_,debug:{get:()=>Ry,set:e=>{Ny(e,"dexie"===e?()=>!0:bb)}},derive:sy,extend:$v,props:ry,override:hy,Events:kb,on:tw,liveQuery:function(e){let t,n=!1;const r=new Kw((r=>{const i=Iy(e);let o=!1,s={},a={};const l={get closed(){return o},unsubscribe:()=>{o=!0,tw.storagemutated.unsubscribe(d)}};r.start&&r.start(l);let c=!1,u=!1;function h(){return Xv(a).some((e=>s[e]&&function(e,t){const n=Uw(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=Uw(e);let s=o.next(i.from),a=s.value;for(;!r.done&&!s.done;){if(jb(a.from,i.to)<=0&&jb(a.to,i.from)>=0)return!0;jb(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}(s[e],a[e])))}const d=e=>{Zw(s,e),h()&&f()},f=()=>{if(c||o)return;s={};const p={},m=function(t){i&&Y_();const n=()=>Q_(e,{subscr:t,trans:null}),r=E_.trans?rb(E_.transless,n):n();return i&&r.then(X_,X_),r}(p);u||(tw($b,d),u=!0),c=!0,Promise.resolve(m).then((e=>{n=!0,t=e,c=!1,o||(h()?f():(s={},a=p,r.next&&r.next(e)))}),(e=>{c=!1,n=!1,r.error&&r.error(e),l.unsubscribe()}))};return f(),l}));return r.hasValue=()=>n,r.getValue=()=>t,r},extendObservabilitySet:Zw,getByKeyPath:my,setByKeyPath:gy,delByKeyPath:function(e,t){"string"==typeof t?gy(e,t,void 0):"length"in t&&[].map.call(t,(function(t){gy(e,t,void 0)}))},shallowClone:vy,deepClone:Ey,getObjectDiff:Rw,cmp:jb,asap:fy,minKey:fb,addons:[],connections:gb,errnames:Wy,dependencies:Gw,semVer:hb,version:hb.split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),Qw.maxKey=sw(Qw.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(tw($b,(e=>{if(!Xw){let t;vb?(t=document.createEvent("CustomEvent"),t.initCustomEvent(ew,!0,!0,e)):t=new CustomEvent(ew,{detail:e}),Xw=!0,dispatchEvent(t),Xw=!1}})),addEventListener(ew,(e=>{let{detail:t}=e;Xw||Yw(t)})));let Xw=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(ew);"function"==typeof e.unref&&e.unref(),tw($b,(t=>{Xw||e.postMessage(t)})),e.onmessage=e=>{e.data&&Yw(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){tw($b,(e=>{try{Xw||("undefined"!=typeof localStorage&&localStorage.setItem(ew,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:ew,changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if(e.key===ew){const t=JSON.parse(e.newValue);t&&Yw(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function(e){let{data:t}=e;t&&t.type===ew&&Yw(t.changedParts)}))}A_.rejectionMapper=function(e,t){if(!e||e instanceof By||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Gy[e.name])return e;var n=new Gy[e.name](t||e.message,e);return"stack"in e&&oy(n,"stack",{get:function(){return this.inner.stack}}),n},Ny(Ry,bb);const Jw=new qw("AcclplDatabase");Jw.version(1).stores({establishments:"++id, address, coordinates, establishmentName, normalizedEstablishmentName, observationCount, observationRefs",observations:"++id, additionalNotes, date, establishmentRef, photoURLs, time, userID"});const $w=Jw;var ex=n(184);const tx=(0,r.createContext)();function nx(e){const[t,n]=(0,r.useState)(),[i,o]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)("profile"),[u,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=function(e,t,n,r){return He(e).onAuthStateChanged(t,n,r)}(Wv,(async e=>{if(n(e),a(!0),e){h(e.providerData.some((e=>"password"===e.providerId)));try{let t=await Qv(e.uid);o(t)}catch(t){t.message.includes("No user found with userID")}finally{a(!1)}}else c("profile"),h(!1),o({}),a(!1)}));return e}),[]);const[d,f]=(0,r.useState)({signUpModal:!1,signInModal:!1});return(0,ex.jsx)(tx.Provider,{value:{currentUser:t,userProfile:i,setUserProfile:o,loadingData:s,modalState:d,toggleModals:e=>{f({signIn:{signUpModal:!1,signInModal:!0},signUp:{signUpModal:!0,signInModal:!1},close:{signUpModal:!1,signInModal:!1}}[e]||{signUpModal:!1,signInModal:!1})},signUp:async(e,t,n)=>{const r=(await Vr(Wv,e,t)).user,i={userID:r.uid,displayName:n,email:r.email,joinedDate:(new Date).toISOString()};return await Gv(i),r},signIn:(e,t)=>function(e,t,n){return zr(He(e),Sr.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Br(e),t}))}(Wv,e,t),googleSignIn:async()=>{const e=new kr;try{const t=(await xi(Wv,e)).user;let n=await Qv(t.uid).catch((async()=>{const e={userID:t.uid,displayName:t.displayName||"Nouvel Utilisateur",email:t.email,joinedDate:(new Date).toISOString()};return await Gv(e),e}));return o(n),t}catch(t){throw console.error("Erreur lors de la connexion avec Google",t),t}},facebookSignIn:async()=>{const e=new Ar;try{const t=(await xi(Wv,e)).user;let n=await Qv(t.uid).catch((async()=>{const e={userID:t.uid,displayName:t.displayName||"Nouvel Utilisateur",email:t.email,joinedDate:(new Date).toISOString()};return await Gv(e),e}));return o(n),t}catch(t){throw console.error("Erreur lors de la connexion avec Facebook",t),t}},signOut:async()=>{try{await(async()=>{try{await $w.establishments.clear(),console.log("Les donn\xe9es des \xe9tablissements ont \xe9t\xe9 effac\xe9es."),await $w.observations.clear(),console.log("Les donn\xe9es des observations ont \xe9t\xe9 effac\xe9es.")}catch(e){console.error("Erreur lors de l\u2019effacement des donn\xe9es IndexedDB:",e)}})(),await qr(Wv),n(null),o(null),c("profile")}catch(e){console.error("Erreur lors de la d\xe9connexion :",e)}},activeView:l,setActiveView:c,changePassword:async e=>{if(!t)throw new Error("Aucun utilisateur connect\xe9 pour changer le mot de passe.");return function(e,t){return Hr(He(e),null,t)}(t,e)},reauthenticateWithCredential:async e=>{if(!t)throw new Error("Aucun utilisateur connect\xe9 pour la r\xe9authentification.");const n=Sr.credential(t.email,e);return Ur(t,n)},isPasswordSignIn:u},children:!s&&e.children})}const rx=e=>{let{isUserLoggedIn:t}=e;return(0,ex.jsx)("h1",{className:"display-3 text-light mb-5",children:t?"Vous \xeates d\xe9j\xe0 connect\xe9":"Ensemble contre la pollution lumineuse"})};var ix=n(694),ox=n.n(ix);const sx=["as","disabled"];function ax(e){let{tagName:t,disabled:n,href:r,target:i,rel:o,role:s,onClick:a,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=o?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const lx=r.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,sx);const[o,{tagName:s}]=ax(Object.assign({tagName:n,disabled:r},i));return(0,ex.jsx)(s,Object.assign({},i,o,{ref:t}))}));lx.displayName="Button";const cx=lx,ux=["xxl","xl","lg","md","sm","xs"],hx="xs",dx=r.createContext({prefixes:{},breakpoints:ux,minBreakpoint:hx}),{Consumer:fx,Provider:px}=dx;function mx(e,t){const{prefixes:n}=(0,r.useContext)(dx);return e||n[t]||t}function gx(){const{breakpoints:e}=(0,r.useContext)(dx);return e}function vx(){const{minBreakpoint:e}=(0,r.useContext)(dx);return e}function yx(){const{dir:e}=(0,r.useContext)(dx);return"rtl"===e}const _x=r.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:s=!1,disabled:a=!1,className:l,...c}=e;const u=mx(r,"btn"),[h,{tagName:d}]=ax({tagName:n,disabled:a,...c}),f=d;return(0,ex.jsx)(f,{...h,...c,ref:t,disabled:a,className:ox()(l,u,s&&"active",i&&"".concat(u,"-").concat(i),o&&"".concat(u,"-").concat(o),c.href&&a&&"disabled")})}));_x.displayName="Button";const bx=_x;var wx=n(7),xx=n.n(wx),Ex=["color","size","title"];function Sx(){return Sx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sx.apply(this,arguments)}function Tx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Cx=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=Tx(e,Ex);return r.createElement("svg",Sx({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"}))}));Cx.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},Cx.defaultProps={color:"currentColor",size:"1em",title:null};const Ax=Cx,kx=()=>{const{googleSignIn:e}=(0,r.useContext)(tx),t=J();return(0,ex.jsxs)(bx,{variant:"light",className:"text-dark d-flex align-items-center",onClick:async()=>{try{await e(),t("/private/private-home")}catch(n){console.error(n)}},children:[(0,ex.jsx)(Ax,{size:24,className:"me-2"}),"Se connectez avec Google"]})};var Px=["color","size","title"];function Ox(){return Ox=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ox.apply(this,arguments)}function Ix(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Rx=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=Ix(e,Px);return r.createElement("svg",Ox({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"}))}));Rx.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},Rx.defaultProps={color:"currentColor",size:"1em",title:null};const Nx=Rx,Lx=()=>{const{facebookSignIn:e}=(0,r.useContext)(tx),t=J();return(0,ex.jsxs)(bx,{onClick:async()=>{try{await e(),t("/private/private-home")}catch(n){console.error("Erreur lors de la connexion avec Facebook",n)}},variant:"primary",className:"text-start",children:[(0,ex.jsx)(Nx,{size:24,className:"me-2"})," Se connecter avec Facebook"]})};var Dx=["color","size","title"];function Mx(){return Mx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mx.apply(this,arguments)}function jx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Fx=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=jx(e,Dx);return r.createElement("svg",Mx({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"}))}));Fx.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},Fx.defaultProps={color:"currentColor",size:"1em",title:null};const zx=Fx,Ux=()=>{const{toggleModals:e}=(0,r.useContext)(tx);return(0,ex.jsx)(ex.Fragment,{children:(0,ex.jsxs)(bx,{onClick:()=>e("signIn"),variant:"secondary",className:"text-start",children:[(0,ex.jsx)(zx,{size:24,className:"me-2"}),"Se connecter avec l'email"]})})},Bx=()=>(0,ex.jsxs)("div",{className:"d-flex flex-column gap-3 mx-auto mw-100",style:{maxWidth:"300px",marginTop:"75px"},children:[(0,ex.jsx)(kx,{}),(0,ex.jsx)(Lx,{}),(0,ex.jsx)(Ux,{})]}),Vx=n.p+"static/media/logo.6c47625e48c92708a5f4.png",Hx="LogoImage_logoImage__Nr19C",qx="LogoImage_glowEffect__eg0el",Wx=()=>(0,ex.jsx)("div",{className:"mt-5 text-center",children:(0,ex.jsx)("img",{src:Vx,alt:"Logo",style:{marginTop:"20px",width:"25%",boxShadow:"0 0 25px 5px rgba(255, 255, 255, 0.7)",borderRadius:"50%"},className:"".concat(qx," ").concat(Hx)})}),Kx=()=>{const{currentUser:e}=(0,r.useContext)(tx),t=J();return(0,r.useEffect)((()=>{e&&t("/private/private-home")}),[e,t]),(0,ex.jsx)(ex.Fragment,{children:(0,ex.jsx)("div",{className:"container p-3 shadow pt-5 rounded-bottom",style:{maxWidth:"800px"},children:(0,ex.jsx)("div",{className:"row",children:(0,ex.jsxs)("div",{className:"col-12 col-lg-6 mt-2 pb-5 text-center mw-75 mx-auto",children:[(0,ex.jsx)(rx,{isUserLoggedIn:Boolean(e)}),!e&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(Bx,{}),(0,ex.jsx)(Wx,{})]})]})})})})};function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zx.apply(this,arguments)}function Gx(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Qx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Yx=i.startTransition;function Xx(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),p((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=f(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:d(t))}),(function(e,t){c("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}({window:o,v5Compat:!0}));let a=s.current,[l,u]=r.useState({action:a.action,location:a.location}),{v7_startTransition:m}=i||{},g=r.useCallback((e=>{m&&Yx?Yx((()=>u(e))):u(e)}),[u,m]);return r.useLayoutEffect((()=>a.listen(g)),[a,g]),r.createElement(me,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}const Jx="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,$x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eE=r.forwardRef((function(e,t){let n,{onClick:i,relative:o,reloadDocument:s,replace:a,state:c,target:u,to:h,preventScrollReset:f,unstable_viewTransition:p}=e,m=Gx(e,Qx),{basename:g}=r.useContext(W),v=!1;if("string"===typeof h&&$x.test(h)&&(n=h,Jx))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=O(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Yv){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Q()||l(!1);let{basename:i,navigator:o}=r.useContext(W),{hash:s,pathname:a,search:c}=ee(e,{relative:n}),u=a;return"/"!==i&&(u="/"===a?i:D([i,a])),o.createHref({pathname:u,search:c,hash:s})}(h,{relative:o}),_=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=J(),u=Y(),h=ee(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:d(u)===d(h);c(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,o,n,e,s,a,l])}(h,{replace:a,state:c,target:u,preventScrollReset:f,relative:o,unstable_viewTransition:p});return r.createElement("a",Zx({},m,{href:n||y,onClick:v||s?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:t,target:u}))}));var tE,nE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(tE||(tE={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(nE||(nE={}));const rE=n.p+"static/media/logo.45e5e75202cb30ed4133.jpg";function iE(){const{currentUser:e,toggleModals:t}=(0,r.useContext)(tx),n=J();return(0,ex.jsxs)("nav",{className:"navbar navbar-light bg-light px-4 p-1 mx-auto rounded-top",style:{maxWidth:"800px"},children:[(0,ex.jsxs)(eE,{to:"/",className:"navbar-brand",children:[(0,ex.jsx)("img",{src:rE,alt:"Logo",height:"30"})," "]}),(0,ex.jsxs)("div",{children:[!e&&(0,ex.jsx)(ex.Fragment,{children:(0,ex.jsx)("button",{onClick:()=>t("signUp"),className:"btn btn-secondary btn-sm",children:"S'inscrire"})}),e&&(0,ex.jsx)("button",{onClick:async()=>{try{await qr(Wv),n("/private/private-home")}catch{alert("Pour certaines raisons, nous ne pouvons pas nous d\xe9connecter, veuillez v\xe9rifier votre connexion internet et r\xe9essayer.")}},className:"btn btn-danger btn-sm ms-2",children:"D\xe9connexion"})]})]})}const oE=!("undefined"===typeof window||!window.document||!window.document.createElement);var sE=!1,aE=!1;try{var lE={get passive(){return sE=!0},get once(){return aE=sE=!0}};oE&&(window.addEventListener("test",lE,lE),window.removeEventListener("test",lE,!0))}catch(Yv){}const cE=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!aE){var i=r.once,o=r.capture,s=n;!aE&&i&&(s=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=s),e.addEventListener(t,s,sE?r:o)}e.addEventListener(t,n,r)};function uE(e){return e&&e.ownerDocument||document}const hE=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var dE;function fE(e){if((!dE&&0!==dE||e)&&oE){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),dE=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return dE}function pE(){return(0,r.useState)(null)}const mE=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t};function gE(e){const t=mE(e);return(0,r.useCallback)((function(){return t.current&&t.current(...arguments)}),[t])}const vE=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const yE=function(e,t){return(0,r.useMemo)((()=>function(e,t){const n=vE(e),r=vE(t);return e=>{n&&n(e),r&&r(e)}}(e,t)),[e,t])};function _E(e){const t=function(e){const t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((()=>()=>t.current()),[])}function bE(e,t){return function(e){var t=uE(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var wE=/([A-Z])/g;var xE=/^ms-/;function EE(e){return function(e){return e.replace(wE,"-$1").toLowerCase()}(e).replace(xE,"-ms-")}var SE=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const TE=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(EE(t))||bE(e).getPropertyValue(EE(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!SE.test(e))}(i)?n+=EE(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(EE(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};const CE=function(e,t,n,r){return cE(e,t,n,r),function(){hE(e,t,n,r)}};function AE(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=CE(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function kE(e,t,n,r){null==n&&(n=function(e){var t=TE(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=AE(e,n,r),o=CE(e,"transitionend",t);return function(){i(),o()}}function PE(e){void 0===e&&(e=uE());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(Yv){return e.body}}function OE(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var IE=n(164);function RE(){const e=(0,r.useRef)(!0),t=(0,r.useRef)((()=>e.current));return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t.current}const NE="data-rr-ui-";function LE(e){return"".concat(NE).concat(e)}const DE=LE("modal-open");const ME=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(TE(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(DE,""),TE(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(DE),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},jE=(0,r.createContext)(oE?window:void 0);jE.Provider;function FE(){return(0,r.useContext)(jE)}const zE=(e,t)=>oE?null==e?(t||uE()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function UE(e,t){const n=FE(),[i,o]=(0,r.useState)((()=>zE(e,null==n?void 0:n.document)));if(!i){const t=zE(e);t&&o(t)}return(0,r.useEffect)((()=>{t&&i&&t(i)}),[t,i]),(0,r.useEffect)((()=>{const t=zE(e);t!==i&&o(t)}),[e,i]),i}const BE="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,VE="undefined"!==typeof document||BE?r.useLayoutEffect:r.useEffect;const HE=function(e){let{children:t,in:n,onExited:i,mountOnEnter:o,unmountOnExit:s}=e;const a=(0,r.useRef)(null),l=(0,r.useRef)(n),c=gE(i);(0,r.useEffect)((()=>{n?l.current=!0:c(a.current)}),[n,c]);const u=yE(a,t.ref),h=(0,r.cloneElement)(t,{ref:u});return n?h:s||!l.current&&o?null:h};function qE(e){let{children:t,in:n,onExited:i,onEntered:o,transition:s}=e;const[a,l]=(0,r.useState)(!n);n&&a&&l(!1);const c=function(e){let{in:t,onTransition:n}=e;const i=(0,r.useRef)(null),o=(0,r.useRef)(!0),s=gE(n);return VE((()=>{if(!i.current)return;let e=!1;return s({in:t,element:i.current,initial:o.current,isStale:()=>e}),()=>{e=!0}}),[t,s]),VE((()=>(o.current=!1,()=>{o.current=!0})),[]),i}({in:!!n,onTransition:e=>{Promise.resolve(s(e)).then((()=>{e.isStale()||(e.in?null==o||o(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=yE(c,t.ref);return a&&!n?null:(0,r.cloneElement)(t,{ref:u})}function WE(e,t,n){return e?(0,ex.jsx)(e,Object.assign({},n)):t?(0,ex.jsx)(qE,Object.assign({},n,{transition:t})):(0,ex.jsx)(HE,Object.assign({},n))}function KE(e){return"Escape"===e.code||27===e.keyCode}const ZE=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let GE;function QE(e){const t=FE(),n=e||function(e){return GE||(GE=new ME({ownerDocument:null==e?void 0:e.document})),GE}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:(0,r.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((e=>{i.current.backdrop=e}),[])})}const YE=(0,r.forwardRef)(((e,t)=>{let{show:n=!1,role:i="dialog",className:o,style:s,children:a,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:h,transition:d,runTransition:f,backdropTransition:p,runBackdropTransition:m,autoFocus:g=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:_,renderDialog:b,renderBackdrop:w=(e=>(0,ex.jsx)("div",Object.assign({},e))),manager:x,container:E,onShow:S,onHide:T=(()=>{}),onExit:C,onExited:A,onExiting:k,onEnter:P,onEntering:O,onEntered:I}=e,R=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ZE);const N=FE(),L=UE(E),D=QE(x),M=RE(),j=function(e){const t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{t.current=e})),t.current}(n),[F,z]=(0,r.useState)(!n),U=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(()=>D),[D]),oE&&!j&&n&&(U.current=PE(null==N?void 0:N.document)),n&&F&&z(!1);const B=gE((()=>{if(D.add(),Z.current=CE(document,"keydown",W),K.current=CE(document,"focus",(()=>setTimeout(H)),!0),S&&S(),g){var e,t;const n=PE(null!=(e=null==(t=D.dialog)?void 0:t.ownerDocument)?e:null==N?void 0:N.document);D.dialog&&n&&!OE(D.dialog,n)&&(U.current=n,D.dialog.focus())}})),V=gE((()=>{var e;(D.remove(),null==Z.current||Z.current(),null==K.current||K.current(),y)&&(null==(e=U.current)||null==e.focus||e.focus(_),U.current=null)}));(0,r.useEffect)((()=>{n&&L&&B()}),[n,L,B]),(0,r.useEffect)((()=>{F&&V()}),[F,V]),_E((()=>{V()}));const H=gE((()=>{if(!v||!M()||!D.isTopModal())return;const e=PE(null==N?void 0:N.document);D.dialog&&e&&!OE(D.dialog,e)&&D.dialog.focus()})),q=gE((e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&T())})),W=gE((e=>{c&&KE(e)&&D.isTopModal()&&(null==h||h(e),e.defaultPrevented||T())})),K=(0,r.useRef)(),Z=(0,r.useRef)();if(!L)return null;const G=Object.assign({role:i,ref:D.setDialogRef,"aria-modal":"dialog"===i||void 0},R,{style:s,className:o,tabIndex:-1});let Q=b?b(G):(0,ex.jsx)("div",Object.assign({},G,{children:r.cloneElement(a,{role:"document"})}));Q=WE(d,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:C,onExiting:k,onExited:function(){z(!0),null==A||A(...arguments)},onEnter:P,onEntering:O,onEntered:I,children:Q});let Y=null;return l&&(Y=w({ref:D.setBackdropRef,onClick:q}),Y=WE(p,m,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Y})),(0,ex.jsx)(ex.Fragment,{children:IE.createPortal((0,ex.jsxs)(ex.Fragment,{children:[Y,Q]}),L)})}));YE.displayName="Modal";const XE=Object.assign(YE,{Manager:ME});function JE(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}var $E=Function.prototype.bind.call(Function.prototype.call,[].slice);function eS(e,t){return $E(e.querySelectorAll(t))}function tS(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const nS=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",rS=".sticky-top",iS=".navbar-toggler";class oS extends ME{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,TE(t,{[e]:"".concat(parseFloat(TE(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],TE(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):JE(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";eS(t,nS).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),eS(t,rS).forEach((t=>this.adjustAndStore(o,t,-e.scrollBarWidth))),eS(t,iS).forEach((t=>this.adjustAndStore(o,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=tS(n.className,r):n.setAttribute("class",tS(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";eS(t,nS).forEach((e=>this.restore(i,e))),eS(t,rS).forEach((e=>this.restore(o,e))),eS(t,iS).forEach((e=>this.restore(o,e)))}}let sS;function aS(e){return sS||(sS=new oS(e)),sS}const lS=oS;function cS(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function uS(e,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},uS(e,t)}const hS=!1,dS=r.createContext(null);var fS="unmounted",pS="exited",mS="entering",gS="entered",vS="exiting",yS=function(e){var t,n;function i(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=pS,r.appearStatus=mS):i=gS:i=t.unmountOnExit||t.mountOnEnter?fS:pS,r.state={status:i},r.nextCallback=null,r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,uS(t,n),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===fS?{status:pS}:null};var o=i.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==mS&&n!==gS&&(t=mS):n!==mS&&n!==gS||(t=vS)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===mS){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:IE.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===pS&&this.setState({status:fS})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[IE.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||hS?this.safeSetState({status:gS},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:mS},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:gS},(function(){t.props.onEntered(o,s)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:IE.findDOMNode(this);t&&!hS?(this.props.onExit(r),this.safeSetState({status:vS},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:pS},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:pS},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:IE.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===fS)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,cS(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(dS.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},i}(r.Component);function _S(){}yS.contextType=dS,yS.propTypes={},yS.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_S,onEntering:_S,onEntered:_S,onExit:_S,onExiting:_S,onExited:_S},yS.UNMOUNTED=fS,yS.EXITED=pS,yS.ENTERING=mS,yS.ENTERED=gS,yS.EXITING=vS;const bS=yS;function wS(e,t){const n=TE(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function xS(e,t){const n=wS(e,"transitionDuration"),r=wS(e,"transitionDelay"),i=kE(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}function ES(e){e.offsetHeight}function SS(e){return e&&"setState"in e?IE.findDOMNode(e):null!=e?e:null}const TS=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:s,onExiting:a,onExited:l,addEndListener:c,children:u,childRef:h,...d}=e;const f=(0,r.useRef)(null),p=yE(f,h),m=e=>{p(SS(e))},g=e=>t=>{e&&f.current&&e(f.current,t)},v=(0,r.useCallback)(g(n),[n]),y=(0,r.useCallback)(g(i),[i]),_=(0,r.useCallback)(g(o),[o]),b=(0,r.useCallback)(g(s),[s]),w=(0,r.useCallback)(g(a),[a]),x=(0,r.useCallback)(g(l),[l]),E=(0,r.useCallback)(g(c),[c]);return(0,ex.jsx)(bS,{ref:t,...d,onEnter:v,onEntered:_,onEntering:y,onExit:b,onExited:x,onExiting:w,addEndListener:E,nodeRef:f,children:"function"===typeof u?(e,t)=>u(e,{...t,ref:m}):r.cloneElement(u,{ref:m})})})),CS=TS,AS={[mS]:"show",[gS]:"show"},kS=r.forwardRef(((e,t)=>{let{className:n,children:i,transitionClasses:o={},onEnter:s,...a}=e;const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=(0,r.useCallback)(((e,t)=>{ES(e),null==s||s(e,t)}),[s]);return(0,ex.jsx)(CS,{ref:t,addEndListener:xS,...l,onEnter:c,childRef:i.ref,children:(e,t)=>r.cloneElement(i,{...t,className:ox()("fade",n,i.props.className,AS[e],o[e])})})}));kS.displayName="Fade";const PS=kS,OS=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"modal-body"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));OS.displayName="ModalBody";const IS=OS,RS=r.createContext({onHide(){}}),NS=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:o,size:s,fullscreen:a,children:l,scrollable:c,...u}=e;n=mx(n,"modal");const h="".concat(n,"-dialog"),d="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,ex.jsx)("div",{...u,ref:t,className:ox()(h,r,s&&"".concat(n,"-").concat(s),o&&"".concat(h,"-centered"),c&&"".concat(h,"-scrollable"),a&&d),children:(0,ex.jsx)("div",{className:ox()("".concat(n,"-content"),i),children:l})})}));NS.displayName="ModalDialog";const LS=NS,DS=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"modal-footer"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));DS.displayName="ModalFooter";const MS=DS,jS={"aria-label":xx().string,onClick:xx().func,variant:xx().oneOf(["white"])},FS=r.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...o}=e;return(0,ex.jsx)("button",{ref:t,type:"button",className:ox()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...o})}));FS.displayName="CloseButton",FS.propTypes=jS;const zS=FS,US=r.forwardRef(((e,t)=>{let{closeLabel:n="Close",closeVariant:i,closeButton:o=!1,onHide:s,children:a,...l}=e;const c=(0,r.useContext)(RS),u=gE((()=>{null==c||c.onHide(),null==s||s()}));return(0,ex.jsxs)("div",{ref:t,...l,children:[a,o&&(0,ex.jsx)(zS,{"aria-label":n,variant:i,onClick:u})]})})),BS=US,VS=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...s}=e;return n=mx(n,"modal-header"),(0,ex.jsx)(BS,{ref:t,...s,className:ox()(r,n),closeLabel:i,closeButton:o})}));VS.displayName="ModalHeader";const HS=VS,qS=e=>r.forwardRef(((t,n)=>(0,ex.jsx)("div",{...t,ref:n,className:ox()(t.className,e)}))),WS=qS("h4"),KS=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=WS,...o}=e;return r=mx(r,"modal-title"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));KS.displayName="ModalTitle";const ZS=KS;function GS(e){return(0,ex.jsx)(PS,{...e,timeout:null})}function QS(e){return(0,ex.jsx)(PS,{...e,timeout:null})}const YS=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,style:o,dialogClassName:s,contentClassName:a,children:l,dialogAs:c=LS,"aria-labelledby":u,"aria-describedby":h,"aria-label":d,show:f=!1,animation:p=!0,backdrop:m=!0,keyboard:g=!0,onEscapeKeyDown:v,onShow:y,onHide:_,container:b,autoFocus:w=!0,enforceFocus:x=!0,restoreFocus:E=!0,restoreFocusOptions:S,onEntered:T,onExit:C,onExiting:A,onEnter:k,onEntering:P,onExited:O,backdropClassName:I,manager:R,...N}=e;const[L,D]=(0,r.useState)({}),[M,j]=(0,r.useState)(!1),F=(0,r.useRef)(!1),z=(0,r.useRef)(!1),U=(0,r.useRef)(null),[B,V]=pE(),H=yE(t,V),q=gE(_),W=yx();n=mx(n,"modal");const K=(0,r.useMemo)((()=>({onHide:q})),[q]);function Z(){return R||aS({isRTL:W})}function G(e){if(!oE)return;const t=Z().getScrollbarWidth()>0,n=e.scrollHeight>uE(e).documentElement.clientHeight;D({paddingRight:t&&!n?fE():void 0,paddingLeft:!t&&n?fE():void 0})}const Q=gE((()=>{B&&G(B.dialog)}));_E((()=>{hE(window,"resize",Q),null==U.current||U.current()}));const Y=()=>{F.current=!0},X=e=>{F.current&&B&&e.target===B.dialog&&(z.current=!0),F.current=!1},J=()=>{j(!0),U.current=kE(B.dialog,(()=>{j(!1)}))},$=e=>{"static"!==m?z.current||e.target!==e.currentTarget?z.current=!1:null==_||_():(e=>{e.target===e.currentTarget&&J()})(e)},ee=(0,r.useCallback)((e=>(0,ex.jsx)("div",{...e,className:ox()("".concat(n,"-backdrop"),I,!p&&"show")})),[p,I,n]),te={...o,...L};te.display="block";return(0,ex.jsx)(RS.Provider,{value:K,children:(0,ex.jsx)(XE,{show:f,ref:H,backdrop:m,container:b,keyboard:!0,autoFocus:w,enforceFocus:x,restoreFocus:E,restoreFocusOptions:S,onEscapeKeyDown:e=>{g?null==v||v(e):(e.preventDefault(),"static"===m&&J())},onShow:y,onHide:_,onEnter:(e,t)=>{e&&G(e),null==k||k(e,t)},onEntering:(e,t)=>{null==P||P(e,t),cE(window,"resize",Q)},onEntered:T,onExit:e=>{null==U.current||U.current(),null==C||C(e)},onExiting:A,onExited:e=>{e&&(e.style.display=""),null==O||O(e),hE(window,"resize",Q)},manager:Z(),transition:p?GS:void 0,backdropTransition:p?QS:void 0,renderBackdrop:ee,renderDialog:e=>(0,ex.jsx)("div",{role:"dialog",...e,style:te,className:ox()(i,n,M&&"".concat(n,"-static"),!p&&"show"),onClick:m?$:void 0,onMouseUp:X,"aria-label":d,"aria-labelledby":u,"aria-describedby":h,children:(0,ex.jsx)(c,{...N,onMouseDown:Y,className:s,contentClassName:a,children:l})})})})}));YS.displayName="Modal";const XS=Object.assign(YS,{Body:IS,Header:HS,Title:ZS,Footer:MS,Dialog:LS,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),JS={type:xx().string,tooltip:xx().bool,as:xx().elementType},$S=r.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:o=!1,...s}=e;return(0,ex.jsx)(n,{...s,ref:t,className:ox()(r,"".concat(i,"-").concat(o?"tooltip":"feedback"))})}));$S.displayName="Feedback",$S.propTypes=JS;const eT=$S,tT=r.createContext({}),nT=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,className:o,type:s="checkbox",isValid:a=!1,isInvalid:l=!1,as:c="input",...u}=e;const{controlId:h}=(0,r.useContext)(tT);return i=mx(i,"form-check-input"),(0,ex.jsx)(c,{...u,ref:t,type:s,id:n||h,className:ox()(o,i,a&&"is-valid",l&&"is-invalid")})}));nT.displayName="FormCheckInput";const rT=nT,iT=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,htmlFor:o,...s}=e;const{controlId:a}=(0,r.useContext)(tT);return n=mx(n,"form-check-label"),(0,ex.jsx)("label",{...s,ref:t,htmlFor:o||a,className:ox()(i,n)})}));iT.displayName="FormCheckLabel";const oT=iT;function sT(e,t){let n=0;return r.Children.map(e,(e=>r.isValidElement(e)?t(e,n++):e))}const aT=r.forwardRef(((e,t)=>{let{id:n,bsPrefix:i,bsSwitchPrefix:o,inline:s=!1,reverse:a=!1,disabled:l=!1,isValid:c=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:d,feedbackType:f,className:p,style:m,title:g="",type:v="checkbox",label:y,children:_,as:b="input",...w}=e;i=mx(i,"form-check"),o=mx(o,"form-switch");const{controlId:x}=(0,r.useContext)(tT),E=(0,r.useMemo)((()=>({controlId:n||x})),[x,n]),S=!_&&null!=y&&!1!==y||function(e,t){return r.Children.toArray(e).some((e=>r.isValidElement(e)&&e.type===t))}(_,oT),T=(0,ex.jsx)(rT,{...w,type:"switch"===v?"checkbox":v,ref:t,isValid:c,isInvalid:u,disabled:l,as:b});return(0,ex.jsx)(tT.Provider,{value:E,children:(0,ex.jsx)("div",{style:m,className:ox()(p,S&&i,s&&"".concat(i,"-inline"),a&&"".concat(i,"-reverse"),"switch"===v&&o),children:_||(0,ex.jsxs)(ex.Fragment,{children:[T,S&&(0,ex.jsx)(oT,{title:g,children:y}),d&&(0,ex.jsx)(eT,{type:f,tooltip:h,children:d})]})})})}));aT.displayName="FormCheck";const lT=Object.assign(aT,{Input:rT,Label:oT});var cT=n(391),uT=n.n(cT);const hT=r.forwardRef(((e,t)=>{let{bsPrefix:n,type:i,size:o,htmlSize:s,id:a,className:l,isValid:c=!1,isInvalid:u=!1,plaintext:h,readOnly:d,as:f="input",...p}=e;const{controlId:m}=(0,r.useContext)(tT);return n=mx(n,"form-control"),(0,ex.jsx)(f,{...p,type:i,size:s,ref:t,readOnly:d,id:a||m,className:ox()(l,h?"".concat(n,"-plaintext"):n,o&&"".concat(n,"-").concat(o),"color"===i&&"".concat(n,"-color"),c&&"is-valid",u&&"is-invalid")})}));hT.displayName="FormControl";const dT=Object.assign(hT,{Feedback:eT}),fT=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"form-floating"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));fT.displayName="FormFloating";const pT=fT,mT=r.forwardRef(((e,t)=>{let{controlId:n,as:i="div",...o}=e;const s=(0,r.useMemo)((()=>({controlId:n})),[n]);return(0,ex.jsx)(tT.Provider,{value:s,children:(0,ex.jsx)(i,{...o,ref:t})})}));mT.displayName="FormGroup";const gT=mT;const vT=r.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:s}]=function(e){let{as:t,bsPrefix:n,className:r,...i}=e;n=mx(n,"col");const o=gx(),s=vx(),a=[],l=[];return o.forEach((e=>{const t=i[e];let r,o,c;delete i[e],"object"===typeof t&&null!=t?({span:r,offset:o,order:c}=t):r=t;const u=e!==s?"-".concat(e):"";r&&a.push(!0===r?"".concat(n).concat(u):"".concat(n).concat(u,"-").concat(r)),null!=c&&l.push("order".concat(u,"-").concat(c)),null!=o&&l.push("offset".concat(u,"-").concat(o))})),[{...i,className:ox()(r,...a,...l)},{as:t,bsPrefix:n,spans:a}]}(e);return(0,ex.jsx)(i,{...r,ref:t,className:ox()(n,!s.length&&o)})}));vT.displayName="Col";const yT=vT,_T=r.forwardRef(((e,t)=>{let{as:n="label",bsPrefix:i,column:o=!1,visuallyHidden:s=!1,className:a,htmlFor:l,...c}=e;const{controlId:u}=(0,r.useContext)(tT);i=mx(i,"form-label");let h="col-form-label";"string"===typeof o&&(h="".concat(h," ").concat(h,"-").concat(o));const d=ox()(a,i,s&&"visually-hidden",o&&h);return l=l||u,o?(0,ex.jsx)(yT,{ref:t,as:"label",className:d,htmlFor:l,...c}):(0,ex.jsx)(n,{ref:t,className:d,htmlFor:l,...c})}));_T.displayName="FormLabel";const bT=_T,wT=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,id:o,...s}=e;const{controlId:a}=(0,r.useContext)(tT);return n=mx(n,"form-range"),(0,ex.jsx)("input",{...s,type:"range",ref:t,className:ox()(i,n),id:o||a})}));wT.displayName="FormRange";const xT=wT,ET=r.forwardRef(((e,t)=>{let{bsPrefix:n,size:i,htmlSize:o,className:s,isValid:a=!1,isInvalid:l=!1,id:c,...u}=e;const{controlId:h}=(0,r.useContext)(tT);return n=mx(n,"form-select"),(0,ex.jsx)("select",{...u,size:o,ref:t,className:ox()(s,n,i&&"".concat(n,"-").concat(i),a&&"is-valid",l&&"is-invalid"),id:c||h})}));ET.displayName="FormSelect";const ST=ET,TT=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:o,...s}=e;return n=mx(n,"form-text"),(0,ex.jsx)(i,{...s,ref:t,className:ox()(r,n,o&&"text-muted")})}));TT.displayName="FormText";const CT=TT,AT=r.forwardRef(((e,t)=>(0,ex.jsx)(lT,{...e,ref:t,type:"switch"})));AT.displayName="Switch";const kT=Object.assign(AT,{Input:lT.Input,Label:lT.Label}),PT=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:o,label:s,...a}=e;return n=mx(n,"form-floating"),(0,ex.jsxs)(gT,{ref:t,className:ox()(r,n),controlId:o,...a,children:[i,(0,ex.jsx)("label",{htmlFor:o,children:s})]})}));PT.displayName="FloatingLabel";const OT=PT,IT={_ref:xx().any,validated:xx().bool,as:xx().elementType},RT=r.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...o}=e;return(0,ex.jsx)(i,{...o,ref:t,className:ox()(n,r&&"was-validated")})}));RT.displayName="Form",RT.propTypes=IT;const NT=Object.assign(RT,{Group:gT,Control:dT,Floating:pT,Check:lT,Switch:kT,Label:bT,Text:CT,Range:xT,Select:ST,FloatingLabel:OT}),LT=r.createContext(null);LT.displayName="InputGroupContext";const DT=LT,MT=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=mx(r,"input-group-text"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));MT.displayName="InputGroupText";const jT=MT,FT=r.forwardRef(((e,t)=>{let{bsPrefix:n,size:i,hasValidation:o,className:s,as:a="div",...l}=e;n=mx(n,"input-group");const c=(0,r.useMemo)((()=>({})),[]);return(0,ex.jsx)(DT.Provider,{value:c,children:(0,ex.jsx)(a,{ref:t,...l,className:ox()(s,n,i&&"".concat(n,"-").concat(i),o&&"has-validation")})})}));FT.displayName="InputGroup";const zT=Object.assign(FT,{Text:jT,Radio:e=>(0,ex.jsx)(jT,{children:(0,ex.jsx)(rT,{type:"radio",...e})}),Checkbox:e=>(0,ex.jsx)(jT,{children:(0,ex.jsx)(rT,{type:"checkbox",...e})})});var UT=["color","size","title"];function BT(){return BT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BT.apply(this,arguments)}function VT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var HT=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=VT(e,UT);return r.createElement("svg",BT({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M6.5 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),r.createElement("path",{d:"M4.5 0A2.5 2.5 0 0 0 2 2.5V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2.5A2.5 2.5 0 0 0 11.5 0h-7zM3 2.5A1.5 1.5 0 0 1 4.5 1h7A1.5 1.5 0 0 1 13 2.5v10.795a4.2 4.2 0 0 0-.776-.492C11.392 12.387 10.063 12 8 12s-3.392.387-4.224.803a4.2 4.2 0 0 0-.776.492V2.5z"}))}));HT.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},HT.defaultProps={color:"currentColor",size:"1em",title:null};const qT=HT;var WT=["color","size","title"];function KT(){return KT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KT.apply(this,arguments)}function ZT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var GT=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=ZT(e,WT);return r.createElement("svg",KT({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"}))}));GT.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},GT.defaultProps={color:"currentColor",size:"1em",title:null};const QT=GT;function YT(){const{modalState:e,toggleModals:t,signUp:n}=(0,r.useContext)(tx),i=J(),[o,s]=(0,r.useState)(""),a=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useRef)(),u=(0,r.useRef)();return(0,ex.jsxs)(XS,{show:e.signUpModal,onHide:()=>{s(""),t("close")},centered:!0,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,className:"bg-dark text-light",children:(0,ex.jsx)(XS.Title,{children:"S'inscrire"})}),(0,ex.jsx)(XS.Body,{children:(0,ex.jsxs)(NT,{onSubmit:async e=>{e.preventDefault();const r=a.current.value,o=l.current.value,h=c.current.value,d=u.current.value;if(o.length<6||h.length<6)s("6 caract\xe8res min");else if(o===h)if(d.trim())try{await n(r,o,d),s(""),t("close"),i("/private/private-home")}catch(f){"auth/invalid-email"===f.code&&s("Format d'adresse invalide"),"auth/email-already-in-use"===f.code&&s("L'adresse est d\xe9j\xe0 utilis\xe9e")}else s("Le nom d'affichage est requis");else s("Le mot de passe ne correspond pas")},children:[(0,ex.jsx)(NT.Group,{className:"mb-3",children:(0,ex.jsxs)(zT,{children:[(0,ex.jsx)(zT.Text,{children:(0,ex.jsx)(qT,{})}),(0,ex.jsx)(NT.Control,{ref:u,type:"text",required:!0,placeholder:"Nom d'affichage"})]})}),(0,ex.jsx)(NT.Group,{className:"mb-3",children:(0,ex.jsxs)(zT,{children:[(0,ex.jsx)(zT.Text,{children:(0,ex.jsx)(zx,{})}),(0,ex.jsx)(NT.Control,{ref:a,type:"email",required:!0,placeholder:"Entrer email"})]})}),(0,ex.jsx)(NT.Group,{className:"mb-3",children:(0,ex.jsxs)(zT,{children:[(0,ex.jsx)(zT.Text,{children:(0,ex.jsx)(QT,{})}),(0,ex.jsx)(NT.Control,{ref:l,type:"password",required:!0,placeholder:"Mot de passe"})]})}),(0,ex.jsxs)(NT.Group,{className:"mb-3",children:[(0,ex.jsxs)(zT,{children:[(0,ex.jsx)(zT.Text,{children:(0,ex.jsx)(QT,{})}),(0,ex.jsx)(NT.Control,{ref:c,type:"password",required:!0,placeholder:"R\xe9p\xe9ter le mot de passe"})]}),(0,ex.jsx)(NT.Text,{className:"text-danger",children:o})]}),(0,ex.jsx)(bx,{variant:"secondary",type:"submit",children:"Valider"})]})})]})}function XT(){const{modalState:e,toggleModals:t,signIn:n}=(0,r.useContext)(tx),i=J(),[o,s]=(0,r.useState)(""),a=(0,r.useRef)(),l=(0,r.useRef)();return(0,ex.jsxs)(XS,{show:e.signInModal,onHide:()=>t("close"),centered:!0,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,className:"bg-dark text-light",children:(0,ex.jsx)(XS.Title,{children:"Connexion"})}),(0,ex.jsx)(XS.Body,{children:(0,ex.jsxs)(NT,{onSubmit:async e=>{e.preventDefault();try{await n(a.current.value,l.current.value),s(""),t("close"),i("/private/private-home")}catch{s("Oups, l'adresse email ou le mot de passe est invalide.")}},children:[(0,ex.jsx)(NT.Group,{className:"mb-3",children:(0,ex.jsxs)(zT,{children:[(0,ex.jsxs)(zT.Text,{children:[(0,ex.jsx)(zx,{})," "]}),(0,ex.jsx)(NT.Control,{ref:a,type:"email",placeholder:"Adresse e-mail",required:!0})]})}),(0,ex.jsxs)(NT.Group,{className:"mb-3",children:[(0,ex.jsxs)(zT,{children:[(0,ex.jsxs)(zT.Text,{children:[(0,ex.jsx)(QT,{})," "]}),(0,ex.jsx)(NT.Control,{ref:l,type:"password",placeholder:"Mot de passe",required:!0})]}),(0,ex.jsx)(NT.Text,{className:"text-danger",children:o})]}),(0,ex.jsx)(bx,{variant:"secondary",type:"submit",children:"Connexion"})]})})]})}function JT(){const{currentUser:e}=(0,r.useContext)(tx);return e?(0,ex.jsx)("div",{className:"container",children:(0,ex.jsx)(fe,{})}):(0,ex.jsx)(de,{to:"/"})}var $T=["color","size","title"];function eC(){return eC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eC.apply(this,arguments)}function tC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var nC=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=tC(e,$T);return r.createElement("svg",eC({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"}))}));nC.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},nC.defaultProps={color:"currentColor",size:"1em",title:null};const rC=nC;var iC=["color","size","title"];function oC(){return oC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oC.apply(this,arguments)}function sC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var aC=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=sC(e,iC);return r.createElement("svg",oC({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z"}))}));aC.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},aC.defaultProps={color:"currentColor",size:"1em",title:null};const lC=aC;var cC=["color","size","title"];function uC(){return uC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uC.apply(this,arguments)}function hC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var dC=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=hC(e,cC);return r.createElement("svg",uC({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M13 2.5a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-3 0v-.214c-2.162-1.241-4.49-1.843-6.912-2.083l.405 2.712A1 1 0 0 1 5.51 15.1h-.548a1 1 0 0 1-.916-.599l-1.85-3.49a68.14 68.14 0 0 0-.202-.003A2.014 2.014 0 0 1 0 9V7a2.02 2.02 0 0 1 1.992-2.013 74.663 74.663 0 0 0 2.483-.075c3.043-.154 6.148-.849 8.525-2.199V2.5zm1 0v11a.5.5 0 0 0 1 0v-11a.5.5 0 0 0-1 0zm-1 1.35c-2.344 1.205-5.209 1.842-8 2.033v4.233c.18.01.359.022.537.036 2.568.189 5.093.744 7.463 1.993V3.85zm-9 6.215v-4.13a95.09 95.09 0 0 1-1.992.052A1.02 1.02 0 0 0 1 7v2c0 .55.448 1.002 1.006 1.009A60.49 60.49 0 0 1 4 10.065zm-.657.975 1.609 3.037.01.024h.548l-.002-.014-.443-2.966a68.019 68.019 0 0 0-1.722-.082z"}))}));dC.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},dC.defaultProps={color:"currentColor",size:"1em",title:null};const fC=dC;var pC=["color","size","title"];function mC(){return mC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mC.apply(this,arguments)}function gC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var vC=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=gC(e,pC);return r.createElement("svg",mC({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"}),r.createElement("path",{d:"M3 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0-5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1z"}))}));vC.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},vC.defaultProps={color:"currentColor",size:"1em",title:null};const yC=vC;var _C=["color","size","title"];function bC(){return bC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bC.apply(this,arguments)}function wC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var xC=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=wC(e,_C);return r.createElement("svg",bC({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1H5z"}),r.createElement("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"}))}));xC.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},xC.defaultProps={color:"currentColor",size:"1em",title:null};const EC=xC,SC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"card-body"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));SC.displayName="CardBody";const TC=SC,CC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"card-footer"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));CC.displayName="CardFooter";const AC=CC,kC=r.createContext(null);kC.displayName="CardHeaderContext";const PC=kC,OC=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,as:o="div",...s}=e;const a=mx(n,"card-header"),l=(0,r.useMemo)((()=>({cardHeaderBsPrefix:a})),[a]);return(0,ex.jsx)(PC.Provider,{value:l,children:(0,ex.jsx)(o,{ref:t,...s,className:ox()(i,a)})})}));OC.displayName="CardHeader";const IC=OC,RC=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,variant:i,as:o="img",...s}=e;const a=mx(n,"card-img");return(0,ex.jsx)(o,{ref:t,className:ox()(i?"".concat(a,"-").concat(i):a,r),...s})}));RC.displayName="CardImg";const NC=RC,LC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"card-img-overlay"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));LC.displayName="CardImgOverlay";const DC=LC,MC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="a",...o}=e;return r=mx(r,"card-link"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));MC.displayName="CardLink";const jC=MC,FC=qS("h6"),zC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=FC,...o}=e;return r=mx(r,"card-subtitle"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));zC.displayName="CardSubtitle";const UC=zC,BC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="p",...o}=e;return r=mx(r,"card-text"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));BC.displayName="CardText";const VC=BC,HC=qS("h5"),qC=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=HC,...o}=e;return r=mx(r,"card-title"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));qC.displayName="CardTitle";const WC=qC,KC=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,bg:i,text:o,border:s,body:a=!1,children:l,as:c="div",...u}=e;const h=mx(n,"card");return(0,ex.jsx)(c,{ref:t,...u,className:ox()(r,h,i&&"bg-".concat(i),o&&"text-".concat(o),s&&"border-".concat(s)),children:a?(0,ex.jsx)(TC,{children:l}):l})}));KC.displayName="Card";const ZC=Object.assign(KC,{Img:NC,Title:WC,Subtitle:UC,Body:TC,Link:jC,Text:VC,Header:IC,Footer:AC,ImgOverlay:DC}),GC=r.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:o,...s}=e;const a=mx(n,"container"),l="string"===typeof r?"-".concat(r):"-fluid";return(0,ex.jsx)(i,{ref:t,...s,className:ox()(o,r?"".concat(a).concat(l):a)})}));GC.displayName="Container";const QC=GC;const YC=function(e){return e?e.trim().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "):(console.warn("formatCompanyName re\xe7ue une valeur null ou undefined"),"")};const XC=function(e){return YC(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"").replace(/'/g,"")},JC=e=>{let{label:t,children:n,id:r}=e;return(0,ex.jsxs)("div",{className:"form-group mb-4",children:[(0,ex.jsx)("label",{htmlFor:r,className:"text-light mb-2",children:t}),n]})},$C=e=>{let{id:t,name:n,type:r,value:i,onChange:o,placeholder:s,...a}=e;return(0,ex.jsx)("input",{id:t,name:n,type:r,className:"form-control",value:i,onChange:o,placeholder:s,...a})},eA=e=>{let{value:t,onChange:n}=e;return(0,ex.jsxs)(JC,{label:"Nom de l'entreprise",id:"company-name-input",children:[(0,ex.jsx)($C,{id:"company-name-input",name:"companyName",type:"text",value:t,onChange:n,placeholder:"Entrez le nom de l'entreprise"}),(0,ex.jsx)(bx,{variant:"link",className:"btn text-light mt-1 p-0",style:{textDecoration:"none"},onClick:()=>{n&&n({target:{value:"Entreprise X",name:"companyName"}})},children:"Je ne sais pas"})]})};function tA(e,t){return function(){return e.apply(t,arguments)}}const{toString:nA}=Object.prototype,{getPrototypeOf:rA}=Object,iA=(oA=Object.create(null),e=>{const t=nA.call(e);return oA[t]||(oA[t]=t.slice(8,-1).toLowerCase())});var oA;const sA=e=>(e=e.toLowerCase(),t=>iA(t)===e),aA=e=>t=>typeof t===e,{isArray:lA}=Array,cA=aA("undefined");const uA=sA("ArrayBuffer");const hA=aA("string"),dA=aA("function"),fA=aA("number"),pA=e=>null!==e&&"object"===typeof e,mA=e=>{if("object"!==iA(e))return!1;const t=rA(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gA=sA("Date"),vA=sA("File"),yA=sA("Blob"),_A=sA("FileList"),bA=sA("URLSearchParams");function wA(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),lA(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function xA(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const EA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,SA=e=>!cA(e)&&e!==EA;const TA=(CA="undefined"!==typeof Uint8Array&&rA(Uint8Array),e=>CA&&e instanceof CA);var CA;const AA=sA("HTMLFormElement"),kA=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),PA=sA("RegExp"),OA=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};wA(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},IA="abcdefghijklmnopqrstuvwxyz",RA="0123456789",NA={DIGIT:RA,ALPHA:IA,ALPHA_DIGIT:IA+IA.toUpperCase()+RA};const LA=sA("AsyncFunction"),DA={isArray:lA,isArrayBuffer:uA,isBuffer:function(e){return null!==e&&!cA(e)&&null!==e.constructor&&!cA(e.constructor)&&dA(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||dA(e.append)&&("formdata"===(t=iA(e))||"object"===t&&dA(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&uA(e.buffer),t},isString:hA,isNumber:fA,isBoolean:e=>!0===e||!1===e,isObject:pA,isPlainObject:mA,isUndefined:cA,isDate:gA,isFile:vA,isBlob:yA,isRegExp:PA,isFunction:dA,isStream:e=>pA(e)&&dA(e.pipe),isURLSearchParams:bA,isTypedArray:TA,isFileList:_A,forEach:wA,merge:function e(){const{caseless:t}=SA(this)&&this||{},n={},r=(r,i)=>{const o=t&&xA(n,i)||i;mA(n[o])&&mA(r)?n[o]=e(n[o],r):mA(r)?n[o]=e({},r):lA(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&wA(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wA(t,((t,r)=>{n&&dA(t)?e[r]=tA(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&rA(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:iA,kindOfTest:sA,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(lA(e))return e;let t=e.length;if(!fA(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:AA,hasOwnProperty:kA,hasOwnProp:kA,reduceDescriptors:OA,freezeMethods:e=>{OA(e,((t,n)=>{if(dA(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];dA(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return lA(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:xA,global:EA,isContextDefined:SA,ALPHABET:NA,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NA.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&dA(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(pA(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=lA(e)?[]:{};return wA(e,((e,t)=>{const o=n(e,r+1);!cA(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:LA,isThenable:e=>e&&(pA(e)||dA(e))&&dA(e.then)&&dA(e.catch)};function MA(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}DA.inherits(MA,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:DA.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const jA=MA.prototype,FA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{FA[e]={value:e}})),Object.defineProperties(MA,FA),Object.defineProperty(jA,"isAxiosError",{value:!0}),MA.from=(e,t,n,r,i,o)=>{const s=Object.create(jA);return DA.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),MA.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const zA=MA;function UA(e){return DA.isPlainObject(e)||DA.isArray(e)}function BA(e){return DA.endsWith(e,"[]")?e.slice(0,-2):e}function VA(e,t,n){return e?e.concat(t).map((function(e,t){return e=BA(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const HA=DA.toFlatObject(DA,{},null,(function(e){return/^is[A-Z]/.test(e)}));const qA=function(e,t,n){if(!DA.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=DA.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!DA.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&DA.isSpecCompliantForm(t);if(!DA.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(DA.isDate(e))return e.toISOString();if(!a&&DA.isBlob(e))throw new zA("Blob is not supported. Use a Buffer instead.");return DA.isArrayBuffer(e)||DA.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(DA.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(DA.isArray(e)&&function(e){return DA.isArray(e)&&!e.some(UA)}(e)||(DA.isFileList(e)||DA.endsWith(n,"[]"))&&(a=DA.toArray(e)))return n=BA(n),a.forEach((function(e,r){!DA.isUndefined(e)&&null!==e&&t.append(!0===s?VA([n],r,o):null===s?n:n+"[]",l(e))})),!1;return!!UA(e)||(t.append(VA(i,n,o),l(e)),!1)}const u=[],h=Object.assign(HA,{defaultVisitor:c,convertValue:l,isVisitable:UA});if(!DA.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!DA.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),DA.forEach(n,(function(n,o){!0===(!(DA.isUndefined(n)||null===n)&&i.call(t,n,DA.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function WA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function KA(e,t){this._pairs=[],e&&qA(e,this,t)}const ZA=KA.prototype;ZA.append=function(e,t){this._pairs.push([e,t])},ZA.toString=function(e){const t=e?function(t){return e.call(this,t,WA)}:WA;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const GA=KA;function QA(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function YA(e,t,n){if(!t)return e;const r=n&&n.encode||QA,i=n&&n.serialize;let o;if(o=i?i(t,n):DA.isURLSearchParams(t)?t.toString():new GA(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const XA=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){DA.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},JA={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$A={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:GA,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ek="undefined"!==typeof window&&"undefined"!==typeof document,tk=(nk="undefined"!==typeof navigator&&navigator.product,ek&&["ReactNative","NativeScript","NS"].indexOf(nk)<0);var nk;const rk="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ik={...e,...$A};const ok=function(e){function t(e,n,r,i){let o=e[i++];const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&DA.isArray(r)?r.length:o,a)return DA.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&DA.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&DA.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(DA.isFormData(e)&&DA.isFunction(e.entries)){const n={};return DA.forEachEntry(e,((e,r)=>{t(function(e){return DA.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const sk={transitional:JA,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=DA.isObject(e);i&&DA.isHTMLForm(e)&&(e=new FormData(e));if(DA.isFormData(e))return r&&r?JSON.stringify(ok(e)):e;if(DA.isArrayBuffer(e)||DA.isBuffer(e)||DA.isStream(e)||DA.isFile(e)||DA.isBlob(e))return e;if(DA.isArrayBufferView(e))return e.buffer;if(DA.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return qA(e,new ik.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ik.isNode&&DA.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=DA.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return qA(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(DA.isString(e))try{return(t||JSON.parse)(e),DA.trim(e)}catch(Yv){if("SyntaxError"!==Yv.name)throw Yv}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||sk.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&DA.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Yv){if(n){if("SyntaxError"===Yv.name)throw zA.from(Yv,zA.ERR_BAD_RESPONSE,this,null,this.response);throw Yv}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ik.classes.FormData,Blob:ik.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};DA.forEach(["delete","get","head","post","put","patch"],(e=>{sk.headers[e]={}}));const ak=sk,lk=DA.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ck=Symbol("internals");function uk(e){return e&&String(e).trim().toLowerCase()}function hk(e){return!1===e||null==e?e:DA.isArray(e)?e.map(hk):String(e)}function dk(e,t,n,r,i){return DA.isFunction(r)?r.call(this,t,n):(i&&(t=n),DA.isString(t)?DA.isString(r)?-1!==t.indexOf(r):DA.isRegExp(r)?r.test(t):void 0:void 0)}class fk{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=uk(t);if(!i)throw new Error("header name must be a non-empty string");const o=DA.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=hk(e))}const o=(e,t)=>DA.forEach(e,((e,n)=>i(e,n,t)));return DA.isPlainObject(e)||e instanceof this.constructor?o(e,t):DA.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&lk[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=uk(e)){const n=DA.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(DA.isFunction(t))return t.call(this,e,n);if(DA.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=uk(e)){const n=DA.findKey(this,e);return!(!n||void 0===this[n]||t&&!dk(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=uk(e)){const i=DA.findKey(n,e);!i||t&&!dk(0,n[i],i,t)||(delete n[i],r=!0)}}return DA.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!dk(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return DA.forEach(this,((r,i)=>{const o=DA.findKey(n,i);if(o)return t[o]=hk(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=hk(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return DA.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&DA.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ck]=this[ck]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=uk(e);t[r]||(!function(e,t){const n=DA.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return DA.isArray(e)?e.forEach(r):r(e),this}}fk.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),DA.reduceDescriptors(fk.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),DA.freezeMethods(fk);const pk=fk;function mk(e,t){const n=this||ak,r=t||n,i=pk.from(r.headers);let o=r.data;return DA.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function gk(e){return!(!e||!e.__CANCEL__)}function vk(e,t,n){zA.call(this,null==e?"canceled":e,zA.ERR_CANCELED,t,n),this.name="CanceledError"}DA.inherits(vk,zA,{__CANCEL__:!0});const yk=vk;const _k=ik.hasStandardBrowserEnv?{write:function(e,t,n,r,i,o){const s=[];s.push(e+"="+encodeURIComponent(t)),DA.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),DA.isString(r)&&s.push("path="+r),DA.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function bk(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const wk=ik.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=DA.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const xk=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let u=s,h=0;for(;u!==o;)h+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};function Ek(e,t){let n=0;const r=xk(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,l=r(a);n=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const Sk="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=pk.from(e.headers).normalize(),o=e.responseType;let s,a;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(DA.isFormData(r))if(ik.hasStandardBrowserEnv||ik.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(a=i.getContentType())){const[e,...t]=a?a.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const u=bk(e.baseURL,e.url);function h(){if(!c)return;const r=pk.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new zA("Request failed with status code "+n.status,[zA.ERR_BAD_REQUEST,zA.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:o&&"text"!==o&&"json"!==o?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),YA(u,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new zA("Request aborted",zA.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new zA("Network Error",zA.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||JA;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new zA(t,r.clarifyTimeoutError?zA.ETIMEDOUT:zA.ECONNABORTED,e,c)),c=null},ik.hasStandardBrowserEnv){const t=wk(u)&&e.xsrfCookieName&&_k.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in c&&DA.forEach(i.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),DA.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),o&&"json"!==o&&(c.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&c.addEventListener("progress",Ek(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Ek(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{c&&(n(!t||t.type?new yk(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(u);d&&-1===ik.protocols.indexOf(d)?n(new zA("Unsupported protocol "+d+":",zA.ERR_BAD_REQUEST,e)):c.send(r||null)}))},Tk={http:null,xhr:Sk};DA.forEach(Tk,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Yv){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ck=e=>"- ".concat(e),Ak=e=>DA.isFunction(e)||null===e||!1===e,kk=e=>{e=DA.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Ak(n)&&(r=Tk[(t=String(n)).toLowerCase()],void 0===r))throw new zA("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Ck).join("\n"):" "+Ck(e[0]):"as no adapter specified";throw new zA("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Pk(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yk(null,e)}function Ok(e){Pk(e),e.headers=pk.from(e.headers),e.data=mk.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return kk(e.adapter||ak.adapter)(e).then((function(t){return Pk(e),t.data=mk.call(e,e.transformResponse,t),t.headers=pk.from(t.headers),t}),(function(t){return gk(t)||(Pk(e),t&&t.response&&(t.response.data=mk.call(e,e.transformResponse,t.response),t.response.headers=pk.from(t.response.headers))),Promise.reject(t)}))}const Ik=e=>e instanceof pk?e.toJSON():e;function Rk(e,t){t=t||{};const n={};function r(e,t,n){return DA.isPlainObject(e)&&DA.isPlainObject(t)?DA.merge.call({caseless:n},e,t):DA.isPlainObject(t)?DA.merge({},t):DA.isArray(t)?t.slice():t}function i(e,t,n){return DA.isUndefined(t)?DA.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!DA.isUndefined(t))return r(void 0,t)}function s(e,t){return DA.isUndefined(t)?DA.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(Ik(e),Ik(t),!0)};return DA.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,s=o(e[r],t[r],r);DA.isUndefined(s)&&o!==a||(n[r]=s)})),n}const Nk="1.6.1",Lk={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Lk[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Dk={};Lk.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.1] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new zA(r(i," has been removed"+(t?" in "+t:"")),zA.ERR_DEPRECATED);return t&&!Dk[i]&&(Dk[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const Mk={assertOptions:function(e,t,n){if("object"!==typeof e)throw new zA("options must be an object",zA.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new zA("option "+o+" must be "+n,zA.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new zA("Unknown option "+o,zA.ERR_BAD_OPTION)}},validators:Lk},jk=Mk.validators;class Fk{constructor(e){this.defaults=e,this.interceptors={request:new XA,response:new XA}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Rk(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Mk.assertOptions(n,{silentJSONParsing:jk.transitional(jk.boolean),forcedJSONParsing:jk.transitional(jk.boolean),clarifyTimeoutError:jk.transitional(jk.boolean)},!1),null!=r&&(DA.isFunction(r)?t.paramsSerializer={serialize:r}:Mk.assertOptions(r,{encode:jk.function,serialize:jk.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&DA.merge(i.common,i[t.method]);i&&DA.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=pk.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[Ok.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=s.length;let d=t;for(h=0;h<u;){const e=s[h++],t=s[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=Ok.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return YA(bk((e=Rk(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}DA.forEach(["delete","get","head","options"],(function(e){Fk.prototype[e]=function(t,n){return this.request(Rk(n||{},{method:e,url:t,data:(n||{}).data}))}})),DA.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Rk(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Fk.prototype[e]=t(),Fk.prototype[e+"Form"]=t(!0)}));const zk=Fk;class Uk{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new yk(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new Uk((function(t){e=t}));return{token:t,cancel:e}}}const Bk=Uk;const Vk={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vk).forEach((e=>{let[t,n]=e;Vk[n]=t}));const Hk=Vk;const qk=function e(t){const n=new zk(t),r=tA(zk.prototype.request,n);return DA.extend(r,zk.prototype,n,{allOwnKeys:!0}),DA.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Rk(t,n))},r}(ak);qk.Axios=zk,qk.CanceledError=yk,qk.CancelToken=Bk,qk.isCancel=gk,qk.VERSION=Nk,qk.toFormData=qA,qk.AxiosError=zA,qk.Cancel=qk.CanceledError,qk.all=function(e){return Promise.all(e)},qk.spread=function(e){return function(t){return e.apply(null,t)}},qk.isAxiosError=function(e){return DA.isObject(e)&&!0===e.isAxiosError},qk.mergeConfig=Rk,qk.AxiosHeaders=pk,qk.formToJSON=e=>ok(DA.isHTMLForm(e)?new FormData(e):e),qk.getAdapter=kk,qk.HttpStatusCode=Hk,qk.default=qk;const Wk=qk,Kk=(e=>Wk.create({baseURL:e,timeout:1e4}))("https://api-adresse.data.gouv.fr");const Zk=function(e,t){const[n,i]=(0,r.useState)(e||""),[o,s]=(0,r.useState)([]);return{address:n,autocompleteResults:o,handleAddressChange:async e=>{const t=e.target.value;if(i(t),t.length<3)s([]);else try{const e=await(async e=>{try{const t=await Kk.get("/search/?q=".concat(encodeURIComponent(e),"&limit=5&postcode=51000"));return Array.isArray(t.data.features)?t.data.features.filter((e=>e.properties.score>.5)):[]}catch(t){throw t}})(t);s(e||[])}catch(n){console.error("Erreur lors de l'autocompl\xe9tion:",n)}},handleSuggestionClick:e=>{i(e.properties.label),t&&e.geometry&&t([e.geometry.coordinates[1],e.geometry.coordinates[0]],e.properties.label),s([])},handleGeolocationClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((async e=>{const n=e.coords.latitude,r=e.coords.longitude;try{const e=await(async(e,t)=>{try{const n=await Kk.get("/reverse/?lat=".concat(e,"&lon=").concat(t));return n.data&&n.data.features&&n.data.features.length>0?n.data.features[0].properties.label:null}catch(n){return console.error("Erreur de g\xe9ocodage inverse:",n),null}})(n,r);e?(i(e),t([n,r],e)):console.warn("G\xe9ocodage inverse: aucune adresse trouv\xe9e pour ces coordonn\xe9es.")}catch(o){console.error("Erreur lors du g\xe9ocodage inverse:",o)}}),(e=>{switch(e.code){case e.PERMISSION_DENIED:alert("Permission pour la g\xe9olocalisation refus\xe9e.");break;case e.POSITION_UNAVAILABLE:alert("Information de localisation non disponible.");break;case e.TIMEOUT:alert("La requ\xeate pour obtenir la position de l'utilisateur a expir\xe9.");break;case e.UNKNOWN_ERROR:default:alert("Une erreur inconnue s'est produite.")}})):alert("La g\xe9olocalisation n'est pas prise en charge par votre navigateur.")}}},Gk=e=>{const{dispatch:t,state:n}=Oz(),{address:r,autocompleteResults:i,handleAddressChange:o,handleSuggestionClick:s,handleGeolocationClick:a}=Zk(n.formData.companyAddress,((e,n)=>{t({type:"UPDATE_FORM_DATA",payload:{companyAddress:n,companyCoordinates:e}})}));return(0,ex.jsxs)("div",{children:[(0,ex.jsxs)(JC,{label:"Adresse de l'entreprise",id:"company-address-input",children:[(0,ex.jsx)($C,{id:"company-address-input",name:"companyAddress",type:"text",value:r,onChange:o,placeholder:"Saisissez une adresse",required:!0}),(0,ex.jsx)(bx,{variant:"link",className:"btn text-light mt-1 p-0",style:{textDecoration:"none"},onClick:a,children:"Me g\xe9olocaliser"})]}),(0,ex.jsx)("div",{className:"position-relative",children:(0,ex.jsx)("ul",{className:"list-group autocomplete-list position-absolute w-100 bg-white p-0",children:i.map(((e,t)=>e.properties?(0,ex.jsx)("li",{className:"list-group-item list-group-item-action p-2",onClick:()=>s(e),children:e.properties.label},t):null))})})]})},Qk=e=>{let{label:t,id:n,type:r,value:i,onChange:o,buttonLabel:s,onClickButton:a}=e;return(0,ex.jsx)("div",{className:"mb-0 w-50",children:(0,ex.jsxs)(JC,{label:t,id:n,children:[(0,ex.jsx)("input",{id:n,type:r,className:"form-control",value:i,onChange:o}),s&&(0,ex.jsx)(bx,{variant:"link",className:"btn text-light mb-0 p-1 ps-0 pb-0",style:{textDecoration:"none"},onClick:a,children:s})]})})},Yk=()=>{const{dispatch:e,state:t}=Oz(),n=t=>n=>{e({type:"UPDATE_FORM_DATA",payload:{[t]:n.target.value}})};return(0,ex.jsxs)("div",{className:"d-flex justify-content-between mb-0 gap-3",children:[(0,ex.jsx)(Qk,{label:"Date",id:"date-input",type:"date",value:t.formData.dateOfObservation,onChange:n("dateOfObservation"),buttonLabel:"Maintenant",onClickButton:()=>{const e=new Date,t=e.toISOString().slice(0,10),r=e.toTimeString().slice(0,5);n("dateOfObservation")({target:{value:t}}),n("timeOfObservation")({target:{value:r}})}}),(0,ex.jsx)(Qk,{label:"Heure",id:"time-input",type:"time",value:t.formData.timeOfObservation,onChange:n("timeOfObservation")})]})};function Xk(e){return e*Math.PI/180}async function Jk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{horizontal:!1,vertical:!1};const i=await(o=e,new Promise(((e,t)=>{const n=new Image;n.addEventListener("load",(()=>e(n))),n.addEventListener("error",(e=>t(e))),n.setAttribute("crossOrigin","anonymous"),n.src=o})));var o;const s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return null;const l=Xk(n),{width:c,height:u}=function(e,t,n){const r=Xk(n);return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}(i.width,i.height,n);s.width=c,s.height=u,a.translate(c/2,u/2),a.rotate(l),a.scale(r.horizontal?-1:1,r.vertical?-1:1),a.translate(-i.width/2,-i.height/2),a.drawImage(i,0,0);const h=a.getImageData(t.x,t.y,t.width,t.height);return s.width=t.width,s.height=t.height,a.putImageData(h,0,0),new Promise(((e,t)=>{s.toBlob((t=>{t.name="cropped.jpeg",e({file:t,url:URL.createObjectURL(t)})}),"image/jpeg")}))}const $k=async(e,t,n)=>{try{const{url:r}=await Jk(e,t,n);return r}catch(r){console.error("Error cropping the image:",r)}};const eP=function(e){let{title:t="Crop Image"}=e;return(0,ex.jsx)(XS.Header,{closeButton:!0,children:(0,ex.jsx)(XS.Title,{children:t})})};var tP=function(e,t){return tP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},tP(e,t)};var nP=function(){return nP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},nP.apply(this,arguments)};Object.create;Object.create;var rP=n(136),iP=n.n(rP);function oP(e,t,n,r,i){void 0===i&&(i=0);var o=dP(t.width,t.height,i),s=o.width,a=o.height;return{x:sP(e.x,s,n.width,r),y:sP(e.y,a,n.height,r)}}function sP(e,t,n,r){var i=t*r/2-n/2;return fP(e,-i,i)}function aP(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function lP(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function cP(e,t){return Math.min(e,Math.max(0,t))}function uP(e,t){return t}function hP(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function dP(e,t,n){var r=n*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function fP(e,t,n){return Math.min(Math.max(e,t),n)}function pP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"===typeof e&&e.length>0})).join(" ").trim()}var mP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.imageRef=r.createRef(),n.videoRef=r.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc="undefined"!==typeof document?document:null,n.currentWindow="undefined"!==typeof window?window:null,n.resizeObserver=null,n.state={cropSize:null,hasWheelJustStarted:!1},n.initResizeObserver=function(){if("undefined"!==typeof window.ResizeObserver&&n.containerRef){var e=!0;n.resizeObserver=new window.ResizeObserver((function(t){e?e=!1:n.computeSizes()})),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(e){return e.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturemove",n.onGestureMove),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var e=n.computeSizes();e&&(n.emitCropData(),n.setInitialCrop(e)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(e){if(n.props.initialCroppedAreaPercentages){var t=function(e,t,n,r,i,o){var s=dP(t.width,t.height,n),a=fP(r.width/s.width*(100/e.width),i,o);return{crop:{x:a*s.width/2-r.width/2-s.width*a*(e.x/100),y:a*s.height/2-r.height/2-s.height*a*(e.y/100)},zoom:a}}(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom),r=t.crop,i=t.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(i)}else if(n.props.initialCroppedAreaPixels){var o=function(e,t,n,r,i,o){void 0===n&&(n=0);var s=dP(t.naturalWidth,t.naturalHeight,n),a=fP(function(e,t,n){var r=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return n.height>n.width?n.height/(e.height*r):n.width/(e.width*r)}(e,t,r),i,o),l=r.height>r.width?r.height/e.height:r.width/e.width;return{crop:{x:((s.width-e.width)/2-e.x)*l,y:((s.height-e.height)/2-e.y)*l},zoom:a}}(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom);r=o.crop,i=o.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(i)}},n.computeSizes=function(){var e,t,r,i,o,s,a=n.imageRef.current||n.videoRef.current;if(a&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var l=n.containerRect.width/n.containerRect.height,c=(null===(e=n.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=n.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,u=(null===(r=n.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(i=n.videoRef.current)||void 0===i?void 0:i.videoHeight)||0,h=c/u,d=void 0;if(a.offsetWidth<c||a.offsetHeight<u)switch(n.getObjectFit()){default:case"contain":d=l>h?{width:n.containerRect.height*h,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/h};break;case"horizontal-cover":d={width:n.containerRect.width,height:n.containerRect.width/h};break;case"vertical-cover":d={width:n.containerRect.height*h,height:n.containerRect.height}}else d={width:a.offsetWidth,height:a.offsetHeight};n.mediaSize=nP(nP({},d),{naturalWidth:c,naturalHeight:u}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var f=n.props.cropSize?n.props.cropSize:function(e,t,n,r,i,o){void 0===o&&(o=0);var s=dP(e,t,o),a=s.width,l=s.height,c=Math.min(a,n),u=Math.min(l,r);return c>u*i?{width:u*i,height:u}:{width:c,height:c/i}}(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(null===(o=n.state.cropSize)||void 0===o?void 0:o.height)===f.height&&(null===(s=n.state.cropSize)||void 0===s?void 0:s.width)===f.width||n.props.onCropSizeChange&&n.props.onCropSizeChange(f),n.setState({cropSize:f},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(f),f}},n.saveContainerPosition=function(){if(n.containerRef){var e=n.containerRef.getBoundingClientRect();n.containerPosition={x:e.left,y:e.top}}},n.onMouseDown=function(e){n.currentDoc&&(e.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(t.getMousePoint(e)))},n.onMouseMove=function(e){return n.onDrag(t.getMousePoint(e))},n.onScroll=function(e){n.currentDoc&&(e.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(e){n.currentDoc&&(n.isTouching=!0,n.props.onTouchRequest&&!n.props.onTouchRequest(e)||(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),2===e.touches.length?n.onPinchStart(e):1===e.touches.length&&n.onDragStart(t.getTouchPoint(e.touches[0]))))},n.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?n.onPinchMove(e):1===e.touches.length&&n.onDrag(t.getTouchPoint(e.touches[0]))},n.onGestureStart=function(e){n.currentDoc&&(e.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureMove),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureMove=function(e){if(e.preventDefault(),!n.isTouching){var r=t.getMousePoint(e),i=n.gestureZoomStart-1+e.scale;if(n.setNewZoom(i,r,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+e.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(e){n.cleanEvents()},n.onDragStart=function(e){var t,r,i=e.x,o=e.y;n.dragStartPosition={x:i,y:o},n.dragStartCrop=nP({},n.props.crop),null===(r=(t=n.props).onInteractionStart)||void 0===r||r.call(t)},n.onDrag=function(e){var t=e.x,r=e.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame((function(){if(n.state.cropSize&&void 0!==t&&void 0!==r){var e=t-n.dragStartPosition.x,i=r-n.dragStartPosition.y,o={x:n.dragStartCrop.x+e,y:n.dragStartCrop.y+i},s=n.props.restrictPosition?oP(o,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):o;n.props.onCropChange(s)}})))},n.onDragStopped=function(){var e,t;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),null===(t=(e=n.props).onInteractionEnd)||void 0===t||t.call(e)},n.onWheel=function(e){if(n.currentWindow&&(!n.props.onWheelRequest||n.props.onWheelRequest(e))){e.preventDefault();var r=t.getMousePoint(e),i=iP()(e).pixelY,o=n.props.zoom-i*n.props.zoomSpeed/200;n.setNewZoom(o,r,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},(function(){var e,t;return null===(t=(e=n.props).onInteractionStart)||void 0===t?void 0:t.call(e)})),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout((function(){return n.setState({hasWheelJustStarted:!1},(function(){var e,t;return null===(t=(e=n.props).onInteractionEnd)||void 0===t?void 0:t.call(e)}))}),250)}},n.getPointOnContainer=function(e,t){var r=e.x,i=e.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(r-t.x),y:n.containerRect.height/2-(i-t.y)}},n.getPointOnMedia=function(e){var t=e.x,r=e.y,i=n.props,o=i.crop,s=i.zoom;return{x:(t+o.x)/s,y:(r+o.y)/s}},n.setNewZoom=function(e,t,r){var i=(void 0===r?{}:r).shouldUpdatePosition,o=void 0===i||i;if(n.state.cropSize&&n.props.onZoomChange){var s=fP(e,n.props.minZoom,n.props.maxZoom);if(o){var a=n.getPointOnContainer(t,n.containerPosition),l=n.getPointOnMedia(a),c={x:l.x*s-a.x,y:l.y*s-a.y},u=n.props.restrictPosition?oP(c,n.mediaSize,n.state.cropSize,s,n.props.rotation):c;n.props.onCropChange(u)}n.props.onZoomChange(s)}},n.getCropData=function(){return n.state.cropSize?function(e,t,n,r,i,o,s){void 0===o&&(o=0),void 0===s&&(s=!0);var a=s?cP:uP,l=dP(t.width,t.height,o),c=dP(t.naturalWidth,t.naturalHeight,o),u={x:a(100,((l.width-n.width/i)/2-e.x/i)/l.width*100),y:a(100,((l.height-n.height/i)/2-e.y/i)/l.height*100),width:a(100,n.width/l.width*100/i),height:a(100,n.height/l.height*100/i)},h=Math.round(a(c.width,u.width*c.width/100)),d=Math.round(a(c.height,u.height*c.height/100)),f=c.width>=c.height*r?{width:Math.round(d*r),height:d}:{width:h,height:Math.round(h/r)};return{croppedAreaPercentages:u,croppedAreaPixels:nP(nP({},f),{x:Math.round(a(c.width-f.width,u.x*c.width/100)),y:Math.round(a(c.height-f.height,u.y*c.height/100))})}}(n.props.restrictPosition?oP(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition):null},n.emitCropData=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(t,r),n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.emitCropAreaChange=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var e=n.props.restrictPosition?oP(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(e),n.emitCropData()}},n}return function(e,t){function n(){this.constructor=e}tP(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),"undefined"===typeof window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&("undefined"===typeof window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){var t,n,r,i,o,s,a,l,c;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.height)||(null===(r=e.cropSize)||void 0===r?void 0:r.width)!==(null===(i=this.props.cropSize)||void 0===i?void 0:i.width)?this.computeSizes():(null===(o=e.crop)||void 0===o?void 0:o.x)===(null===(s=this.props.crop)||void 0===s?void 0:s.x)&&(null===(a=e.crop)||void 0===a?void 0:a.y)===(null===(l=this.props.crop)||void 0===l?void 0:l.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(c=this.videoRef.current)||void 0===c||c.load())},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,n=e.aspect;return t?t.width/t.height:n},t.prototype.getObjectFit=function(){var e,t,n,r;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var i=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(n=this.imageRef.current)||void 0===n?void 0:n.naturalHeight)||(null===(r=this.videoRef.current)||void 0===r?void 0:r.videoHeight)||0)<i?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var n=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=aP(n,r),this.lastPinchRotation=lP(n,r),this.onDragStart(hP(n,r))},t.prototype.onPinchMove=function(e){var n=this;if(this.currentDoc&&this.currentWindow){var r=t.getTouchPoint(e.touches[0]),i=t.getTouchPoint(e.touches[1]),o=hP(r,i);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame((function(){var e=aP(r,i),t=n.props.zoom*(e/n.lastPinchDistance);n.setNewZoom(t,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=e;var s=lP(r,i),a=n.props.rotation+(s-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(a),n.lastPinchRotation=s}))}},t.prototype.render=function(){var e=this,t=this.props,n=t.image,i=t.video,o=t.mediaProps,s=t.transform,a=t.crop,l=a.x,c=a.y,u=t.rotation,h=t.zoom,d=t.cropShape,f=t.showGrid,p=t.style,m=p.containerStyle,g=p.cropAreaStyle,v=p.mediaStyle,y=t.classes,_=y.containerClassName,b=y.cropAreaClassName,w=y.mediaClassName,x=this.getObjectFit();return r.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(t){return e.containerRef=t},"data-testid":"container",style:m,className:pP("reactEasyCrop_Container",_)},n?r.createElement("img",nP({alt:"",className:pP("reactEasyCrop_Image","contain"===x&&"reactEasyCrop_Contain","horizontal-cover"===x&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===x&&"reactEasyCrop_Cover_Vertical",w)},o,{src:n,ref:this.imageRef,style:nP(nP({},v),{transform:s||"translate(".concat(l,"px, ").concat(c,"px) rotate(").concat(u,"deg) scale(").concat(h,")")}),onLoad:this.onMediaLoad})):i&&r.createElement("video",nP({autoPlay:!0,loop:!0,muted:!0,className:pP("reactEasyCrop_Video","contain"===x&&"reactEasyCrop_Contain","horizontal-cover"===x&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===x&&"reactEasyCrop_Cover_Vertical",w)},o,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:nP(nP({},v),{transform:s||"translate(".concat(l,"px, ").concat(c,"px) rotate(").concat(u,"deg) scale(").concat(h,")")}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map((function(e){return r.createElement("source",nP({key:e.src},e))}))),this.state.cropSize&&r.createElement("div",{style:nP(nP({},g),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:pP("reactEasyCrop_CropArea","round"===d&&"reactEasyCrop_CropAreaRound",f&&"reactEasyCrop_CropAreaGrid",b)}))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(r.Component);const gP=function(e){let{tempPhotoURL:t,crop:n,zoom:r,rotation:i,onZoomChange:o,onRotationChange:s,onCropChange:a,onCropComplete:l}=e;return(0,ex.jsx)(XS.Body,{children:(0,ex.jsx)("div",{style:{height:400,minWidth:400},children:(0,ex.jsx)(mP,{image:t,crop:n,zoom:r,rotation:i,aspect:1,onZoomChange:o,onRotationChange:s,onCropChange:a,onCropComplete:l})})})},vP=1,yP=-10,_P=10;const bP=function(e){let{zoom:t,rotation:n,resetZoomAndRotation:r,cropImage:i,isDefaultValues:o,onZoomChange:s,onRotationChange:a}=e;return(0,ex.jsxs)(XS.Footer,{children:[(0,ex.jsxs)("div",{className:"w-100",children:[(0,ex.jsxs)("p",{children:["Zoom: ",(l=t,"".concat(Math.round(100*l),"%"))]}),(0,ex.jsx)(NT.Range,{value:t,min:vP,max:3,step:.1,onChange:e=>s(parseFloat(e.target.value))}),(0,ex.jsxs)("p",{children:["Rotation: ",n+"\xb0"]}),(0,ex.jsx)(NT.Range,{value:n,min:yP,max:_P,onChange:e=>a(parseFloat(e.target.value))})]}),(0,ex.jsx)(bx,{variant:"outline-secondary",onClick:r,disabled:o,children:"R\xe9initialiser"}),(0,ex.jsx)(bx,{variant:"primary",onClick:i,children:"Valider"})]});var l};function wP(e){let{setOpenCrop:t,onCroppedImage:n}=e;const{state:i,dispatch:o}=Oz(),{tempPhotoURL:s}=i,[a,l]=(0,r.useState)(i.crop),[c,u]=(0,r.useState)(i.zoom),[h,d]=(0,r.useState)(i.rotation),[f,p]=(0,r.useState)(null),m=(0,r.useCallback)((e=>{d(e>_P?_P:e<yP?yP:e)}),[]),g=c===vP&&0===h;return(0,ex.jsxs)(XS,{show:!0,onHide:()=>{t(!1),o({type:"RESET_TEMP_PHOTO"}),o({type:"RESTORE_PREVIOUS_CROP_ZOOM_AND_ROTATION"})},size:"lg",children:[(0,ex.jsx)(eP,{title:"Envoyer une photo"}),(0,ex.jsx)(gP,{tempPhotoURL:s,crop:a,zoom:c,rotation:h,onZoomChange:u,onRotationChange:m,onCropChange:l,onCropComplete:(e,t)=>{p(t)}}),(0,ex.jsx)(bP,{zoom:c,rotation:h,resetZoomAndRotation:()=>{u(vP),d(0)},cropImage:async()=>{try{const e=await $k(s,f,h,c,a);o({type:"UPDATE_CROP_ZOOM_AND_ROTATION",payload:{crop:a,zoom:c,rotation:h}}),n(e),o({type:"SET_ORIGINAL_PHOTO",payload:i.tempOriginalPhotoURL}),o({type:"CLOSE_CROP"})}catch(e){console.error("Error cropping the image:",e)}},isDefaultValues:g,onZoomChange:u,onRotationChange:m})]})}const xP=n.p+"static/media/defaultPhoto.631aadb67dc31a3dcd1a.jpg";function EP(){return EP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EP.apply(this,arguments)}n(176);function SP(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function TP(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function CP(e,t,n){var i=(0,r.useRef)(void 0!==e),o=(0,r.useState)(t),s=o[0],a=o[1],l=void 0!==e,c=i.current;return i.current=l,!l&&c&&s!==t&&a(t),[l?e:s,(0,r.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),a(e)}),[n])]}function AP(e,t){return Object.keys(t).reduce((function(n,r){var i,o=n,s=o[SP(r)],a=o[r],l=cS(o,[SP(r),r].map(TP)),c=t[r],u=CP(a,s,e[c]),h=u[0],d=u[1];return EP({},l,((i={})[r]=h,i[c]=d,i))}),e)}function kP(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function PP(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function OP(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}kP.__suppressDeprecationWarning=!0,PP.__suppressDeprecationWarning=!0,OP.__suppressDeprecationWarning=!0;const IP=qS("h4");IP.displayName="DivStyledAsH4";const RP=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=IP,...o}=e;return r=mx(r,"alert-heading"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));RP.displayName="AlertHeading";const NP=RP;new WeakMap;const LP=["onKeyDown"];const DP=r.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,LP);const[i]=ax(Object.assign({tagName:"a"},r)),o=gE((e=>{i.onKeyDown(e),null==n||n(e)}));return(s=r.href)&&"#"!==s.trim()&&"button"!==r.role?(0,ex.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,ex.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:o}));var s}));DP.displayName="Anchor";const MP=DP,jP=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=MP,...o}=e;return r=mx(r,"alert-link"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));jP.displayName="AlertLink";const FP=jP,zP=r.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:o,className:s,children:a,variant:l="primary",onClose:c,dismissible:u,transition:h=PS,...d}=AP(e,{show:"onClose"}),f=mx(n,"alert"),p=gE((e=>{c&&c(!1,e)})),m=!0===h?PS:h,g=(0,ex.jsxs)("div",{role:"alert",...m?void 0:d,ref:t,className:ox()(s,f,l&&"".concat(f,"-").concat(l),u&&"".concat(f,"-dismissible")),children:[u&&(0,ex.jsx)(zS,{onClick:p,"aria-label":i,variant:o}),a]});return m?(0,ex.jsx)(m,{unmountOnExit:!0,...d,ref:void 0,in:r,children:g}):r?g:null}));zP.displayName="Alert";const UP=Object.assign(zP,{Link:FP,Heading:NP}),BP=r.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i="border",size:o,as:s="div",className:a,...l}=e;n=mx(n,"spinner");const c="".concat(n,"-").concat(i);return(0,ex.jsx)(s,{ref:t,...l,className:ox()(a,c,o&&"".concat(c,"-").concat(o),r&&"text-".concat(r))})}));BP.displayName="Spinner";const VP=BP,HP={bsPrefix:xx().string,fluid:xx().bool,rounded:xx().bool,roundedCircle:xx().bool,thumbnail:xx().bool},qP=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,fluid:i=!1,rounded:o=!1,roundedCircle:s=!1,thumbnail:a=!1,...l}=e;return n=mx(n,"img"),(0,ex.jsx)("img",{ref:t,...l,className:ox()(r,i&&"".concat(n,"-fluid"),o&&"rounded",s&&"rounded-circle",a&&"".concat(n,"-thumbnail"))})}));qP.displayName="Image";const WP=qP,KP=r.forwardRef(((e,t)=>{let{className:n,fluid:r=!0,...i}=e;return(0,ex.jsx)(WP,{ref:t,...i,fluid:r,className:ox()(n,"figure-img")})}));KP.displayName="FigureImage",KP.propTypes=HP;const ZP=KP,GP=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="figcaption",...o}=e;return r=mx(r,"figure-caption"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));GP.displayName="FigureCaption";const QP=GP,YP=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="figure",...o}=e;return r=mx(r,"figure"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));YP.displayName="Figure";const XP=Object.assign(YP,{Image:ZP,Caption:QP}),JP=2**31-1;function $P(e,t,n){const r=n-Date.now();e.current=r<=JP?setTimeout(t,r):setTimeout((()=>$P(e,t,n)),JP)}function eO(){const e=RE(),t=(0,r.useRef)();return _E((()=>clearTimeout(t.current))),(0,r.useMemo)((()=>{const n=()=>clearTimeout(t.current);return{set:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),i<=JP?t.current=setTimeout(r,i):$P(t,r,Date.now()+i))},clear:n}}),[])}var tO=Object.prototype.hasOwnProperty;function nO(e,t,n){for(n of e.keys())if(rO(n,t))return n}function rO(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&rO(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"===typeof i&&!(i=nO(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"===typeof i&&!(i=nO(t,i)))return!1;if(!rO(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(tO.call(e,n)&&++r&&!tO.call(t,n))return!1;if(!(n in t)||!rO(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const iO=function(e){const t=RE();return[e[0],(0,r.useCallback)((n=>{if(t())return e[1](n)}),[t,e[1]])]};function oO(e){return e.split("-")[0]}function sO(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function aO(e){return e instanceof sO(e).Element||e instanceof Element}function lO(e){return e instanceof sO(e).HTMLElement||e instanceof HTMLElement}function cO(e){return"undefined"!==typeof ShadowRoot&&(e instanceof sO(e).ShadowRoot||e instanceof ShadowRoot)}var uO=Math.max,hO=Math.min,dO=Math.round;function fO(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function pO(){return!/^((?!chrome|android).)*safari/i.test(fO())}function mO(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&lO(e)&&(i=e.offsetWidth>0&&dO(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&dO(r.height)/e.offsetHeight||1);var s=(aO(e)?sO(e):window).visualViewport,a=!pO()&&n,l=(r.left+(a&&s?s.offsetLeft:0))/i,c=(r.top+(a&&s?s.offsetTop:0))/o,u=r.width/i,h=r.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function gO(e){var t=mO(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function vO(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&cO(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function yO(e){return e?(e.nodeName||"").toLowerCase():null}function _O(e){return sO(e).getComputedStyle(e)}function bO(e){return["table","td","th"].indexOf(yO(e))>=0}function wO(e){return((aO(e)?e.ownerDocument:e.document)||window.document).documentElement}function xO(e){return"html"===yO(e)?e:e.assignedSlot||e.parentNode||(cO(e)?e.host:null)||wO(e)}function EO(e){return lO(e)&&"fixed"!==_O(e).position?e.offsetParent:null}function SO(e){for(var t=sO(e),n=EO(e);n&&bO(n)&&"static"===_O(n).position;)n=EO(n);return n&&("html"===yO(n)||"body"===yO(n)&&"static"===_O(n).position)?t:n||function(e){var t=/firefox/i.test(fO());if(/Trident/i.test(fO())&&lO(e)&&"fixed"===_O(e).position)return null;var n=xO(e);for(cO(n)&&(n=n.host);lO(n)&&["html","body"].indexOf(yO(n))<0;){var r=_O(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function TO(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function CO(e,t,n){return uO(e,hO(t,n))}function AO(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function kO(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var PO="top",OO="bottom",IO="right",RO="left",NO="auto",LO=[PO,OO,IO,RO],DO="start",MO="end",jO="clippingParents",FO="viewport",zO="popper",UO="reference",BO=LO.reduce((function(e,t){return e.concat([t+"-"+DO,t+"-"+MO])}),[]),VO=[].concat(LO,[NO]).reduce((function(e,t){return e.concat([t,t+"-"+DO,t+"-"+MO])}),[]),HO=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const qO={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=oO(n.placement),l=TO(a),c=[RO,IO].indexOf(a)>=0?"height":"width";if(o&&s){var u=function(e,t){return AO("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:kO(e,LO))}(i.padding,n),h=gO(o),d="y"===l?PO:RO,f="y"===l?OO:IO,p=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],m=s[l]-n.rects.reference[l],g=SO(o),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=p/2-m/2,_=u[d],b=v-h[c]-u[f],w=v/2-h[c]/2+y,x=CO(_,w,b),E=l;n.modifiersData[r]=((t={})[E]=x,t.centerOffset=x-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&vO(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function WO(e){return e.split("-")[1]}var KO={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ZO(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=s.x,f=void 0===d?0:d,p=s.y,m=void 0===p?0:p,g="function"===typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),_=RO,b=PO,w=window;if(c){var x=SO(n),E="clientHeight",S="clientWidth";if(x===sO(n)&&"static"!==_O(x=wO(n)).position&&"absolute"===a&&(E="scrollHeight",S="scrollWidth"),i===PO||(i===RO||i===IO)&&o===MO)b=OO,m-=(h&&x===w&&w.visualViewport?w.visualViewport.height:x[E])-r.height,m*=l?1:-1;if(i===RO||(i===PO||i===OO)&&o===MO)_=IO,f-=(h&&x===w&&w.visualViewport?w.visualViewport.width:x[S])-r.width,f*=l?1:-1}var T,C=Object.assign({position:a},c&&KO),A=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:dO(n*i)/i||0,y:dO(r*i)/i||0}}({x:f,y:m},sO(n)):{x:f,y:m};return f=A.x,m=A.y,l?Object.assign({},C,((T={})[b]=y?"0":"",T[_]=v?"0":"",T.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",T)):Object.assign({},C,((t={})[b]=y?m+"px":"",t[_]=v?f+"px":"",t.transform="",t))}const GO={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:oO(t.placement),variation:WO(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ZO(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ZO(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var QO={passive:!0};const YO={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,l=sO(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,QO)})),a&&l.addEventListener("resize",n.update,QO),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,QO)})),a&&l.removeEventListener("resize",n.update,QO)}},data:{}};var XO={left:"right",right:"left",bottom:"top",top:"bottom"};function JO(e){return e.replace(/left|right|bottom|top/g,(function(e){return XO[e]}))}var $O={start:"end",end:"start"};function eI(e){return e.replace(/start|end/g,(function(e){return $O[e]}))}function tI(e){var t=sO(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function nI(e){return mO(wO(e)).left+tI(e).scrollLeft}function rI(e){var t=_O(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function iI(e){return["html","body","#document"].indexOf(yO(e))>=0?e.ownerDocument.body:lO(e)&&rI(e)?e:iI(xO(e))}function oI(e,t){var n;void 0===t&&(t=[]);var r=iI(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=sO(r),s=i?[o].concat(o.visualViewport||[],rI(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(oI(xO(s)))}function sI(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function aI(e,t,n){return t===FO?sI(function(e,t){var n=sO(e),r=wO(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=pO();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+nI(e),y:l}}(e,n)):aO(t)?function(e,t){var n=mO(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):sI(function(e){var t,n=wO(e),r=tI(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=uO(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=uO(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+nI(e),l=-r.scrollTop;return"rtl"===_O(i||n).direction&&(a+=uO(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(wO(e)))}function lI(e,t,n,r){var i="clippingParents"===t?function(e){var t=oI(xO(e)),n=["absolute","fixed"].indexOf(_O(e).position)>=0&&lO(e)?SO(e):e;return aO(n)?t.filter((function(e){return aO(e)&&vO(e,n)&&"body"!==yO(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=aI(e,n,r);return t.top=uO(i.top,t.top),t.right=hO(i.right,t.right),t.bottom=hO(i.bottom,t.bottom),t.left=uO(i.left,t.left),t}),aI(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function cI(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?oO(i):null,s=i?WO(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case PO:t={x:a,y:n.y-r.height};break;case OO:t={x:a,y:n.y+n.height};break;case IO:t={x:n.x+n.width,y:l};break;case RO:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?TO(o):null;if(null!=c){var u="y"===c?"height":"width";switch(s){case DO:t[c]=t[c]-(n[u]/2-r[u]/2);break;case MO:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function uI(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.strategy,s=void 0===o?e.strategy:o,a=n.boundary,l=void 0===a?jO:a,c=n.rootBoundary,u=void 0===c?FO:c,h=n.elementContext,d=void 0===h?zO:h,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,v=AO("number"!==typeof g?g:kO(g,LO)),y=d===zO?UO:zO,_=e.rects.popper,b=e.elements[p?y:d],w=lI(aO(b)?b:b.contextElement||wO(e.elements.popper),l,u,s),x=mO(e.elements.reference),E=cI({reference:x,element:_,strategy:"absolute",placement:i}),S=sI(Object.assign({},_,E)),T=d===zO?S:x,C={top:w.top-T.top+v.top,bottom:T.bottom-w.bottom+v.bottom,left:w.left-T.left+v.left,right:T.right-w.right+v.right},A=e.modifiersData.offset;if(d===zO&&A){var k=A[i];Object.keys(C).forEach((function(e){var t=[IO,OO].indexOf(e)>=0?1:-1,n=[PO,OO].indexOf(e)>=0?"y":"x";C[e]+=k[n]*t}))}return C}const hI={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,v=oO(g),y=l||(v===g||!p?[JO(g)]:function(e){if(oO(e)===NO)return[];var t=JO(e);return[eI(e),t,eI(t)]}(g)),_=[g].concat(y).reduce((function(e,n){return e.concat(oO(n)===NO?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?VO:l,u=WO(r),h=u?a?BO:BO.filter((function(e){return WO(e)===u})):LO,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h);var f=d.reduce((function(t,n){return t[n]=uI(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[oO(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),b=t.rects.reference,w=t.rects.popper,x=new Map,E=!0,S=_[0],T=0;T<_.length;T++){var C=_[T],A=oO(C),k=WO(C)===DO,P=[PO,OO].indexOf(A)>=0,O=P?"width":"height",I=uI(t,{placement:C,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),R=P?k?IO:RO:k?OO:PO;b[O]>w[O]&&(R=JO(R));var N=JO(R),L=[];if(o&&L.push(I[A]<=0),a&&L.push(I[R]<=0,I[N]<=0),L.every((function(e){return e}))){S=C,E=!1;break}x.set(C,L)}if(E)for(var D=function(e){var t=_.find((function(t){var n=x.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return S=t,"break"},M=p?3:1;M>0;M--){if("break"===D(M))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function dI(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function fI(e){return[PO,IO,OO,RO].some((function(t){return e[t]>=0}))}const pI={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,s=VO.reduce((function(e,n){return e[n]=function(e,t,n){var r=oO(e),i=[RO,PO].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[RO,IO].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,t.rects,o),e}),{}),a=s[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}};const mI={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,g=uI(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=oO(t.placement),y=WO(t.placement),_=!y,b=TO(v),w="x"===b?"y":"x",x=t.modifiersData.popperOffsets,E=t.rects.reference,S=t.rects.popper,T="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,C="number"===typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,k={x:0,y:0};if(x){if(o){var P,O="y"===b?PO:RO,I="y"===b?OO:IO,R="y"===b?"height":"width",N=x[b],L=N+g[O],D=N-g[I],M=f?-S[R]/2:0,j=y===DO?E[R]:S[R],F=y===DO?-S[R]:-E[R],z=t.elements.arrow,U=f&&z?gO(z):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},V=B[O],H=B[I],q=CO(0,E[R],U[R]),W=_?E[R]/2-M-q-V-C.mainAxis:j-q-V-C.mainAxis,K=_?-E[R]/2+M+q+H+C.mainAxis:F+q+H+C.mainAxis,Z=t.elements.arrow&&SO(t.elements.arrow),G=Z?"y"===b?Z.clientTop||0:Z.clientLeft||0:0,Q=null!=(P=null==A?void 0:A[b])?P:0,Y=N+K-Q,X=CO(f?hO(L,N+W-Q-G):L,N,f?uO(D,Y):D);x[b]=X,k[b]=X-N}if(a){var J,$="x"===b?PO:RO,ee="x"===b?OO:IO,te=x[w],ne="y"===w?"height":"width",re=te+g[$],ie=te-g[ee],oe=-1!==[PO,RO].indexOf(v),se=null!=(J=null==A?void 0:A[w])?J:0,ae=oe?re:te-E[ne]-S[ne]-se+C.altAxis,le=oe?te+E[ne]+S[ne]-se-C.altAxis:ie,ce=f&&oe?function(e,t,n){var r=CO(e,t,n);return r>n?n:r}(ae,te,le):CO(f?ae:re,te,f?le:ie);x[w]=ce,k[w]=ce-te}t.modifiersData[r]=k}},requiresIfExists:["offset"]};function gI(e,t,n){void 0===n&&(n=!1);var r=lO(t),i=lO(t)&&function(e){var t=e.getBoundingClientRect(),n=dO(t.width)/e.offsetWidth||1,r=dO(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=wO(t),s=mO(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==yO(t)||rI(o))&&(a=function(e){return e!==sO(e)&&lO(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:tI(e);var t}(t)),lO(t)?((l=mO(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=nI(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function vI(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function yI(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var _I={placement:"bottom",modifiers:[],strategy:"absolute"};function bI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function wI(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?_I:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},_I,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:aO(e)?oI(e):e.contextElement?oI(e.contextElement):[],popper:oI(t)};var u=function(e){var t=vI(e);return HO.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var a=o({state:i,name:t,instance:l,options:r}),c=function(){};s.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var e=i.elements,t=e.reference,n=e.popper;if(bI(t,n)){i.rects={reference:gI(t,SO(n),"fixed"===i.options.strategy),popper:gO(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,c=o.options,u=void 0===c?{}:c,h=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:yI((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),a=!0}};if(!bI(e,t))return l;function c(){s.forEach((function(e){return e()})),s=[]}return l.setOptions(n).then((function(e){!a&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}const xI=wI({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=uI(t,{elementContext:"reference"}),a=uI(t,{altBoundary:!0}),l=dI(s,r),c=dI(a,i,o),u=fI(l),h=fI(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=cI({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},GO,YO,pI,hI,mI,qO]}),EI=["enabled","placement","strategy","modifiers"];const SI={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},TI={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter((e=>e.trim()!==n.id));t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:r,reference:i}=t.elements,o=null==(n=r.getAttribute("role"))?void 0:n.toLowerCase();if(r.id&&"tooltip"===o&&"setAttribute"in i){const e=i.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",e?"".concat(e,",").concat(r.id):r.id)}}},CI=[];const AI=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:i=!0,placement:o="bottom",strategy:s="absolute",modifiers:a=CI}=n,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,EI);const c=(0,r.useRef)(a),u=(0,r.useRef)(),h=(0,r.useCallback)((()=>{var e;null==(e=u.current)||e.update()}),[]),d=(0,r.useCallback)((()=>{var e;null==(e=u.current)||e.forceUpdate()}),[]),[f,p]=iO((0,r.useState)({placement:o,update:h,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,r.useMemo)((()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},r={};Object.keys(t.elements).forEach((e=>{n[e]=t.styles[e],r[e]=t.attributes[e]})),p({state:t,styles:n,attributes:r,update:h,forceUpdate:d,placement:t.placement})}})),[h,d,p]),g=(0,r.useMemo)((()=>(rO(c.current,a)||(c.current=a),c.current)),[a]);return(0,r.useEffect)((()=>{u.current&&i&&u.current.setOptions({placement:o,strategy:s,modifiers:[...g,m,SI]})}),[s,o,m,i,g]),(0,r.useEffect)((()=>{if(i&&null!=e&&null!=t)return u.current=xI(e,t,Object.assign({},l,{placement:o,strategy:s,modifiers:[...g,TI,m]})),()=>{null!=u.current&&(u.current.destroy(),u.current=void 0,p((e=>Object.assign({},e,{attributes:{},styles:{popper:{}}}))))}}),[i,e,t]),f},kI=()=>{};const PI=e=>e&&("current"in e?e.current:e),OI={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const II=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kI,{disabled:n,clickTrigger:i="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=(0,r.useRef)(!1),s=(0,r.useRef)(!1),a=(0,r.useCallback)((t=>{const n=PI(e);var r;uT()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),o.current=!n||!!((r=t).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(t)||!!OE(n,t.target)||s.current,s.current=!1}),[e]),l=gE((t=>{const n=PI(e);n&&OE(n,t.target)&&(s.current=!0)})),c=gE((e=>{o.current||t(e)}));(0,r.useEffect)((()=>{var t,r;if(n||null==e)return;const o=uE(PI(e)),s=o.defaultView||window;let u=null!=(t=s.event)?t:null==(r=s.parent)?void 0:r.event,h=null;OI[i]&&(h=CE(o,OI[i],l,!0));const d=CE(o,i,a,!0),f=CE(o,i,(e=>{e!==u?c(e):u=void 0}));let p=[];return"ontouchstart"in o.documentElement&&(p=[].slice.call(o.body.children).map((e=>CE(e,"mousemove",kI)))),()=>{null==h||h(),d(),f(),p.forEach((e=>e()))}}),[e,n,i,a,l,c])},RI=()=>{};const NI=function(e,t){let{disabled:n,clickTrigger:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=t||RI;II(e,o,{disabled:n,clickTrigger:i});const s=gE((e=>{KE(e)&&o(e)}));(0,r.useEffect)((()=>{if(n||null==e)return;const t=uE(PI(e));let r=(t.defaultView||window).event;const i=CE(t,"keyup",(e=>{e!==r?s(e):r=void 0}));return()=>{i()}}),[e,n,s])};function LI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((t=>(e[t].name=t,e[t])))}function DI(e){let{enabled:t,enableEvents:n,placement:r,flip:i,offset:o,fixed:s,containerPadding:a,arrowElement:l,popperConfig:c={}}=e;var u,h,d,f,p;const m=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach((e=>{t[e.name]=e})),t):e||t}(c.modifiers);return Object.assign({},c,{placement:r,enabled:t,strategy:s?"fixed":c.strategy,modifiers:LI(Object.assign({},m,{eventListeners:{enabled:n,options:null==(u=m.eventListeners)?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:a?Object.assign({padding:a},null==(h=m.preventOverflow)?void 0:h.options):null==(d=m.preventOverflow)?void 0:d.options}),offset:{options:Object.assign({offset:o},null==(f=m.offset)?void 0:f.options)},arrow:Object.assign({},m.arrow,{enabled:!!l,options:Object.assign({},null==(p=m.arrow)?void 0:p.options,{element:l})}),flip:Object.assign({enabled:!!i},m.flip)}))})}const MI=r.forwardRef(((e,t)=>{const{flip:n,offset:i,placement:o,containerPadding:s,popperConfig:a={},transition:l,runTransition:c}=e,[u,h]=pE(),[d,f]=pE(),p=yE(h,t),m=UE(e.container),g=UE(e.target),[v,y]=(0,r.useState)(!e.show),_=AI(g,u,DI({placement:o,enableEvents:!!e.show,containerPadding:s||5,flip:n,offset:i,arrowElement:d,popperConfig:a}));e.show&&v&&y(!1);const b=e.show||!v;if(NI(u,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!b)return null;const{onExit:w,onExiting:x,onEnter:E,onEntering:S,onEntered:T}=e;let C=e.children(Object.assign({},_.attributes.popper,{style:_.styles.popper,ref:p}),{popper:_,placement:o,show:!!e.show,arrowProps:Object.assign({},_.attributes.arrow,{style:_.styles.arrow,ref:f})});return C=WE(l,c,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:C,onExit:w,onExiting:x,onExited:function(){y(!0),e.onExited&&e.onExited(...arguments)},onEnter:E,onEntering:S,onEntered:T}),m?IE.createPortal(C,m):null}));MI.displayName="Overlay";const jI=MI,FI=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"popover-header"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));FI.displayName="PopoverHeader";const zI=FI,UI=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"popover-body"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));UI.displayName="PopoverBody";const BI=UI;r.Component;function VI(e,t){let n=e;return"left"===e?n=t?"end":"start":"right"===e&&(n=t?"start":"end"),n}function HI(){return{position:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"absolute",top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const qI=r.forwardRef(((e,t)=>{let{bsPrefix:n,placement:r="right",className:i,style:o,children:s,body:a,arrowProps:l,hasDoneInitialMeasure:c,popper:u,show:h,...d}=e;const f=mx(n,"popover"),p=yx(),[m]=(null==r?void 0:r.split("-"))||[],g=VI(m,p);let v=o;return h&&!c&&(v={...o,...HI(null==u?void 0:u.strategy)}),(0,ex.jsxs)("div",{ref:t,role:"tooltip",style:v,"x-placement":m,className:ox()(i,f,m&&"bs-popover-".concat(g)),...d,children:[(0,ex.jsx)("div",{className:"popover-arrow",...l}),a?(0,ex.jsx)(BI,{children:s}):s]})})),WI=Object.assign(qI,{Header:zI,Body:BI,POPPER_OFFSET:[0,8]}),KI=r.forwardRef(((e,t)=>{let{bsPrefix:n,placement:r="right",className:i,style:o,children:s,arrowProps:a,hasDoneInitialMeasure:l,popper:c,show:u,...h}=e;n=mx(n,"tooltip");const d=yx(),[f]=(null==r?void 0:r.split("-"))||[],p=VI(f,d);let m=o;return u&&!l&&(m={...o,...HI(null==c?void 0:c.strategy)}),(0,ex.jsxs)("div",{ref:t,style:m,role:"tooltip","x-placement":f,className:ox()(i,n,"bs-tooltip-".concat(p)),...h,children:[(0,ex.jsx)("div",{className:"tooltip-arrow",...a}),(0,ex.jsx)("div",{className:"".concat(n,"-inner"),children:s})]})}));KI.displayName="Tooltip";const ZI=Object.assign(KI,{TOOLTIP_OFFSET:[0,6]});const GI=r.forwardRef(((e,t)=>{let{children:n,transition:i=PS,popperConfig:o={},rootClose:s=!1,placement:a="top",show:l=!1,...c}=e;const u=(0,r.useRef)({}),[h,d]=(0,r.useState)(null),[f,p]=function(e){const t=(0,r.useRef)(null),n=mx(void 0,"popover"),i=mx(void 0,"tooltip"),o=(0,r.useMemo)((()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(JE(t.current,n))return WI.POPPER_OFFSET;if(JE(t.current,i))return ZI.TOOLTIP_OFFSET}return[0,0]}}})),[e,n,i]);return[t,[o]]}(c.offset),m=yE(t,f),g=!0===i?PS:i||void 0,v=gE((e=>{d(e),null==o||null==o.onFirstUpdate||o.onFirstUpdate(e)}));return VE((()=>{h&&c.target&&(null==u.current.scheduleUpdate||u.current.scheduleUpdate())}),[h,c.target]),(0,r.useEffect)((()=>{l||d(null)}),[l]),(0,ex.jsx)(jI,{...c,ref:m,popperConfig:{...o,modifiers:p.concat(o.modifiers||[]),onFirstUpdate:v},transition:g,rootClose:s,placement:a,show:l,children:(e,t)=>{let{arrowProps:s,popper:a,show:l}=t;var c,d;!function(e,t){const{ref:n}=e,{ref:r}=t;e.ref=n.__wrapped||(n.__wrapped=e=>n(SS(e))),t.ref=r.__wrapped||(r.__wrapped=e=>r(SS(e)))}(e,s);const f=null==a?void 0:a.placement,p=Object.assign(u.current,{state:null==a?void 0:a.state,scheduleUpdate:null==a?void 0:a.update,placement:f,outOfBoundaries:(null==a||null==(c=a.state)||null==(d=c.modifiersData.hide)?void 0:d.isReferenceHidden)||!1,strategy:o.strategy}),m=!!h;return"function"===typeof n?n({...e,placement:f,show:l,...!i&&l&&{className:"show"},popper:p,arrowProps:s,hasDoneInitialMeasure:m}):r.cloneElement(n,{...e,placement:f,arrowProps:s,popper:p,hasDoneInitialMeasure:m,className:ox()(n.props.className,!i&&l&&"show"),style:{...n.props.style,...e.style}})}})}));GI.displayName="Overlay";const QI=GI;function YI(e,t,n){const[r]=t,i=r.currentTarget,o=r.relatedTarget||r.nativeEvent[n];o&&o===i||OE(i,o)||e(...t)}xx().oneOf(["click","hover","focus"]);const XI=e=>{let{trigger:t=["hover","focus"],overlay:n,children:i,popperConfig:o={},show:s,defaultShow:a=!1,onToggle:l,delay:c,placement:u,flip:h=u&&-1!==u.indexOf("auto"),...d}=e;const f=(0,r.useRef)(null),p=yE(f,i.ref),m=eO(),g=(0,r.useRef)(""),[v,y]=CP(s,a,l),_=function(e){return e&&"object"===typeof e?e:{show:e,hide:e}}(c),{onFocus:b,onBlur:w,onClick:x}="function"!==typeof i?r.Children.only(i).props:{},E=(0,r.useCallback)((()=>{m.clear(),g.current="show",_.show?m.set((()=>{"show"===g.current&&y(!0)}),_.show):y(!0)}),[_.show,y,m]),S=(0,r.useCallback)((()=>{m.clear(),g.current="hide",_.hide?m.set((()=>{"hide"===g.current&&y(!1)}),_.hide):y(!1)}),[_.hide,y,m]),T=(0,r.useCallback)((function(){E(),null==b||b(...arguments)}),[E,b]),C=(0,r.useCallback)((function(){S(),null==w||w(...arguments)}),[S,w]),A=(0,r.useCallback)((function(){y(!v),null==x||x(...arguments)}),[x,y,v]),k=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];YI(E,t,"fromElement")}),[E]),P=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];YI(S,t,"toElement")}),[S]),O=null==t?[]:[].concat(t),I={ref:e=>{p(SS(e))}};return-1!==O.indexOf("click")&&(I.onClick=A),-1!==O.indexOf("focus")&&(I.onFocus=T,I.onBlur=C),-1!==O.indexOf("hover")&&(I.onMouseOver=k,I.onMouseOut=P),(0,ex.jsxs)(ex.Fragment,{children:["function"===typeof i?i(I):(0,r.cloneElement)(i,I),(0,ex.jsx)(QI,{...d,show:v,onHide:S,flip:h,placement:u,popperConfig:o,target:f.current,children:n})]})};var JI=["color","size","title"];function $I(){return $I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$I.apply(this,arguments)}function eR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tR=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=eR(e,JI);return r.createElement("svg",$I({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"}),r.createElement("path",{d:"M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"}))}));tR.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},tR.defaultProps={color:"currentColor",size:"1em",title:null};const nR=tR;var rR=["color","size","title"];function iR(){return iR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iR.apply(this,arguments)}function oR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var sR=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=oR(e,rR);return r.createElement("svg",iR({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}))}));sR.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},sR.defaultProps={color:"currentColor",size:"1em",title:null};const aR=sR;var lR=["color","size","title"];function cR(){return cR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cR.apply(this,arguments)}function uR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var hR=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=uR(e,lR);return r.createElement("svg",cR({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),r.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))}));hR.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},hR.defaultProps={color:"currentColor",size:"1em",title:null};const dR=hR,fR="PhotoCapture_icon__Rt7tc",pR="PhotoCapture_figureStyle__jy-lM",mR="PhotoCapture_figureImage__YJ33u",gR="PhotoCapture_captionStyle__Q7AsV",vR="PhotoCapture_imageLoaderContainer__tYuPN",yR="PhotoCapture_spinner__NP9Fe",_R=()=>{const{state:{photoURL:e,originalPhotoURL:t,isDefaultPhoto:n,isOccurrence:i},dispatch:o}=Oz(),[s,a]=(0,r.useState)(!0);if(!e)return null;const l=n||i?(0,ex.jsx)(nR,{className:fR,onClick:()=>document.getElementById("photo-input").click()}):(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(aR,{className:fR,onClick:n=>{n.stopPropagation(),o({type:"SET_TEMP_PHOTO",payload:{photoURL:t||e,selectedFile:null,croppedImageUrl:null}}),o({type:"OPEN_CROP"})}}),(0,ex.jsx)(dR,{className:fR,onClick:e=>{e.stopPropagation(),o({type:"RESET_TO_DEFAULT_PHOTO"})}})]});return(0,ex.jsxs)(XP,{className:pR,children:[(0,ex.jsx)(XI,{placement:"top",overlay:(0,ex.jsx)(ZI,{id:"tooltip-change",children:"Change la photo"}),children:(0,ex.jsx)("span",{children:(0,ex.jsxs)("div",{className:vR,children:[s&&(0,ex.jsx)(VP,{animation:"border",role:"status",className:yR,children:(0,ex.jsx)("span",{className:"visually-hidden",children:"Chargement..."})}),(0,ex.jsx)(XP.Image,{src:e,alt:"Aper\xe7u de la photo",thumbnail:!0,className:mR,onClick:()=>document.getElementById("photo-input").click(),onLoad:()=>a(!1),onError:()=>a(!1),style:{width:"150px",height:"150px",display:s?"none":"block"}})]})})}),(0,ex.jsx)(XP.Caption,{className:gR,children:l})]})};const bR=function(){const{state:e,dispatch:t}=Oz(),{fileContent:n,readAsDataURL:i,isLoading:o,error:s}=function(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)(!1);return{fileContent:e,error:n,isLoading:o,readAsDataURL:e=>{const n=new FileReader;s(!0),n.onload=e=>{t(e.target.result),s(!1)},n.onerror=e=>{i(e),s(!1)},n.readAsDataURL(e)}}}(),[a,l]=(0,r.useState)(!1);(0,r.useEffect)((()=>{n&&(t({type:"RESET_CROP_ZOOM_AND_ROTATION_TO_DEFAULT"}),t({type:"SET_TEMP_ORIGINAL_PHOTO",payload:n}),t({type:"SET_TEMP_PHOTO",payload:{photoURL:n,selectedFile:null,croppedImageUrl:null}}),t({type:"OPEN_CROP"}))}),[n,t]);const c=e.formData.photoBlob?URL.createObjectURL(e.formData.photoBlob):xP;return(0,r.useEffect)((()=>{if(s){console.error("Error reading file:",s),l(!0);const e=setTimeout((()=>l(!1)),5e3);return()=>clearTimeout(e)}}),[s]),(0,ex.jsxs)(ex.Fragment,{children:[a&&(0,ex.jsx)(UP,{variant:"danger",onClose:()=>l(!1),dismissible:!0,children:"Une erreur est survenue lors du chargement de l'image."}),o&&(0,ex.jsx)("div",{style:{textAlign:"center",margin:"20px"},children:(0,ex.jsx)(VP,{animation:"border",role:"status",children:(0,ex.jsx)("span",{className:"visually-hidden",children:"Chargement..."})})}),s&&(0,ex.jsx)(UP,{variant:"danger",style:{margin:"20px"},children:"Une erreur est survenue lors du chargement du fichier."}),!o&&!s&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsxs)("div",{className:"text-start",children:[(0,ex.jsx)("p",{className:"mb-2 text-start",children:"Photo"}),(0,ex.jsx)(_R,{imageUrl:c,defaultPhoto:xP,dispatch:t})]}),(0,ex.jsxs)(zT,{className:"d-none",children:[(0,ex.jsx)(zT.Text,{id:"photo-input-label",children:"Upload"}),(0,ex.jsx)("input",{type:"file",accept:"image/*",capture:!0,id:"photo-input","aria-describedby":"photo-input-label",onChange:e=>{const n=e.target.files[0];n&&(t({type:"SAVE_PREVIOUS_CROP_ZOOM_AND_ROTATION"}),i(n))}})]}),e.openCrop&&(0,ex.jsx)(wP,{photoURL:e.tempPhotoURL,onCroppedImage:async e=>{const n=await fetch(e).then((e=>e.blob()));t({type:"UPDATE_FORM_DATA",payload:{photoURLs:[e],photoBlob:n}}),t({type:"UPDATE_PHOTO_URL",payload:e}),t({type:"RESET_TEMP_PHOTO"}),t({type:"SET_IS_OCCURRENCE_FALSE"})},setOpenCrop:e=>{e||t({type:"CLOSE_CROP"})}})]})]})},wR=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),xR=(0,r.createContext)({}),ER=(0,r.createContext)(null),SR="undefined"!==typeof document,TR=SR?r.useLayoutEffect:r.useEffect,CR=(0,r.createContext)({strict:!1});function AR(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function kR(e){return"string"===typeof e||Array.isArray(e)}function PR(e){return"object"===typeof e&&"function"===typeof e.start}const OR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],IR=["initial",...OR];function RR(e){return PR(e.animate)||IR.some((t=>kR(e[t])))}function NR(e){return Boolean(RR(e)||e.variants)}function LR(e){const{initial:t,animate:n}=function(e,t){if(RR(e)){const{initial:t,animate:n}=e;return{initial:!1===t||kR(t)?t:void 0,animate:kR(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(xR));return(0,r.useMemo)((()=>({initial:t,animate:n})),[DR(t),DR(n)])}function DR(e){return Array.isArray(e)?e.join(" "):e}const MR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jR={};for(const n in MR)jR[n]={isEnabled:e=>MR[n].some((t=>!!e[t]))};const FR=(0,r.createContext)({}),zR=(0,r.createContext)({}),UR=Symbol.for("motionComponentSymbol");function BR(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:o,Component:s}=e;t&&function(e){for(const t in e)jR[t]={...jR[t],...e[t]}}(t);const a=(0,r.forwardRef)((function(e,a){let l;const c={...(0,r.useContext)(wR),...e,layoutId:VR(e)},{isStatic:u}=c,h=LR(e),d=o(e,u);if(!u&&SR){h.visualElement=function(e,t,n,i){const{visualElement:o}=(0,r.useContext)(xR),s=(0,r.useContext)(CR),a=(0,r.useContext)(ER),l=(0,r.useContext)(wR).reducedMotion,c=(0,r.useRef)();i=i||s.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:o,props:n,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:l}));const u=c.current;(0,r.useInsertionEffect)((()=>{u&&u.update(n,a)}));const h=(0,r.useRef)(Boolean(window.HandoffAppearAnimations));return TR((()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())})),(0,r.useEffect)((()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,h.current=!1)})),u}(s,d,c,n);const e=(0,r.useContext)(zR),i=(0,r.useContext)(CR).strict;h.visualElement&&(l=h.visualElement.loadFeatures(c,i,t,e))}return r.createElement(xR.Provider,{value:h},l&&h.visualElement?r.createElement(l,{visualElement:h.visualElement,...c}):null,i(s,e,function(e,t,n){return(0,r.useCallback)((r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):AR(n)&&(n.current=r))}),[t])}(d,h.visualElement,a),d,u,h.visualElement))}));return a[UR]=s,a}function VR(e){let{layoutId:t}=e;const n=(0,r.useContext)(FR).id;return n&&void 0!==t?n+"-"+t:t}function HR(e){function t(t){return BR(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const qR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function WR(e){return"string"===typeof e&&!e.includes("-")&&!!(qR.indexOf(e)>-1||/[A-Z]/.test(e))}const KR={};const ZR=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],GR=new Set(ZR);function QR(e,t){let{layout:n,layoutId:r}=t;return GR.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!KR[e]||"opacity"===e)}const YR=e=>Boolean(e&&e.getVelocity),XR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JR=ZR.length;const $R=e=>t=>"string"===typeof t&&t.startsWith(e),eN=$R("--"),tN=$R("var(--"),nN=(e,t)=>t&&"number"===typeof e?t.transform(e):e,rN=(e,t,n)=>Math.min(Math.max(n,e),t),iN={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},oN={...iN,transform:e=>rN(0,1,e)},sN={...iN,default:1},aN=e=>Math.round(1e5*e)/1e5,lN=/(-)?([\d]*\.?[\d])+/g,cN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,uN=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function hN(e){return"string"===typeof e}const dN=e=>({test:t=>hN(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),fN=dN("deg"),pN=dN("%"),mN=dN("px"),gN=dN("vh"),vN=dN("vw"),yN={...pN,parse:e=>pN.parse(e)/100,transform:e=>pN.transform(100*e)},_N={...iN,transform:Math.round},bN={borderWidth:mN,borderTopWidth:mN,borderRightWidth:mN,borderBottomWidth:mN,borderLeftWidth:mN,borderRadius:mN,radius:mN,borderTopLeftRadius:mN,borderTopRightRadius:mN,borderBottomRightRadius:mN,borderBottomLeftRadius:mN,width:mN,maxWidth:mN,height:mN,maxHeight:mN,size:mN,top:mN,right:mN,bottom:mN,left:mN,padding:mN,paddingTop:mN,paddingRight:mN,paddingBottom:mN,paddingLeft:mN,margin:mN,marginTop:mN,marginRight:mN,marginBottom:mN,marginLeft:mN,rotate:fN,rotateX:fN,rotateY:fN,rotateZ:fN,scale:sN,scaleX:sN,scaleY:sN,scaleZ:sN,skew:fN,skewX:fN,skewY:fN,distance:mN,translateX:mN,translateY:mN,translateZ:mN,x:mN,y:mN,z:mN,perspective:mN,transformPerspective:mN,opacity:oN,originX:yN,originY:yN,originZ:mN,zIndex:_N,fillOpacity:oN,strokeOpacity:oN,numOctaves:_N};function wN(e,t,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let l=!1,c=!1,u=!0;for(const h in t){const e=t[h];if(eN(h)){o[h]=e;continue}const n=bN[h],r=nN(e,n);if(GR.has(h)){if(l=!0,s[h]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=r):i[h]=r}if(t.transform||(l||r?i.transform=function(e,t,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:o=!0}=t,s="";for(let a=0;a<JR;a++){const t=ZR[a];if(void 0!==e[t]){const n=XR[t]||t;s+="".concat(n,"(").concat(e[t],") ")}}return i&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,n?"":s):o&&n&&(s="none"),s}(e.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;i.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const xN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EN(e,t,n){for(const r in t)YR(t[r])||QR(r,n)||(e[r]=t[r])}function SN(e,t,n){const i={};return EN(i,e.style||{},e),Object.assign(i,function(e,t,n){let{transformTemplate:i}=e;return(0,r.useMemo)((()=>{const e=xN();return wN(e,t,{enableHardwareAcceleration:!n},i),Object.assign({},e.vars,e.style)}),[t])}(e,t,n)),e.transformValues?e.transformValues(i):i}function TN(e,t,n){const r={},i=SN(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const CN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function AN(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||CN.has(e)}let kN=e=>!AN(e);try{(PN=require("@emotion/is-prop-valid").default)&&(kN=e=>e.startsWith("on")?!AN(e):PN(e))}catch(OK){}var PN;function ON(e,t,n){return"string"===typeof e?e:mN.transform(t+n*e)}const IN={offset:"stroke-dashoffset",array:"stroke-dasharray"},RN={offset:"strokeDashoffset",array:"strokeDasharray"};function NN(e,t,n,r,i){let{attrX:o,attrY:s,attrScale:a,originX:l,originY:c,pathLength:u,pathSpacing:h=1,pathOffset:d=0,...f}=t;if(wN(e,f,n,i),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:m,dimensions:g}=e;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(void 0!==l||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){const r=ON(t,e.x,e.width),i=ON(n,e.y,e.height);return"".concat(r," ").concat(i)}(g,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==o&&(p.x=o),void 0!==s&&(p.y=s),void 0!==a&&(p.scale=a),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=i?IN:RN;e[o.offset]=mN.transform(-r);const s=mN.transform(t),a=mN.transform(n);e[o.array]="".concat(s," ").concat(a)}(p,u,h,d,!1)}const LN=()=>({...xN(),attrs:{}}),DN=e=>"string"===typeof e&&"svg"===e.toLowerCase();function MN(e,t,n,i){const o=(0,r.useMemo)((()=>{const n=LN();return NN(n,t,{enableHardwareAcceleration:!1},DN(i),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};EN(t,e.style,e),o.style={...t,...o.style}}return o}function jN(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,o,s)=>{let{latestValues:a}=o;const l=(WR(t)?MN:TN)(n,a,s,t),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(kN(i)||!0===n&&AN(i)||!t&&!AN(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),u={...c,...l,ref:i},{children:h}=n,d=(0,r.useMemo)((()=>YR(h)?h.get():h),[h]);return(0,r.createElement)(t,{...u,children:d})}}const FN=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function zN(e,t,n,r){let{style:i,vars:o}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const s in o)e.style.setProperty(s,o[s])}const UN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BN(e,t,n,r){zN(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(UN.has(i)?i:FN(i),t.attrs[i])}function VN(e,t){const{style:n}=e,r={};for(const i in n)(YR(n[i])||t.style&&YR(t.style[i])||QR(i,e))&&(r[i]=n[i]);return r}function HN(e,t){const n=VN(e,t);for(const r in e)if(YR(e[r])||YR(t[r])){n[-1!==ZR.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function qN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}const WN=e=>Array.isArray(e),KN=e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue),ZN=e=>WN(e)?e[e.length-1]||0:e;function GN(e){const t=YR(e)?e.get():e;return KN(t)?t.toValue():t}const QN=e=>(t,n)=>{const i=(0,r.useContext)(xR),o=(0,r.useContext)(ER),s=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o,onMount:s}=e;const a={latestValues:YN(t,n,r,i),renderState:o()};return s&&(a.mount=e=>s(t,e,a)),a}(e,t,i,o);return n?s():function(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}(s)};function YN(e,t,n,r){const i={},o=r(e,{});for(const d in o)i[d]=GN(o[d]);let{initial:s,animate:a}=e;const l=RR(e),c=NR(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const h=u?a:s;if(h&&"boolean"!==typeof h&&!PR(h)){(Array.isArray(h)?h:[h]).forEach((t=>{const n=qN(e,t);if(!n)return;const{transitionEnd:r,transition:o,...s}=n;for(const e in s){let t=s[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]}))}return i}const XN=e=>e;class JN{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const $N=["prepare","read","update","preRender","render","postRender"];const{schedule:eL,cancel:tL,state:nL,steps:rL}=function(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=$N.reduce(((e,t)=>(e[t]=function(e){let t=new JN,n=new JN,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:function(e){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,a=o?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),a.add(e)&&o&&i&&(r=t.order.length),e},cancel:e=>{n.remove(e),s.delete(e)},process:l=>{if(i)o=!0;else{if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),s.has(r)&&(a.schedule(r),e())}i=!1,o&&(o=!1,a.process(l))}}};return a}((()=>n=!0)),e)),{}),s=e=>o[e].process(i),a=()=>{const o=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(o-i.timestamp,40),1),i.timestamp=o,i.isProcessing=!0,$N.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=$N.reduce(((t,s)=>{const l=o[s];return t[s]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(a)),l.schedule(t,o,s)},t}),{});return{schedule:l,cancel:e=>$N.forEach((t=>o[t].cancel(e))),state:i,steps:o}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:XN,!0),iL={useVisualState:QN({scrapeMotionValuesFromProps:HN,createRenderState:LN,onMount:(e,t,n)=>{let{renderState:r,latestValues:i}=n;eL.read((()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(Yv){r.dimensions={x:0,y:0,width:0,height:0}}})),eL.render((()=>{NN(r,i,{enableHardwareAcceleration:!1},DN(t.tagName),e.transformTemplate),BN(t,r)}))}})},oL={useVisualState:QN({scrapeMotionValuesFromProps:VN,createRenderState:xN})};function sL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const aL=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function lL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const cL=e=>t=>aL(t)&&e(t,lL(t));function uL(e,t,n,r){return sL(e,t,cL(n),r)}const hL=(e,t)=>n=>t(e(n)),dL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(hL)};function fL(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const pL=fL("dragHorizontal"),mL=fL("dragVertical");function gL(e){let t=!1;if("y"===e)t=mL();else if("x"===e)t=pL();else{const e=pL(),n=mL();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function vL(){const e=gL(!0);return!e||(e(),!1)}class yL{constructor(e){this.isMounted=!1,this.node=e}update(){}}function _L(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return uL(e.current,n,((n,i)=>{if("touch"===n.type||vL())return;const o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t),o[r]&&eL.update((()=>o[r](n,i)))}),{passive:!e.getProps()[r]})}const bL=(e,t)=>!!t&&(e===t||bL(e,t.parentElement));function wL(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,lL(n))}const xL=new WeakMap,EL=new WeakMap,SL=e=>{const t=xL.get(e.target);t&&t(e)},TL=e=>{e.forEach(SL)};function CL(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;EL.has(r)||EL.set(r,{});const i=EL.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(TL,{root:t,...n})),i[o]}(t);return xL.set(e,n),r.observe(e),()=>{xL.delete(e),r.unobserve(e)}}const AL={some:0,all:1};const kL={inView:{Feature:class extends yL{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:AL[r]};return CL(this.node.current,o,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=t?n:r;o&&o(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends yL{constructor(){super(...arguments),this.removeStartListeners=XN,this.removeEndListeners=XN,this.removeAccessibleListeners=XN,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),r=uL(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r}=this.node.getProps();eL.update((()=>{bL(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)}))}),{passive:!(n.onTap||n.onPointerUp)}),i=uL(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=dL(r,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=sL(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=sL(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&wL("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&eL.update((()=>n(e,t)))}))})),wL("down",((e,t)=>{this.startPress(e,t)}))})),t=sL(this.node.current,"blur",(()=>{this.isPressing&&wL("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=dL(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&eL.update((()=>n(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!vL()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&eL.update((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=uL(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=sL(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=dL(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends yL{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Yv){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dL(sL(this.node.current,"focus",(()=>this.onFocus())),sL(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends yL{mount(){this.unmount=dL(_L(this.node,!0),_L(this.node,!1))}unmount(){}}}};function PL(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function OL(e,t,n){const r=e.getProps();return qN(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.get())),t}(e),function(e){const t={};return e.values.forEach(((e,n)=>t[n]=e.getVelocity())),t}(e))}const IL="data-"+FN("framerAppearId");let RL=XN,NL=XN;const LL=e=>1e3*e,DL=e=>e/1e3,ML=!1,jL=e=>Array.isArray(e)&&"number"===typeof e[0];function FL(e){return Boolean(!e||"string"===typeof e&&UL[e]||jL(e)||Array.isArray(e)&&e.every(FL))}const zL=e=>{let[t,n,r,i]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(i,")")},UL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zL([0,.65,.55,1]),circOut:zL([.55,0,1,.45]),backIn:zL([.31,.01,.66,-.59]),backOut:zL([.33,1.53,.69,.99])};function BL(e){if(e)return jL(e)?zL(e):Array.isArray(e)?e.map(BL):UL[e]}const VL=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,HL=1e-7,qL=12;function WL(e,t,n,r){if(e===t&&n===r)return XN;const i=t=>function(e,t,n,r,i){let o,s,a=0;do{s=t+(n-t)/2,o=VL(s,r,i)-e,o>0?n=s:t=s}while(Math.abs(o)>HL&&++a<qL);return s}(t,0,1,e,n);return e=>0===e||1===e?e:VL(i(e),t,r)}const KL=WL(.42,0,1,1),ZL=WL(0,0,.58,1),GL=WL(.42,0,.58,1),QL=e=>Array.isArray(e)&&"number"!==typeof e[0],YL=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,XL=e=>t=>1-e(1-t),JL=e=>1-Math.sin(Math.acos(e)),$L=XL(JL),eD=YL($L),tD=WL(.33,1.53,.69,.99),nD=XL(tD),rD=YL(nD),iD={linear:XN,easeIn:KL,easeInOut:GL,easeOut:ZL,circIn:JL,circInOut:eD,circOut:$L,backIn:nD,backInOut:rD,backOut:tD,anticipate:e=>(e*=2)<1?.5*nD(e):.5*(2-Math.pow(2,-10*(e-1)))},oD=e=>{if(Array.isArray(e)){NL(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return WL(t,n,r,i)}return"string"===typeof e?(NL(void 0!==iD[e],"Invalid easing type '".concat(e,"'")),iD[e]):e},sD=(e,t)=>n=>Boolean(hN(n)&&uN.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),aD=(e,t,n)=>r=>{if(!hN(r))return r;const[i,o,s,a]=r.match(lN);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},lD={...iN,transform:e=>Math.round((e=>rN(0,255,e))(e))},cD={test:sD("rgb","red"),parse:aD("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+lD.transform(t)+", "+lD.transform(n)+", "+lD.transform(r)+", "+aN(oN.transform(i))+")"}};const uD={test:sD("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:cD.transform},hD={test:sD("hsl","hue"),parse:aD("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+pN.transform(aN(n))+", "+pN.transform(aN(r))+", "+aN(oN.transform(i))+")"}},dD={test:e=>cD.test(e)||uD.test(e)||hD.test(e),parse:e=>cD.test(e)?cD.parse(e):hD.test(e)?hD.parse(e):uD.parse(e),transform:e=>hN(e)?e:e.hasOwnProperty("red")?cD.transform(e):hD.transform(e)},fD=(e,t,n)=>-n*e+n*t+e;function pD(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const mD=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},gD=[uD,cD,hD];function vD(e){const t=(e=>gD.find((t=>t.test(e))))(e);NL(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let n=t.parse(e);return t===hD&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let o=0,s=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;o=pD(i,e,t+1/3),s=pD(i,e,t),a=pD(i,e,t-1/3)}else o=s=a=r;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*a),alpha:i}}(n)),n}const yD=(e,t)=>{const n=vD(e),r=vD(t),i={...n};return e=>(i.red=mD(n.red,r.red,e),i.green=mD(n.green,r.green,e),i.blue=mD(n.blue,r.blue,e),i.alpha=fD(n.alpha,r.alpha,e),cD.transform(i))};const _D={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:XN},bD={regex:cN,countKey:"Colors",token:"${c}",parse:dD.parse},wD={regex:lN,countKey:"Numbers",token:"${n}",parse:iN.parse};function xD(e,t){let{regex:n,countKey:r,token:i,parse:o}=t;const s=e.tokenised.match(n);s&&(e["num"+r]=s.length,e.tokenised=e.tokenised.replace(n,i),e.values.push(...s.map(o)))}function ED(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&xD(n,_D),xD(n,bD),xD(n,wD),n}function SD(e){return ED(e).values}function TD(e){const{values:t,numColors:n,numVars:r,tokenised:i}=ED(e),o=t.length;return e=>{let t=i;for(let i=0;i<o;i++)t=i<r?t.replace(_D.token,e[i]):i<r+n?t.replace(bD.token,dD.transform(e[i])):t.replace(wD.token,aN(e[i]));return t}}const CD=e=>"number"===typeof e?0:e;const AD={test:function(e){var t,n;return isNaN(e)&&hN(e)&&((null===(t=e.match(lN))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(cN))||void 0===n?void 0:n.length)||0)>0},parse:SD,createTransformer:TD,getAnimatableNone:function(e){const t=SD(e);return TD(e)(t.map(CD))}},kD=(e,t)=>n=>"".concat(n>0?t:e);function PD(e,t){return"number"===typeof e?n=>fD(e,t,n):dD.test(e)?yD(e,t):e.startsWith("var(")?kD(e,t):RD(e,t)}const OD=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>PD(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},ID=(e,t)=>{const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=PD(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}},RD=(e,t)=>{const n=AD.createTransformer(t),r=ED(e),i=ED(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?dL(OD(r.values,i.values),n):(RL(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),kD(e,t))},ND=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},LD=(e,t)=>n=>fD(e,t,n);function DD(e,t,n){const r=[],i=n||function(e){return"number"===typeof e?LD:"string"===typeof e?dD.test(e)?yD:RD:Array.isArray(e)?OD:"object"===typeof e?ID:LD}(e[0]),o=e.length-1;for(let s=0;s<o;s++){let n=i(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||XN:t;n=dL(e,n)}r.push(n)}return r}function MD(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(NL(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=DD(t,r,i),a=s.length,l=t=>{let n=0;if(a>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=ND(e[n],e[n+1],t);return s[n](r)};return n?t=>l(rN(e[0],e[o-1],t)):l}function jD(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=ND(0,t,r);e.push(fD(n,1,i))}}(t,e.length-1),t}function FD(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const o=QL(i)?i.map(oD):oD(i),s={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:jD(n),t),l=MD(a,n,{ease:Array.isArray(o)?o:(c=n,u=o,c.map((()=>u||GL)).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}function zD(e,t){return t?e*(1e3/t):0}const UD=5;function BD(e,t,n){const r=Math.max(t-UD,0);return zD(n-e(r),t-r)}const VD=.001,HD=.01,qD=10,WD=.05,KD=1;function ZD(e){let t,n,{duration:r=800,bounce:i=.25,velocity:o=0,mass:s=1}=e;RL(r<=LL(qD),"Spring duration must be 10 seconds or less");let a=1-i;a=rN(WD,KD,a),r=rN(HD,qD,DL(r)),a<1?(t=e=>{const t=e*a,n=t*r,i=t-o,s=QD(e,a),l=Math.exp(-n);return VD-i/s*l},n=e=>{const n=e*a*r,i=n*o+o,s=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=QD(Math.pow(e,2),a);return(-t(e)+VD>0?-1:1)*((i-s)*l)/c}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-VD,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const l=function(e,t,n){let r=n;for(let i=1;i<GD;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=LL(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:r}}}const GD=12;function QD(e,t){return e*Math.sqrt(1-t*t)}const YD=["duration","bounce"],XD=["stiffness","damping","mass"];function JD(e,t){return t.some((t=>void 0!==e[t]))}function $D(e){let{keyframes:t,restDelta:n,restSpeed:r,...i}=e;const o=t[0],s=t[t.length-1],a={done:!1,value:o},{stiffness:l,damping:c,mass:u,velocity:h,duration:d,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!JD(e,XD)&&JD(e,YD)){const n=ZD(e);t={...t,...n,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}(i),p=h?-DL(h):0,m=c/(2*Math.sqrt(l*u)),g=s-o,v=DL(Math.sqrt(l/u)),y=Math.abs(g)<5;let _;if(r||(r=y?.01:2),n||(n=y?.005:.5),m<1){const e=QD(v,m);_=t=>{const n=Math.exp(-m*v*t);return s-n*((p+m*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)_=e=>s-Math.exp(-v*e)*(g+(p+v*g)*e);else{const e=v*Math.sqrt(m*m-1);_=t=>{const n=Math.exp(-m*v*t),r=Math.min(e*t,300);return s-n*((p+m*v*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:f&&d||null,next:e=>{const t=_(e);if(f)a.done=e>=d;else{let i=p;0!==e&&(i=m<1?BD(_,e,t):0);const o=Math.abs(i)<=r,l=Math.abs(s-t)<=n;a.done=o&&l}return a.value=a.done?s:t,a}}}function eM(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:h}=e;const d=t[0],f={done:!1,value:d},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=d+m,v=void 0===a?g:a(g);v!==g&&(m=v-d);const y=e=>-m*Math.exp(-e/i),_=e=>v+y(e),b=e=>{const t=y(e),n=_(e);f.done=Math.abs(t)<=u,f.value=f.done?v:n};let w,x;const E=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(w=e,x=$D({keyframes:[f.value,p(f.value)],velocity:BD(_,e,f.value),damping:o,stiffness:s,restDelta:u,restSpeed:h}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return x||void 0!==w||(t=!0,b(e),E(e)),void 0!==w&&e>w?x.next(e-w):(!t&&b(e),f)}}}const tM=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>eL.update(t,!0),stop:()=>tL(t),now:()=>nL.isProcessing?nL.timestamp:performance.now()}},nM=2e4;function rM(e){let t=0;let n=e.next(t);for(;!n.done&&t<nM;)t+=50,n=e.next(t);return t>=nM?1/0:t}const iM={decay:eM,inertia:eM,tween:FD,keyframes:FD,spring:$D};function oM(e){let t,n,{autoplay:r=!0,delay:i=0,driver:o=tM,keyframes:s,type:a="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:h,onStop:d,onComplete:f,onUpdate:p,...m}=e,g=1,v=!1;const y=()=>{n=new Promise((e=>{t=e}))};let _;y();const b=iM[a]||FD;let w;b!==FD&&"number"!==typeof s[0]&&(w=MD([0,100],s,{clamp:!1}),s=[0,100]);const x=b({...m,keyframes:s});let E;"mirror"===u&&(E=b({...m,keyframes:[...s].reverse(),velocity:-(m.velocity||0)}));let S="idle",T=null,C=null,A=null;null===x.calculatedDuration&&l&&(x.calculatedDuration=rM(x));const{calculatedDuration:k}=x;let P=1/0,O=1/0;null!==k&&(P=k+c,O=P*(l+1)-c);let I=0;const R=e=>{if(null===C)return;g>0&&(C=Math.min(C,e)),g<0&&(C=Math.min(e-O/g,C)),I=null!==T?T:Math.round(e-C)*g;const t=I-i*(g>=0?1:-1),n=g>=0?t<0:t>O;I=Math.max(t,0),"finished"===S&&null===T&&(I=O);let r=I,o=x;if(l){const e=I/P;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);const i=Boolean(t%2);i&&("reverse"===u?(n=1-n,c&&(n-=c/P)):"mirror"===u&&(o=E));let s=rN(0,1,n);I>O&&(s="reverse"===u&&i?1:0),r=s*P}const a=n?{done:!1,value:s[0]}:o.next(r);w&&(a.value=w(a.value));let{done:h}=a;n||null===k||(h=g>=0?I>=O:I<=0);const d=null===T&&("finished"===S||"running"===S&&h);return p&&p(a.value),d&&D(),a},N=()=>{_&&_.stop(),_=void 0},L=()=>{S="idle",N(),t(),y(),C=A=null},D=()=>{S="finished",f&&f(),N(),t()},M=()=>{if(v)return;_||(_=o(R));const e=_.now();h&&h(),null!==T?C=e-T:C&&"finished"!==S||(C=e),"finished"===S&&y(),A=C,T=null,S="running",_.start()};r&&M();const j={then:(e,t)=>n.then(e,t),get time(){return DL(I)},set time(e){e=LL(e),I=e,null===T&&_&&0!==g?C=_.now()-e/g:T=e},get duration(){const e=null===x.calculatedDuration?rM(x):x.calculatedDuration;return DL(e)},get speed(){return g},set speed(e){e!==g&&_&&(g=e,j.time=DL(I))},get state(){return S},play:M,pause:()=>{S="paused",T=I},stop:()=>{v=!0,"idle"!==S&&(S="idle",d&&d(),L())},cancel:()=>{null!==A&&R(A),L()},complete:()=>{S="finished"},sample:e=>(C=0,R(e))};return j}const sM=function(e){let t;return()=>(void 0===t&&(t=e()),t)}((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),aM=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function lM(e,t,n){let{onUpdate:r,onComplete:i,...o}=n;if(!(sM()&&aM.has(t)&&!o.repeatDelay&&"mirror"!==o.repeatType&&0!==o.damping&&"inertia"!==o.type))return!1;let s,a,l=!1;const c=()=>{a=new Promise((e=>{s=e}))};c();let{keyframes:u,duration:h=300,ease:d,times:f}=o;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!FL(t.ease))(t,o)){const e=oM({...o,repeat:0,delay:0});let t={done:!1,value:u[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;f=void 0,u=n,h=r-10,d="linear"}const p=function(e,t,n){let{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=BL(a);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:"reverse"===s?"alternate":"normal"})}(e.owner.current,t,u,{...o,duration:h,ease:d,times:f});o.syncStart&&(p.startTime=nL.isProcessing?nL.timestamp:document.timeline?document.timeline.currentTime:performance.now());const m=()=>p.cancel(),g=()=>{eL.update(m),s(),c()};p.onfinish=()=>{e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(u,o)),i&&i(),g()};return{then:(e,t)=>a.then(e,t),attachTimeline:e=>(p.timeline=e,p.onfinish=null,XN),get time(){return DL(p.currentTime||0)},set time(e){p.currentTime=LL(e)},get speed(){return p.playbackRate},set speed(e){p.playbackRate=e},get duration(){return DL(h)},play:()=>{l||(p.play(),tL(m))},pause:()=>p.pause(),stop:()=>{if(l=!0,"idle"===p.playState)return;const{currentTime:t}=p;if(t){const n=oM({...o,autoplay:!1});e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}g()},complete:()=>p.finish(),cancel:g}}const cM={type:"spring",stiffness:500,damping:25,restSpeed:10},uM={type:"keyframes",duration:.8},hM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dM=(e,t)=>{let{keyframes:n}=t;return n.length>2?uM:GR.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:cM:hM},fM=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!AD.test(t)&&"0"!==t||t.startsWith("url("))),pM=new Set(["brightness","contrast","saturate","opacity"]);function mM(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(lN)||[];if(!r)return e;const i=n.replace(r,"");let o=pM.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const gM=/([a-z-]*)\(.*?\)/g,vM={...AD,getAnimatableNone:e=>{const t=e.match(gM);return t?t.map(mM).join(" "):e}},yM={...bN,color:dD,backgroundColor:dD,outlineColor:dD,fill:dD,stroke:dD,borderColor:dD,borderTopColor:dD,borderRightColor:dD,borderBottomColor:dD,borderLeftColor:dD,filter:vM,WebkitFilter:vM},_M=e=>yM[e];function bM(e,t){let n=_M(e);return n!==vM&&(n=AD),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const wM=e=>/^0[^.\s]+$/.test(e);function xM(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||wM(e):void 0}function EM(e,t){return e[t]||e.default||e}const SM=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const o=EM(r,e)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a-=LL(s);const l=function(e,t,n,r){const i=fM(t,n);let o;o=Array.isArray(n)?[...n]:[null,n];const s=void 0!==r.from?r.from:e.get();let a;const l=[];for(let c=0;c<o.length;c++)null===o[c]&&(o[c]=0===c?s:o[c-1]),xM(o[c])&&l.push(c),"string"===typeof o[c]&&"none"!==o[c]&&"0"!==o[c]&&(a=o[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++)o[l[c]]=bM(t,a);return o}(t,e,n,o),c=l[0],u=l[l.length-1],h=fM(e,c),d=fM(e,u);RL(h===d,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(u,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(u," via the `style` property."));let f={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:u,...h}=e;return!!Object.keys(h).length}(o)||(f={...f,...dM(e,f)}),f.duration&&(f.duration=LL(f.duration)),f.repeatDelay&&(f.repeatDelay=LL(f.repeatDelay)),!h||!d||ML||!1===o.type)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:i}=e;const o=()=>(r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:XN,pause:XN,stop:XN,then:e=>(e(),Promise.resolve()),cancel:XN,complete:XN});return n?oM({keyframes:[0,1],duration:0,delay:n,onComplete:o}):o()}(ML?{...f,delay:0}:f);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=lM(t,e,f);if(n)return n}return oM(f)}};function TM(e){return Boolean(YR(e)&&e.add)}const CM=e=>/^\-?\d*\.?\d+$/.test(e);function AM(e,t){-1===e.indexOf(t)&&e.push(t)}function kM(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class PM{constructor(){this.subscriptions=[]}add(e){return AM(this.subscriptions,e),()=>kM(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const OM={current:void 0};class IM{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:i}=nL;t.lastUpdated!==i&&(t.timeDelta=r,t.lastUpdated=i,eL.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>eL.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new PM);const n=this.events[e].add(t);return"change"===e?()=>{n(),eL.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return OM.current&&OM.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function RM(e,t){return new IM(e,t)}const NM=e=>t=>t.test(e),LM=[iN,mN,pN,fN,vN,gN,{test:e=>"auto"===e,parse:e=>e}],DM=e=>LM.find(NM(e)),MM=[...LM,dD,AD],jM=e=>MM.find(NM(e));function FM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,RM(n))}function zM(e,t){const n=OL(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const s in o){FM(e,s,ZN(o[s]))}}function UM(e,t){if(!t)return;return(t[e]||t.default||t).from}function BM(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function VM(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(o=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const h in a){const t=e.getValue(h),r=a[h];if(!t||void 0===r||u&&BM(u,h))continue;const i={delay:n,elapsed:0,...o};if(window.HandoffAppearAnimations&&!t.hasAnimated){const n=e.getProps()[IL];n&&(i.elapsed=window.HandoffAppearAnimations(n,h,t,eL),i.syncStart=!0)}t.start(SM(h,t,r,e.shouldReduceMotion&&GR.has(h)?{type:!1}:i));const s=t.animation;TM(l)&&(l.add(h),s.then((()=>l.remove(h)))),c.push(s)}return s&&Promise.all(c).then((()=>{s&&zM(e,s)})),c}function HM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=OL(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(VM(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:o=0,staggerChildren:s,staggerDirection:a}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const s=[],a=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(qM).forEach(((e,r)=>{e.notify("AnimationStart",t),s.push(HM(e,t,{...o,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(s)}(e,t,o+r,s,a,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[e,t]="beforeChildren"===a?[o,s]:[s,o];return e().then((()=>t()))}return Promise.all([o(),s(n.delay)])}function qM(e,t){return e.sortNodePosition(t)}const WM=[...OR].reverse(),KM=OR.length;function ZM(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>HM(e,t,r)));n=Promise.all(i)}else if("string"===typeof t)n=HM(e,t,r);else{const i="function"===typeof t?OL(e,t,r.custom):t;n=Promise.all(VM(e,i,r))}return n.then((()=>e.notify("AnimationComplete",t)))}(e,n,r)})))}function GM(e){let t=ZM(e);const n={animate:YM(!0),whileInView:YM(),whileHover:YM(),whileTap:YM(),whileDrag:YM(),whileFocus:YM(),exit:YM()};let r=!0;const i=(t,n)=>{const r=OL(e,n);if(r){const{transition:e,transitionEnd:n,...i}=r;t={...t,...i,...n}}return t};function o(o,s){const a=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let h={},d=1/0;for(let t=0;t<KM;t++){const f=WM[t],p=n[f],m=void 0!==a[f]?a[f]:l[f],g=kR(m),v=f===s?p.isActive:null;!1===v&&(d=t);let y=m===l[f]&&m!==a[f]&&g;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys={...h},!p.isActive&&null===v||!m&&!p.prevProp||PR(m)||"boolean"===typeof m)continue;const _=QM(p.prevProp,m);let b=_||f===s&&p.isActive&&!y&&g||t>d&&g;const w=Array.isArray(m)?m:[m];let x=w.reduce(i,{});!1===v&&(x={});const{prevResolvedValues:E={}}=p,S={...E,...x},T=e=>{b=!0,u.delete(e),p.needsAnimating[e]=!0};for(const e in S){const t=x[e],n=E[e];h.hasOwnProperty(e)||(t!==n?WN(t)&&WN(n)?!PL(t,n)||_?T(e):p.protectedKeys[e]=!0:void 0!==t?T(e):u.add(e):void 0!==t&&u.has(e)?T(e):p.protectedKeys[e]=!0)}p.prevProp=m,p.prevResolvedValues=x,p.isActive&&(h={...h,...x}),r&&e.blockInitialAnimation&&(b=!1),b&&!y&&c.push(...w.map((e=>({animation:e,options:{type:f,...o}}))))}if(u.size){const t={};u.forEach((n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)})),c.push({animation:t})}let f=Boolean(c.length);return r&&!1===a.initial&&!e.manuallyAnimateOnMount&&(f=!1),r=!1,f?t(c):Promise.resolve()}return{animateChanges:o,setActive:function(t,r,i){var s;if(n[t].isActive===r)return Promise.resolve();null===(s=e.variantChildren)||void 0===s||s.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const a=o(i,t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function QM(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!PL(t,e)}function YM(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let XM=0;const JM={animation:{Feature:class extends yL{constructor(e){super(e),e.animationState||(e.animationState=GM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),PR(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends yL{constructor(){super(...arguments),this.id=XM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},$M=(e,t)=>Math.abs(e-t);class ej{constructor(e,t){let{transformPagePoint:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=rj(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=$M(e.x,t.x),r=$M(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=nL;this.history.push({...r,timestamp:i});const{onStart:o,onMove:s}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=tj(t,this.transformPagePoint),eL.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{if(this.end(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const{onEnd:n,onSessionEnd:r}=this.handlers,i=rj("pointercancel"===e.type?this.lastMoveEventInfo:tj(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!aL(e))return;this.handlers=t,this.transformPagePoint=n;const r=tj(lL(e),this.transformPagePoint),{point:i}=r,{timestamp:o}=nL;this.history=[{...i,timestamp:o}];const{onSessionStart:s}=t;s&&s(e,rj(r,this.history)),this.removeListeners=dL(uL(window,"pointermove",this.handlePointerMove),uL(window,"pointerup",this.handlePointerUp),uL(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),tL(this.updatePoint)}}function tj(e,t){return t?{point:t(e.point)}:e}function nj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rj(e,t){let{point:n}=e;return{point:n,delta:nj(n,oj(t)),offset:nj(n,ij(t)),velocity:sj(t,.1)}}function ij(e){return e[0]}function oj(e){return e[e.length-1]}function sj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=oj(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>LL(t)));)n--;if(!r)return{x:0,y:0};const o=DL(i.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function aj(e){return e.max-e.min}function lj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function cj(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=fD(t.min,t.max,e.origin),e.scale=aj(n)/aj(t),(lj(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=fD(n.min,n.max,e.origin)-e.originPoint,(lj(e.translate)||isNaN(e.translate))&&(e.translate=0)}function uj(e,t,n,r){cj(e.x,t.x,n.x,r?r.originX:void 0),cj(e.y,t.y,n.y,r?r.originY:void 0)}function hj(e,t,n){e.min=n.min+t.min,e.max=e.min+aj(t)}function dj(e,t,n){e.min=t.min-n.min,e.max=e.min+aj(t)}function fj(e,t,n){dj(e.x,t.x,n.x),dj(e.y,t.y,n.y)}function pj(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function mj(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const gj=.35;function vj(e,t,n){return{min:yj(e,t),max:yj(e,n)}}function yj(e,t){return"number"===typeof e?e:e[t]||0}const _j=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),bj=()=>({x:{min:0,max:0},y:{min:0,max:0}});function wj(e){return[e("x"),e("y")]}function xj(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function Ej(e){return void 0===e||1===e}function Sj(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Ej(t)||!Ej(n)||!Ej(r)}function Tj(e){return Sj(e)||Cj(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Cj(e){return Aj(e.x)||Aj(e.y)}function Aj(e){return e&&"0%"!==e}function kj(e,t,n){return n+t*(e-n)}function Pj(e,t,n,r,i){return void 0!==i&&(e=kj(e,i,r)),kj(e,n,r)+t}function Oj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=Pj(e.min,t,n,r,i),e.max=Pj(e.max,t,n,r,i)}function Ij(e,t){let{x:n,y:r}=t;Oj(e.x,n.translate,n.scale,n.originPoint),Oj(e.y,r.translate,r.scale,r.originPoint)}function Rj(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Nj(e,t){e.min=e.min+t,e.max=e.max+t}function Lj(e,t,n){let[r,i,o]=n;const s=void 0!==t[o]?t[o]:.5,a=fD(e.min,e.max,s);Oj(e,t[r],t[i],a,t.scale)}const Dj=["x","scaleX","originX"],Mj=["y","scaleY","originY"];function jj(e,t){Lj(e.x,t,Dj),Lj(e.y,t,Mj)}function Fj(e,t){return xj(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const zj=new WeakMap;class Uj{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bj(),this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;this.panSession=new ej(e,{onSessionStart:e=>{this.stopAnimation(),t&&this.snapToCursor(lL(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=gL(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wj((e=>{let t=this.getAxisMotionValue(e).get()||0;if(pN.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=aj(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&eL.update((()=>i(e,t)),!1,!0);const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t)},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&eL.update((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Bj(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?fD(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?fD(i,e,n.max):Math.min(e,i)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:n}=this.visualElement.projection||{},r=this.constraints;e&&AR(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,t){let{top:n,left:r,bottom:i,right:o}=t;return{x:pj(e.x,r,o),y:pj(e.y,n,i)}}(n.layoutBox,e),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gj;return!1===e?e=0:!0===e&&(e=gj),{x:vj(e,"left","right"),y:vj(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&wj((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!AR(e))return!1;const n=e.current;NL(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=Fj(e,n),{scroll:i}=t;return i&&(Nj(r.x,i.offset.x),Nj(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:mj(e.x,t.x),y:mj(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=xj(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},l=wj((s=>{if(!Bj(s,t,this.currentDirection))return;let l=a&&a[s]||{};o&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(s,h)}));return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(SM(e,n,0,t))}stopAnimation(){wj((e=>this.getAxisMotionValue(e).stop()))}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){wj((t=>{const{drag:n}=this.getProps();if(!Bj(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[t];i.set(e[t]-fD(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!AR(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};wj((e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=aj(e),i=aj(t);return i>r?n=ND(t.min,t.max-r,e.min):r>i&&(n=ND(e.min,e.max-i,t.min)),rN(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),wj((t=>{if(!Bj(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:o}=this.constraints[t];n.set(fD(i,o,r[t]))}))}addListeners(){if(!this.visualElement.current)return;zj.set(this.visualElement,this);const e=uL(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();AR(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const i=sL(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(wj((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{i(),e(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=gj,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:s}}}function Bj(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Vj=e=>(t,n)=>{e&&eL.update((()=>e(t,n)))};const Hj={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qj(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Wj={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!mN.test(e))return e;e=parseFloat(e)}const n=qj(e,t.target.x),r=qj(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Kj={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,o=AD.parse(e);if(o.length>5)return i;const s=AD.createTransformer(e),a="number"!==typeof o[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;o[0+a]/=l,o[1+a]/=c;const u=fD(l,c,.5);return"number"===typeof o[2+a]&&(o[2+a]/=u),"number"===typeof o[3+a]&&(o[3+a]/=u),s(o)}};class Zj extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var o;o=Qj,Object.assign(KR,o),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Hj.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o?(o.isPresent=i,r||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||eL.postRender((()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Gj(e){const[t,n]=function(){const e=(0,r.useContext)(ER);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,o=(0,r.useId)();return(0,r.useEffect)((()=>i(o)),[]),!t&&n?[!1,()=>n&&n(o)]:[!0]}(),i=(0,r.useContext)(FR);return r.createElement(Zj,{...e,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(zR),isPresent:t,safeToRemove:n})}const Qj={borderRadius:{...Wj,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wj,borderTopRightRadius:Wj,borderBottomLeftRadius:Wj,borderBottomRightRadius:Wj,boxShadow:Kj},Yj=["TopLeft","TopRight","BottomLeft","BottomRight"],Xj=Yj.length,Jj=e=>"string"===typeof e?parseFloat(e):e,$j=e=>"number"===typeof e||mN.test(e);function eF(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const tF=rF(0,.5,$L),nF=rF(.5,.95,XN);function rF(e,t,n){return r=>r<e?0:r>t?1:n(ND(e,t,r))}function iF(e,t){e.min=t.min,e.max=t.max}function oF(e,t){iF(e.x,t.x),iF(e.y,t.y)}function sF(e,t,n,r,i){return e=kj(e-=t,1/n,r),void 0!==i&&(e=kj(e,1/i,r)),e}function aF(e,t,n,r,i){let[o,s,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;pN.test(t)&&(t=parseFloat(t),t=fD(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let a=fD(o.min,o.max,r);e===o&&(a-=t),e.min=sF(e.min,t,n,a,i),e.max=sF(e.max,t,n,a,i)}(e,t[o],t[s],t[a],t.scale,r,i)}const lF=["x","scaleX","originX"],cF=["y","scaleY","originY"];function uF(e,t,n,r){aF(e.x,t,lF,n?n.x:void 0,r?r.x:void 0),aF(e.y,t,cF,n?n.y:void 0,r?r.y:void 0)}function hF(e){return 0===e.translate&&1===e.scale}function dF(e){return hF(e.x)&&hF(e.y)}function fF(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function pF(e){return aj(e.x)/aj(e.y)}class mF{constructor(){this.members=[]}add(e){AM(this.members,e),e.scheduleRender()}remove(e){if(kM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gF(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(r="translate3d(".concat(i,"px, ").concat(o,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:i}=n;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),i&&(r+="rotateY(".concat(i,"deg) "))}const s=e.x.scale*t.x,a=e.y.scale*t.y;return 1===s&&1===a||(r+="scale(".concat(s,", ").concat(a,")")),r||"none"}const vF=(e,t)=>e.depth-t.depth;class yF{constructor(){this.children=[],this.isDirty=!1}add(e){AM(this.children,e),this.isDirty=!0}remove(e){kM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vF),this.isDirty=!1,this.children.forEach(e)}}const _F=["","X","Y","Z"];let bF=0;const wF={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function xF(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=bF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;wF.totalNodes=wF.resolvedTargetDeltas=wF.recalculatedProjection=0,this.nodes.forEach(TF),this.nodes.forEach(RF),this.nodes.forEach(NF),this.nodes.forEach(CF),e=wF,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new yF)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new PM),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:o,visualElement:s}=this.options;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(o||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=i=>{let{timestamp:o}=i;const s=o-n;s>=t&&(tL(r),e(s-t))};return eL.read(r,!0),()=>tL(r)}(r,250),Hj.hasAnimatedSinceResize&&(Hj.hasAnimatedSinceResize=!1,this.nodes.forEach(IF))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&s&&(i||o)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||s.getDefaultTransition()||zF,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=s.getProps(),c=!this.targetLayout||!fF(this.targetLayout,i)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...EM(o,"layout"),onPlay:a,onComplete:l};(s.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||IF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,tL(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LF),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(kF);this.isUpdating||this.nodes.forEach(PF),this.isUpdating=!1,this.nodes.forEach(OF),this.nodes.forEach(EF),this.nodes.forEach(SF),this.clearAllSnapshots();const e=performance.now();nL.delta=rN(0,1e3/60,e-nL.timestamp),nL.timestamp=e,nL.isProcessing=!0,rL.update.process(nL),rL.preRender.process(nL),rL.render.process(nL),nL.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(AF),this.sharedNodes.forEach(DF)}scheduleUpdateProjection(){eL.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){eL.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bj(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!dF(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||Tj(this.latestValues)||i)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),VF((r=n).x),VF(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return bj();const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Nj(t.x,n.offset.x),Nj(t.y,n.offset.y)),t}removeElementScroll(e){const t=bj();oF(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:o}=r;if(r!==this.root&&i&&o.layoutScroll){if(i.isRoot){oF(t,e);const{scroll:n}=this.root;n&&(Nj(t.x,-n.offset.x),Nj(t.y,-n.offset.y))}Nj(t.x,i.offset.x),Nj(t.y,i.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=bj();oF(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&jj(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Tj(e.latestValues)&&jj(n,e.latestValues)}return Tj(this.latestValues)&&jj(n,this.latestValues),n}removeTransform(e){const t=bj();oF(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Tj(e.latestValues))continue;Sj(e.latestValues)&&e.updateSnapshot();const r=bj();oF(r,e.measurePageBox()),uF(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Tj(this.latestValues)&&uF(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==nL.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:o}=this.options;if(this.layout&&(i||o)){if(this.resolvedRelativeTargetAt=nL.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bj(),this.relativeTargetOrigin=bj(),fj(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),oF(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,a,l;if(this.target||(this.target=bj(),this.targetWithTransforms=bj()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,l=this.relativeParent.target,hj(s.x,a.x,l.x),hj(s.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):oF(this.target,this.layout.layoutBox),Ij(this.target,this.targetDelta)):oF(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bj(),this.relativeTargetOrigin=bj(),fj(this.relativeTargetOrigin,this.target,e.target),oF(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wF.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Sj(this.parent.latestValues)&&!Cj(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===nL.timestamp&&(r=!1),r)return;const{layout:i,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!o)return;oF(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let o,s;t.x=t.y=1;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const i=o.instance;i&&i.style&&"contents"===i.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&jj(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Ij(e,s)),r&&Tj(o.latestValues)&&jj(e,o.latestValues))}t.x=Rj(t.x),t.y=Rj(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta=_j(),this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta=_j(),this.projectionDeltaWithTransform=_j());const c=this.projectionTransform;uj(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=gF(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===s&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),wF.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},o=_j();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s=bj(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(FF));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;MF(o.x,e.x,n),MF(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fj(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){jF(e.x,t.x,n.x,r),jF(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,s,n),h&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h=bj()),oF(h,this.relativeTarget)),a&&(this.animationValues=i,function(e,t,n,r,i,o){i?(e.opacity=fD(0,void 0!==n.opacity?n.opacity:1,tF(r)),e.opacityExit=fD(void 0!==t.opacity?t.opacity:1,0,nF(r))):o&&(e.opacity=fD(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let s=0;s<Xj;s++){const i="border".concat(Yj[s],"Radius");let o=eF(t,i),a=eF(n,i);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||$j(o)===$j(a)?(e[i]=Math.max(fD(Jj(o),Jj(a),r),0),(pN.test(a)||pN.test(o))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=fD(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(tL(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=eL.update((()=>{Hj.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=YR(e)?e:RM(e);return r.start(SM("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&HF(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||bj();const t=aj(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=aj(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}oF(t,n),jj(t,i),uj(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new mF);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let i=0;i<_F.length;i++){const t="rotate"+_F[i];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const i in r)e.setStaticValue(i,r[i]);e.scheduleRender()}getProjectionStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n;const r={};if(!this.instance||this.isSVG)return r;if(!this.isVisible)return{visibility:"hidden"};r.visibility="";const i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=GN(e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=GN(e.pointerEvents)||""),this.hasProjected&&!Tj(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const s=o.animationValues||o.latestValues;this.applyTransformsToTarget(),r.transform=gF(this.projectionDeltaWithTransform,this.treeScale,s),i&&(r.transform=i(s,r.transform));const{x:a,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*a.origin,"% ").concat(100*l.origin,"% 0"),o.animationValues?r.opacity=o===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=o===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in KR){if(void 0===s[c])continue;const{correct:e,applyTo:t}=KR[c],n="none"===r.transform?s[c]:e(s[c],o);if(t){const e=t.length;for(let i=0;i<e;i++)r[t[i]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=o===this?GN(e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(kF),this.root.sharedNodes.clear()}}}function EF(e){e.updateLayout()}function SF(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;"size"===i?wj((e=>{const r=o?n.measuredBox[e]:n.layoutBox[e],i=aj(r);r.min=t[e].min,r.max=r.min+i})):HF(i,n.layoutBox,t)&&wj((r=>{const i=o?n.measuredBox[r]:n.layoutBox[r],s=aj(t[r]);i.max=i.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)}));const s=_j();uj(s,t,n.layoutBox);const a=_j();o?uj(a,e.applyTransform(r,!0),n.measuredBox):uj(a,t,n.layoutBox);const l=!dF(s);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:o}=r;if(i&&o){const s=bj();fj(s,n.layoutBox,i.layoutBox);const a=bj();fj(a,t,o.layoutBox),fF(s,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function TF(e){wF.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function CF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function AF(e){e.clearSnapshot()}function kF(e){e.clearMeasurements()}function PF(e){e.isLayoutDirty=!1}function OF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function IF(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function RF(e){e.resolveTargetDelta()}function NF(e){e.calcProjection()}function LF(e){e.resetRotation()}function DF(e){e.removeLeadSnapshot()}function MF(e,t,n){e.translate=fD(t.translate,0,n),e.scale=fD(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function jF(e,t,n,r){e.min=fD(t.min,n.min,r),e.max=fD(t.max,n.max,r)}function FF(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const zF={duration:.45,ease:[.4,0,.1,1]},UF=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),BF=UF("applewebkit/")&&!UF("chrome/")?Math.round:XN;function VF(e){e.min=BF(e.min),e.max=BF(e.max)}function HF(e,t,n){return"position"===e||"preserve-aspect"===e&&!lj(pF(t),pF(n),.2)}const qF=xF({attachResizeListener:(e,t)=>sL(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),WF={current:void 0},KF=xF({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!WF.current){const e=new qF({});e.mount(window),e.setOptions({layoutScroll:!0}),WF.current=e}return WF.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),ZF={pan:{Feature:class extends yL{constructor(){super(...arguments),this.removePointerDownListener=XN}onPointerDown(e){this.session=new ej(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Vj(e),onStart:Vj(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&eL.update((()=>r(e,t)))}}}mount(){this.removePointerDownListener=uL(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends yL{constructor(e){super(e),this.removeGroupControls=XN,this.removeListeners=XN,this.controls=new Uj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||XN}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:KF,MeasureLayout:Gj}},GF=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;const QF=4;function YF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;NL(n<=QF,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,i]=function(e){const t=GF.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const e=o.trim();return CM(e)?parseFloat(e):e}return tN(i)?YF(i,t,n+1):i}const XF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),JF=e=>XF.has(e),$F=e=>e===iN||e===mN,ez=(e,t)=>parseFloat(e.split(", ")[t]),tz=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return ez(o[1],t);{const t=i.match(/^matrix\((.+)\)$/);return t?ez(t[1],e):0}},nz=new Set(["x","y","z"]),rz=ZR.filter((e=>!nz.has(e)));const iz={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:tz(4,13),y:tz(5,14)};iz.translateX=iz.x,iz.translateY=iz.y;const oz=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t={...t},r={...r};const i=Object.keys(t).filter(JF);let o=[],s=!1;const a=[];if(i.forEach((i=>{const l=e.getValue(i);if(!e.hasValue(i))return;let c=n[i],u=DM(c);const h=t[i];let d;if(WN(h)){const e=h.length,t=null===h[0]?1:0;c=h[t],u=DM(c);for(let n=t;n<e&&null!==h[n];n++)d?NL(DM(h[n])===d,"All keyframes must be of the same type"):(d=DM(h[n]),NL(d===u||$F(u)&&$F(d),"Keyframes must be of the same dimension as the current value"))}else d=DM(h);if(u!==d)if($F(u)&&$F(d)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&d===mN&&(t[i]=h.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===d||void 0===d?void 0:d.transform)&&(0===c||0===h)?0===c?l.set(d.transform(c)):t[i]=u.transform(h):(s||(o=function(e){const t=[];return rz.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),s=!0),a.push(i),r[i]=void 0!==r[i]?r[i]:t[i],l.jump(h))})),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,i=((e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};"none"===s&&t.setStaticValue("display",e.display||"block"),n.forEach((e=>{a[e]=iz[e](r,o)})),t.render();const l=t.measureViewportBox();return n.forEach((n=>{const r=t.getValue(n);r&&r.jump(a[n]),e[n]=iz[n](l,o)})),e})(t,e,a);return o.length&&o.forEach((t=>{let[n,r]=t;e.getValue(n).set(r)})),e.render(),SR&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}};function sz(e,t,n,r){return(e=>Object.keys(e).some(JF))(t)?oz(e,t,n,r):{target:t,transitionEnd:r}}const az=(e,t,n,r)=>{const i=function(e,t,n){let{...r}=t;const i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n={...n}),e.values.forEach((e=>{const t=e.get();if(!tN(t))return;const n=YF(t,i);n&&e.set(n)}));for(const o in r){const e=r[o];if(!tN(e))continue;const t=YF(e,i);t&&(r[o]=t,n||(n={}),void 0===n[o]&&(n[o]=e))}return{target:r,transitionEnd:n}}(e,t,r);return sz(e,t=i.target,n,r=i.transitionEnd)},lz={current:null},cz={current:!1};const uz=new WeakMap,hz=Object.keys(jR),dz=hz.length,fz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],pz=IR.length;class mz{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>eL.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=RR(n),this.isVariantNode=NR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const e=u[h];void 0!==a[h]&&YR(e)&&(e.set(a[h],!1),TM(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,uz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),cz.current||function(){if(cz.current=!0,SR)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>lz.current=e.matches;e.addListener(t),t()}else lz.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||lz.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uz.delete(this.current),this.projection&&this.projection.unmount(),tL(this.notifyUpdate),tL(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=GR.has(e),r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&eL.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{r(),i()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let i,o,{children:s,...a}=e;for(let l=0;l<dz;l++){const e=hz[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:s}=jR[e];r&&(i=r),t(a)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),s&&(o=s))}if(!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:o,layoutScroll:s,layoutRoot:l}=a;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||o&&AR(o),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:s,layoutRoot:l})}return o}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bj()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<fz.length;n++){const t=fz[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],s=n[i];if(YR(o))e.addValue(i,o),TM(r)&&r.add(i);else if(YR(s))e.addValue(i,RM(o,{owner:e})),TM(r)&&r.remove(i);else if(s!==o)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(o)}else{const t=e.getStaticValue(i);e.addValue(i,RM(void 0!==t?t:o,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<pz;t++){const n=IR[t],r=this.props[n];(kR(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=RM(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=qN(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||YR(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new PM),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class gz extends mz{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:i,...o}=e,{transformValues:s}=t,a=function(e,t,n){const r={};for(const i in e){const e=UM(i,t);if(void 0!==e)r[i]=e;else{const e=n.getValue(i);e&&(r[i]=e.get())}}return r}(o,r||{},this);if(s&&(i&&(i=s(i)),o&&(o=s(o)),a&&(a=s(a))),n){!function(e,t,n){var r,i;const o=Object.keys(t).filter((t=>!e.hasValue(t))),s=o.length;if(s)for(let a=0;a<s;a++){const s=o[a],l=t[s];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(i=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==i?i:t[s]),void 0!==c&&null!==c&&("string"===typeof c&&(CM(c)||wM(c))?c=parseFloat(c):!jM(c)&&AD.test(l)&&(c=bM(s,l)),e.addValue(s,RM(c,{owner:e})),void 0===n[s]&&(n[s]=c),null!==c&&e.setBaseTarget(s,c))}}(this,o,a);const e=az(this,o,a,i);i=e.transitionEnd,o=e.target}return{transition:r,transitionEnd:i,...o}}}class vz extends gz{readValueFromInstance(e,t){if(GR.has(t)){const e=_M(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(eN(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Fj(e,n)}build(e,t,n,r){wN(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return VN(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;YR(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent="".concat(e))})))}renderInstance(e,t,n,r){zN(e,t,n,r)}}class yz extends gz{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(GR.has(t)){const e=_M(t);return e&&e.default||0}return t=UN.has(t)?t:FN(t),e.getAttribute(t)}measureInstanceViewportBox(){return bj()}scrapeMotionValuesFromProps(e,t){return HN(e,t)}build(e,t,n,r){NN(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){BN(e,t,0,r)}mount(e){this.isSVGTag=DN(e.tagName),super.mount(e)}}const _z=(e,t)=>WR(e)?new yz(t,{enableHardwareAcceleration:!1}):new vz(t,{enableHardwareAcceleration:!0}),bz={...JM,...kL,...ZF,...{layout:{ProjectionNode:KF,MeasureLayout:Gj}}},wz=HR(((e,t)=>function(e,t,n,r){let{forwardMotionProps:i=!1}=t;return{...WR(e)?iL:oL,preloadedFeatures:n,useRender:jN(i),createVisualElement:r,Component:e}}(e,t,bz,_z)));const xz=()=>{const{state:e,dispatch:t}=Oz();return(0,ex.jsxs)("div",{className:"form-group m-0 w-75",children:[(0,ex.jsx)("label",{htmlFor:"additionalNotes",className:"mb-2",children:"Notes"}),(0,ex.jsx)("textarea",{id:"additionalNotes",className:"form-control p-1 mb-3",style:{height:"187px"},value:e.formData.additionalNotes||"",onChange:e=>{t({type:"UPDATE_ADDITIONAL_NOTES",payload:e.target.value})},placeholder:"Facultatif"})]})},Ez={initial:{opacity:0,x:"-50%"},enter:{opacity:1,x:0},exit:{opacity:0,x:"50%"}},Sz=e=>{let{children:t}=e;return(0,ex.jsx)(wz.div,{initial:"initial",animate:"enter",exit:"exit",variants:Ez,children:t})},Tz=[{id:1,label:"\xc9tape 1",component:e=>{const{state:t,dispatch:n}=Oz();return(0,ex.jsx)(Sz,{children:(0,ex.jsx)(eA,{value:t.formData.companyName,onChange:e=>{const t=e.target.value;n({type:"UPDATE_FORM_DATA",payload:{companyName:t}}),n({type:"RESET_HAS_CLOSED_MODAL"})},...e})})},props:{}},{id:2,label:"\xc9tape 2",component:e=>{const{state:t,dispatch:n}=Oz();(0,r.useEffect)((()=>{if(t.formData.companyAddress)try{const e=function(e){const t=e.match(/((?:\d+[bt]?\s)?[^\d]+)\s+(\d{5})\s+(.+)/);if(t){const e=t[1].trim(),n=t[2],r=t[3],i=/(\d+[bt]?)\s(.+)/,o=e.match(i);let s,a;return o?(s=o[1],a=o[2]):(s="",a=e),{streetNumber:s,streetName:a,postalCode:n,city:r}}throw new Error("Invalid address format")}(t.formData.companyAddress);n({type:"FORMAT_ADDRESS",payload:e})}catch(e){console.error("Erreur lors du formatage de l'adresse:",e)}}),[t.formData.companyAddress,n]);return(0,ex.jsx)(Sz,{children:(0,ex.jsx)(Gk,{onSelectAddress:e=>{t.hasCoordinatesFromDuplicateModal||n({type:"UPDATE_FORM_DATA",payload:{companyCoordinates:e}})},currentCoords:t.formData.companyCoordinates,moveToNextStep:()=>n({type:"NEXT_STEP"})})})},props:{}},{id:3,label:"\xc9tape 3",component:()=>(0,ex.jsx)(Sz,{children:(0,ex.jsx)(Yk,{})}),props:{}},{id:4,label:"\xc9tape 4",component:()=>(0,ex.jsx)(Sz,{children:(0,ex.jsxs)("div",{className:"d-flex gap-3",children:[(0,ex.jsx)(bR,{}),(0,ex.jsx)(xz,{})]})}),props:{}}],Cz=(0,r.createContext)(),Az={currentEstablishmentIds:[],zoom:1,rotation:0,crop:{x:0,y:0},tempOriginalPhotoURL:null,tempPhotoURL:null,tempSelectedFile:null,tempCroppedImageUrl:null,originalPhotoURL:null,previewPhotoURL:xP,photoURL:xP,isDefaultPhoto:!0,isOccurrence:!1,openCrop:!1,currentStep:1,steps:[],establishmentExists:!1,currentEstablishmentsData:[],formData:{companyName:"",normalizedCompanyName:"",companyAddress:"",formattedAddress:{streetNumber:"",streetName:"",postalCode:"",city:""},companyCoordinates:[],dateOfObservation:"",timeOfObservation:"",photoBlob:null,photoURLs:[],selectedFile:null,croppedImageUrl:null,currentEstablishmentId:null,additionalNotes:""}},kz=(e,t)=>{switch(t.type){case"UPDATE_FORM_DATA_MODAL":return{...e,formData:{...e.formData,...t.payload}};case"RESET_FORM_DATA_MODAL":case"RESET_FORM_DATA":return{...e,formData:{...Az.formData}};case"RESET_NOTES":return console.log("R\xe9initialisation de la notes."),{...e,formData:{...e.formData,additionalNotes:""}};case"UPDATE_COMPANY_NAME_MODAL":return console.log("Mise \xe0 jour companyName: ",t.payload.companyName),console.log("Mise \xe0 jour normalizedCompanyName: ",t.payload.normalizedCompanyName),{...e,formData:{...e.formData,companyName:t.payload.companyName,normalizedCompanyName:t.payload.normalizedCompanyName}};case"RESET_COMPANY_NAME_MODAL":return console.log("R\xe9initialisation des noms de l\u2019entreprise."),{...e,formData:{...e.formData,companyName:"",normalizedCompanyName:""}};case"RESET_COMPANY_ADDRESS":return console.log("Adresse de l\u2019entreprise r\xe9initialis\xe9e."),{...e,formData:{...e.formData,companyAddress:""}};case"UPDATE_COMPANY_ADDRESS":return console.log("Nouvelle adresse re\xe7ue: ",t.payload),{...e,formData:{...e.formData,companyAddress:t.payload}};case"RESET_DATE_TIME":return{...e,formData:{...e.formData,dateOfObservation:"",timeOfObservation:""}};case"SET_IS_OCCURRENCE_TRUE":return{...e,isOccurrence:!0};case"SET_IS_OCCURRENCE_FALSE":return{...e,isOccurrence:!1};case"UPDATE_ADDITIONAL_NOTES":return{...e,formData:{...e.formData,additionalNotes:t.payload}};case"SET_STEP":return{...e,currentStep:t.payload};case"UPDATE_COMPANY_NAME":return{...e,formData:{...e.formData,companyName:t.payload}};case"SET_COMPANY_COORDINATES":return console.log("Payload pour SET_COMPANY_COORDINATES:",t.payload),{...e,formData:{...e.formData,companyCoordinates:t.payload}};case"SET_DEFAULT_IMAGE":return{...e,formData:{...e.formData,photoURLs:[t.payload]}};case"RESET_TO_FIRST_STEP":return{...e,currentStep:1};case"SET_CURRENT_ESTABLISHMENTS_DATA":return{...e,currentEstablishmentsData:t.payload};case"SET_CURRENT_ESTABLISHMENT_IDS":return{...e,currentEstablishmentIds:t.payload};case"SET_ESTABLISHMENT_EXISTS":return{...e,establishmentExists:t.payload};case"SET_CURRENT_ESTABLISHMENT_ID":return{...e,formData:{...e.formData,currentEstablishmentId:t.payload}};case"FORMAT_ADDRESS":return{...e,formData:{...e.formData,formattedAddress:t.payload}};case"SAVE_PREVIOUS_CROP_ZOOM_AND_ROTATION":return{...e,previousCrop:e.crop,previousZoom:e.zoom,previousRotation:e.rotation};case"RESTORE_PREVIOUS_CROP_ZOOM_AND_ROTATION":return{...e,crop:e.previousCrop,zoom:e.previousZoom,rotation:e.previousRotation};case"RESET_CROP_ZOOM_AND_ROTATION_TO_DEFAULT":return{...e,crop:{x:0,y:0},zoom:1,rotation:0};case"UPDATE_CROP_ZOOM_AND_ROTATION":return{...e,crop:t.payload.crop,zoom:t.payload.zoom,rotation:t.payload.rotation};case"SET_ORIGINAL_PHOTO":return{...e,originalPhotoURL:t.payload};case"SET_TEMP_ORIGINAL_PHOTO":return{...e,tempOriginalPhotoURL:t.payload};case"SET_TEMP_PHOTO":return{...e,tempPhotoURL:t.payload.photoURL,tempSelectedFile:t.payload.selectedFile,tempCroppedImageUrl:t.payload.croppedImageUrl};case"RESET_TEMP_PHOTO":return{...e,tempPhotoURL:null,tempSelectedFile:null,tempCroppedImageUrl:null};case"UPDATE_PHOTO_URL":return{...e,photoURL:t.payload,isDefaultPhoto:!1};case"RESET_TO_DEFAULT_PHOTO":return{...e,photoURL:xP,isDefaultPhoto:!0};case"OPEN_CROP":return{...e,openCrop:!0};case"CLOSE_CROP":return{...e,openCrop:!1};case"NEXT_STEP":return{...e,currentStep:e.currentStep+1};case"PREV_STEP":return{...e,currentStep:e.currentStep-1};case"FORMAT_COMPANY":return((e,t)=>{if(!t.payload||!t.payload.companyName)return e;const n=YC(t.payload.companyName),r=XC(n);return{...e,formData:{...e.formData,companyName:n,normalizedCompanyName:r}}})(e,t);case"UPDATE_FORM_DATA":const n={...e.formData,...t.payload},r=t.payload.hasOwnProperty("isDefaultPhoto")?t.payload.isDefaultPhoto:e.isDefaultPhoto;return{...e,formData:n,isDefaultPhoto:r};case"UPDATE_HAS_CLOSED_MODAL":return{...e,hasClosedModal:t.payload};case"CLOSE_MODAL":return{...e,hasClosedModal:!0};case"RESET_HAS_CLOSED_MODAL":return{...e,hasClosedModal:!1};default:throw new Error("Unhandled action type: ".concat(t.type))}},Pz=e=>{let{children:t}=e;const[n,i]=(0,r.useReducer)(kz,{...Az,steps:Tz});return(0,ex.jsx)(Cz.Provider,{value:{state:n,dispatch:i},children:t})},Oz=()=>{const e=(0,r.useContext)(Cz);if(void 0===e)throw new Error("useFormWizardState must be used within a FormWizardProvider");return e},Iz=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="div",...o}=e;const s=mx(n,"row"),a=gx(),l=vx(),c="".concat(s,"-cols"),u=[];return a.forEach((e=>{const t=o[e];let n;delete o[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==l?"-".concat(e):"";null!=n&&u.push("".concat(c).concat(r,"-").concat(n))})),(0,ex.jsx)(i,{ref:t,...o,className:ox()(r,s,...u)})}));Iz.displayName="Row";const Rz=Iz,Nz=1e3;function Lz(e,t,n){const r=(e-t)/(n-t)*100;return Math.round(r*Nz)/Nz}function Dz(e,t){let{min:n,now:r,max:i,label:o,visuallyHidden:s,striped:a,animated:l,className:c,style:u,variant:h,bsPrefix:d,...f}=e;return(0,ex.jsx)("div",{ref:t,...f,role:"progressbar",className:ox()(c,"".concat(d,"-bar"),{["bg-".concat(h)]:h,["".concat(d,"-bar-animated")]:l,["".concat(d,"-bar-striped")]:l||a}),style:{width:"".concat(Lz(r,n,i),"%"),...u},"aria-valuenow":r,"aria-valuemin":n,"aria-valuemax":i,children:s?(0,ex.jsx)("span",{className:"visually-hidden",children:o}):o})}const Mz=r.forwardRef(((e,t)=>{let{isChild:n=!1,...i}=e;const o={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...i};if(o.bsPrefix=mx(o.bsPrefix,"progress"),n)return Dz(o,t);const{min:s,now:a,max:l,label:c,visuallyHidden:u,striped:h,animated:d,bsPrefix:f,variant:p,className:m,children:g,...v}=o;return(0,ex.jsx)("div",{ref:t,...v,className:ox()(m,f),children:g?sT(g,(e=>(0,r.cloneElement)(e,{isChild:!0}))):Dz({min:s,now:a,max:l,label:c,visuallyHidden:u,striped:h,animated:d,bsPrefix:f,variant:p},t)})}));Mz.displayName="ProgressBar";const jz=Mz,Fz=()=>{const{state:e}=Oz(),t=e.currentStep/e.steps.length*100;return(0,ex.jsx)(QC,{className:"my-2 p-0",children:(0,ex.jsx)(Rz,{children:(0,ex.jsx)(yT,{children:(0,ex.jsx)(jz,{now:t,striped:!0,variant:"primary",animated:!0})})})})};var zz,Uz="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bz={exports:{}},Vz=Math.floor,Hz=Math.max,qz=Math.min,Wz=function(e,t){return t?2*e/t:1},Kz=function(e,t){var n,r,i,o,s,a;for(s=[e.length,t.length],n=o=0,a=qz(r=s[0],i=s[1]);0<=a?o<a:o>a;n=0<=a?++o:--o){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return r-i},Zz=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Gz=function(){function e(e,t,n,r){this.isjunk=e,null==t&&(t=""),null==n&&(n=""),this.autojunk=null==r||r,this.a=this.b=null,this.setSeqs(t,n)}return e.prototype.setSeqs=function(e,t){return this.setSeq1(e),this.setSeq2(t)},e.prototype.setSeq1=function(e){if(e!==this.a)return this.a=e,this.matchingBlocks=this.opcodes=null},e.prototype.setSeq2=function(e){if(e!==this.b)return this.b=e,this.matchingBlocks=this.opcodes=null,this.fullbcount=null,this._chainB()},e.prototype._chainB=function(){var e,t,n,r,i,o,s,a,l,c,u,h,d,f;for(e=this.b,this.b2j=t={},r=c=0,h=e.length;c<h;r=++c)n=e[r],(Zz(t,n)?t[n]:t[n]=[]).push(r);if(o={},i=this.isjunk)for(u=0,d=(f=Object.keys(t)).length;u<d;u++)i(n=f[u])&&(o[n]=!0,delete t[n]);if(l={},s=e.length,this.autojunk&&s>=200)for(n in a=Vz(s/100)+1,t)t[n].length>a&&(l[n]=!0,delete t[n]);return this.isbjunk=function(e){return Zz(o,e)},this.isbpopular=function(e){return Zz(l,e)}},e.prototype.findLongestMatch=function(e,t,n,r){var i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,_,b,w,x,E,S;for(i=(_=[this.a,this.b,this.b2j,this.isbjunk])[0],o=_[1],s=_[2],h=_[3],a=(b=[e,n,0])[0],l=b[1],c=b[2],f={},u=g=e;e<=t?g<t:g>t;u=e<=t?++g:--g){for(m={},v=0,y=(w=Zz(s,i[u])?s[i[u]]:[]).length;v<y;v++)if(!((d=w[v])<n)){if(d>=r)break;(p=m[d]=(f[d-1]||0)+1)>c&&(a=(x=[u-p+1,d-p+1,p])[0],l=x[1],c=x[2])}f=m}for(;a>e&&l>n&&!h(o[l-1])&&i[a-1]===o[l-1];)a=(E=[a-1,l-1,c+1])[0],l=E[1],c=E[2];for(;a+c<t&&l+c<r&&!h(o[l+c])&&i[a+c]===o[l+c];)c++;for(;a>e&&l>n&&h(o[l-1])&&i[a-1]===o[l-1];)a=(S=[a-1,l-1,c+1])[0],l=S[1],c=S[2];for(;a+c<t&&l+c<r&&h(o[l+c])&&i[a+c]===o[l+c];)c++;return[a,l,c]},e.prototype.getMatchingBlocks=function(){var e,t,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,_,b,w,x,E,S,T;if(this.matchingBlocks)return this.matchingBlocks;for(v=[[0,f=(w=[this.a.length,this.b.length])[0],0,p=w[1]]],m=[];v.length;)t=(x=v.pop())[0],e=x[1],r=x[2],n=x[3],i=(E=y=this.findLongestMatch(t,e,r,n))[0],a=E[1],(u=E[2])&&(m.push(y),t<i&&r<a&&v.push([t,i,r,a]),i+u<e&&a+u<n&&v.push([i+u,e,a+u,n]));for(m.sort(Kz),o=l=h=0,g=[],_=0,b=m.length;_<b;_++)s=(S=m[_])[0],c=S[1],d=S[2],o+h===s&&l+h===c?h+=d:(h&&g.push([o,l,h]),o=(T=[s,c,d])[0],l=T[1],h=T[2]);return h&&g.push([o,l,h]),g.push([f,p,0]),this.matchingBlocks=g},e.prototype.getOpcodes=function(){var e,t,n,r,i,o,s,a,l,c,u,h;if(this.opcodes)return this.opcodes;for(r=i=0,this.opcodes=t=[],a=0,l=(c=this.getMatchingBlocks()).length;a<l;a++)e=(u=c[a])[0],n=u[1],o=u[2],s="",r<e&&i<n?s="replace":r<e?s="delete":i<n&&(s="insert"),s&&t.push([s,r,e,i,n]),r=(h=[e+o,n+o])[0],i=h[1],o&&t.push(["equal",e,r,n,i]);return t},e.prototype.getGroupedOpcodes=function(e){var t,n,r,i,o,s,a,l,c,u,h,d,f,p,m;for(null==e&&(e=3),(t=this.getOpcodes()).length||(t=[["equal",0,1,0,1]]),"equal"===t[0][0]&&(c=(d=t[0])[0],i=d[1],o=d[2],s=d[3],a=d[4],t[0]=[c,Hz(i,o-e),o,Hz(s,a-e),a]),"equal"===t[t.length-1][0]&&(c=(f=t[t.length-1])[0],i=f[1],o=f[2],s=f[3],a=f[4],t[t.length-1]=[c,i,qz(o,i+e),s,qz(a,s+e)]),l=e+e,r=[],n=[],u=0,h=t.length;u<h;u++)c=(p=t[u])[0],i=p[1],o=p[2],s=p[3],a=p[4],"equal"===c&&o-i>l&&(n.push([c,i,qz(o,i+e),s,qz(a,s+e)]),r.push(n),n=[],i=(m=[Hz(i,o-e),Hz(s,a-e)])[0],s=m[1]),n.push([c,i,o,s,a]);return!n.length||1===n.length&&"equal"===n[0][0]||r.push(n),r},e.prototype.ratio=function(){var e,t,n,r;for(e=0,t=0,n=(r=this.getMatchingBlocks()).length;t<n;t++)e+=r[t][2];return Wz(e,this.a.length+this.b.length)},e.prototype.quickRatio=function(){var e,t,n,r,i,o,s,a,l,c,u;if(!this.fullbcount)for(this.fullbcount=n={},o=0,a=(c=this.b).length;o<a;o++)n[t=c[o]]=(n[t]||0)+1;for(n=this.fullbcount,e={},r=0,s=0,l=(u=this.a).length;s<l;s++)t=u[s],i=Zz(e,t)?e[t]:n[t]||0,e[t]=i-1,i>0&&r++;return Wz(r,this.a.length+this.b.length)},e.prototype.realQuickRatio=function(){var e,t,n;return n=[this.a.length,this.b.length],Wz(qz(e=n[0],t=n[1]),e+t)},e}(),Qz={exports:{}};zz=Qz,function(){var e,t,n,r,i,o,s,a,l,c,u,h,d,f,p;n=Math.floor,c=Math.min,t=function(e,t){return e<t?-1:e>t?1:0},l=function(e,r,i,o,s){var a;if(null==i&&(i=0),null==s&&(s=t),i<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);i<o;)s(r,e[a=n((i+o)/2)])<0?o=a:i=a+1;return[].splice.apply(e,[i,i-i].concat(r)),r},o=function(e,n,r){return null==r&&(r=t),e.push(n),f(e,0,e.length-1,r)},i=function(e,n){var r,i;return null==n&&(n=t),r=e.pop(),e.length?(i=e[0],e[0]=r,p(e,0,n)):i=r,i},a=function(e,n,r){var i;return null==r&&(r=t),i=e[0],e[0]=n,p(e,0,r),i},s=function(e,n,r){var i;return null==r&&(r=t),e.length&&r(e[0],n)<0&&(n=(i=[e[0],n])[0],e[0]=i[1],p(e,0,r)),n},r=function(e,r){var i,o,s,a,l,c;for(null==r&&(r=t),l=[],o=0,s=(a=function(){c=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)c.push(t);return c}.apply(this).reverse()).length;o<s;o++)i=a[o],l.push(p(e,i,r));return l},d=function(e,n,r){var i;if(null==r&&(r=t),-1!==(i=e.indexOf(n)))return f(e,0,i,r),p(e,i,r)},u=function(e,n,i){var o,a,l,c,u;if(null==i&&(i=t),!(a=e.slice(0,n)).length)return a;for(r(a,i),l=0,c=(u=e.slice(n)).length;l<c;l++)o=u[l],s(a,o,i);return a.sort(i).reverse()},h=function(e,n,o){var s,a,u,h,d,f,p,m,g;if(null==o&&(o=t),10*n<=e.length){if(!(u=e.slice(0,n).sort(o)).length)return u;for(a=u[u.length-1],h=0,f=(p=e.slice(n)).length;h<f;h++)o(s=p[h],a)<0&&(l(u,s,0,null,o),u.pop(),a=u[u.length-1]);return u}for(r(e,o),g=[],d=0,m=c(n,e.length);0<=m?d<m:d>m;0<=m?++d:--d)g.push(i(e,o));return g},f=function(e,n,r,i){var o,s,a;for(null==i&&(i=t),o=e[r];r>n&&i(o,s=e[a=r-1>>1])<0;)e[r]=s,r=a;return e[r]=o},p=function(e,n,r){var i,o,s,a,l;for(null==r&&(r=t),o=e.length,l=n,s=e[n],i=2*n+1;i<o;)(a=i+1)<o&&!(r(e[i],e[a])<0)&&(i=a),e[n]=e[i],i=2*(n=i)+1;return e[n]=s,f(e,l,n,r)},e=function(){function e(e){this.cmp=null!=e?e:t,this.nodes=[]}return e.push=o,e.pop=i,e.replace=a,e.pushpop=s,e.heapify=r,e.updateItem=d,e.nlargest=u,e.nsmallest=h,e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return i(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),zz.exports=e}.call(Uz);var Yz,Xz,Jz,$z=Qz.exports,eU={exports:{}};!function(e,t){(function(){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function i(e,t){var n;if(n=!(null==e||!e.length)){if(t==t)e:{n=-1;for(var r=e.length;++n<r;)if(e[n]===t)break e;n=-1}else e:{n=c,r=e.length;for(var i=-1;++i<r;)if(n(e[i],i,e)){n=i;break e}n=-1}n=-1<n}return n}function o(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function s(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function a(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function l(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function c(e){return e!=e}function u(e){return function(t){return e(t)}}function h(e,t){return e.has(t)}function d(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function f(e){var t=Object;return function(n){return e(t(n))}}function p(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&"__lodash_placeholder__"!==s||(e[n]="__lodash_placeholder__",o[i++]=n)}return o}function m(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function g(){}function v(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function b(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new b;++t<n;)this.add(e[t])}function x(e){this.size=(this.__data__=new _(e)).size}function E(e,t){var n,r=Pn(e),i=!r&&kn(e),o=!r&&!i&&On(e),s=!r&&!i&&!o&&Nn(e);if(r=r||i||o||s){i=e.length;for(var a=String,l=-1,c=Array(i);++l<i;)c[l]=a(l);i=c}else i=[];for(n in a=i.length,e)!t&&!Tt.call(e,n)||r&&("length"==n||o&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||ie(n,a))||i.push(n);return i}function S(e,t,n){var r=e[t];Tt.call(e,t)&&ge(r,n)&&(n!==Be||t in e)||C(e,t,n)}function T(e,t){for(var n=e.length;n--;)if(ge(e[n][0],t))return n;return-1}function C(e,t,n){"__proto__"==t&&Ut?Ut(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function A(e,t,n,i,o,s){var a,l=1&t,c=2&t,u=4&t;if(n&&(a=o?n(e,i,o,s):n(e)),a!==Be)return a;if(!we(e))return e;if(i=Pn(e)){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Tt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return W(e,a)}else{var h=_n(e),d="[object Function]"==h||"[object GeneratorFunction]"==h;if(On(e))return function(e,t){if(t)return e.slice();var n=e.length;return n=Rt?Rt(n):new e.constructor(n),e.copy(n),n}(e,l);if("[object Object]"==h||"[object Arguments]"==h||d&&!o){if(a=c||d||"function"!=typeof e.constructor||se(e)?{}:un(Nt(e)),!l)return c?function(e,t){return K(e,yn(e),t)}(e,function(e,t){return e&&K(t,Re(t),e)}(a,e)):function(e,t){return K(e,vn(e),t)}(e,function(e,t){return e&&K(t,Ie(t),e)}(a,e))}else{if(!lt[h])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return V(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?V(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return t=n?V(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,$e.exec(e))).lastIndex=e.lastIndex,t;case"[object Symbol]":return ln?Object(ln.call(e)):{}}}(e,h,l)}}if(s||(s=new x),o=s.get(e))return o;if(s.set(e,a),Rn(e))return e.forEach((function(r){a.add(A(r,t,n,r,e,s))})),a;if(In(e))return e.forEach((function(r,i){a.set(i,A(r,t,n,i,e,s))})),a;c=u?c?J:X:c?Re:Ie;var f=i?Be:c(e);return r(f||e,(function(r,i){f&&(r=e[i=r]),S(a,i,A(r,t,n,i,e,s))})),a}function k(e,t,n,r){var a=-1,l=i,c=!0,d=e.length,f=[],p=t.length;if(!d)return f;n&&(t=s(t,u(n))),r?(l=o,c=!1):200<=t.length&&(l=h,c=!1,t=new w(t));e:for(;++a<d;){var m=e[a],g=null==n?m:n(m);if(m=r||0!==m?m:0,c&&g==g){for(var v=p;v--;)if(t[v]===g)continue e;f.push(m)}else l(t,g,r)||f.push(m)}return f}function P(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=re),i||(i=[]);++o<s;){var l=e[o];0<t&&n(l)?1<t?P(l,t-1,n,r,i):a(i,l):r||(i[i.length]=l)}return i}function O(e,t){for(var n=0,r=(t=B(t,e)).length;null!=e&&n<r;)e=e[ue(t[n++])];return n&&n==r?e:Be}function I(e,t,n){return t=t(e),Pn(e)?t:a(t,n(e))}function R(e){if(null==e)e=e===Be?"[object Undefined]":"[object Null]";else if(zt&&zt in Object(e)){var t=Tt.call(e,zt),n=e[zt];try{e[zt]=Be;var r=!0}catch(e){}var i=At.call(e);r&&(t?e[zt]=n:delete e[zt]),e=i}else e=At.call(e);return e}function N(e,t,n){for(var r=n?o:i,a=e[0].length,l=e.length,c=l,d=Array(l),f=1/0,p=[];c--;){var m=e[c];c&&t&&(m=s(m,u(t))),f=Wt(m.length,f),d[c]=!n&&(t||120<=a&&120<=m.length)?new w(c&&m):Be}m=e[0];var g=-1,v=d[0];e:for(;++g<a&&p.length<f;){var y=m[g],_=t?t(y):y;if(y=n||0!==y?y:0,v?!h(v,_):!r(p,_,n)){for(c=l;--c;){var b=d[c];if(b?!h(b,_):!r(e[c],_,n))continue e}v&&v.push(_),p.push(y)}}return p}function L(e){return xe(e)&&"[object Arguments]"==R(e)}function D(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!xe(e)&&!xe(t))t=e!=e&&t!=t;else e:{var o,s,a=Pn(e),l=Pn(t),c="[object Object]"==(o="[object Arguments]"==(o=a?"[object Array]":_n(e))?"[object Object]":o);if(l="[object Object]"==(s="[object Arguments]"==(s=l?"[object Array]":_n(t))?"[object Object]":s),(s=o==s)&&On(e)){if(!On(t)){t=!1;break e}a=!0,c=!1}if(s&&!c)i||(i=new x),t=a||Nn(e)?Y(e,t,n,r,D,i):function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new It(e),new It(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return ge(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=d;case"[object Set]":if(a||(a=m),e.size!=t.size&&!(1&r))break;return(n=s.get(e))?n==t:(r|=2,s.set(e,t),t=Y(a(e),a(t),r,i,o,s),s.delete(e),t);case"[object Symbol]":if(ln)return ln.call(e)==ln.call(t)}return!1}(e,t,o,n,r,D,i);else{if(!(1&n)&&(a=c&&Tt.call(e,"__wrapped__"),o=l&&Tt.call(t,"__wrapped__"),a||o)){e=a?e.value():e,t=o?t.value():t,i||(i=new x),t=D(e,t,n,r,i);break e}if(s)t:if(i||(i=new x),a=1&n,o=X(e),l=o.length,s=X(t).length,l==s||a){for(c=l;c--;){var u=o[c];if(!(a?u in t:Tt.call(t,u))){t=!1;break t}}if((s=i.get(e))&&i.get(t))t=s==t;else{s=!0,i.set(e,t),i.set(t,e);for(var h=a;++c<l;){var f=e[u=o[c]],p=t[u];if(r)var g=a?r(p,f,u,t,e,i):r(f,p,u,e,t,i);if(g===Be?f!==p&&!D(f,p,n,r,i):!g){s=!1;break}h||(h="constructor"==u)}s&&!h&&(n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(s=!1),i.delete(e),i.delete(t),t=s}}else t=!1;else t=!1}}return t}function M(e){return"function"==typeof e?e:null==e?De:"object"==typeof e?Pn(e)?function(e,t){return oe(e)&&t==t&&!we(t)?ae(ue(e),t):function(n){var r=Pe(n,e);return r===Be&&r===t?Oe(n,e):D(t,r,3)}}(e[0],e[1]):function(e){var t=function(e){for(var t=Ie(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!we(i)]}return t}(e);return 1==t.length&&t[0][2]?ae(t[0][0],t[0][1]):function(n){return n===e||function(e,t){var n=t.length,r=n;if(null==e)return!r;for(e=Object(e);n--;)if((i=t[n])[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1;for(;++n<r;){var i,o=(i=t[n])[0],s=e[o],a=i[1];if(i[2]){if(s===Be&&!(o in e))return!1}else if(!D(a,s,3,void 0,i=new x))return!1}return!0}(n,t)}}(e):Fe(e)}function j(e){return wn(function(e,t){var r=qt((r=void 0)===Be?e.length-1:r,0);return function(){for(var i=arguments,o=-1,s=qt(i.length-r,0),a=Array(s);++o<s;)a[o]=i[r+o];for(o=-1,s=Array(r+1);++o<r;)s[o]=i[o];return s[r]=t(a),n(e,this,s)}}(e,De),e+"")}function F(e){if("string"==typeof e)return e;if(Pn(e))return s(e,F)+"";if(Se(e))return cn?cn.call(e):"";var t=e+"";return"0"==t&&1/e==-Ve?"-0":t}function z(e,t,n){var r=-1,s=i,a=e.length,l=!0,c=[],u=c;if(n)l=!1,s=o;else if(200<=a){if(s=t?null:mn(e))return m(s);l=!1,s=h,u=new w}else u=t?[]:c;e:for(;++r<a;){var d=e[r],f=t?t(d):d;if(d=n||0!==d?d:0,l&&f==f){for(var p=u.length;p--;)if(u[p]===f)continue e;t&&u.push(f),c.push(d)}else s(u,f,n)||(u!==c&&u.push(f),c.push(d))}return c}function U(e){return ye(e)?e:[]}function B(e,t){return Pn(e)?e:oe(e,t)?[e]:xn(ke(e))}function V(e){var t=new e.constructor(e.byteLength);return new It(t).set(new It(e)),t}function H(e,t,n,r){var i=-1,o=e.length,s=n.length,a=-1,l=t.length,c=qt(o-s,0),u=Array(l+c);for(r=!r;++a<l;)u[a]=t[a];for(;++i<s;)(r||i<o)&&(u[n[i]]=e[i]);for(;c--;)u[a++]=e[i++];return u}function q(e,t,n,r){var i=-1,o=e.length,s=-1,a=n.length,l=-1,c=t.length,u=qt(o-a,0),h=Array(u+c);for(r=!r;++i<u;)h[i]=e[i];for(u=i;++l<c;)h[u+l]=t[l];for(;++s<a;)(r||i<o)&&(h[u+n[s]]=e[i++]);return h}function W(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function K(e,t,n){var r=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=Be;a===Be&&(a=e[s]),r?C(n,s,a):S(n,s,a)}return n}function Z(e){return function(){switch((t=arguments).length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var t,n=un(e.prototype);return we(t=e.apply(n,t))?t:n}}function G(e,t,n,r,i,o,s,a,l,c){var u=128&t,h=1&t,d=2&t,f=24&t,m=512&t,g=d?Be:Z(e);return function v(){for(var y=arguments.length,_=Array(y),b=y;b--;)_[b]=arguments[b];if(f){var w,x=$(v);for(b=_.length,w=0;b--;)_[b]===x&&++w}if(r&&(_=H(_,r,i,f)),o&&(_=q(_,o,s,f)),y-=w,f&&y<c)return x=p(_,x),Q(e,t,G,v.placeholder,n,_,x,a,l,c-y);if(x=h?n:this,b=d?x[e]:e,y=_.length,a){w=_.length;for(var E=Wt(a.length,w),S=W(_);E--;){var T=a[E];_[E]=ie(T,w)?S[T]:Be}}else m&&1<y&&_.reverse();return u&&l<y&&(_.length=l),this&&this!==ft&&this instanceof v&&(b=g||Z(b)),b.apply(x,_)}}function Q(e,t,n,r,i,o,s,a,l,c){var u=8&t,h=u?s:Be;4&(t=(t|(u?32:64))&~(u?64:32))||(t&=-4),i=[e,t,i,u?o:Be,h,o=u?Be:o,s=u?Be:s,a,l,c],n=n.apply(Be,i);e:for(a=e.name+"",l=en[a],c=Tt.call(en,a)?l.length:0;c--;)if(u=l[c],h=u.func,null==h||h==e){a=u.name;break e}return(a="function"==typeof(l=g[a])&&a in v.prototype&&(e===l||!!(a=gn(l))&&e===a[0]))&&bn(n,i),n.placeholder=r,le(n,e,t)}function Y(e,t,n,r,i,o){var s=1&n,a=e.length;if(a!=(c=t.length)&&!(s&&c>a))return!1;if((c=o.get(e))&&o.get(t))return c==t;var c=-1,u=!0,d=2&n?new w:Be;for(o.set(e,t),o.set(t,e);++c<a;){var f=e[c],p=t[c];if(r)var m=s?r(p,f,c,t,e,o):r(f,p,c,e,t,o);if(m!==Be){if(m)continue;u=!1;break}if(d){if(!l(t,(function(e,t){if(!h(d,t)&&(f===e||i(f,e,n,r,o)))return d.push(t)}))){u=!1;break}}else if(f!==p&&!i(f,p,n,r,o)){u=!1;break}}return o.delete(e),o.delete(t),u}function X(e){return I(e,Ie,vn)}function J(e){return I(e,Re,yn)}function $(e){return(Tt.call(g,"placeholder")?g:e).placeholder}function ee(){var e=(e=g.iteratee||Me)===Me?M:e;return arguments.length?e(arguments[0],arguments[1]):e}function te(e,t){var n=e.__data__,r=typeof t;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function ne(e,t){var n=null==e?Be:e[t];return!we(n)||Ct&&Ct in n||!(_e(n)?kt:nt).test(he(n))?Be:n}function re(e){return Pn(e)||kn(e)||!!(jt&&e&&e[jt])}function ie(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&it.test(e))&&-1<e&&0==e%1&&e<t}function oe(e,t){if(Pn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Se(e))||Ke.test(e)||!We.test(e)||null!=t&&e in Object(t)}function se(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xt)}function ae(e,t){return function(n){return null!=n&&n[e]===t&&(t!==Be||e in Object(n))}}function le(e,t,n){var r=t+"";t=wn;var i,o=de;return n=o(i=(i=r.match(Ye))?i[1].split(Xe):[],n),(o=n.length)&&(n[i=o-1]=(1<o?"& ":"")+n[i],n=n.join(2<o?", ":" "),r=r.replace(Qe,"{\n/* [wrapped with "+n+"] */\n")),t(e,r)}function ce(e){var t=0,n=0;return function(){var r=Kt(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(Be,arguments)}}function ue(e){if("string"==typeof e||Se(e))return e;var t=e+"";return"0"==t&&1/e==-Ve?"-0":t}function he(e){if(null!=e){try{return St.call(e)}catch(e){}return e+""}return""}function de(e,t){return r(qe,(function(n){var r="_."+n[0];t&n[1]&&!i(e,r)&&e.push(r)})),e.sort()}function fe(e){var t=null==e?0:e.length;return t?e[t-1]:Be}function pe(e,t){return(Pn(e)?r:hn)(e,ee(t,3))}function me(e,t){function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");return n.cache=new(me.Cache||b),n}function ge(e,t){return e===t||e!=e&&t!=t}function ve(e){return null!=e&&be(e.length)&&!_e(e)}function ye(e){return xe(e)&&ve(e)}function _e(e){return!!we(e)&&("[object Function]"==(e=R(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function be(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function we(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function xe(e){return null!=e&&"object"==typeof e}function Ee(e){return"string"==typeof e||!Pn(e)&&xe(e)&&"[object String]"==R(e)}function Se(e){return"symbol"==typeof e||xe(e)&&"[object Symbol]"==R(e)}function Te(e){return e?(e=Ae(e))===Ve||e===-Ve?17976931348623157e292*(0>e?-1:1):e==e?e:0:0===e?e:0}function Ce(e){var t=(e=Te(e))%1;return e==e?t?e-t:e:0}function Ae(e){if("number"==typeof e)return e;if(Se(e))return He;if(we(e)&&(e=we(e="function"==typeof e.valueOf?e.valueOf():e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(Ge,"");var t=tt.test(e);return t||rt.test(e)?ut(e.slice(2),t?2:8):et.test(e)?He:+e}function ke(e){return null==e?"":F(e)}function Pe(e,t,n){return(e=null==e?Be:O(e,t))===Be?n:e}function Oe(e,t){var n;if(n=null!=e){for(var r,i=-1,o=(r=B(t,n=e)).length,s=!1;++i<o;){var a=ue(r[i]);if(!(s=null!=n&&null!=n&&a in Object(n)))break;n=n[a]}n=s||++i!=o?s:!!(o=null==n?0:n.length)&&be(o)&&ie(a,o)&&(Pn(n)||kn(n))}return n}function Ie(e){if(ve(e))e=E(e);else if(se(e)){var t,n=[];for(t in Object(e))Tt.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=Ht(e);return e}function Re(e){if(ve(e))e=E(e,!0);else if(we(e)){var t,n=se(e),r=[];for(t in e)("constructor"!=t||!n&&Tt.call(e,t))&&r.push(t);e=r}else{if(t=[],null!=e)for(n in Object(e))t.push(n);e=t}return e}function Ne(e){return null==e?[]:function(e,t){return s(t,(function(t){return e[t]}))}(e,Ie(e))}function Le(e){return function(){return e}}function De(e){return e}function Me(e){return M("function"==typeof e?e:A(e,1))}function je(){}function Fe(e){return oe(e)?function(e){return function(t){return null==t?Be:t[e]}}(ue(e)):function(e){return function(t){return O(t,e)}}(e)}function ze(){return[]}function Ue(){return!1}var Be,Ve=1/0,He=NaN,qe=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],We=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ke=/^\w*$/,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/^\s+|\s+$/g,Qe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Xe=/,? & /,Je=/\\(\\)?/g,$e=/\w*$/,et=/^[-+]0x[0-9a-f]+$/i,tt=/^0b[01]+$/i,nt=/^\[object .+?Constructor\]$/,rt=/^0o[0-7]+$/i,it=/^(?:0|[1-9]\d*)$/,ot=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*","g"),st=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),at={};at["[object Float32Array]"]=at["[object Float64Array]"]=at["[object Int8Array]"]=at["[object Int16Array]"]=at["[object Int32Array]"]=at["[object Uint8Array]"]=at["[object Uint8ClampedArray]"]=at["[object Uint16Array]"]=at["[object Uint32Array]"]=!0,at["[object Arguments]"]=at["[object Array]"]=at["[object ArrayBuffer]"]=at["[object Boolean]"]=at["[object DataView]"]=at["[object Date]"]=at["[object Error]"]=at["[object Function]"]=at["[object Map]"]=at["[object Number]"]=at["[object Object]"]=at["[object RegExp]"]=at["[object Set]"]=at["[object String]"]=at["[object WeakMap]"]=!1;var lt={};lt["[object Arguments]"]=lt["[object Array]"]=lt["[object ArrayBuffer]"]=lt["[object DataView]"]=lt["[object Boolean]"]=lt["[object Date]"]=lt["[object Float32Array]"]=lt["[object Float64Array]"]=lt["[object Int8Array]"]=lt["[object Int16Array]"]=lt["[object Int32Array]"]=lt["[object Map]"]=lt["[object Number]"]=lt["[object Object]"]=lt["[object RegExp]"]=lt["[object Set]"]=lt["[object String]"]=lt["[object Symbol]"]=lt["[object Uint8Array]"]=lt["[object Uint8ClampedArray]"]=lt["[object Uint16Array]"]=lt["[object Uint32Array]"]=!0,lt["[object Error]"]=lt["[object Function]"]=lt["[object WeakMap]"]=!1;var ct,ut=parseInt,ht="object"==typeof Uz&&Uz&&Uz.Object===Object&&Uz,dt="object"==typeof self&&self&&self.Object===Object&&self,ft=ht||dt||Function("return this")(),pt=t&&!t.nodeType&&t,mt=pt&&e&&!e.nodeType&&e,gt=mt&&mt.exports===pt,vt=gt&&ht.process;e:{try{ct=vt&&vt.binding&&vt.binding("util");break e}catch(n){}ct=void 0}var yt=ct&&ct.isMap,_t=ct&&ct.isSet,bt=ct&&ct.isTypedArray,wt=Array.prototype,xt=Object.prototype,Et=ft["__core-js_shared__"],St=Function.prototype.toString,Tt=xt.hasOwnProperty,Ct=function(){var e=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),At=xt.toString,kt=RegExp("^"+St.call(Tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pt=gt?ft.Buffer:Be,Ot=ft.Symbol,It=ft.Uint8Array,Rt=Pt?Pt.f:Be,Nt=f(Object.getPrototypeOf),Lt=Object.create,Dt=xt.propertyIsEnumerable,Mt=wt.splice,jt=Ot?Ot.isConcatSpreadable:Be,Ft=Ot?Ot.iterator:Be,zt=Ot?Ot.toStringTag:Be,Ut=function(){try{var e=ne(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Bt=Object.getOwnPropertySymbols,Vt=Pt?Pt.isBuffer:Be,Ht=f(Object.keys),qt=Math.max,Wt=Math.min,Kt=Date.now,Zt=ne(ft,"DataView"),Gt=ne(ft,"Map"),Qt=ne(ft,"Promise"),Yt=ne(ft,"Set"),Xt=ne(ft,"WeakMap"),Jt=ne(Object,"create"),$t=Xt&&new Xt,en={},tn=he(Zt),nn=he(Gt),rn=he(Qt),on=he(Yt),sn=he(Xt),an=Ot?Ot.prototype:Be,ln=an?an.valueOf:Be,cn=an?an.toString:Be,un=function(){function e(){}return function(t){return we(t)?Lt?Lt(t):(e.prototype=t,t=new e,e.prototype=Be,t):{}}}();v.prototype=un(function(){}.prototype),v.prototype.constructor=v,y.prototype.clear=function(){this.__data__=Jt?Jt(null):{},this.size=0},y.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},y.prototype.get=function(e){var t=this.__data__;return Jt?"__lodash_hash_undefined__"===(e=t[e])?Be:e:Tt.call(t,e)?t[e]:Be},y.prototype.has=function(e){var t=this.__data__;return Jt?t[e]!==Be:Tt.call(t,e)},y.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Jt&&t===Be?"__lodash_hash_undefined__":t,this},_.prototype.clear=function(){this.__data__=[],this.size=0},_.prototype.delete=function(e){var t=this.__data__;return!(0>(e=T(t,e))||(e==t.length-1?t.pop():Mt.call(t,e,1),--this.size,0))},_.prototype.get=function(e){var t=this.__data__;return 0>(e=T(t,e))?Be:t[e][1]},_.prototype.has=function(e){return-1<T(this.__data__,e)},_.prototype.set=function(e,t){var n=this.__data__,r=T(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this},b.prototype.clear=function(){this.size=0,this.__data__={hash:new y,map:new(Gt||_),string:new y}},b.prototype.delete=function(e){return e=te(this,e).delete(e),this.size-=e?1:0,e},b.prototype.get=function(e){return te(this,e).get(e)},b.prototype.has=function(e){return te(this,e).has(e)},b.prototype.set=function(e,t){var n=te(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},w.prototype.add=w.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},w.prototype.has=function(e){return this.__data__.has(e)},x.prototype.clear=function(){this.__data__=new _,this.size=0},x.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},x.prototype.get=function(e){return this.__data__.get(e)},x.prototype.has=function(e){return this.__data__.has(e)},x.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!Gt||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new b(r)}return n.set(e,t),this.size=n.size,this};var hn=function(e,t){if(null==e)return e;if(!ve(e))return function(e,t){return e&&dn(e,t,Ie)}(e,t);for(var n=e.length,r=-1,i=Object(e);++r<n&&!1!==t(i[r],r,i););return e},dn=function(e,t,n){for(var r=-1,i=Object(e),o=(n=n(e)).length;o--;){var s=n[++r];if(!1===t(i[s],s,i))break}return e},fn=$t?function(e,t){return $t.set(e,t),e}:De,pn=Ut?function(e,t){return Ut(e,"toString",{configurable:!0,enumerable:!1,value:Le(t),writable:!0})}:De,mn=Yt&&1/m(new Yt([,-0]))[1]==Ve?function(e){return new Yt(e)}:je,gn=$t?function(e){return $t.get(e)}:je,vn=Bt?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}(Bt(e),(function(t){return Dt.call(e,t)})))}:ze,yn=Bt?function(e){for(var t=[];e;)a(t,vn(e)),e=Nt(e);return t}:ze,_n=R;(Zt&&"[object DataView]"!=_n(new Zt(new ArrayBuffer(1)))||Gt&&"[object Map]"!=_n(new Gt)||Qt&&"[object Promise]"!=_n(Qt.resolve())||Yt&&"[object Set]"!=_n(new Yt)||Xt&&"[object WeakMap]"!=_n(new Xt))&&(_n=function(e){var t=R(e);if(e=(e="[object Object]"==t?e.constructor:Be)?he(e):"")switch(e){case tn:return"[object DataView]";case nn:return"[object Map]";case rn:return"[object Promise]";case on:return"[object Set]";case sn:return"[object WeakMap]"}return t});var bn=ce(fn),wn=ce(pn),xn=function(e){var t=(e=me(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ze,(function(e,n,r,i){t.push(r?i.replace(Je,"$1"):n||e)})),t})),En=j((function(e,t){return ye(e)?k(e,P(t,1,ye,!0)):[]})),Sn=j((function(e,t){var n=fe(t);return ye(n)&&(n=Be),ye(e)?k(e,P(t,1,ye,!0),Be,n):[]})),Tn=j((function(e){var t=s(e,U);return t.length&&t[0]===e[0]?N(t):[]})),Cn=j((function(e){var t=fe(e),n=s(e,U);return(t="function"==typeof t?t:Be)&&n.pop(),n.length&&n[0]===e[0]?N(n,Be,t):[]}));me.Cache=b;var An=j((function(e,t){var r,i,o=p(t,$(An)),s=e,a=Be,l=t,c=o,u=64;if(!(o=2&u)&&"function"!=typeof s)throw new TypeError("Expected a function");var h=l?l.length:0;if(h||(u&=-97,l=c=Be),r=r===Be?r:qt(Ce(r),0),i=i===Be?i:Ce(i),h-=c?c.length:0,64&u){var d=l,f=c;l=c=Be}var m=o?Be:gn(s);return r=[s,u,a,l,c,d,f,void 0,r,i],m&&(a=(l=r[1])|(s=m[1]),i=128==s&&8==l||128==s&&256==l&&r[7].length<=m[8]||384==s&&m[7].length<=m[8]&&8==l,131>a||i)&&(1&s&&(r[2]=m[2],a|=1&l?0:4),(l=m[3])&&(i=r[3],r[3]=i?H(i,l,m[4]):l,r[4]=i?p(r[3],"__lodash_placeholder__"):m[4]),(l=m[5])&&(i=r[5],r[5]=i?q(i,l,m[6]):l,r[6]=i?p(r[5],"__lodash_placeholder__"):m[6]),(l=m[7])&&(r[7]=l),128&s&&(r[8]=null==r[8]?m[8]:Wt(r[8],m[8])),null==r[9]&&(r[9]=m[9]),r[0]=m[0],r[1]=a),s=r[0],u=r[1],a=r[2],l=r[3],c=r[4],!(i=r[9]=r[9]===Be?o?0:s.length:qt(r[9]-h,0))&&24&u&&(u&=-25),le((m?fn:bn)(u&&1!=u?8==u||16==u?function(e,t,r){var i=Z(e);return function o(){for(var s=arguments.length,a=Array(s),l=s,c=$(o);l--;)a[l]=arguments[l];return(s-=(l=3>s&&a[0]!==c&&a[s-1]!==c?[]:p(a,c)).length)<r?Q(e,t,G,o.placeholder,Be,a,l,Be,Be,r-s):n(this&&this!==ft&&this instanceof o?i:e,this,a)}}(s,u,i):32!=u&&33!=u||c.length?G.apply(Be,r):function(e,t,r,i){var o=1&t,s=Z(e);return function t(){for(var a=-1,l=arguments.length,c=-1,u=i.length,h=Array(u+l),d=this&&this!==ft&&this instanceof t?s:e;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++a];return n(d,o?r:this,h)}}(s,u,a,l):function(e,t,n){var r=1&t,i=Z(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(s,u,a),r),s,u)})),kn=L(function(){return arguments}())?L:function(e){return xe(e)&&Tt.call(e,"callee")&&!Dt.call(e,"callee")},Pn=Array.isArray,On=Vt||Ue,In=yt?u(yt):function(e){return xe(e)&&"[object Map]"==_n(e)},Rn=_t?u(_t):function(e){return xe(e)&&"[object Set]"==_n(e)},Nn=bt?u(bt):function(e){return xe(e)&&be(e.length)&&!!at[R(e)]};g.constant=Le,g.difference=En,g.differenceWith=Sn,g.intersection=Tn,g.intersectionWith=Cn,g.iteratee=Me,g.keys=Ie,g.keysIn=Re,g.memoize=me,g.orderBy=function(e,t,n,r){return null==e?[]:(Pn(t)||(t=null==t?[]:[t]),Pn(n=r?Be:n)||(n=null==n?[]:[n]),function(e,t,n){var r=-1;return t=s(t.length?t:[De],u(ee())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}(e=function(e,t){var n=-1,r=ve(e)?Array(e.length):[];return hn(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}(e,(function(e){return{a:s(t,(function(t){return t(e)})),b:++r,c:e}})),(function(e,t){var r;e:{r=-1;for(var i=e.a,o=t.a,s=i.length,a=n.length;++r<s;){var l;t:{l=i[r];var c=o[r];if(l!==c){var u=l!==Be,h=null===l,d=l==l,f=Se(l),p=c!==Be,m=null===c,g=c==c,v=Se(c);if(!m&&!v&&!f&&l>c||f&&p&&g&&!m&&!v||h&&p&&g||!u&&g||!d){l=1;break t}if(!h&&!f&&!v&&l<c||v&&u&&d&&!h&&!f||m&&u&&d||!p&&d||!g){l=-1;break t}}l=0}if(l){r=r>=a?l:l*("desc"==n[r]?-1:1);break e}}r=e.b-t.b}return r}))}(e,t,n))},g.partialRight=An,g.property=Fe,g.toArray=function(e){if(!e)return[];if(ve(e))return Ee(e)?st.test(e)?e.match(ot)||[]:e.split(""):W(e);if(Ft&&e[Ft]){e=e[Ft]();for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}return("[object Map]"==(t=_n(e))?d:"[object Set]"==t?m:Ne)(e)},g.uniq=function(e){return e&&e.length?z(e):[]},g.uniqWith=function(e,t){return t="function"==typeof t?t:Be,e&&e.length?z(e,Be,t):[]},g.values=Ne,g.eq=ge,g.forEach=pe,g.get=Pe,g.hasIn=Oe,g.identity=De,g.isArguments=kn,g.isArray=Pn,g.isArrayLike=ve,g.isArrayLikeObject=ye,g.isBuffer=On,g.isFunction=_e,g.isLength=be,g.isMap=In,g.isObject=we,g.isObjectLike=xe,g.isSet=Rn,g.isString=Ee,g.isSymbol=Se,g.isTypedArray=Nn,g.last=fe,g.stubArray=ze,g.stubFalse=Ue,g.noop=je,g.toFinite=Te,g.toInteger=Ce,g.toNumber=Ae,g.toString=ke,g.each=pe,g.VERSION="4.17.5",An.placeholder=g,mt?((mt.exports=g)._=g,pt._=g):ft._=g}).call(Uz)}(eU,eU.exports),String.prototype.codePointAt||(Yz=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),Xz=function(e){if(null==this)throw TypeError();var t=String(this),n=t.length,r=e?Number(e):0;if(r!=r&&(r=0),!(r<0||r>=n)){var i,o=t.charCodeAt(r);return o>=55296&&o<=56319&&n>r+1&&(i=t.charCodeAt(r+1))>=56320&&i<=57343?1024*(o-55296)+i-56320+65536:o}},Yz?Yz(String.prototype,"codePointAt",{value:Xz,configurable:!0,writable:!0}):String.prototype.codePointAt=Xz),String.fromCodePoint||function(){var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),t=String.fromCharCode,n=Math.floor,r=function(e){var r,i,o=[],s=-1,a=arguments.length;if(!a)return"";for(var l="";++s<a;){var c=Number(arguments[s]);if(!isFinite(c)||c<0||c>1114111||n(c)!=c)throw RangeError("Invalid code point: "+c);c<=65535?o.push(c):(r=55296+((c-=65536)>>10),i=c%1024+56320,o.push(r,i)),(s+1==a||o.length>16384)&&(l+=t.apply(null,o),o.length=0)}return l};e?e(String,"fromCodePoint",{value:r,configurable:!0,writable:!0}):String.fromCodePoint=r}();try{Jz="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(id){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var tU,nU=function(e,t,n,r){var i=[],o=[],s=n&&Jz&&n.useCollator,a=1;if(n&&n.subcost&&"number"==typeof n.subcost&&(a=n.subcost),e===t)return 0;var l,c,u,h,d=r(e),f=r(t),p=d.length,m=f.length;if(0===p)return m;if(0===m)return p;for(var g=0,v=0;g<p;)o[g]=d[g].codePointAt(0),i[g]=++g;if(s)for(;v<m;)for(l=f[v].codePointAt(0),u=v++,c=v,g=0;g<p;g++)h=0===Jz.compare(String.fromCodePoint(l),String.fromCodePoint(o[g]))?u:u+a,u=i[g],c=i[g]=u>c?h>c?c+1:h:h>u?u+1:h;else for(;v<m;)for(l=f[v].codePointAt(0),u=v++,c=v,g=0;g<p;g++)h=l===o[g]?u:u+a,u=i[g],c=i[g]=u>c?h>c?c+1:h:h>u?u+1:h;return c};try{tU="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(id){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var rU,iU=function(e,t,n,r){var i=[],o=[],s=n&&tU&&n.useCollator,a=1;if(n&&n.subcost&&"number"==typeof n.subcost&&(a=n.subcost),e===t)return 0;var l=e.length,c=t.length;if(0===l)return c;if(0===c)return l;if(n&&n.wildcards&&"string"==typeof n.wildcards&&n.wildcards.length>0){var u,h,d,f,p,m;if(!1===n.full_process&&!0!==n.processed){h=(u=n.wildcards[0]).charCodeAt(0);var g="["+function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(n.wildcards)+"]";if((e=e.replace(new RegExp(g,"g"),u))===(t=t.replace(new RegExp(g,"g"),u)))return 0}else h=(u=n.wildcards[0].toLowerCase()).charCodeAt(0);for(var v=0,y=0;v<l;)o[v]=e.charCodeAt(v),i[v]=++v;if(s)for(;y<c;)for(d=t.charCodeAt(y),p=y++,f=y,v=0;v<l;v++)m=0===tU.compare(String.fromCharCode(d),String.fromCharCode(o[v]))||d===h||o[v]===h?p:p+a,p=i[v],f=i[v]=p>f?m>f?f+1:m:m>p?p+1:m;else for(;y<c;)for(d=t.charCodeAt(y),p=y++,f=y,v=0;v<l;v++)m=d===o[v]||d===h||o[v]===h?p:p+a,p=i[v],f=i[v]=p>f?m>f?f+1:m:m>p?p+1:m;return f}return r(e,t,n)};try{rU="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(id){void 0!==typeof console&&console.warn("Collator could not be initialized and wouldn't be used")}var oU=function(e,t,n){var r=[],i=[],o=n&&rU&&n.useCollator,s=1;if(n&&n.subcost&&"number"==typeof n.subcost&&(s=n.subcost),e===t)return 0;var a,l,c,u,h=e.length,d=t.length;if(0===h)return d;if(0===d)return h;for(var f=0,p=0;f<h;)i[f]=e.charCodeAt(f),r[f]=++f;if(o)for(;p<d;)for(a=t.charCodeAt(p),c=p++,l=p,f=0;f<h;f++)u=0===rU.compare(String.fromCharCode(a),String.fromCharCode(i[f]))?c:c+s,c=r[f],l=r[f]=c>l?u>l?l+1:u:u>c?c+1:u;else for(;p<d;)for(a=t.charCodeAt(p),c=p++,l=p,f=0;f<h;f++)u=a===i[f]?c:c+s,c=r[f],l=r[f]=c>l?u>l?l+1:u:u>c?c+1:u;return l};!function(e,t){if(!e.setImmediate){var n,r=1,i={},o=!1,s=e.document,a=Object.getPrototypeOf&&Object.getPrototypeOf(e);a=a&&a.setTimeout?a:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){c(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&c(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){c(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var n=s.createElement("script");n.onreadystatechange=function(){c(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():n=function(e){setTimeout(c,0,e)},a.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),o=0;o<t.length;o++)t[o]=arguments[o+1];var s={callback:e,args:t};return i[r]=s,n(r),r++},a.clearImmediate=l}function l(e){delete i[e]}function c(e){if(o)setTimeout(c,0,e);else{var t=i[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{l(e),o=!1}}}}}("undefined"==typeof self?Uz:self);var sU={astral:!1,natives:!1},aU={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},lU={},cU={},uU={},hU=[],dU={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?(?:[:=!]|<[=!])|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},fU=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,pU=void 0===aU.exec.call(/()??/,"")[1],mU=void 0!==/x/.flags,gU={}.toString;function vU(e){var t=!0;try{new RegExp("",e)}catch(e){t=!1}return t&&"y"===e?new RegExp("aa|.","y").test("b"):t}var yU=vU("u"),_U=vU("y"),bU={g:!0,i:!0,m:!0,u:yU,y:_U};function wU(e,t,n,r,i){var o;if(e.xregexp={captureNames:t},i)return e;if(e.__proto__)e.__proto__=IU.prototype;else for(o in IU.prototype)e[o]=IU.prototype[o];return e.xregexp.source=n,e.xregexp.flags=r?r.split("").sort().join(""):r,e}function xU(e){return aU.replace.call(e,/([\s\S])(?=[\s\S]*\1)/g,"")}function EU(e,t){if(!IU.isRegExp(e))throw new TypeError("Type RegExp expected");var n=e.xregexp||{},r=function(e){return mU?e.flags:aU.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(e))[1]}(e),i="",o="",s=null,a=null;return(t=t||{}).removeG&&(o+="g"),t.removeY&&(o+="y"),o&&(r=aU.replace.call(r,new RegExp("["+o+"]+","g"),"")),t.addG&&(i+="g"),t.addY&&(i+="y"),i&&(r=xU(r+i)),t.isInternalOnly||(void 0!==n.source&&(s=n.source),null!=n.flags&&(a=i?xU(n.flags+i):n.flags)),wU(new RegExp(t.source||e.source,r),function(e){return!(!e.xregexp||!e.xregexp.captureNames)}(e)?n.captureNames.slice(0):null,s,a,t.isInternalOnly)}function SU(e){return parseInt(e,16)}function TU(e){return parseInt(e,10).toString(16)}function CU(e,t){var n,r=e.length;for(n=0;n<r;++n)if(e[n]===t)return n;return-1}function AU(e,t,n){return aU.test.call(n.indexOf("x")>-1?/^(?:\s|#[^#\n]*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,e.slice(t))}function kU(e){for(;e.length<4;)e="0"+e;return e}function PU(e){if(!/^[\w$]$/.test(e))throw new Error("Flag must be a single character A-Za-z0-9_$");bU[e]=!0}function OU(e,t,n,r,i){for(var o,s,a=hU.length,l=e.charAt(n),c=null;a--;)if(!((s=hU[a]).leadChar&&s.leadChar!==l||s.scope!==r&&"all"!==s.scope||s.flag&&-1===t.indexOf(s.flag))&&(o=IU.exec(e,s.regex,n,"sticky"))){c={matchLength:o[0].length,output:s.handler.call(i,o,r,t),reparse:s.reparse};break}return c}function IU(e,t){if(IU.isRegExp(e)){if(void 0!==t)throw new TypeError("Cannot supply flags when copying a RegExp");return EU(e)}if(e=void 0===e?"":String(e),t=void 0===t?"":String(t),IU.isInstalled("astral")&&-1===t.indexOf("A")&&(t+="A"),uU[e]||(uU[e]={}),!uU[e][t]){for(var n,r={hasNamedCapture:!1,captureNames:[]},i="default",o="",s=0,a=function(e,t){var n;if(xU(t)!==t)throw new SyntaxError("Invalid duplicate regex flag "+t);for(e=aU.replace.call(e,/^\(\?([\w$]+)\)/,(function(e,n){if(aU.test.call(/[gy]/,n))throw new SyntaxError("Cannot use flag g or y in mode modifier "+e);return t=xU(t+n),""})),n=0;n<t.length;++n)if(!bU[t.charAt(n)])throw new SyntaxError("Unknown regex flag "+t.charAt(n));return{pattern:e,flags:t}}(e,t),l=a.pattern,c=a.flags;s<l.length;){do{(n=OU(l,c,s,i,r))&&n.reparse&&(l=l.slice(0,s)+n.output+l.slice(s+n.matchLength))}while(n&&n.reparse);if(n)o+=n.output,s+=n.matchLength||1;else{var u=IU.exec(l,dU[i],s,"sticky")[0];o+=u,s+=u.length,"["===u&&"default"===i?i="class":"]"===u&&"class"===i&&(i="default")}}uU[e][t]={pattern:aU.replace.call(o,/(?:\(\?:\))+/g,"(?:)"),flags:aU.replace.call(c,/[^gimuy]+/g,""),captures:r.hasNamedCapture?r.captureNames:null}}var h=uU[e][t];return wU(new RegExp(h.pattern,h.flags),h.captures,e,t)}IU.prototype=new RegExp,IU.version="3.1.1-next",IU._clipDuplicates=xU,IU._hasNativeFlag=vU,IU._dec=SU,IU._hex=TU,IU._pad4=kU,IU.addToken=function(e,t,n){var r,i=(n=n||{}).optionalFlags;if(n.flag&&PU(n.flag),i)for(i=aU.split.call(i,""),r=0;r<i.length;++r)PU(i[r]);hU.push({regex:EU(e,{addG:!0,addY:_U,isInternalOnly:!0}),handler:t,scope:n.scope||"default",flag:n.flag,reparse:n.reparse,leadChar:n.leadChar}),IU.cache.flush("patterns")},IU.cache=function(e,t){return cU[e]||(cU[e]={}),cU[e][t]||(cU[e][t]=IU(e,t))},IU.cache.flush=function(e){"patterns"===e?uU={}:cU={}},IU.exec=function(e,t,n,r){var i,o,s,a="g",l=!1;return(i=_U&&!!(r||t.sticky&&!1!==r))?a+="y":r&&(l=!0,a+="FakeY"),t.xregexp=t.xregexp||{},n=n||0,(s=t.xregexp[a]||(t.xregexp[a]=EU(t,{addG:!0,addY:i,source:l?t.source+"|()":void 0,removeY:!1===r,isInternalOnly:!0}))).lastIndex=n,o=lU.exec.call(s,e),l&&o&&""===o.pop()&&(o=null),t.global&&(t.lastIndex=o?s.lastIndex:0),o},IU.isInstalled=function(e){return!!sU[e]},IU.isRegExp=function(e){return"[object RegExp]"===gU.call(e)},IU.replace=function(e,t,n,r){var i,o=IU.isRegExp(t),s=t.global&&"one"!==r||"all"===r,a=(s?"g":"")+(t.sticky?"y":"")||"noGY",l=t;return o?(t.xregexp=t.xregexp||{},l=t.xregexp[a]||(t.xregexp[a]=EU(t,{addG:!!s,removeG:"one"===r,isInternalOnly:!0}))):s&&(l=new RegExp(IU.escape(String(t)),"g")),i=lU.replace.call(function(e){if(null==e)throw new TypeError("Cannot convert null or undefined to object");return e}(e),l,n),o&&t.global&&(t.lastIndex=0),i},lU.exec=function(e){var t,n,r,i=this.lastIndex,o=aU.exec.apply(this,arguments);if(o){if(!pU&&o.length>1&&CU(o,"")>-1&&(n=EU(this,{removeG:!0,isInternalOnly:!0}),aU.replace.call(String(e).slice(o.index),n,(function(){var e,t=arguments.length;for(e=1;e<t-2;++e)void 0===arguments[e]&&(o[e]=void 0)}))),this.xregexp&&this.xregexp.captureNames)for(r=1;r<o.length;++r)(t=this.xregexp.captureNames[r-1])&&(o[t]=o[r]);this.global&&!o[0].length&&this.lastIndex>o.index&&(this.lastIndex=o.index)}return this.global||(this.lastIndex=i),o},lU.replace=function(e,t){var n,r,i,o=IU.isRegExp(e);return o?(e.xregexp&&(r=e.xregexp.captureNames),n=e.lastIndex):e+="",i=function(e,t){return gU.call(e)==="[object "+t+"]"}(t,"Function")?aU.replace.call(String(this),e,(function(){var n,i=arguments;if(r)for(i[0]=new String(i[0]),n=0;n<r.length;++n)r[n]&&(i[0][r[n]]=i[n+1]);return o&&e.global&&(e.lastIndex=i[i.length-2]+i[0].length),t.apply(void 0,i)})):aU.replace.call(null==this?this:String(this),e,(function(){var e=arguments;return aU.replace.call(String(t),fU,(function(t,n,i){var o;if(n){if((o=+n)<=e.length-3)return e[o]||"";if((o=r?CU(r,n):-1)<0)throw new SyntaxError("Backreference to undefined group "+t);return e[o+1]||""}if("$"===i)return"$";if("&"===i||0==+i)return e[0];if("`"===i)return e[e.length-1].slice(0,e[e.length-2]);if("'"===i)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(i=+i,!isNaN(i)){if(i>e.length-3)throw new SyntaxError("Backreference to undefined group "+t);return e[i]||""}throw new SyntaxError("Invalid token "+t)}))})),o&&(e.global?e.lastIndex=0:e.lastIndex=n),i},lU.split=function(e,t){if(!IU.isRegExp(e))return aU.split.apply(this,arguments);var n,r=String(this),i=[],o=e.lastIndex,s=0;return t=(void 0===t?-1:t)>>>0,IU.forEach(r,e,(function(e){e.index+e[0].length>s&&(i.push(r.slice(s,e.index)),e.length>1&&e.index<r.length&&Array.prototype.push.apply(i,e.slice(1)),n=e[0].length,s=e.index+n)})),s===r.length?aU.test.call(e,"")&&!n||i.push(""):i.push(r.slice(s)),e.lastIndex=o,i.length>t?i.slice(0,t):i},IU.addToken(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,(function(e,t){if("B"===e[1]&&"default"===t)return e[0];throw new SyntaxError("Invalid escape "+e[0])}),{scope:"all",leadChar:"\\"}),IU.addToken(/\\u{([\dA-Fa-f]+)}/,(function(e,t,n){var r=SU(e[1]);if(r>1114111)throw new SyntaxError("Invalid Unicode code point "+e[0]);if(r<=65535)return"\\u"+kU(TU(r));if(yU&&n.indexOf("u")>-1)return e[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u")}),{scope:"all",leadChar:"\\"}),IU.addToken(/\[(\^?)\]/,(function(e){return e[1]?"[\\s\\S]":"\\b\\B"}),{leadChar:"["}),IU.addToken(/\(\?#[^)]*\)/,(function(e,t,n){return AU(e.input,e.index+e[0].length,n)?"":"(?:)"}),{leadChar:"("}),IU.addToken(/\s+|#[^\n]*\n?/,(function(e,t,n){return AU(e.input,e.index+e[0].length,n)?"":"(?:)"}),{flag:"x"}),IU.addToken(/\./,(function(){return"[\\s\\S]"}),{flag:"s",leadChar:"."}),IU.addToken(/\\k<([\w$]+)>/,(function(e){var t=isNaN(e[1])?CU(this.captureNames,e[1])+1:+e[1],n=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+e[0]);return"\\"+t+(n===e.input.length||isNaN(e.input.charAt(n))?"":"(?:)")}),{leadChar:"\\"}),IU.addToken(/\\(\d+)/,(function(e,t){if(!("default"===t&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+e[0]);return e[0]}),{scope:"all",leadChar:"\\"}),IU.addToken(/\(\?P?<([\w$]+)>/,(function(e){if(!isNaN(e[1]))throw new SyntaxError("Cannot use integer as capture name "+e[0]);if("length"===e[1]||"__proto__"===e[1])throw new SyntaxError("Cannot use reserved word as capture name "+e[0]);if(CU(this.captureNames,e[1])>-1)throw new SyntaxError("Cannot use same name for multiple groups "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),{leadChar:"("}),IU.addToken(/\((?!\?)/,(function(e,t,n){return n.indexOf("n")>-1?"(?:":(this.captureNames.push(null),"(")}),{optionalFlags:"n",leadChar:"("});var RU=IU;!function(e){var t={},n=e._dec,r=e._hex,i=e._pad4;function o(e){return e.replace(/[- _]+/g,"").toLowerCase()}function s(e){var t=/^\\[xu](.+)/.exec(e);return t?n(t[1]):e.charCodeAt("\\"===e.charAt(0)?1:0)}function a(n){return t[n]["b!"]||(t[n]["b!"]=function(t){var n="",o=-1;return e.forEach(t,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,(function(e){var t=s(e[1]);t>o+1&&(n+="\\u"+i(r(o+1)),t>o+2&&(n+="-\\u"+i(r(t-1)))),o=s(e[2]||e[1])})),o<65535&&(n+="\\u"+i(r(o+1)),o<65534&&(n+="-\\uFFFF")),n}(t[n].bmp))}e.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,(function(e,n,r){var i="P"===e[1]||!!e[2],s=o(e[4]||e[3]),l=t[s];if("P"===e[1]&&e[2])throw new SyntaxError("Invalid double negation "+e[0]);if(!t.hasOwnProperty(s))throw new SyntaxError("Unknown Unicode token "+e[0]);if(l.inverseOf){if(s=o(l.inverseOf),!t.hasOwnProperty(s))throw new ReferenceError("Unicode token missing data "+e[0]+" -> "+l.inverseOf);l=t[s],i=!i}if(!l.bmp)throw new SyntaxError("Astral mode required for Unicode token "+e[0]);return"class"===n?i?a(s):l.bmp:(i?"[^":"[")+l.bmp+"]"}),{scope:"all",optionalFlags:"A",leadChar:"\\"}),e.addUnicodeData=function(n){for(var r,i=0;i<n.length;++i){if(!(r=n[i]).name)throw new Error("Unicode token requires name");if(!(r.inverseOf||r.bmp||r.astral))throw new Error("Unicode token has no character data "+r.name);t[o(r.name)]=r,r.alias&&(t[o(r.alias)]=r)}e.cache.flush("patterns")},e._getUnicodeProperty=function(e){var n=o(e);return t[n]}}(RU),function(e){if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");e.addUnicodeData([{name:"L",alias:"Letter",bmp:"A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u1884\u1887-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc"},{name:"N",alias:"Number",bmp:"0-9\xb2\xb3\xb9\xbc-\xbe\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u09f4-\u09f9\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0b72-\u0b77\u0be6-\u0bf2\u0c66-\u0c6f\u0c78-\u0c7e\u0ce6-\u0cef\u0d58-\u0d5e\u0d66-\u0d78\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f33\u1040-\u1049\u1090-\u1099\u1369-\u137c\u16ee-\u16f0\u17e0-\u17e9\u17f0-\u17f9\u1810-\u1819\u1946-\u194f\u19d0-\u19da\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3007\u3021-\u3029\u3038-\u303a\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua620-\ua629\ua6e6-\ua6ef\ua830-\ua835\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19"}])}(RU);var NU=RU,LU={exports:{}};!function(e){e.exports=function(t,n,r,i){return(e={}).dedupe=function(e,o){var s,a=t(o);if(!n(e)&&"object"!=typeof e)throw new Error("contains_dupes must be an array or object");if(0===Object.keys(e).length)return void 0!==typeof console&&console.warn("contains_dupes is empty"),[];a.limit&&(void 0!==typeof console&&console.warn("options.limit will be ignored in dedupe"),a.limit=0),a.cutoff&&"number"==typeof a.cutoff||(void 0!==typeof console&&console.warn("Using default cutoff of 70"),a.cutoff=70),a.scorer||(a.scorer=r,void 0!==typeof console&&console.log("Using default scorer 'ratio' for dedupe")),s=a.processor&&"function"==typeof a.processor?a.processor:function(e){return e};var l={};for(var c in e){var u=s(e[c]);if("string"!=typeof u&&u instanceof String==0)throw new Error("Each processed item in dedupe must be a string.");var h=i(u,e,a);a.returnObjects?(1===h.length||(h=h.sort((function(e,t){var n=s(e.choice),r=s(t.choice),i=n.length,o=r.length;return i===o?n<r?-1:1:o-i}))),a.keepmap?l[s(h[0].choice)]={item:h[0].choice,key:h[0].key,matches:h}:l[s(h[0].choice)]={item:h[0].choice,key:h[0].key}):(1===h.length||(h=h.sort((function(e,t){var n=s(e[0]),r=s(t[0]),i=n.length,o=r.length;return i===o?n<r?-1:1:o-i}))),a.keepmap?l[s(h[0][0])]=[h[0][0],h[0][2],h]:l[s(h[0][0])]=[h[0][0],h[0][2]])}var d=[];for(var f in l)d.push(l[f]);return d},e}}(LU),function(){var e=Gz,t=$z,n=eU.exports.intersection,r=eU.exports.intersectionWith,i=eU.exports.difference,o=eU.exports.differenceWith,s=eU.exports.uniq,a=eU.exports.uniqWith,l=eU.exports.partialRight,c=eU.exports.forEach,u=eU.exports.keys,h=eU.exports.isArray,d=eU.exports.toArray,f=eU.exports.orderBy,p=nU,m=iU,g=oU,v=function(e,t,n){var r={},i=NU,o=iU,s=oU;function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(e){return("string"==typeof e||e instanceof String)&&e.length>0}r.validate=l,r.process_and_sort=function(e){return l(e)?e.match(/\S+/g).sort().join(" ").trim():""},r.tokenize=function(r,i){if(i&&i.wildcards&&t&&n){var a=n(o,i,s);return t(r.match(/\S+/g),(function(e,t){return 0===a(e,t)}))}return e(r.match(/\S+/g))};var c=i("[^\\pN|\\pL]","g");return r.full_process=function(e,t){if(!(e instanceof String)&&"string"!=typeof e)return"";var n;if(t&&"object"==typeof t&&t.wildcards&&"string"==typeof t.wildcards&&t.wildcards.length>0){var r=t.wildcards.toLowerCase();if(e=e.toLowerCase(),t.force_ascii){var o="[^\0 -\x7f|"+a(r)+"]";e=e.replace(new RegExp(o,"g"),"");var s="["+a(r)+"]",l=r[0];e=e.replace(new RegExp(s,"g"),l);var u="[^A-Za-z0-9"+a(r)+"]";n=(e=(e=e.replace(new RegExp(u,"g")," ")).replace(/_/g," ")).trim()}else{var h="[^\\pN|\\pL|"+a(r)+"]",d=i(h,"g");e=i.replace(e,d," ","all"),s="["+a(r)+"]",l=r[0],n=(e=e.replace(new RegExp(s,"g"),l)).trim()}}else t&&(t.force_ascii||!0===t)&&(n=(e=e.replace(/[^\x00-\x7F]/g,"")).replace(/\W|_/g," ").toLowerCase().trim()),n=i.replace(e,c," ","all").toLowerCase().trim();return t&&t.collapseWhitespace&&(n=n.replace(/\s+/g," ")),n},r.clone_and_set_option_defaults=function(e){if(e&&e.isAClone)return e;var t={isAClone:!0};if(e){var n,r=Object.keys(e);for(n=0;n<r.length;n++)t[r[n]]=e[r[n]]}return void 0!==t.full_process&&!1===t.full_process||(t.full_process=!0),void 0!==t.force_ascii&&!0===t.force_ascii||(t.force_ascii=!1),void 0!==t.normalize&&!1===t.normalize||(t.normalize=!0),void 0!==t.astral&&!0===t.astral&&(t.full_process=!1),void 0!==t.collapseWhitespace&&!1===t.collapseWhitespace||(t.collapseWhitespace=!0),t},r.isCustomFunc=function(e){return"function"!=typeof e||"token_set_ratio"!==e.name&&"partial_token_set_ratio"!==e.name&&"token_sort_ratio"!==e.name&&"partial_token_sort_ratio"!==e.name&&"QRatio"!==e.name&&"WRatio"!==e.name&&"distance"!==e.name&&"partial_ratio"!==e.name},r}(s,a,l),y=v.validate,_=v.process_and_sort,b=v.tokenize,w=v.full_process,x=v.clone_and_set_option_defaults,E=v.isCustomFunc,S=LU.exports(x,h,T,O).dedupe;function T(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?q(e,t,r):0}function C(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?F(e,t,r):0}function A(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?(r.partial=!0,F(e,t,r)):0}function k(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?(r.proc_sorted||(e=_(e),t=_(t)),q(e,t,r)):0}function P(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?(r.partial=!0,r.proc_sorted||(e=_(e),t=_(t)),W(e,t,r)):0}function O(e,n,r){var i,o=x(r);if(h(n))i=n.length;else{if(!(n instanceof Object))throw new Error("Invalid choices");i=u(n).length}if(!n||0===i)return void 0!==typeof console&&console.warn("No choices"),[];if(o.processor&&"function"!=typeof o.processor)throw new Error("Invalid Processor");if(o.processor||(o.processor=function(e){return e}),o.scorer&&"function"!=typeof o.scorer)throw new Error("Invalid Scorer");o.scorer||(o.scorer=T);var s=E(o.scorer);o.cutoff&&"number"==typeof o.cutoff||(o.cutoff=-1);var a=function(e,t){return e};o.full_process&&(a=w,s||(o.processed=!0));var l=!1;s||(e=a(e,o),o.full_process=!1,o.astral&&o.normalize&&(o.normalize=!1,String.prototype.normalize?(l=!0,e=e.normalize()):void 0!==typeof console&&console.warn("Normalization not supported in your environment")),0===e.length&&void 0!==typeof console&&console.warn("Processed query is empty string"));var d,f,p,m,g=[],v=!1,y=!1,S=!1;if("token_sort_ratio"===o.scorer.name||"partial_token_sort_ratio"===o.scorer.name){var C=_(e);y=!0}else if("token_set_ratio"===o.scorer.name||"partial_token_set_ratio"===o.scorer.name){var A=b(e,o);S=!0}return o.returnObjects?(p=function(e,t){return e.score-t.score},m=function(e,t){return t.score-e.score}):(p=function(e,t){return e[1]-t[1]},m=function(e,t){return t[1]-e[1]}),c(n,(function(t,n){o.tokens=void 0,o.proc_sorted=!1,y?(o.proc_sorted=!0,t&&t.proc_sorted?f=t.proc_sorted:(f=a(o.processor(t),o),f=_(l?f.normalize():f)),d=o.scorer(C,f,o)):S?(f="x",t&&t.tokens?(o.tokens=[A,t.tokens],o.trySimple&&(f=a(o.processor(t),o))):(f=a(o.processor(t),o),o.tokens=[A,b(l?f.normalize():f,o)]),d=o.scorer(e,f,o)):s?(f=o.processor(t),d=o.scorer(e,f,o)):("string"==typeof(f=a(o.processor(t),o))&&0!==f.length||(v=!0),l&&"string"==typeof f&&(f=f.normalize()),d=o.scorer(e,f,o)),d>o.cutoff&&(o.returnObjects?g.push({choice:t,score:d,key:n}):g.push([t,d,n]))})),v&&void 0!==typeof console&&console.log("One or more choices were empty. (post-processing if applied)"),o.limit&&"number"==typeof o.limit&&o.limit>0&&o.limit<i&&!o.unsorted?g=t.nlargest(g,o.limit,p):o.unsorted||(g=g.sort(m)),g}function I(e,n,r,i){var o,s,a=x(r);"object"==typeof r.abortController&&(o=r.abortController),"object"==typeof r.cancelToken&&(s=r.cancelToken);var l=256;"number"==typeof a.asyncLoopOffset&&(l=a.asyncLoopOffset<1?1:a.asyncLoopOffset);var c,u=!1;if(n&&n.length&&h(n))c=n.length,u=!0;else{if(!(n instanceof Object))return void i(new Error("Invalid choices"));c=Object.keys(n).length}if(!n||0===c)return void 0!==typeof console&&console.warn("No choices"),void i(null,[]);if(a.processor&&"function"!=typeof a.processor)i(new Error("Invalid Processor"));else if(a.processor||(a.processor=function(e){return e}),a.scorer&&"function"!=typeof a.scorer)i(new Error("Invalid Scorer"));else{a.scorer||(a.scorer=T);var d=E(a.scorer);a.cutoff&&"number"==typeof a.cutoff||(a.cutoff=-1);var f=function(e,t){return e};a.full_process&&(f=w,d||(a.processed=!0));var p=!1;d||(e=f(e,a),a.full_process=!1,a.astral&&a.normalize&&(a.normalize=!1,String.prototype.normalize?(p=!0,e=e.normalize()):void 0!==typeof console&&console.warn("Normalization not supported in your environment")),0===e.length&&void 0!==typeof console&&console.warn("Processed query is empty string"));var m,g,v,y,S,C=[],A=!1,k=!1,P=!1;if("token_sort_ratio"===a.scorer.name||"partial_token_sort_ratio"===a.scorer.name){var O=_(e);k=!0}else if("token_set_ratio"===a.scorer.name||"partial_token_set_ratio"===a.scorer.name){var I=b(e,a);P=!0}a.returnObjects?(y=function(e,t){return e.score-t.score},S=function(e,t){return t.score-e.score}):(y=function(e,t){return e[1]-t[1]},S=function(e,t){return t[1]-e[1]});var R=Object.keys(n);u?N(0):N(R[0],0)}function N(r,h){(u||n.hasOwnProperty(r))&&(a.tokens=void 0,a.proc_sorted=!1,k?(a.proc_sorted=!0,n[r]&&n[r].proc_sorted?g=n[r].proc_sorted:(g=f(a.processor(n[r]),a),g=_(p?g.normalize():g)),v=a.scorer(O,g,a)):P?(g="x",n[r]&&n[r].tokens?(a.tokens=[I,n[r].tokens],a.trySimple&&(g=f(a.processor(n[r]),a))):(g=f(a.processor(n[r]),a),a.tokens=[I,b(p?g.normalize():g,a)]),v=a.scorer(e,g,a)):d?(g=a.processor(n[r]),v=a.scorer(e,g,a)):("string"==typeof(g=f(a.processor(n[r]),a))&&0!==g.length||(A=!0),p&&"string"==typeof g&&(g=g.normalize()),v=a.scorer(e,g,a)),m=u?parseInt(r):r,v>a.cutoff&&(a.returnObjects?C.push({choice:n[r],score:v,key:m}):C.push([n[r],v,m]))),o&&!0===o.signal.aborted?i(new Error("aborted")):s&&!0===s.canceled?i(new Error("canceled")):u&&r<n.length-1?r%l==0?setImmediate((function(){N(r+1)})):N(r+1):h<R.length-1?h%l==0?setImmediate((function(){N(R[h+1],h+1)})):N(R[h+1],h+1):(A&&void 0!==typeof console&&console.log("One or more choices were empty. (post-processing if applied)"),a.limit&&"number"==typeof a.limit&&a.limit>0&&a.limit<c&&!a.unsorted?C=t.nlargest(C,a.limit,y):a.unsorted||(C=C.sort(S)),i(null,C))}}var R="%*SuperUniqueWildcardKey*%",N=!1;function L(e,t){var n=e;if(t.astral){t.normalize&&(String.prototype.normalize?n=e.normalize():N||(void 0!==typeof console&&console.warn("Normalization not supported in your environment"),N=!0));var r=d(n)}else r=n.split("");var i={};if(t.wildcards)for(var o=0;o<r.length;o++){var s=r[o];t.wildcards.indexOf(s)>-1?i[R]?i[R]+=1:i[R]=1:i[s]?i[s]+=1:i[s]=1}else for(o=0;o<r.length;o++)i[s=r[o]]?i[s]+=1:i[s]=1;return i}function D(e,t,r){for(var i=t,o=e.reduce((function(e,t){return e[t]=L(t,r),e}),{}),s=i.reduce((function(e,t){return e[t]=L(t,r),e}),{}),a=[],l=0;i.length&&l<e.length;){var c=f(i,(function(t){return r=o[e[l]],i=s[t],a=Object.keys(r),c=Object.keys(i),u=n(a,c).map((function(e){return r[e]*i[e]})).reduce((function(e,t){return e+t}),0),h=a.map((function(e){return Math.pow(r[e],2)})).reduce((function(e,t){return e+t}),0),d=c.map((function(e){return Math.pow(i[e],2)})).reduce((function(e,t){return e+t}),0),u/(Math.sqrt(h)*Math.sqrt(d));var r,i,a,c,u,h,d}),"desc")[0];a.push(c),l++,i=i.filter((function(e){return e!==c}))}return a.concat(i)}function M(e,t,n,r){var i=t,o=r;return(t.length>r.length||t.length===r.length&&(e.length>n.length||[e,n].sort()[0]===n))&&(i=r,o=t),[i,o]}function j(e,t,n){if(n.tokens)r=n.tokens[0],i=n.tokens[1];else var r=b(e,n),i=b(t,n);var o=M(e,r.sort(),t,i.sort()),s=o[0];const a=D(s,o[1],n);return n.partial?W(s.join(" "),a.join(" "),n):q(s.join(" "),a.join(" "),n)}function F(e,t,s){if(s.tokens)a=s.tokens[0],c=s.tokens[1];else var a=b(e,s),c=b(t,s);if(s.wildcards)var u=l(m,s,g),h=function(e,t){return 0===u(e,t)},d=r(a,c,h),f=o(a,c,h),p=o(c,a,h);else d=n(a,c),f=i(a,c),p=i(c,a);var v=d.sort().join(" "),y=f.sort(),_=p.sort();if(s.sortBySimilarity)var w=M(e,y,t,_),x=w[0],E=w[1],S=x.join(" "),T=D(x,E,s).join(" ");else S=y.join(" "),T=_.join(" ");var C=v+" "+S,A=v+" "+T;v=v.trim(),C=C.trim(),A=A.trim();var k=q;if(s.partial&&(k=W,v.length>0))return 100;var P=[k(v,C,s),k(v,A,s),k(C,A,s)];return s.trySimple&&P.push(k(e,t,s)),Math.max.apply(null,P)}var z,U,B,V,H=!1;function q(t,n,r){if(!y(t))return 0;if(!y(n))return 0;if(r.ratio_alg&&"difflib"===r.ratio_alg){var i=new e(null,t,n).ratio();return Math.round(100*i)}var o,s;return void 0===r.subcost&&(r.subcost=2),r.astral?(r.normalize&&(String.prototype.normalize?(t=t.normalize(),n=n.normalize()):H||(void 0!==typeof console&&console.warn("Normalization not supported in your environment"),H=!0)),o=p(t,n,r,d),s=d(t).length+d(n).length):r.wildcards?(o=m(t,n,r,g),s=t.length+n.length):(o=g(t,n,r),s=t.length+n.length),Math.round((s-o)/s*100)}function W(t,n,r){if(!y(t))return 0;if(!y(n))return 0;if(t.length<=n.length)var i=t,o=n;else i=n,o=t;for(var s=new e(null,i,o).getMatchingBlocks(),a=[],l=0;l<s.length;l++){var c=s[l][1]-s[l][0]>0?s[l][1]-s[l][0]:0,u=c+i.length,h=q(i,o.substring(c,u),r);if(h>99.5)return 100;a.push(h)}return Math.max.apply(null,a)}Object.keys||(Object.keys=(z=Object.prototype.hasOwnProperty,U=!{toString:null}.propertyIsEnumerable("toString"),V=(B=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)z.call(e,t)&&r.push(t);if(U)for(n=0;n<V;n++)z.call(e,B[n])&&r.push(B[n]);return r}));var K=void 0;"undefined"!=typeof Promise&&(K=function(e,t,n){return new Promise((function(r,i){I(e,t,n,(function(e,t){e?i(e):r(t)}))}))});var Z={distance:function(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,void 0===r.subcost&&(r.subcost=1),r.astral?p(e,t,r,d):m(e,t,r,g)},ratio:T,partial_ratio:function(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?W(e,t,r):0},token_set_ratio:C,token_sort_ratio:k,partial_token_set_ratio:A,partial_token_sort_ratio:P,token_similarity_sort_ratio:function(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?j(e,t,r):0},partial_token_similarity_sort_ratio:function(e,t,n){var r=x(n);return e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,y(e)&&y(t)?(r.partial=!0,j(e,t,r)):0},WRatio:function(e,t,n){var r=x(n);if(e=r.full_process?w(e,r):e,t=r.full_process?w(t,r):t,r.full_process=!1,!y(e))return 0;if(!y(t))return 0;var i=!0,o=.95,s=.9,a=q(e,t,r),l=Math.max(e.length,t.length)/Math.min(e.length,t.length);if(l<1.5&&(i=!1),l>8&&(s=.6),i){var c=W(e,t,r)*s,u=P(e,t,r)*o*s,h=A(e,t,r)*o*s;return Math.round(Math.max(a,c,u,h))}var d=k(e,t,r)*o,f=C(e,t,r)*o;return Math.round(Math.max(a,d,f))},full_process:w,extract:O,extractAsync:I,extractAsPromised:K,process_and_sort:_,unique_tokens:b,dedupe:S};Bz.exports=Z}();var DU=Bz.exports;DU.distance;const MU=DU.ratio;DU.partial_ratio,DU.token_set_ratio,DU.token_sort_ratio,DU.partial_token_set_ratio,DU.partial_token_sort_ratio,DU.token_similarity_sort_ratio,DU.partial_token_similarity_sort_ratio,DU.WRatio,DU.full_process,DU.extract,DU.extractAsync,DU.extractAsPromised,DU.process_and_sort,DU.unique_tokens,DU.dedupe;async function jU(e){const t=e.data(),n=await async function(e){const t=e.data().observationRefs;if(0===t.length)return null;const n=t[t.length-1],r=Lg(Kv,"observations",n),i=await Lv(r);return i.exists()?i.data().photoURLs:null}(e);return{establishmentId:e.id,establishmentName:t.establishmentName,address:t.address,photoURL:n&&n.length>0?n[0]:xP,coordinates:t.coordinates}}async function FU(e,t){if(!e)throw new Error("normalizedEstablishmentName is required.");const n=bv(Ng(Kv,"establishments"),xv("normalizedEstablishmentName","==",e)),r=await Mv(n);let i,o=!1;switch(r.docs.length){case 0:{const n=await async function(e){const t=await Mv(Ng(Kv,"establishments"));let n=[];return t.docs.forEach((t=>{const r=t.data().normalizedEstablishmentName,i=MU(e,r);i>85&&n.push({doc:t,similarity:i})})),n.sort(((e,t)=>t.similarity-e.similarity)),n.length?n:null}(e);if(!n||!n.length)return t({type:"SET_ESTABLISHMENT_EXISTS",payload:!1}),t({type:"SET_CURRENT_ESTABLISHMENT_ID",payload:null}),!1;i=await Promise.all(n.map((e=>jU(e.doc)))),o=!0,i.forEach((e=>{console.log("Approximate match for establishment:",e.establishmentName)}));break}default:i=await Promise.all(r.docs.map(jU)),console.log("Establishments Details for Direct Matches:",i),i.forEach((e=>{console.log("Direct DB match for establishment:",e.establishmentName)})),t({type:"SET_CURRENT_ESTABLISHMENTS_DATA",payload:i})}const s=1===i.length?i[0]:null;return t({type:"SET_ESTABLISHMENT_EXISTS",payload:!0}),s?(console.log("D\xe9tail unique d\u2019\xe9tablissement trouv\xe9:",s),t({type:"SET_CURRENT_ESTABLISHMENT_ID",payload:s.establishmentId}),{found:!0,details:s,isApproximateMatch:o}):(console.log("D\xe9tails multiples d\u2019\xe9tablissements trouv\xe9s:",i),t({type:"SET_CURRENT_ESTABLISHMENTS_DATA",payload:i}),{found:!0,multiple:!0,details:i,isApproximateMatch:o})}const zU=(0,r.createContext)(),UU=e=>{let{children:t}=e;const[n,i]=(0,r.useState)({isVisible:!1,title:"",body:"",buttons:[]});return(0,ex.jsx)(zU.Provider,{value:{modalConfig:n,setModalConfig:i},children:t})},BU=()=>{const e=(0,r.useContext)(zU);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},VU=()=>{const{modalConfig:e,setModalConfig:t}=BU(),n=()=>{t((e=>({...e,isVisible:!1})))};return(0,ex.jsxs)(XS,{show:e.isVisible,onHide:n,centered:!0,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,children:(0,ex.jsx)(XS.Title,{children:e.title})}),(0,ex.jsx)(XS.Body,{children:e.body}),(0,ex.jsx)(XS.Footer,{children:e.buttons&&e.buttons.map(((e,t)=>(0,ex.jsx)(bx,{variant:e.variant||"secondary",onClick:e.onClick||n,children:e.text},t)))})]})};var HU=n(559),qU=n.n(HU);const WU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",KU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";const ZU=function(e){let{center:t=[48.9562,4.3653],zoom:n=13,markerCoords:i,companyName:o,imageURL:s}=e;const a=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=qU().map(a.current).setView(t,n);l.current=e,qU().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);const r=qU().icon({iconUrl:WU,shadowUrl:KU,iconSize:[25,41],iconAnchor:[12,41],shadowSize:[41,41]});return qU().Marker.prototype.options.icon=r,()=>{e.remove()}}),[t,n]),(0,r.useEffect)((()=>{const e=l.current;if(!e||!i)return;c.current&&c.current.remove();const t=qU().marker(i).addTo(e);if(o){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center";const n=document.createElement("p");if(n.textContent=o,e.appendChild(n),s){const t=document.createElement("img");t.src=s,t.alt="Image associ\xe9e",t.style.maxWidth="100px",t.style.maxHeight="100px",e.appendChild(t)}t.bindPopup(e).openPopup()}c.current=t,e.setView(i,16)}),[i,n,o,s]),(0,ex.jsx)("div",{ref:a,style:{width:"100%",height:"400px"}})},GU=e=>{let{show:t,onHide:n,formData:r,previewPhotoURL:i,isDefaultPhoto:o,photoURLs:s}=e;const a=o?i:s[0];return(0,ex.jsxs)(XS,{show:t,onHide:n,size:"lg",centered:!0,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,children:(0,ex.jsx)(XS.Title,{children:"Pr\xe9visualisation"})}),(0,ex.jsx)(XS.Body,{children:(0,ex.jsx)(ZU,{markerCoords:r.companyCoordinates,companyName:r.companyName,imageURL:a})}),(0,ex.jsx)(XS.Footer,{children:(0,ex.jsx)(bx,{variant:"secondary",onClick:n,children:"Fermer"})})]})},QU="firebasestorage.googleapis.com",YU="storageBucket";class XU extends Ne{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(eB(e),"Firebase Storage: ".concat(t," (").concat(eB(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,XU.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eB(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var JU,$U;function eB(e){return"storage/"+e}function tB(){return new XU(JU.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function nB(){return new XU(JU.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rB(){return new XU(JU.CANCELED,"User canceled the upload/download.")}function iB(){return new XU(JU.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oB(e){return new XU(JU.INVALID_ARGUMENT,e)}function sB(){return new XU(JU.APP_DELETED,"The Firebase app was deleted.")}function aB(e,t){return new XU(JU.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function lB(e){throw new XU(JU.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(JU||(JU={}));class cB{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=cB.makeFromUrl(e,t)}catch(Yv){return new cB(e,"")}if(""===n.path)return n;throw r=e,new XU(JU.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===QU?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new cB(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new XU(JU.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class uB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function hB(e){return"string"===typeof e||e instanceof String}function dB(e){return fB()&&e instanceof Blob}function fB(){return"undefined"!==typeof Blob&&!Re()}function pB(e,t,n,r){if(r<t)throw oB("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw oB("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function mB(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function gB(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function vB(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}($U||($U={}));class yB{constructor(e,t,n,r,i,o,s,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new _B(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===$U.NO_ERROR,i=n.getStatus();if(!t||vB(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===$U.ABORT;return void e(!1,new _B(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new _B(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Yv){r(Yv)}else if(null!==i){const e=tB();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?sB():rB())}else{r(nB())}};this.canceled_?t(0,new _B(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){o&&clearTimeout(o)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||s)return d(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class _B{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function bB(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function wB(){const e=bB();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(fB())return new Blob(n);throw new XU(JU.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function xB(e){if("undefined"===typeof atob)throw t="base-64",new XU(JU.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const EB={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class SB{constructor(e,t){this.data=e,this.contentType=t||null}}function TB(e,t){switch(e){case EB.RAW:return new SB(CB(t));case EB.BASE64:case EB.BASE64URL:return new SB(AB(e,t));case EB.DATA_URL:return new SB(function(e){const t=new kB(e);return t.base64?AB(EB.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Yv){throw aB(EB.DATA_URL,"Malformed data URL.")}return CB(t)}(t.rest)}(t),new kB(t).contentType)}throw tB()}function CB(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function AB(e,t){switch(e){case EB.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw aB(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case EB.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw aB(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xB(t)}catch(Yv){if(Yv.message.includes("polyfill"))throw Yv;throw aB(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class kB{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw aB(EB.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class PB{constructor(e,t){let n=0,r="";dB(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(dB(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new PB(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new PB(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(fB()){const e=t.map((e=>e instanceof PB?e.data_:e));return new PB(wB.apply(null,e))}{const e=t.map((e=>hB(e)?TB(EB.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new PB(r,!0)}}uploadData(){return this.data_}}function OB(e){let t;try{t=JSON.parse(e)}catch(Yv){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function IB(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function RB(e,t){return t}class NB{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||RB}}let LB=null;function DB(){if(LB)return LB;const e=[];e.push(new NB("bucket")),e.push(new NB("generation")),e.push(new NB("metageneration")),e.push(new NB("name","fullPath",!0));const t=new NB("name");t.xform=function(e,t){return function(e){return!hB(e)||e.length<2?e:IB(e)}(t)},e.push(t);const n=new NB("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new NB("timeCreated")),e.push(new NB("updated")),e.push(new NB("md5Hash",null,!0)),e.push(new NB("cacheControl",null,!0)),e.push(new NB("contentDisposition",null,!0)),e.push(new NB("contentEncoding",null,!0)),e.push(new NB("contentLanguage",null,!0)),e.push(new NB("contentType",null,!0)),e.push(new NB("metadata","customMetadata",!0)),LB=e,LB}function MB(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new cB(n,r);return t._makeStorageReference(i)}})}(r,e),r}function jB(e,t,n){const r=OB(t);if(null===r)return null;return MB(e,r,n)}function FB(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class zB{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function UB(e){if(!e)throw tB()}function BB(e,t){return function(n,r){const i=jB(e,r,t);return UB(null!==i),i}}function VB(e,t){return function(n,r){const i=jB(e,r,t);return UB(null!==i),function(e,t,n,r){const i=OB(t);if(null===i)return null;if(!hB(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return mB("/b/"+s(i)+"/o/"+s(o),n,r)+gB({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function HB(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new XU(JU.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new XU(JU.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new XU(JU.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new XU(JU.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function qB(e){const t=HB(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new XU(JU.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function WB(e,t,n){const r=mB(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new zB(r,"GET",BB(e,n),i);return o.errorHandler=qB(t),o}function KB(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ZB(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=KB(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+FB(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=PB.getBlob(c,r,u);if(null===h)throw iB();const d={name:l.fullPath},f=mB(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new zB(f,"POST",BB(e,n),p);return m.urlParams=d,m.headers=s,m.body=h.uploadData(),m.errorHandler=HB(t),m}class GB{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function QB(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Yv){UB(!1)}return UB(!!n&&-1!==(t||["active"]).indexOf(n)),n}const YB=262144;function XB(e,t,n,r,i,o,s,a){const l=new GB(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new XU(JU.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(h,d);if(null===m)throw iB();const g=t.maxUploadRetryTime,v=new zB(n,"POST",(function(e,n){const i=QB(e,["active","final"]),s=l.current+u,a=r.size();let c;return c="final"===i?BB(t,o)(e,n):null,new GB(s,a,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=HB(e),v}const JB="running",$B="paused",eV="success",tV="canceled",nV="error";function rV(e){switch(e){case"running":case"pausing":case"canceling":return JB;case"paused":return $B;case"success":return eV;case"canceled":return tV;default:return nV}}class iV{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function oV(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let sV=null;class aV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$U.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=$U.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=$U.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw lB("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lB("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lB("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Yv){return-1}}getResponse(){if(!this.sent_)throw lB("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lB("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class lV extends aV{initXhr(){this.xhr_.responseType="text"}}function cV(){return sV?sV():new lV}class uV{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=DB(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(JU.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(vB(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=nB()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(JU.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=KB(t,r,i),a={name:s.fullPath},l=mB(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},u=FB(s,n),h=e.maxUploadRetryTime,d=new zB(l,"POST",(function(e){let t;QB(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Yv){UB(!1)}return UB(hB(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=HB(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,cV,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new zB(n,"POST",(function(e){const t=QB(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Yv){UB(!1)}n||UB(!1);const i=Number(n);return UB(!isNaN(i)),new GB(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=HB(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,cV,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=YB*this._chunkMultiplier,t=new GB(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=XB(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(Yv){return this._error=Yv,void this._transition("error")}const s=this._ref.storage._makeRequest(o,cV,r,i,!1);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(YB*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=WB(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,cV,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=ZB(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,cV,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=rB(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=rV(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new iV(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(rV(this._state)){case eV:oV(this._resolve.bind(null,this.snapshot))();break;case tV:case nV:oV(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(rV(this._state)){case JB:case $B:e.next&&oV(e.next.bind(e,this.snapshot))();break;case eV:e.complete&&oV(e.complete.bind(e))();break;default:e.error&&oV(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class hV{constructor(e,t){this._service=e,this._location=t instanceof cB?t:cB.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hV(e,t)}get root(){const e=new cB(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IB(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new cB(this._location.bucket,e);return new hV(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new XU(JU.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function dV(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=mB(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new zB(r,"GET",VB(e,n),i);return o.errorHandler=qB(t),o}(e.storage,e._location,DB());return e.storage.makeRequestWithTokens(t,cV).then((e=>{if(null===e)throw new XU(JU.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function fV(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new cB(e._location.bucket,n);return new hV(e.storage,r)}function pV(e,t){if(e instanceof vV){const n=e;if(null==n._bucket)throw new XU(JU.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YU+"' property when initializing the app?");const r=new hV(n,n._bucket);return null!=t?pV(r,t):r}return void 0!==t?fV(e,t):e}function mV(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof vV)return new hV(e,t);throw oB("To use ref(service, url), the first argument must be a Storage instance.")}return pV(e,t)}function gV(e,t){const n=null===t||void 0===t?void 0:t[YU];return null==n?null:cB.makeFromBucketSpec(n,e)}class vV{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=QU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?cB.makeFromBucketSpec(r,this._host):gV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=cB.makeFromBucketSpec(this._url,e):this._bucket=gV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hV(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new uB(sB());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=gB(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new yB(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const yV="@firebase/storage",_V="0.11.2",bV="storage";function wV(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new uV(e,new PB(t),n)}(e=He(e),t,n)}function xV(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new vV(r,i,o,n,It)}At(new qe(bV,xV,"PUBLIC").setMultipleInstances(!0)),Lt(yV,_V,""),Lt(yV,_V,"esm2017");const EV=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt(),t=arguments.length>1?arguments[1]:void 0;e=He(e);const n=kt(e,bV).getImmediate({identifier:t}),r=Ce("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Oe(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(qv);async function SV(e,t){var n,r;const i=wV((n=EV,r="images/".concat(t),mV(n=He(n),r)),e);return new Promise(((e,t)=>{i.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done")}),(e=>{console.error("Upload failed:",e),t(e)}),(async()=>{const t=await function(e){return dV(e=He(e))}(i.snapshot.ref);e(t)}))}))}const TV=class{constructor(e){this.userID=e.userID,this.establishmentRef=e.establishmentRef,this.date=e.date,this.time=e.time,this.photoURLs=e.photoURLs,this.additionalNotes=e.additionalNotes}validate(){if(!this.userID)throw new Error("L'ID utilisateur est requis");if(!this.establishmentRef)throw new Error("La r\xe9f\xe9rence de l'\xe9tablissement est requise");if(!this.date)throw new Error("La date est requise");if(!this.time)throw new Error("L'heure est requise");if(!this.photoURLs||!Array.isArray(this.photoURLs))throw new Error("Les URLs des photos doivent \xeatre un tableau")}toFirebaseObject(){return{userID:this.userID,establishmentRef:this.establishmentRef,date:this.date,time:this.time,photoURLs:this.photoURLs,additionalNotes:this.additionalNotes||null}}};async function CV(e){const t=new TV(e);t.validate();try{const n=await Fv(Ng(Kv,"observations"),t.toFirebaseObject());await async function(e,t){const n=Lg(Kv,"users",e);try{await jv(n,{observationRefs:Vv(t)})}catch(Yv){throw console.error("Erreur lors de l'ajout de la r\xe9f\xe9rence d'observation: ",Yv),Yv}}(e.userID,n.id),console.log("Observation ajout\xe9e avec ID:",n.id);const r=Lg(Kv,"establishments",e.establishmentRef);return console.log("Mise \xe0 jour de l\u2019\xe9tablissement avec ID:",e.establishmentRef),await jv(r,{observationRefs:Vv(n.id),observationCount:Hv(1)}),console.log("\xc9tablissement mis \xe0 jour avec succ\xe8s."),n.id}catch(Yv){throw console.error("Erreur lors de l'ajout du document d'observation :",Yv),Yv}}const AV=class{constructor(e){let{establishmentName:t,address:n,coordinates:r,observationCount:i=0,observationRefs:o=[]}=e;this.establishmentName=YC(t),this.normalizedEstablishmentName=XC(this.establishmentName),this.address=n,this.coordinates=r,this.observationCount=i,this.observationRefs=o}validate(){if(!this.establishmentName||""===this.establishmentName.trim())throw new Error("Le nom de l'\xe9tablissement est requis");if(!this.address||""===this.address.trim())throw new Error("L'adresse est requise");if(!this.coordinates||2!==this.coordinates.length)throw new Error("Des coordonn\xe9es valides sont requises")}toFirebaseObject(){return{establishmentName:this.establishmentName,normalizedEstablishmentName:this.normalizedEstablishmentName,address:this.address,coordinates:{latitude:this.coordinates[0],longitude:this.coordinates[1]},observationCount:this.observationCount,observationRefs:this.observationRefs}}};const kV={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let PV;const OV=new Uint8Array(16);function IV(){if(!PV&&(PV="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!PV))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return PV(OV)}const RV=[];for(let n=0;n<256;++n)RV.push((n+256).toString(16).slice(1));function NV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return RV[e[t+0]]+RV[e[t+1]]+RV[e[t+2]]+RV[e[t+3]]+"-"+RV[e[t+4]]+RV[e[t+5]]+"-"+RV[e[t+6]]+RV[e[t+7]]+"-"+RV[e[t+8]]+RV[e[t+9]]+"-"+RV[e[t+10]]+RV[e[t+11]]+RV[e[t+12]]+RV[e[t+13]]+RV[e[t+14]]+RV[e[t+15]]}const LV=function(e,t,n){if(kV.randomUUID&&!t&&!e)return kV.randomUUID();const r=(e=e||{}).random||(e.rng||IV)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return NV(r)};function DV(e){const t=(new Date).toISOString(),n=LV();return"".concat(e,"_").concat(t,"_").concat(n,".jpeg")}function MV(e,t){return new Promise((function(n,r){let i;return jV(e).then((function(e){try{return i=e,n(new Blob([t.slice(0,2),i,t.slice(2)],{type:"image/jpeg"}))}catch(e){return r(e)}}),r)}))}const jV=e=>new Promise(((t,n)=>{const r=new FileReader;r.addEventListener("load",(e=>{let{target:{result:r}}=e;const i=new DataView(r);let o=0;if(65496!==i.getUint16(o))return n("not a valid JPEG");for(o+=2;;){const e=i.getUint16(o);if(65498===e)break;const s=i.getUint16(o+2);if(65505===e&&1165519206===i.getUint32(o+4)){const e=o+10;let a;switch(i.getUint16(e)){case 18761:a=!0;break;case 19789:a=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==i.getUint16(e+2,a))return n("TIFF header contains invalid version");const l=i.getUint32(e+4,a),c=e+l+2+12*i.getUint16(e+l,a);for(let t=e+l+2;t<c;t+=12)if(274==i.getUint16(t,a)){if(3!==i.getUint16(t+2,a))return n("Orientation data type is invalid");if(1!==i.getUint32(t+4,a))return n("Orientation data count is invalid");i.setUint16(t+8,1,a);break}return t(r.slice(o,o+2+s))}o+=2+s}return t(new Blob)})),r.readAsArrayBuffer(e)}));var FV={},zV={get exports(){return FV},set exports(e){FV=e}};!function(e){var t,n,r={};zV.exports=r,r.parse=function(e,t){for(var n=r.bin.readUshort,i=r.bin.readUint,o=0,s={},a=new Uint8Array(e),l=a.length-4;101010256!=i(a,l);)l--;o=l,o+=4;var c=n(a,o+=4);n(a,o+=2);var u=i(a,o+=2),h=i(a,o+=4);o+=4,o=h;for(var d=0;d<c;d++){i(a,o),o+=4,o+=4,o+=4,i(a,o+=4),u=i(a,o+=4);var f=i(a,o+=4),p=n(a,o+=4),m=n(a,o+2),g=n(a,o+4);o+=6;var v=i(a,o+=8);o+=4,o+=p+m+g,r._readLocal(a,v,s,u,f,t)}return s},r._readLocal=function(e,t,n,i,o,s){var a=r.bin.readUshort,l=r.bin.readUint;l(e,t),a(e,t+=4),a(e,t+=2);var c=a(e,t+=2);l(e,t+=2),l(e,t+=4),t+=4;var u=a(e,t+=8),h=a(e,t+=2);t+=2;var d=r.bin.readUTF8(e,t,u);if(t+=u,t+=h,s)n[d]={size:o,csize:i};else{var f=new Uint8Array(e.buffer,t);if(0==c)n[d]=new Uint8Array(f.buffer.slice(t,t+i));else{if(8!=c)throw"unknown compression method: "+c;var p=new Uint8Array(o);r.inflateRaw(f,p),n[d]=p}}},r.inflateRaw=function(e,t){return r.F.inflate(e,t)},r.inflate=function(e,t){return e[0],e[1],r.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},r.deflate=function(e,t){null==t&&(t={level:6});var n=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[n]=120,i[n+1]=156,n+=2,n=r.F.deflateRaw(e,i,n,t.level);var o=r.adler(e,0,e.length);return i[n+0]=o>>>24&255,i[n+1]=o>>>16&255,i[n+2]=o>>>8&255,i[n+3]=o>>>0&255,new Uint8Array(i.buffer,0,n+4)},r.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),i=r.F.deflateRaw(e,n,i,t.level);return new Uint8Array(n.buffer,0,i)},r.encode=function(e,t){null==t&&(t=!1);var n=0,i=r.bin.writeUint,o=r.bin.writeUshort,s={};for(var a in e){var l=!r._noNeed(a)&&!t,c=e[a],u=r.crc.crc(c,0,c.length);s[a]={cpr:l,usize:c.length,crc:u,file:l?r.deflateRaw(c):c}}for(var a in s)n+=s[a].file.length+30+46+2*r.bin.sizeUTF8(a);n+=22;var h=new Uint8Array(n),d=0,f=[];for(var a in s){var p=s[a];f.push(d),d=r._writeHeader(h,d,a,p,0)}var m=0,g=d;for(var a in s)p=s[a],f.push(d),d=r._writeHeader(h,d,a,p,1,f[m++]);var v=d-g;return i(h,d,101010256),d+=4,o(h,d+=4,m),o(h,d+=2,m),i(h,d+=2,v),i(h,d+=4,g),d+=4,d+=2,h.buffer},r._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},r._writeHeader=function(e,t,n,i,o,s){var a=r.bin.writeUint,l=r.bin.writeUshort,c=i.file;return a(e,t,0==o?67324752:33639248),t+=4,1==o&&(t+=2),l(e,t,20),l(e,t+=2,0),l(e,t+=2,i.cpr?8:0),a(e,t+=2,0),a(e,t+=4,i.crc),a(e,t+=4,c.length),a(e,t+=4,i.usize),l(e,t+=4,r.bin.sizeUTF8(n)),l(e,t+=2,0),t+=2,1==o&&(t+=2,t+=2,a(e,t+=6,s),t+=4),t+=r.bin.writeUTF8(e,t,n),0==o&&(e.set(c,t),t+=c.length),t},r.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,n,i){for(var o=0;o<i;o++)e=r.crc.table[255&(e^t[n+o])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^r.crc.update(4294967295,e,t,n)}},r.adler=function(e,t,n){for(var r=1,i=0,o=t,s=t+n;o<s;){for(var a=Math.min(o+5552,s);o<a;)i+=r+=e[o++];r%=65521,i%=65521}return i<<16|r},r.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,n){for(var i,o="",s=0;s<n;s++)o+="%"+r.bin.pad(e[t+s].toString(16));try{i=decodeURIComponent(o)}catch(i){return r.bin.readASCII(e,t,n)}return i},writeUTF8:function(e,t,n){for(var r=n.length,i=0,o=0;o<r;o++){var s=n.charCodeAt(o);if(0==(4294967168&s))e[t+i]=s,i++;else if(0==(4294965248&s))e[t+i]=192|s>>6,e[t+i+1]=128|s>>0&63,i+=2;else if(0==(4294901760&s))e[t+i]=224|s>>12,e[t+i+1]=128|s>>6&63,e[t+i+2]=128|s>>0&63,i+=3;else{if(0!=(4292870144&s))throw"e";e[t+i]=240|s>>18,e[t+i+1]=128|s>>12&63,e[t+i+2]=128|s>>6&63,e[t+i+3]=128|s>>0&63,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},r.F={},r.F.deflateRaw=function(e,t,n,i){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],s=r.F.U,a=r.F._goodIndex;r.F._hash;var l=r.F._putsE,c=0,u=n<<3,h=0,d=e.length;if(0==i){for(;c<d;)l(t,u,c+(S=Math.min(65535,d-c))==d?1:0),u=r.F._copyExact(e,c,S,t,u+8),c+=S;return u>>>3}var f=s.lits,p=s.strt,m=s.prev,g=0,v=0,y=0,_=0,b=0,w=0;for(d>2&&(p[w=r.F._hash(e,0)]=0),c=0;c<d;c++){if(b=w,c+1<d-2){w=r.F._hash(e,c+1);var x=c+1&32767;m[x]=p[w],p[w]=x}if(h<=c){(g>14e3||v>26697)&&d-c>100&&(h<c&&(f[g]=c-h,g+=2,h=c),u=r.F._writeBlock(c==d-1||h==d?1:0,f,g,_,e,y,c-y,t,u),g=v=_=0,y=c);var E=0;c<d-2&&(E=r.F._bestMatch(e,c,m,b,Math.min(o[2],d-c),o[3]));var S=E>>>16,T=65535&E;if(0!=E){T=65535&E;var C=a(S=E>>>16,s.of0);s.lhst[257+C]++;var A=a(T,s.df0);s.dhst[A]++,_+=s.exb[C]+s.dxb[A],f[g]=S<<23|c-h,f[g+1]=T<<16|C<<8|A,g+=2,h=c+S}else s.lhst[e[c]]++;v++}}for(y==c&&0!=e.length||(h<c&&(f[g]=c-h,g+=2,h=c),u=r.F._writeBlock(1,f,g,_,e,y,c-y,t,u),g=0,v=0,g=v=_=0,y=c);0!=(7&u);)u++;return u>>>3},r.F._bestMatch=function(e,t,n,i,o,s){var a=32767&t,l=n[a],c=a-l+32768&32767;if(l==a||i!=r.F._hash(e,t-c))return 0;for(var u=0,h=0,d=Math.min(32767,t);c<=d&&0!=--s&&l!=a;){if(0==u||e[t+u]==e[t+u-c]){var f=r.F._howLong(e,t,c);if(f>u){if(h=c,(u=f)>=o)break;c+2<f&&(f=c+2);for(var p=0,m=0;m<f-2;m++){var g=t-c+m+32768&32767,v=g-n[g]+32768&32767;v>p&&(p=v,l=g)}}}c+=(a=l)-(l=n[a])+32768&32767}return u<<16|h},r.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},r.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(e,t,n,i,o,s,a,l,c){var u,h,d,f,p,m,g,v,y,_=r.F.U,b=r.F._putsF,w=r.F._putsE;_.lhst[256]++,h=(u=r.F.getTrees())[0],d=u[1],f=u[2],p=u[3],m=u[4],g=u[5],v=u[6],y=u[7];var x=32+(0==(c+3&7)?0:8-(c+3&7))+(a<<3),E=i+r.F.contSize(_.fltree,_.lhst)+r.F.contSize(_.fdtree,_.dhst),S=i+r.F.contSize(_.ltree,_.lhst)+r.F.contSize(_.dtree,_.dhst);S+=14+3*g+r.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var T=0;T<286;T++)_.lhst[T]=0;for(T=0;T<30;T++)_.dhst[T]=0;for(T=0;T<19;T++)_.ihst[T]=0;var C=x<E&&x<S?0:E<S?1:2;if(b(l,c,e),b(l,c+1,C),c+=3,0==C){for(;0!=(7&c);)c++;c=r.F._copyExact(o,s,a,l,c)}else{var A,k;if(1==C&&(A=_.fltree,k=_.fdtree),2==C){r.F.makeCodes(_.ltree,h),r.F.revCodes(_.ltree,h),r.F.makeCodes(_.dtree,d),r.F.revCodes(_.dtree,d),r.F.makeCodes(_.itree,f),r.F.revCodes(_.itree,f),A=_.ltree,k=_.dtree,w(l,c,p-257),w(l,c+=5,m-1),w(l,c+=5,g-4),c+=4;for(var P=0;P<g;P++)w(l,c+3*P,_.itree[1+(_.ordr[P]<<1)]);c+=3*g,c=r.F._codeTiny(v,_.itree,l,c),c=r.F._codeTiny(y,_.itree,l,c)}for(var O=s,I=0;I<n;I+=2){for(var R=t[I],N=R>>>23,L=O+(8388607&R);O<L;)c=r.F._writeLit(o[O++],A,l,c);if(0!=N){var D=t[I+1],M=D>>16,j=D>>8&255,F=255&D;w(l,c=r.F._writeLit(257+j,A,l,c),N-_.of0[j]),c+=_.exb[j],b(l,c=r.F._writeLit(F,k,l,c),M-_.df0[F]),c+=_.dxb[F],O+=N}}c=r.F._writeLit(256,A,l,c)}return c},r.F._copyExact=function(e,t,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(e.buffer,t,n),o),i+(n+4<<3)},r.F.getTrees=function(){for(var e=r.F.U,t=r.F._hufTree(e.lhst,e.ltree,15),n=r.F._hufTree(e.dhst,e.dtree,15),i=[],o=r.F._lenCodes(e.ltree,i),s=[],a=r.F._lenCodes(e.dtree,s),l=0;l<i.length;l+=2)e.ihst[i[l]]++;for(l=0;l<s.length;l+=2)e.ihst[s[l]]++;for(var c=r.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[t,n,c,o,a,u,i,s]},r.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},r.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},r.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},r.F._codeTiny=function(e,t,n,i){for(var o=0;o<e.length;o+=2){var s=e[o],a=e[o+1];i=r.F._writeLit(s,t,n,i);var l=16==s?2:17==s?3:7;s>15&&(r.F._putsE(n,i,a,l),i+=l)}return i},r.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],o=r+3<n?e[r+3]:-1,s=r+5<n?e[r+5]:-1,a=0==r?-1:e[r-1];if(0==i&&o==i&&s==i){for(var l=r+5;l+2<n&&e[l+2]==i;)l+=2;(c=Math.min(l+1-r>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),r+=2*c-2}else if(i==a&&o==i&&s==i){for(l=r+5;l+2<n&&e[l+2]==i;)l+=2;var c=Math.min(l+1-r>>>1,6);t.push(16,c-3),r+=2*c-2}else t.push(i,0)}return n>>>1},r.F._hufTree=function(e,t,n){var i=[],o=e.length,s=t.length,a=0;for(a=0;a<s;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<o;a++)0!=e[a]&&i.push({lit:a,f:e[a]});var l=i.length,c=i.slice(0);if(0==l)return 0;if(1==l){var u=i[0].lit;return c=0==u?1:0,t[1+(u<<1)]=1,t[1+(c<<1)]=1,1}i.sort((function(e,t){return e.f-t.f}));var h=i[0],d=i[1],f=0,p=1,m=2;for(i[0]={lit:-1,f:h.f+d.f,l:h,r:d,d:0};p!=l-1;)h=f!=p&&(m==l||i[f].f<i[m].f)?i[f++]:i[m++],d=f!=p&&(m==l||i[f].f<i[m].f)?i[f++]:i[m++],i[p++]={lit:-1,f:h.f+d.f,l:h,r:d};var g=r.F.setDepth(i[p-1],0);for(g>n&&(r.F.restrictDepth(c,n,g),g=n),a=0;a<l;a++)t[1+(c[a].lit<<1)]=c[a].d;return g},r.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(r.F.setDepth(e.l,t+1),r.F.setDepth(e.r,t+1))},r.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,o=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var s=e[r].d;e[r].d=t,o+=i-(1<<n-s)}for(o>>>=n-t;o>0;)(s=e[r].d)<t?(e[r].d++,o-=1<<t-s-1):r++;for(;r>=0;r--)e[r].d==t&&o<0&&(e[r].d--,o++);0!=o&&console.log("debt left")},r.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},r.F._writeLit=function(e,t,n,i){return r.F._putsF(n,i,t[e<<1]),i+t[1+(e<<1)]},r.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var i=r.F,o=i._bitsF,s=i._bitsE,a=i._decodeTiny,l=i.makeCodes,c=i.codes2map,u=i._get17,h=i.U,d=null==t;d&&(t=new n(e.length>>>2<<3));for(var f,p,m=0,g=0,v=0,y=0,_=0,b=0,w=0,x=0,E=0;0==m;)if(m=o(e,E,1),g=o(e,E+1,2),E+=3,0!=g){if(d&&(t=r.F._check(t,x+(1<<17))),1==g&&(f=h.flmap,p=h.fdmap,b=511,w=31),2==g){v=s(e,E,5)+257,y=s(e,E+5,5)+1,_=s(e,E+10,4)+4,E+=14;for(var S=0;S<38;S+=2)h.itree[S]=0,h.itree[S+1]=0;var T=1;for(S=0;S<_;S++){var C=s(e,E+3*S,3);h.itree[1+(h.ordr[S]<<1)]=C,C>T&&(T=C)}E+=3*_,l(h.itree,T),c(h.itree,T,h.imap),f=h.lmap,p=h.dmap,E=a(h.imap,(1<<T)-1,v+y,e,E,h.ttree);var A=i._copyOut(h.ttree,0,v,h.ltree);b=(1<<A)-1;var k=i._copyOut(h.ttree,v,y,h.dtree);w=(1<<k)-1,l(h.ltree,A),c(h.ltree,A,f),l(h.dtree,k),c(h.dtree,k,p)}for(;;){var P=f[u(e,E)&b];E+=15&P;var O=P>>>4;if(O>>>8==0)t[x++]=O;else{if(256==O)break;var I=x+O-254;if(O>264){var R=h.ldef[O-257];I=x+(R>>>3)+s(e,E,7&R),E+=7&R}var N=p[u(e,E)&w];E+=15&N;var L=N>>>4,D=h.ddef[L],M=(D>>>4)+o(e,E,15&D);for(E+=15&D,d&&(t=r.F._check(t,x+(1<<17)));x<I;)t[x]=t[x++-M],t[x]=t[x++-M],t[x]=t[x++-M],t[x]=t[x++-M];x=I}}}else{0!=(7&E)&&(E+=8-(7&E));var j=4+(E>>>3),F=e[j-4]|e[j-3]<<8;d&&(t=r.F._check(t,x+F)),t.set(new n(e.buffer,e.byteOffset+j,F),x),E=j+F<<3,x+=F}return t.length==x?t:t.slice(0,x)},r.F._check=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(Math.max(n<<1,t));return r.set(e,0),r},r.F._decodeTiny=function(e,t,n,i,o,s){for(var a=r.F._bitsE,l=r.F._get17,c=0;c<n;){var u=e[l(i,o)&t];o+=15&u;var h=u>>>4;if(h<=15)s[c]=h,c++;else{var d=0,f=0;16==h?(f=3+a(i,o,2),o+=2,d=s[c-1]):17==h?(f=3+a(i,o,3),o+=3):18==h&&(f=11+a(i,o,7),o+=7);for(var p=c+f;c<p;)s[c]=d,c++}}return o},r.F._copyOut=function(e,t,n,r){for(var i=0,o=0,s=r.length>>>1;o<n;){var a=e[o+t];r[o<<1]=0,r[1+(o<<1)]=a,a>i&&(i=a),o++}for(;o<s;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},r.F.makeCodes=function(e,t){for(var n,i,o,s,a=r.F.U,l=e.length,c=a.bl_count,u=0;u<=t;u++)c[u]=0;for(u=1;u<l;u+=2)c[e[u]]++;var h=a.next_code;for(n=0,c[0]=0,i=1;i<=t;i++)n=n+c[i-1]<<1,h[i]=n;for(o=0;o<l;o+=2)0!=(s=e[o+1])&&(e[o]=h[s],h[s]++)},r.F.codes2map=function(e,t,n){for(var i=e.length,o=r.F.U.rev15,s=0;s<i;s+=2)if(0!=e[s+1])for(var a=s>>1,l=e[s+1],c=a<<4|l,u=t-l,h=e[s]<<u,d=h+(1<<u);h!=d;)n[o[h]>>>15-t]=c,h++},r.F.revCodes=function(e,t){for(var n=r.F.U.rev15,i=15-t,o=0;o<e.length;o+=2){var s=e[o]<<t-e[o+1];e[o]=n[s]>>>i}},r.F._putsE=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},r.F._putsF=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},r.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},r.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},r.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},r.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},r.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var e=r.F.U,t=0;t<32768;t++){var n=t;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,e.rev15[t]=(n>>>16|n<<16)>>>17}function i(e,t,n){for(;0!=t--;)e.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),r.F.makeCodes(e.fltree,9),r.F.codes2map(e.fltree,9,e.flmap),r.F.revCodes(e.fltree,9),i(e.fdtree,32,5),r.F.makeCodes(e.fdtree,5),r.F.codes2map(e.fdtree,5,e.fdmap),r.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}()}();var UV=function(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}({__proto__:null,default:FV},[FV]);const BV=function(){var e={nextZero(e,t){for(;0!=e[t];)t++;return t},readUshort:(e,t)=>e[t]<<8|e[t+1],writeUshort(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUint:(e,t)=>16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3]),writeUint(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readASCII(e,t,n){let r="";for(let i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII(e,t,n){for(let r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},readBytes(e,t,n){const r=[];for(let i=0;i<n;i++)r.push(e[t+i]);return r},pad:e=>e.length<2?"0".concat(e):e,readUTF8(t,n,r){let i,o="";for(let s=0;s<r;s++)o+="%".concat(e.pad(t[n+s].toString(16)));try{i=decodeURIComponent(o)}catch(i){return e.readASCII(t,n,r)}return i}};function t(t,n,r,i){const s=n*r,a=o(i),l=Math.ceil(n*a/8),c=new Uint8Array(4*s),u=new Uint32Array(c.buffer),{ctype:h}=i,{depth:d}=i,f=e.readUshort;if(6==h){const e=s<<2;if(8==d)for(var p=0;p<e;p+=4)c[p]=t[p],c[p+1]=t[p+1],c[p+2]=t[p+2],c[p+3]=t[p+3];if(16==d)for(p=0;p<e;p++)c[p]=t[p<<1]}else if(2==h){const e=i.tabs.tRNS;if(null==e){if(8==d)for(p=0;p<s;p++){var m=3*p;u[p]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m]}if(16==d)for(p=0;p<s;p++)m=6*p,u[p]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m]}else{var g=e[0];const n=e[1],r=e[2];if(8==d)for(p=0;p<s;p++){var v=p<<2;m=3*p,u[p]=255<<24|t[m+2]<<16|t[m+1]<<8|t[m],t[m]==g&&t[m+1]==n&&t[m+2]==r&&(c[v+3]=0)}if(16==d)for(p=0;p<s;p++)v=p<<2,m=6*p,u[p]=255<<24|t[m+4]<<16|t[m+2]<<8|t[m],f(t,m)==g&&f(t,m+2)==n&&f(t,m+4)==r&&(c[v+3]=0)}}else if(3==h){const e=i.tabs.PLTE,o=i.tabs.tRNS,a=o?o.length:0;if(1==d)for(var y=0;y<r;y++){var _=y*l,b=y*n;for(p=0;p<n;p++){v=b+p<<2;var w=3*(x=t[_+(p>>3)]>>7-((7&p)<<0)&1);c[v]=e[w],c[v+1]=e[w+1],c[v+2]=e[w+2],c[v+3]=x<a?o[x]:255}}if(2==d)for(y=0;y<r;y++)for(_=y*l,b=y*n,p=0;p<n;p++)v=b+p<<2,w=3*(x=t[_+(p>>2)]>>6-((3&p)<<1)&3),c[v]=e[w],c[v+1]=e[w+1],c[v+2]=e[w+2],c[v+3]=x<a?o[x]:255;if(4==d)for(y=0;y<r;y++)for(_=y*l,b=y*n,p=0;p<n;p++)v=b+p<<2,w=3*(x=t[_+(p>>1)]>>4-((1&p)<<2)&15),c[v]=e[w],c[v+1]=e[w+1],c[v+2]=e[w+2],c[v+3]=x<a?o[x]:255;if(8==d)for(p=0;p<s;p++){var x;v=p<<2,w=3*(x=t[p]),c[v]=e[w],c[v+1]=e[w+1],c[v+2]=e[w+2],c[v+3]=x<a?o[x]:255}}else if(4==h){if(8==d)for(p=0;p<s;p++){v=p<<2;var E=t[S=p<<1];c[v]=E,c[v+1]=E,c[v+2]=E,c[v+3]=t[S+1]}if(16==d)for(p=0;p<s;p++){var S;v=p<<2,E=t[S=p<<2],c[v]=E,c[v+1]=E,c[v+2]=E,c[v+3]=t[S+2]}}else if(0==h)for(g=i.tabs.tRNS?i.tabs.tRNS:-1,y=0;y<r;y++){const e=y*l,r=y*n;if(1==d)for(var T=0;T<n;T++){var C=(E=255*(t[e+(T>>>3)]>>>7-(7&T)&1))==255*g?0:255;u[r+T]=C<<24|E<<16|E<<8|E}else if(2==d)for(T=0;T<n;T++)C=(E=85*(t[e+(T>>>2)]>>>6-((3&T)<<1)&3))==85*g?0:255,u[r+T]=C<<24|E<<16|E<<8|E;else if(4==d)for(T=0;T<n;T++)C=(E=17*(t[e+(T>>>1)]>>>4-((1&T)<<2)&15))==17*g?0:255,u[r+T]=C<<24|E<<16|E<<8|E;else if(8==d)for(T=0;T<n;T++)C=(E=t[e+T])==g?0:255,u[r+T]=C<<24|E<<16|E<<8|E;else if(16==d)for(T=0;T<n;T++)E=t[e+(T<<1)],C=f(t,e+(T<<1))==g?0:255,u[r+T]=C<<24|E<<16|E<<8|E}return c}function n(e,t,n,a){const l=o(e),c=Math.ceil(n*l/8),u=new Uint8Array((c+1+e.interlace)*a);return t=e.tabs.CgBI?i(t,u):r(t,u),0==e.interlace?t=s(t,e,0,n,a):1==e.interlace&&(t=function(e,t){const n=t.width,r=t.height,i=o(t),a=i>>3,l=Math.ceil(n*i/8),c=new Uint8Array(r*l);let u=0;const h=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],f=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1];let m=0;for(;m<7;){const o=f[m],v=p[m];let y=0,_=0,b=h[m];for(;b<r;)b+=o,_++;let w=d[m];for(;w<n;)w+=v,y++;const x=Math.ceil(y*i/8);s(e,t,u,y,_);let E=0,S=h[m];for(;S<r;){let t=d[m],r=u+E*x<<3;for(;t<n;){var g;if(1==i&&(g=(g=e[r>>3])>>7-(7&r)&1,c[S*l+(t>>3)]|=g<<7-((7&t)<<0)),2==i&&(g=(g=e[r>>3])>>6-(7&r)&3,c[S*l+(t>>2)]|=g<<6-((3&t)<<1)),4==i&&(g=(g=e[r>>3])>>4-(7&r)&15,c[S*l+(t>>1)]|=g<<4-((1&t)<<2)),i>=8){const n=S*l+t*a;for(let t=0;t<a;t++)c[n+t]=e[(r>>3)+t]}r+=i,t+=v}E++,S+=o}y*_!=0&&(u+=_*(1+x)),m+=1}return c}(t,e)),t}function r(e,t){return i(new Uint8Array(e.buffer,2,e.length-6),t)}var i=function(){const e={H:{}};return e.H.N=function(t,n){const r=Uint8Array;let i,o,s=0,a=0,l=0,c=0,u=0,h=0,d=0,f=0,p=0;if(3==t[0]&&0==t[1])return n||new r(0);const m=e.H,g=m.b,v=m.e,y=m.R,_=m.n,b=m.A,w=m.Z,x=m.m,E=null==n;for(E&&(n=new r(t.length>>>2<<5));0==s;)if(s=g(t,p,1),a=g(t,p+1,2),p+=3,0!=a){if(E&&(n=e.H.W(n,f+(1<<17))),1==a&&(i=x.J,o=x.h,h=511,d=31),2==a){l=v(t,p,5)+257,c=v(t,p+5,5)+1,u=v(t,p+10,4)+4,p+=14;let e=1;for(var S=0;S<38;S+=2)x.Q[S]=0,x.Q[S+1]=0;for(S=0;S<u;S++){const n=v(t,p+3*S,3);x.Q[1+(x.X[S]<<1)]=n,n>e&&(e=n)}p+=3*u,_(x.Q,e),b(x.Q,e,x.u),i=x.w,o=x.d,p=y(x.u,(1<<e)-1,l+c,t,p,x.v);const n=m.V(x.v,0,l,x.C);h=(1<<n)-1;const r=m.V(x.v,l,c,x.D);d=(1<<r)-1,_(x.C,n),b(x.C,n,i),_(x.D,r),b(x.D,r,o)}for(;;){const e=i[w(t,p)&h];p+=15&e;const r=e>>>4;if(r>>>8==0)n[f++]=r;else{if(256==r)break;{let e=f+r-254;if(r>264){const n=x.q[r-257];e=f+(n>>>3)+v(t,p,7&n),p+=7&n}const i=o[w(t,p)&d];p+=15&i;const s=i>>>4,a=x.c[s],l=(a>>>4)+g(t,p,15&a);for(p+=15&a;f<e;)n[f]=n[f++-l],n[f]=n[f++-l],n[f]=n[f++-l],n[f]=n[f++-l];f=e}}}}else{0!=(7&p)&&(p+=8-(7&p));const i=4+(p>>>3),o=t[i-4]|t[i-3]<<8;E&&(n=e.H.W(n,f+o)),n.set(new r(t.buffer,t.byteOffset+i,o),f),p=i+o<<3,f+=o}return n.length==f?n:n.slice(0,f)},e.H.W=function(e,t){const n=e.length;if(t<=n)return e;const r=new Uint8Array(n<<1);return r.set(e,0),r},e.H.R=function(t,n,r,i,o,s){const a=e.H.e,l=e.H.Z;let c=0;for(;c<r;){const e=t[l(i,o)&n];o+=15&e;const r=e>>>4;if(r<=15)s[c]=r,c++;else{let e=0,t=0;16==r?(t=3+a(i,o,2),o+=2,e=s[c-1]):17==r?(t=3+a(i,o,3),o+=3):18==r&&(t=11+a(i,o,7),o+=7);const n=c+t;for(;c<n;)s[c]=e,c++}}return o},e.H.V=function(e,t,n,r){let i=0,o=0;const s=r.length>>>1;for(;o<n;){const n=e[o+t];r[o<<1]=0,r[1+(o<<1)]=n,n>i&&(i=n),o++}for(;o<s;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},e.H.n=function(t,n){const r=e.H.m,i=t.length;let o,s,a,l;const c=r.j;for(var u=0;u<=n;u++)c[u]=0;for(u=1;u<i;u+=2)c[t[u]]++;const h=r.K;for(o=0,c[0]=0,s=1;s<=n;s++)o=o+c[s-1]<<1,h[s]=o;for(a=0;a<i;a+=2)l=t[a+1],0!=l&&(t[a]=h[l],h[l]++)},e.H.A=function(t,n,r){const i=t.length,o=e.H.m.r;for(let e=0;e<i;e+=2)if(0!=t[e+1]){const i=e>>1,s=t[e+1],a=i<<4|s,l=n-s;let c=t[e]<<l;const u=c+(1<<l);for(;c!=u;)r[o[c]>>>15-n]=a,c++}},e.H.l=function(t,n){const r=e.H.m.r,i=15-n;for(let e=0;e<t.length;e+=2){const o=t[e]<<n-t[e+1];t[e]=r[o]>>>i}},e.H.M=function(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},e.H.I=function(e,t,n){n<<=7&t;const r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},e.H.e=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},e.H.b=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},e.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},e.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},e.H.m=function(){const e=Uint16Array,t=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}}(),function(){const t=e.H.m;for(var n=0;n<32768;n++){let e=n;e=(2863311530&e)>>>1|(1431655765&e)<<1,e=(3435973836&e)>>>2|(858993459&e)<<2,e=(4042322160&e)>>>4|(252645135&e)<<4,e=(4278255360&e)>>>8|(16711935&e)<<8,t.r[n]=(e>>>16|e<<16)>>>17}function r(e,t,n){for(;0!=t--;)e.push(0,n)}for(n=0;n<32;n++)t.q[n]=t.S[n]<<3|t.T[n],t.c[n]=t.p[n]<<4|t.z[n];r(t._,144,8),r(t._,112,9),r(t._,24,7),r(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),r(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),r(t.Q,19,0),r(t.C,286,0),r(t.D,30,0),r(t.v,320,0)}(),e.H.N}();function o(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function s(e,t,n,r,i){let s=o(t);const l=Math.ceil(r*s/8);let c,u;s=Math.ceil(s/8);let h=e[n],d=0;if(h>1&&(e[n]=[0,0,1][h-2]),3==h)for(d=s;d<l;d++)e[d+1]=e[d+1]+(e[d+1-s]>>>1)&255;for(let o=0;o<i;o++)if(c=n+o*l,u=c+o+1,h=e[u-1],d=0,0==h)for(;d<l;d++)e[c+d]=e[u+d];else if(1==h){for(;d<s;d++)e[c+d]=e[u+d];for(;d<l;d++)e[c+d]=e[u+d]+e[c+d-s]}else if(2==h)for(;d<l;d++)e[c+d]=e[u+d]+e[c+d-l];else if(3==h){for(;d<s;d++)e[c+d]=e[u+d]+(e[c+d-l]>>>1);for(;d<l;d++)e[c+d]=e[u+d]+(e[c+d-l]+e[c+d-s]>>>1)}else{for(;d<s;d++)e[c+d]=e[u+d]+a(0,e[c+d-l],0);for(;d<l;d++)e[c+d]=e[u+d]+a(e[c+d-s],e[c+d-l],e[c+d-s-l])}return e}function a(e,t,n){const r=e+t-n,i=r-e,o=r-t,s=r-n;return i*i<=o*o&&i*i<=s*s?e:o*o<=s*s?t:n}function l(t,n,r){r.width=e.readUint(t,n),n+=4,r.height=e.readUint(t,n),n+=4,r.depth=t[n],n++,r.ctype=t[n],n++,r.compress=t[n],n++,r.filter=t[n],n++,r.interlace=t[n],n++}function c(e,t,n,r,i,o,s,a,l){const c=Math.min(t,i),u=Math.min(n,o);let h=0,d=0;for(let w=0;w<u;w++)for(let n=0;n<c;n++)if(s>=0&&a>=0?(h=w*t+n<<2,d=(a+w)*i+s+n<<2):(h=(-a+w)*t-s+n<<2,d=w*i+n<<2),0==l)r[d]=e[h],r[d+1]=e[h+1],r[d+2]=e[h+2],r[d+3]=e[h+3];else if(1==l){var f=e[h+3]*(1/255),p=e[h]*f,m=e[h+1]*f,g=e[h+2]*f,v=r[d+3]*(1/255),y=r[d]*v,_=r[d+1]*v,b=r[d+2]*v;const t=1-f,n=f+v*t,i=0==n?0:1/n;r[d+3]=255*n,r[d+0]=(p+y*t)*i,r[d+1]=(m+_*t)*i,r[d+2]=(g+b*t)*i}else if(2==l)f=e[h+3],p=e[h],m=e[h+1],g=e[h+2],v=r[d+3],y=r[d],_=r[d+1],b=r[d+2],f==v&&p==y&&m==_&&g==b?(r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=0):(r[d]=p,r[d+1]=m,r[d+2]=g,r[d+3]=f);else if(3==l){if(f=e[h+3],p=e[h],m=e[h+1],g=e[h+2],v=r[d+3],y=r[d],_=r[d+1],b=r[d+2],f==v&&p==y&&m==_&&g==b)continue;if(f<220&&v>20)return!1}return!0}return{decode:function(t){const o=new Uint8Array(t);let s=8;const a=e,c=a.readUshort,u=a.readUint,h={tabs:{},frames:[]},d=new Uint8Array(o.length);let f,p=0,m=0;const g=[137,80,78,71,13,10,26,10];for(var v=0;v<8;v++)if(o[v]!=g[v])throw"The input is not a PNG file!";for(;s<o.length;){const t=a.readUint(o,s);s+=4;const g=a.readASCII(o,s,4);if(s+=4,"IHDR"==g)l(o,s,h);else if("iCCP"==g){for(var y=s;0!=o[y];)y++;a.readASCII(o,s,y-s),o[y+1];const n=o.slice(y+2,s+t);let l=null;try{l=r(n)}catch(e){l=i(n)}h.tabs[g]=l}else if("CgBI"==g)h.tabs[g]=o.slice(s,s+4);else if("IDAT"==g){for(v=0;v<t;v++)d[p+v]=o[s+v];p+=t}else if("acTL"==g)h.tabs[g]={num_frames:u(o,s),num_plays:u(o,s+4)},f=new Uint8Array(o.length);else if("fcTL"==g){0!=m&&((S=h.frames[h.frames.length-1]).data=n(h,f.slice(0,m),S.rect.width,S.rect.height),m=0);const e={x:u(o,s+12),y:u(o,s+16),width:u(o,s+4),height:u(o,s+8)};let t=c(o,s+22);t=c(o,s+20)/(0==t?100:t);const r={rect:e,delay:Math.round(1e3*t),dispose:o[s+24],blend:o[s+25]};h.frames.push(r)}else if("fdAT"==g){for(v=0;v<t-4;v++)f[m+v]=o[s+v+4];m+=t-4}else if("pHYs"==g)h.tabs[g]=[a.readUint(o,s),a.readUint(o,s+4),o[s+8]];else if("cHRM"==g)for(h.tabs[g]=[],v=0;v<8;v++)h.tabs[g].push(a.readUint(o,s+4*v));else if("tEXt"==g||"zTXt"==g){null==h.tabs[g]&&(h.tabs[g]={});var _=a.nextZero(o,s),b=a.readASCII(o,s,_-s),w=s+t-_-1;if("tEXt"==g)E=a.readASCII(o,_+1,w);else{var x=r(o.slice(_+2,_+2+w));E=a.readUTF8(x,0,x.length)}h.tabs[g][b]=E}else if("iTXt"==g){null==h.tabs[g]&&(h.tabs[g]={}),_=0,y=s,_=a.nextZero(o,y),b=a.readASCII(o,y,_-y);const e=o[y=_+1];var E;o[y+1],y+=2,_=a.nextZero(o,y),a.readASCII(o,y,_-y),y=_+1,_=a.nextZero(o,y),a.readUTF8(o,y,_-y),w=t-((y=_+1)-s),0==e?E=a.readUTF8(o,y,w):(x=r(o.slice(y,y+w)),E=a.readUTF8(x,0,x.length)),h.tabs[g][b]=E}else if("PLTE"==g)h.tabs[g]=a.readBytes(o,s,t);else if("hIST"==g){const e=h.tabs.PLTE.length/3;for(h.tabs[g]=[],v=0;v<e;v++)h.tabs[g].push(c(o,s+2*v))}else if("tRNS"==g)3==h.ctype?h.tabs[g]=a.readBytes(o,s,t):0==h.ctype?h.tabs[g]=c(o,s):2==h.ctype&&(h.tabs[g]=[c(o,s),c(o,s+2),c(o,s+4)]);else if("gAMA"==g)h.tabs[g]=a.readUint(o,s)/1e5;else if("sRGB"==g)h.tabs[g]=o[s];else if("bKGD"==g)0==h.ctype||4==h.ctype?h.tabs[g]=[c(o,s)]:2==h.ctype||6==h.ctype?h.tabs[g]=[c(o,s),c(o,s+2),c(o,s+4)]:3==h.ctype&&(h.tabs[g]=o[s]);else if("IEND"==g)break;s+=t,a.readUint(o,s),s+=4}var S;return 0!=m&&((S=h.frames[h.frames.length-1]).data=n(h,f.slice(0,m),S.rect.width,S.rect.height)),h.data=n(h,d,h.width,h.height),delete h.compress,delete h.interlace,delete h.filter,h},toRGBA8:function(e){const n=e.width,r=e.height;if(null==e.tabs.acTL)return[t(e.data,n,r,e).buffer];const i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);const o=n*r*4,s=new Uint8Array(o),a=new Uint8Array(o),l=new Uint8Array(o);for(let h=0;h<e.frames.length;h++){const d=e.frames[h],f=d.rect.x,p=d.rect.y,m=d.rect.width,g=d.rect.height,v=t(d.data,m,g,e);if(0!=h)for(var u=0;u<o;u++)l[u]=s[u];if(0==d.blend?c(v,m,g,s,n,r,f,p,0):1==d.blend&&c(v,m,g,s,n,r,f,p,1),i.push(s.buffer.slice(0)),0==d.dispose);else if(1==d.dispose)c(a,m,g,s,n,r,f,p,0);else if(2==d.dispose)for(u=0;u<o;u++)s[u]=l[u]}return i},_paeth:a,_copyTile:c,_bin:e}}();!function(){const{_copyTile:e}=BV,{_bin:t}=BV,n=BV._paeth;var r={table:function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let n=t;for(let e=0;e<8;e++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update(e,t,n,i){for(let o=0;o<i;o++)e=r.table[255&(e^t[n+o])]^e>>>8;return e},crc:(e,t,n)=>4294967295^r.update(4294967295,e,t,n)};function i(e,t,n,r){t[n]+=e[0]*r>>4,t[n+1]+=e[1]*r>>4,t[n+2]+=e[2]*r>>4,t[n+3]+=e[3]*r>>4}function o(e){return Math.max(0,Math.min(255,e))}function s(e,t){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function a(e,t,n,r,a,l,c){null==c&&(c=1);const u=r.length,h=[];for(var d=0;d<u;d++){const e=r[d];h.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(d=0;d<u;d++){let e=4294967295;for(var f=0,p=0;p<u;p++){var m=s(h[d],h[p]);p!=d&&m<e&&(e=m,f=p)}}const g=new Uint32Array(a.buffer),v=new Int16Array(t*n*4),y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<y.length;d++)y[d]=255*((y[d]+.5)/16-.5);for(let b=0;b<n;b++)for(let a=0;a<t;a++){var _;d=4*(b*t+a),2!=c?_=[o(e[d]+v[d]),o(e[d+1]+v[d+1]),o(e[d+2]+v[d+2]),o(e[d+3]+v[d+3])]:(m=y[4*(3&b)+(3&a)],_=[o(e[d]+m),o(e[d+1]+m),o(e[d+2]+m),o(e[d+3]+m)]),f=0;let w=16777215;for(p=0;p<u;p++){const e=s(_,h[p]);e<w&&(w=e,f=p)}const x=h[f],E=[_[0]-x[0],_[1]-x[1],_[2]-x[2],_[3]-x[3]];1==c&&(a!=t-1&&i(E,v,d+4,7),b!=n-1&&(0!=a&&i(E,v,d+4*t-4,3),i(E,v,d+4*t,5),a!=t-1&&i(E,v,d+4*t+4,1))),l[d>>2]=f,g[d>>2]=r[f]}}function l(e,n,i,o,s){null==s&&(s={});const{crc:a}=r,l=t.writeUint,c=t.writeUshort,u=t.writeASCII;let h=8;const d=e.frames.length>1;let f,p=!1,m=33+(d?20:0);if(null!=s.sRGB&&(m+=13),null!=s.pHYs&&(m+=21),null!=s.iCCP&&(f=pako.deflate(s.iCCP),m+=21+f.length+4),3==e.ctype){for(var g=e.plte.length,v=0;v<g;v++)e.plte[v]>>>24!=255&&(p=!0);m+=8+3*g+4+(p?8+1*g+4:0)}for(var y=0;y<e.frames.length;y++)d&&(m+=38),m+=(x=e.frames[y]).cimg.length+12,0!=y&&(m+=4);m+=12;const _=new Uint8Array(m),b=[137,80,78,71,13,10,26,10];for(v=0;v<8;v++)_[v]=b[v];if(l(_,h,13),h+=4,u(_,h,"IHDR"),h+=4,l(_,h,n),h+=4,l(_,h,i),h+=4,_[h]=e.depth,h++,_[h]=e.ctype,h++,_[h]=0,h++,_[h]=0,h++,_[h]=0,h++,l(_,h,a(_,h-17,17)),h+=4,null!=s.sRGB&&(l(_,h,1),h+=4,u(_,h,"sRGB"),h+=4,_[h]=s.sRGB,h++,l(_,h,a(_,h-5,5)),h+=4),null!=s.iCCP){const e=13+f.length;l(_,h,e),h+=4,u(_,h,"iCCP"),h+=4,u(_,h,"ICC profile"),h+=11,h+=2,_.set(f,h),h+=f.length,l(_,h,a(_,h-(e+4),e+4)),h+=4}if(null!=s.pHYs&&(l(_,h,9),h+=4,u(_,h,"pHYs"),h+=4,l(_,h,s.pHYs[0]),h+=4,l(_,h,s.pHYs[1]),h+=4,_[h]=s.pHYs[2],h++,l(_,h,a(_,h-13,13)),h+=4),d&&(l(_,h,8),h+=4,u(_,h,"acTL"),h+=4,l(_,h,e.frames.length),h+=4,l(_,h,null!=s.loop?s.loop:0),h+=4,l(_,h,a(_,h-12,12)),h+=4),3==e.ctype){for(l(_,h,3*(g=e.plte.length)),h+=4,u(_,h,"PLTE"),h+=4,v=0;v<g;v++){const t=3*v,n=e.plte[v],r=255&n,i=n>>>8&255,o=n>>>16&255;_[h+t+0]=r,_[h+t+1]=i,_[h+t+2]=o}if(h+=3*g,l(_,h,a(_,h-3*g-4,3*g+4)),h+=4,p){for(l(_,h,g),h+=4,u(_,h,"tRNS"),h+=4,v=0;v<g;v++)_[h+v]=e.plte[v]>>>24&255;h+=g,l(_,h,a(_,h-g-4,g+4)),h+=4}}let w=0;for(y=0;y<e.frames.length;y++){var x=e.frames[y];d&&(l(_,h,26),h+=4,u(_,h,"fcTL"),h+=4,l(_,h,w++),h+=4,l(_,h,x.rect.width),h+=4,l(_,h,x.rect.height),h+=4,l(_,h,x.rect.x),h+=4,l(_,h,x.rect.y),h+=4,c(_,h,o[y]),h+=2,c(_,h,1e3),h+=2,_[h]=x.dispose,h++,_[h]=x.blend,h++,l(_,h,a(_,h-30,30)),h+=4);const t=x.cimg;l(_,h,(g=t.length)+(0==y?0:4)),h+=4;const n=h;u(_,h,0==y?"IDAT":"fdAT"),h+=4,0!=y&&(l(_,h,w++),h+=4),_.set(t,h),h+=g,l(_,h,a(_,n,h-n)),h+=4}return l(_,h,0),h+=4,u(_,h,"IEND"),h+=4,l(_,h,a(_,h-4,4)),h+=4,_.buffer}function c(e,t,n){for(let r=0;r<e.frames.length;r++){const i=e.frames[r];i.rect.width;const o=i.rect.height,s=new Uint8Array(o*i.bpl+o);i.cimg=f(i.img,o,i.bpp,i.bpl,s,t,n)}}function u(t,n,r,i,o){const s=o[0],l=o[1],c=o[2],u=o[3],f=o[4],p=o[5];let g=6,v=8,y=255;for(var _=0;_<t.length;_++){const e=new Uint8Array(t[_]);for(var b=e.length,w=0;w<b;w+=4)y&=e[w+3]}const x=255!=y,E=function(t,n,r,i,o,s){const a=[];for(var l=0;l<t.length;l++){const h=new Uint8Array(t[l]),f=new Uint32Array(h.buffer);var c;let m=0,g=0,v=n,y=r,_=i?1:0;if(0!=l){const b=s||i||1==l||0!=a[l-2].dispose?1:2;let w=0,x=1e9;for(let e=0;e<b;e++){var u=new Uint8Array(t[l-1-e]);const i=new Uint32Array(t[l-1-e]);let s=n,a=r,c=-1,h=-1;for(let e=0;e<r;e++)for(let t=0;t<n;t++)f[p=e*n+t]!=i[p]&&(t<s&&(s=t),t>c&&(c=t),e<a&&(a=e),e>h&&(h=e));-1==c&&(s=a=c=h=0),o&&(1==(1&s)&&s--,1==(1&a)&&a--);const d=(c-s+1)*(h-a+1);d<x&&(x=d,w=e,m=s,g=a,v=c-s+1,y=h-a+1)}u=new Uint8Array(t[l-1-w]),1==w&&(a[l-1].dispose=2),c=new Uint8Array(v*y*4),e(u,n,r,c,v,y,-m,-g,0),_=e(h,n,r,c,v,y,-m,-g,3)?1:0,1==_?d(h,n,r,c,{x:m,y:g,width:v,height:y}):e(h,n,r,c,v,y,-m,-g,0)}else c=h.slice(0);a.push({rect:{x:m,y:g,width:v,height:y},img:c,blend:_,dispose:0})}if(i)for(l=0;l<a.length;l++){if(1==(m=a[l]).blend)continue;const e=m.rect,i=a[l-1].rect,s=Math.min(e.x,i.x),c=Math.min(e.y,i.y),u={x:s,y:c,width:Math.max(e.x+e.width,i.x+i.width)-s,height:Math.max(e.y+e.height,i.y+i.height)-c};a[l-1].dispose=1,l-1!=0&&h(t,n,r,a,l-1,u,o),h(t,n,r,a,l,u,o)}let f=0;if(1!=t.length)for(var p=0;p<a.length;p++){var m;f+=(m=a[p]).rect.width*m.rect.height}return a}(t,n,r,s,l,c),S={},T=[],C=[];if(0!=i){const e=[];for(w=0;w<E.length;w++)e.push(E[w].img.buffer);const t=function(e){let t=0;for(var n=0;n<e.length;n++)t+=e[n].byteLength;const r=new Uint8Array(t);let i=0;for(n=0;n<e.length;n++){const t=new Uint8Array(e[n]),o=t.length;for(let e=0;e<o;e+=4){let n=t[e],o=t[e+1],s=t[e+2];const a=t[e+3];0==a&&(n=o=s=0),r[i+e]=n,r[i+e+1]=o,r[i+e+2]=s,r[i+e+3]=a}i+=o}return r.buffer}(e),n=m(t,i);for(w=0;w<n.plte.length;w++)T.push(n.plte[w].est.rgba);let r=0;for(w=0;w<E.length;w++){const e=(k=E[w]).img.length;var A=new Uint8Array(n.inds.buffer,r>>2,e>>2);C.push(A);const t=new Uint8Array(n.abuf,r,e);p&&a(k.img,k.rect.width,k.rect.height,T,t,A),k.img.set(t),r+=e}}else for(_=0;_<E.length;_++){var k=E[_];const e=new Uint32Array(k.img.buffer);var P=k.rect.width;for(b=e.length,A=new Uint8Array(b),C.push(A),w=0;w<b;w++){const t=e[w];if(0!=w&&t==e[w-1])A[w]=A[w-1];else if(w>P&&t==e[w-P])A[w]=A[w-P];else{let e=S[t];if(null==e&&(S[t]=e=T.length,T.push(t),T.length>=300))break;A[w]=e}}}const O=T.length;for(O<=256&&0==f&&(v=O<=2?1:O<=4?2:O<=16?4:8,v=Math.max(v,u)),_=0;_<E.length;_++){(k=E[_]).rect.x,k.rect.y,P=k.rect.width;const e=k.rect.height;let t=k.img;new Uint32Array(t.buffer);let n=4*P,r=4;if(O<=256&&0==f){n=Math.ceil(v*P/8);var I=new Uint8Array(n*e);const i=C[_];for(let t=0;t<e;t++){w=t*n;const e=t*P;if(8==v)for(var R=0;R<P;R++)I[w+R]=i[e+R];else if(4==v)for(R=0;R<P;R++)I[w+(R>>1)]|=i[e+R]<<4-4*(1&R);else if(2==v)for(R=0;R<P;R++)I[w+(R>>2)]|=i[e+R]<<6-2*(3&R);else if(1==v)for(R=0;R<P;R++)I[w+(R>>3)]|=i[e+R]<<7-1*(7&R)}t=I,g=3,r=1}else if(0==x&&1==E.length){I=new Uint8Array(P*e*3);const i=P*e;for(w=0;w<i;w++){const e=3*w,n=4*w;I[e]=t[n],I[e+1]=t[n+1],I[e+2]=t[n+2]}t=I,g=2,r=3,n=3*P}k.img=t,k.bpl=n,k.bpp=r}return{ctype:g,depth:v,plte:T,frames:E}}function h(t,n,r,i,o,s,a){const l=Uint8Array,c=Uint32Array,u=new l(t[o-1]),h=new c(t[o-1]),f=o+1<t.length?new l(t[o+1]):null,p=new l(t[o]),m=new c(p.buffer);let g=n,v=r,y=-1,_=-1;for(let e=0;e<s.height;e++)for(let t=0;t<s.width;t++){const r=s.x+t,a=s.y+e,l=a*n+r,c=m[l];0==c||0==i[o-1].dispose&&h[l]==c&&(null==f||0!=f[4*l+3])||(r<g&&(g=r),r>y&&(y=r),a<v&&(v=a),a>_&&(_=a))}-1==y&&(g=v=y=_=0),a&&(1==(1&g)&&g--,1==(1&v)&&v--),s={x:g,y:v,width:y-g+1,height:_-v+1};const b=i[o];b.rect=s,b.blend=1,b.img=new Uint8Array(s.width*s.height*4),0==i[o-1].dispose?(e(u,n,r,b.img,s.width,s.height,-s.x,-s.y,0),d(p,n,r,b.img,s)):e(p,n,r,b.img,s.width,s.height,-s.x,-s.y,0)}function d(t,n,r,i,o){e(t,n,r,i,o.width,o.height,-o.x,-o.y,2)}function f(e,t,n,r,i,o,s){const a=[];let l,c=[0,1,2,3,4];-1!=o?c=[o]:(t*r>5e5||1==n)&&(c=[0]),s&&(l={level:0});const u=UV;for(var h=0;h<c.length;h++){for(let o=0;o<t;o++)p(i,e,o,r,n,c[h]);a.push(u.deflate(i,l))}let d,f=1e9;for(h=0;h<a.length;h++)a[h].length<f&&(d=h,f=a[h].length);return a[d]}function p(e,t,r,i,o,s){const a=r*i;let l=a+r;if(e[l]=s,l++,0==s)if(i<500)for(var c=0;c<i;c++)e[l+c]=t[a+c];else e.set(new Uint8Array(t.buffer,a,i),l);else if(1==s){for(c=0;c<o;c++)e[l+c]=t[a+c];for(c=o;c<i;c++)e[l+c]=t[a+c]-t[a+c-o]+256&255}else if(0==r){for(c=0;c<o;c++)e[l+c]=t[a+c];if(2==s)for(c=o;c<i;c++)e[l+c]=t[a+c];if(3==s)for(c=o;c<i;c++)e[l+c]=t[a+c]-(t[a+c-o]>>1)+256&255;if(4==s)for(c=o;c<i;c++)e[l+c]=t[a+c]-n(t[a+c-o],0,0)+256&255}else{if(2==s)for(c=0;c<i;c++)e[l+c]=t[a+c]+256-t[a+c-i]&255;if(3==s){for(c=0;c<o;c++)e[l+c]=t[a+c]+256-(t[a+c-i]>>1)&255;for(c=o;c<i;c++)e[l+c]=t[a+c]+256-(t[a+c-i]+t[a+c-o]>>1)&255}if(4==s){for(c=0;c<o;c++)e[l+c]=t[a+c]+256-n(0,t[a+c-i],0)&255;for(c=o;c<i;c++)e[l+c]=t[a+c]+256-n(t[a+c-o],t[a+c-i],t[a+c-o-i])&255}}}function m(e,t){const n=new Uint8Array(e),r=n.slice(0),i=new Uint32Array(r.buffer),o=g(r,t),s=o[0],a=o[1],l=n.length,c=new Uint8Array(l>>2);let u;if(n.length<2e7)for(var h=0;h<l;h+=4)u=v(s,d=n[h]*(1/255),f=n[h+1]*(1/255),p=n[h+2]*(1/255),m=n[h+3]*(1/255)),c[h>>2]=u.ind,i[h>>2]=u.est.rgba;else for(h=0;h<l;h+=4){var d=n[h]*(1/255),f=n[h+1]*(1/255),p=n[h+2]*(1/255),m=n[h+3]*(1/255);for(u=s;u.left;)u=y(u.est,d,f,p,m)<=0?u.left:u.right;c[h>>2]=u.ind,i[h>>2]=u.est.rgba}return{abuf:r.buffer,inds:c,plte:a}}function g(e,t,n){null==n&&(n=1e-4);const r=new Uint32Array(e.buffer),i={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=w(e,i.i0,i.i1),i.est=x(i.bst);const o=[i];for(;o.length<t;){let t=0,i=0;for(var s=0;s<o.length;s++)o[s].est.L>t&&(t=o[s].est.L,i=s);if(t<n)break;const a=o[i],l=_(e,r,a.i0,a.i1,a.est.e,a.est.eMq255);if(a.i0>=l||a.i1<=l){a.est.L=0;continue}const c={i0:a.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};c.bst=w(e,c.i0,c.i1),c.est=x(c.bst);const u={i0:l,i1:a.i1,bst:null,est:null,tdst:0,left:null,right:null};for(u.bst={R:[],m:[],N:a.bst.N-c.bst.N},s=0;s<16;s++)u.bst.R[s]=a.bst.R[s]-c.bst.R[s];for(s=0;s<4;s++)u.bst.m[s]=a.bst.m[s]-c.bst.m[s];u.est=x(u.bst),a.left=c,a.right=u,o[i]=c,o.push(u)}for(o.sort(((e,t)=>t.bst.N-e.bst.N)),s=0;s<o.length;s++)o[s].ind=s;return[i,o]}function v(e,t,n,r,i){if(null==e.left)return e.tdst=function(e,t,n,r,i){const o=t-e[0],s=n-e[1],a=r-e[2],l=i-e[3];return o*o+s*s+a*a+l*l}(e.est.q,t,n,r,i),e;const o=y(e.est,t,n,r,i);let s=e.left,a=e.right;o>0&&(s=e.right,a=e.left);const l=v(s,t,n,r,i);if(l.tdst<=o*o)return l;const c=v(a,t,n,r,i);return c.tdst<l.tdst?c:l}function y(e,t,n,r,i){const{e:o}=e;return o[0]*t+o[1]*n+o[2]*r+o[3]*i-e.eMq}function _(e,t,n,r,i,o){for(r-=4;n<r;){for(;b(e,n,i)<=o;)n+=4;for(;b(e,r,i)>o;)r-=4;if(n>=r)break;const s=t[n>>2];t[n>>2]=t[r>>2],t[r>>2]=s,n+=4,r-=4}for(;b(e,n,i)>o;)n-=4;return n+4}function b(e,t,n){return e[t]*n[0]+e[t+1]*n[1]+e[t+2]*n[2]+e[t+3]*n[3]}function w(e,t,n){const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],o=n-t>>2;for(let s=t;s<n;s+=4){const t=e[s]*(1/255),n=e[s+1]*(1/255),o=e[s+2]*(1/255),a=e[s+3]*(1/255);i[0]+=t,i[1]+=n,i[2]+=o,i[3]+=a,r[0]+=t*t,r[1]+=t*n,r[2]+=t*o,r[3]+=t*a,r[5]+=n*n,r[6]+=n*o,r[7]+=n*a,r[10]+=o*o,r[11]+=o*a,r[15]+=a*a}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:o}}function x(e){const{R:t}=e,{m:n}=e,{N:r}=e,i=n[0],o=n[1],s=n[2],a=n[3],l=0==r?0:1/r,c=[t[0]-i*i*l,t[1]-i*o*l,t[2]-i*s*l,t[3]-i*a*l,t[4]-o*i*l,t[5]-o*o*l,t[6]-o*s*l,t[7]-o*a*l,t[8]-s*i*l,t[9]-s*o*l,t[10]-s*s*l,t[11]-s*a*l,t[12]-a*i*l,t[13]-a*o*l,t[14]-a*s*l,t[15]-a*a*l],u=c,h=E;let d=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,p=0;if(0!=r)for(let g=0;g<16&&(d=h.multVec(u,d),p=Math.sqrt(h.dot(d,d)),d=h.sml(1/p,d),!(0!=g&&Math.abs(p-f)<1e-9));g++)f=p;const m=[i*l,o*l,s*l,a*l];return{Cov:c,q:m,e:d,L:f,eMq255:h.dot(h.sml(255,m),d),eMq:h.dot(d,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0])<<0)>>>0}}var E={multVec:(e,t)=>[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]],dot:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],sml:(e,t)=>[e*t[0],e*t[1],e*t[2],e*t[3]]};BV.encode=function(e,t,n,r,i,o,s){null==r&&(r=0),null==s&&(s=!1);const a=u(e,t,n,r,[!1,!1,!1,0,s,!1]);return c(a,-1),l(a,t,n,i,o)},BV.encodeLL=function(e,t,n,r,i,o,s,a){const u={ctype:0+(1==r?0:2)+(0==i?0:4),depth:o,frames:[]},h=(r+i)*o,d=h*t;for(let l=0;l<e.length;l++)u.frames.push({rect:{x:0,y:0,width:t,height:n},img:new Uint8Array(e[l]),blend:0,dispose:1,bpp:Math.ceil(h/8),bpl:Math.ceil(d/8)});return c(u,0,!0),l(u,t,n,s,a)},BV.encode.compress=u,BV.encode.dither=a,BV.quantize=m,BV.quantize.getKDtree=g,BV.quantize.getNearest=v}();const VV={toArrayBuffer(e,t){const n=e.width,r=e.height,i=n<<2,o=e.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(o.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),h=new DataView(u),d=1<<20;let f,p,m,g,v=d,y=0,_=0,b=0;function w(e){h.setUint16(_,e,!0),_+=2}function x(e){h.setUint32(_,e,!0),_+=4}function E(e){_+=e}w(19778),x(c),E(4),x(122),x(108),x(n),x(-r>>>0),w(1),w(32),x(3),x(l),x(2835),x(2835),E(8),x(16711680),x(65280),x(255),x(4278190080),x(1466527264),function e(){for(;y<r&&v>0;){for(g=122+y*a,f=0;f<i;)v--,p=s[b++],m=p>>>24,h.setUint32(g+f,p<<8|m),f+=4;y++}b<s.length?(v=d,setTimeout(e,VV._dly)):t(u)}()},toBlob(e,t){this.toArrayBuffer(e,(e=>{t(new Blob([e],{type:"image/bmp"}))}))},_dly:9};var HV={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},qV={[HV.CHROME]:16384,[HV.FIREFOX]:11180,[HV.DESKTOP_SAFARI]:16384,[HV.IE]:8192,[HV.IOS]:4096,[HV.ETC]:8192};const WV="undefined"!=typeof window,KV="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,ZV=WV&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),GV=(WV||KV)&&(ZV&&ZV.getOriginalSymbol(window,"File")||"undefined"!=typeof File&&File),QV=(WV||KV)&&(ZV&&ZV.getOriginalSymbol(window,"FileReader")||"undefined"!=typeof FileReader&&FileReader);function YV(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((r=>{const i=e.split(","),o=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let a=s.length;const l=new Uint8Array(a);for(;a--;)l[a]=s.charCodeAt(a);const c=new Blob([l],{type:o});c.name=t,c.lastModified=n,r(c)}))}function XV(e){return new Promise(((t,n)=>{const r=new QV;r.onload=()=>t(r.result),r.onerror=e=>n(e),r.readAsDataURL(e)}))}function JV(e){return new Promise(((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=e=>n(e),r.src=e}))}function $V(){if(void 0!==$V.cachedResult)return $V.cachedResult;let e=HV.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=HV.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=HV.IOS:/Safari/i.test(t)?e=HV.DESKTOP_SAFARI:/Firefox/i.test(t)?e=HV.FIREFOX:(/MSIE/i.test(t)||1==!!document.documentMode)&&(e=HV.IE),$V.cachedResult=e,$V.cachedResult}function eH(e,t){const n=$V(),r=qV[n];let i=e,o=t,s=i*o;const a=i>o?o/i:i/o;for(;s>r*r;){const e=(r+i)/2,t=(r+o)/2;e<t?(o=t,i=t*a):(o=e*a,i=e),s=i*o}return{width:i,height:o}}function tH(e,t){let n,r;try{if(n=new OffscreenCanvas(e,t),r=n.getContext("2d"),null===r)throw new Error("getContext of OffscreenCanvas returns null")}catch(e){n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=e,n.height=t,[n,r]}function nH(e,t){const{width:n,height:r}=eH(e.width,e.height),[i,o]=tH(n,r);return t&&/jpe?g/.test(t)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(e,0,0,i.width,i.height),i}function rH(){return void 0!==rH.cachedResult||(rH.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"undefined"!=typeof document&&"ontouchend"in document),rH.cachedResult}function iH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){let i,o;var s=function(){try{return o=nH(i,t.fileType||e.type),n([i,o])}catch(e){return r(e)}},a=function(t){try{var n=function(e){try{throw e}catch(e){return r(e)}};try{let t;return XV(e).then((function(e){try{return t=e,JV(t).then((function(e){try{return i=e,function(){try{return s()}catch(e){return r(e)}}()}catch(e){return n(e)}}),n)}catch(e){return n(e)}}),n)}catch(e){n(e)}}catch(e){return r(e)}};try{if(rH()||[HV.DESKTOP_SAFARI,HV.MOBILE_SAFARI].includes($V()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(e){try{return i=e,s()}catch(e){return a()}}),a)}catch(e){a()}}))}function oH(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(o,s){let a;if("image/png"===t){let c,u,h;return c=e.getContext("2d"),({data:u}=c.getImageData(0,0,e.width,e.height)),h=BV.encode([u.buffer],e.width,e.height,4096*i),a=new Blob([h],{type:t}),a.name=n,a.lastModified=r,l.call(this)}{if("image/bmp"===t)return new Promise((t=>VV.toBlob(e,t))).then(function(e){try{return a=e,a.name=n,a.lastModified=r,d.call(this)}catch(e){return s(e)}}.bind(this),s);{if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:i}).then(function(e){try{return a=e,a.name=n,a.lastModified=r,f.call(this)}catch(e){return s(e)}}.bind(this),s);{let p;return p=e.toDataURL(t,i),YV(p,n,r).then(function(e){try{return a=e,f.call(this)}catch(e){return s(e)}}.bind(this),s)}function f(){return d.call(this)}}function d(){return l.call(this)}}function l(){return o(a)}}))}function sH(e){e.width=0,e.height=0}function aH(){return new Promise((function(e,t){let n,r,i,o,s;return void 0!==aH.cachedResult?e(aH.cachedResult):(n="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",YV("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(n){try{return r=n,iH(r).then((function(n){try{return i=n[1],oH(i,r.type,r.name,r.lastModified).then((function(n){try{return o=n,sH(i),iH(o).then((function(n){try{return s=n[0],aH.cachedResult=1===s.width&&2===s.height,e(aH.cachedResult)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t))}))}function lH(e){return new Promise(((t,n)=>{const r=new QV;r.onload=e=>{const n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return t(-2);const r=n.byteLength;let i=2;for(;i<r;){if(n.getUint16(i+2,!1)<=8)return t(-1);const e=n.getUint16(i,!1);if(i+=2,65505==e){if(1165519206!=n.getUint32(i+=2,!1))return t(-1);const e=18761==n.getUint16(i+=6,!1);i+=n.getUint32(i+4,e);const r=n.getUint16(i,e);i+=2;for(let o=0;o<r;o++)if(274==n.getUint16(i+12*o,e))return t(n.getUint16(i+12*o+8,e))}else{if(65280!=(65280&e))break;i+=n.getUint16(i,!1)}}return t(-1)},r.onerror=e=>n(e),r.readAsArrayBuffer(e)}))}function cH(e,t){const{width:n}=e,{height:r}=e,{maxWidthOrHeight:i}=t;let o,s=e;return isFinite(i)&&(n>i||r>i)&&([s,o]=tH(n,r),n>r?(s.width=i,s.height=r/n*i):(s.width=n/r*i,s.height=i),o.drawImage(e,0,0,s.width,s.height),sH(e)),s}function uH(e,t){const{width:n}=e,{height:r}=e,[i,o]=tH(n,r);switch(t>4&&t<9?(i.width=r,i.height=n):(i.width=n,i.height=r),t){case 2:o.transform(-1,0,0,1,n,0);break;case 3:o.transform(-1,0,0,-1,n,r);break;case 4:o.transform(1,0,0,-1,0,r);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r,0);break;case 7:o.transform(0,-1,-1,0,r,n);break;case 8:o.transform(0,-1,1,0,0,n)}return o.drawImage(e,0,0,n,r),sH(e),i}function hH(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r,i){let o,s,a,l,c,u,h,d,f,p,m,g,v,y,_,b,w,x,E,S;function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;if(t.signal&&t.signal.aborted)throw t.signal.reason;o+=e,t.onProgress(Math.min(o,100))}function C(e){if(t.signal&&t.signal.aborted)throw t.signal.reason;o=Math.min(Math.max(e,o),100),t.onProgress(o)}return o=n,s=t.maxIteration||10,a=1024*t.maxSizeMB*1024,T(),iH(e,t).then(function(n){try{return[,l]=n,T(),c=cH(l,t),T(),new Promise((function(n,r){var i;if(!(i=t.exifOrientation))return lH(e).then(function(e){try{return i=e,o.call(this)}catch(e){return r(e)}}.bind(this),r);function o(){return n(i)}return o.call(this)})).then(function(n){try{return u=n,T(),aH().then(function(n){try{return h=n?c:uH(c,u),T(),d=t.initialQuality||1,f=t.fileType||e.type,oH(h,f,e.name,e.lastModified,d).then(function(n){try{{if(p=n,T(),m=p.size>a,g=p.size>e.size,!m&&!g)return C(100),r(p);var o;function A(){if(s--&&(_>a||_>v)){let t,n;return t=S?.95*E.width:E.width,n=S?.95*E.height:E.height,[w,x]=tH(t,n),x.drawImage(E,0,0,t,n),d*="image/png"===f?.85:.95,oH(w,f,e.name,e.lastModified,d).then((function(e){try{return b=e,sH(E),E=w,_=b.size,C(Math.min(99,Math.floor((y-_)/(y-a)*100))),A}catch(e){return i(e)}}),i)}return[1]}return v=e.size,y=p.size,_=y,E=h,S=!t.alwaysKeepResolution&&m,(o=function(e){for(;e;){if(e.then)return void e.then(o,i);try{if(e.pop){if(e.length)return e.pop()?k.call(this):e;e=A}else e=e.call(this)}catch(e){return i(e)}}}.bind(this))(A);function k(){return sH(E),sH(w),sH(c),sH(h),sH(l),C(100),r(b)}}}catch(u){return i(u)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}))}const dH="\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n";let fH;function pH(e,t){return new Promise((function(n,r){let i,o,s,a,l,c;if(i={...t},s=0,({onProgress:a}=i),i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l="boolean"!=typeof i.useWebWorker||i.useWebWorker,delete i.useWebWorker,i.onProgress=e=>{s=e,"function"==typeof a&&a(s)},!(e instanceof Blob||e instanceof GV))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return r(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!l||"function"!=typeof Worker||c)return hH(e,i).then(function(e){try{return o=e,d.call(this)}catch(e){return r(e)}}.bind(this),r);var u=function(){try{return d.call(this)}catch(e){return r(e)}}.bind(this),h=function(t){try{return hH(e,i).then((function(e){try{return o=e,u()}catch(e){return r(e)}}),r)}catch(e){return r(e)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",function(e,t){return new Promise(((n,r)=>{fH||(fH=function(e){const t=[];return"function"==typeof e?t.push("(".concat(e,")()")):t.push(e),URL.createObjectURL(new Blob(t))}(dH));const i=new Worker(fH);i.addEventListener("message",(function(e){if(t.signal&&t.signal.aborted)i.terminate();else if(void 0===e.data.progress){if(e.data.error)return r(new Error(e.data.error)),void i.terminate();n(e.data.file),i.terminate()}else t.onProgress(e.data.progress)})),i.addEventListener("error",r),t.signal&&t.signal.addEventListener("abort",(()=>{r(t.signal.reason),i.terminate()})),i.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}(e,i).then((function(e){try{return o=e,u()}catch(e){return h()}}),h)}catch(e){h()}function d(){try{o.name=e.name,o.lastModified=e.lastModified}catch(e){}try{i.preserveExif&&"image/jpeg"===e.type&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(o=MV(e,o))}catch(e){}return n(o)}}))}pH.getDataUrlFromFile=XV,pH.getFilefromDataUrl=YV,pH.loadImage=JV,pH.drawImageInCanvas=nH,pH.drawFileInCanvas=iH,pH.canvasToFile=oH,pH.getExifOrientation=lH,pH.handleMaxWidthOrHeight=cH,pH.followExifOrientation=uH,pH.cleanupCanvasMemory=sH,pH.isAutoOrientationInBrowser=aH,pH.approximateBelowMaximumCanvasSizeOfBrowser=eH,pH.copyExifWithoutOrientation=MV,pH.getBrowserName=$V,pH.version="2.0.2";const mH=(e,t,n)=>{const{state:i}=Oz(),{currentUser:o}=(0,r.useContext)(tx),{dispatch:s}=Oz(),[a,l]=(0,r.useState)(!1);return{handleSubmitClick:async()=>{e(!0);let r=null;try{if(i.formData.photoBlob){const e=await async function(e){try{const t={maxSizeMB:.1,maxWidthOrHeight:512,useWebWorker:!0};return await pH(e,t)}catch(t){throw console.error("Error compressing image:",t),t}}(i.formData.photoBlob),t=DV("uploaded_image");r=await SV(e,t)}const e={userID:null===o||void 0===o?void 0:o.uid,photoURLs:r?[r]:i.formData.photoURLs,date:i.formData.dateOfObservation,time:i.formData.timeOfObservation,additionalNotes:i.formData.additionalNotes};if(i.establishmentExists)e.establishmentRef=i.formData.currentEstablishmentId,await CV(e);else{const t=await async function(e){const t=new AV(e);t.validate();try{const e=bv(Ng(Kv,"establishments"),xv("normalizedEstablishmentName","==",t.normalizedEstablishmentName),xv("address","==",t.address));if(!(await Mv(e)).empty)throw new Error("Establishment already exists at this address");const n=await Fv(Ng(Kv,"establishments"),t.toFirebaseObject());return console.log("Establishment document written with ID: ",n.id),{id:n.id}}catch(Yv){throw console.error("Error adding establishment document: ",Yv),Yv}}({establishmentName:i.formData.companyName,address:i.formData.companyAddress,coordinates:i.formData.companyCoordinates});e.establishmentRef=t.id,await CV(e)}s({type:"RESET_FORM_DATA"}),s({type:"RESET_TO_DEFAULT_PHOTO"}),s({type:"RESET_TO_FIRST_STEP"}),n&&n(),l(!0),t(!1)}catch(a){alert("Une erreur s'est produite lors de la soumission des donn\xe9es."),console.error("Erreur lors de la soumission des donn\xe9es:",a)}finally{e(!1)}},showModal:a,handleCloseModal:()=>l(!1)}},gH=(e,t,n,r,i,o)=>{console.log("Coordonn\xe9es avant inversion dans handleYesClick:",t);const s=[t.latitude,t.longitude];console.log("Coordonn\xe9es apr\xe8s inversion:",s),e({type:"UPDATE_FORM_DATA",payload:{companyAddress:n,companyCoordinates:s,companyName:i,photoURLs:[o],isDefaultPhoto:!1}}),e({type:"SET_STEP",payload:3}),e({type:"UPDATE_HAS_CLOSED_MODAL",payload:!0}),e({type:"SET_IS_OCCURRENCE_TRUE"}),r((e=>({...e,isVisible:!1})))};const vH=function(e,t,n,r,i,o,s){const a=[{text:s?"Il s'agit d'un autre \xe9tablissement":"Non",onClick:()=>{e({type:"SET_ESTABLISHMENT_EXISTS",payload:!1}),e({type:"SET_CURRENT_ESTABLISHMENT_ID",payload:null}),e({type:"NEXT_STEP"}),e({type:"UPDATE_HAS_CLOSED_MODAL",payload:!0}),r((e=>({...e,isVisible:!1})))}}];return s||a.push({text:"Oui",onClick:()=>gH(e,t,n,r,i,o)}),a},yH=e=>{let{establishmentName:t,address:n,photoURL:r,onClick:i,isMultipleOccurrences:o}=e;const s=n,a=o?{cursor:"pointer"}:{};return(0,ex.jsxs)("div",{onClick:i,style:a,children:[(0,ex.jsxs)("div",{className:"bg-dark text-light d-flex justify-content-around align-items-center p-3 mb-3 rounded",children:[(0,ex.jsxs)("div",{children:[(0,ex.jsx)("h3",{className:"mb-2",children:t}),(0,ex.jsx)("p",{className:"mb-0",children:s})]}),(0,ex.jsx)("div",{children:(0,ex.jsx)("img",{src:r,alt:"Observation",className:"rounded",style:{width:"80px",height:"80px"}})})]}),!o&&(0,ex.jsx)("h5",{className:"mb-2",children:"Est-ce en lien avec votre signalement ?"})]})},_H=e=>{let{duplicateCheckResult:t,onSelect:n,dispatch:r,setModalConfig:i}=e;const o=t.multiple;if(o)return(0,ex.jsx)("div",{children:t.details.map(((e,t)=>(0,ex.jsx)(yH,{isMultipleOccurrences:o,...e,onClick:()=>((e,t,n,r,i,o,s,a)=>{r(e),gH(t,i,o,n,s,a)})(e.establishmentId,r,i,n,e.coordinates,(e=>{let{streetNumber:t,streetName:n,postalCode:r,city:i}=e;return"".concat(t?"".concat(t," "):"").concat(n,", ").concat(r," ").concat(i)})(e),e.establishmentName,e.photoURL)},t)))});if(!o&&t.details){const e=t.details;return(0,ex.jsx)(yH,{isMultipleOccurrences:o,...e})}return(0,ex.jsx)("div",{children:"Aucun d\xe9tail disponible."})},bH=(e,t)=>{const{setModalConfig:n}=BU();return r=>{const{multiple:i,details:o,isApproximateMatch:s}=r,a=o.establishmentName,l=o.photoURL,c=s?"Les informations semblent correspondre \xe0 un \xe9tablissement existant, s\xe9lectionnez celui en rapport avec votre signalement.":"S\xe9lectionnez l'\xe9tablissement en rapport avec votre signalement.",u=(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)("p",{children:c}),(0,ex.jsx)(_H,{duplicateCheckResult:r,onSelect:e=>{t({type:"SET_CURRENT_ESTABLISHMENT_ID",payload:e})},dispatch:t,setModalConfig:n})]});let h="Etablissement existant";i?h="Plusieurs \xe9tablissements trouv\xe9s":s&&(h="Etablissement probablement similaire trouv\xe9");const d=vH(t,o.coordinates,"".concat(o.streetNumber||""," ").concat(o.streetName,", ").concat(o.postalCode," ").concat(o.city),n,a,l,r.multiple);n({isVisible:!0,title:h,body:u,buttons:d}),e(!1)}},wH=e=>{let{show:t,handleClose:n}=e;return(0,ex.jsxs)(XS,{show:t,onHide:n,centered:!0,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,children:(0,ex.jsx)(XS.Title,{children:"Confirmation"})}),(0,ex.jsx)(XS.Body,{children:"Votre signalement a bien \xe9t\xe9 pris en compte ! Merci"}),(0,ex.jsx)(XS.Footer,{children:(0,ex.jsx)(bx,{variant:"secondary",onClick:n,children:"Fermer"})})]})},xH=()=>{const{state:e,dispatch:t}=Oz(),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),{handleSubmitClick:a,showModal:l,handleCloseModal:c}=mH(i,s),{setActiveView:u}=(0,r.useContext)(tx),h=e.currentStep,d=e.steps.length,[f,p]=(0,r.useState)(!1),m=(e=>{const{companyName:t,normalizedCompanyName:n,companyAddress:r,companyCoordinates:i,dateOfObservation:o,timeOfObservation:s}=e;return t&&n&&r&&i&&o&&s})(e.formData),g=bH(i,t);return(0,ex.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[h>1&&(0,ex.jsx)(bx,{variant:"outline-primary",onClick:()=>{t({type:"PREV_STEP"})},children:"Revenir"}),h<d&&(0,ex.jsx)(bx,{variant:"primary",onClick:async()=>{if(i(!0),1===h&&""!==e.formData.companyName.trim()&&!e.hasClosedModal){const n=YC(e.formData.companyName),r=XC(n);t({type:"FORMAT_COMPANY",payload:{companyName:n,normalizedCompanyName:r}});const i=await FU(r,t);if(i.found)return void g(i)}t({type:"NEXT_STEP"}),i(!1)},disabled:n,children:n?(0,ex.jsx)(VP,{animation:"border",size:"sm"}):"Suivant"}),h===d&&(0,ex.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ex.jsx)(bx,{variant:"primary",onClick:()=>{p(!0)},disabled:!m||n,onChange:o||void 0,children:(0,ex.jsx)(lC,{})}),(0,ex.jsx)(bx,{variant:"success",onClick:async()=>{await a(),u("reportings")},disabled:!m||n,children:n?(0,ex.jsx)(VP,{animation:"border",size:"sm"}):"Terminer"})]}),(0,ex.jsx)(VU,{}),f&&(0,ex.jsx)(GU,{show:f,onHide:()=>{p(!1)},formData:e.formData,previewPhotoURL:e.previewPhotoURL,isDefaultPhoto:e.isDefaultPhoto,photoURLs:e.formData.photoURLs}),(0,ex.jsx)(wH,{show:l,handleClose:c})]})},EH=e=>{let{children:t}=e;const{state:n}=Oz();return(0,ex.jsx)(ZC,{className:"p-4 shadow bg-dark text-light w-100",children:(0,ex.jsx)(ZC.Body,{children:(0,ex.jsxs)(QC,{children:[(0,ex.jsx)(Fz,{}),(0,ex.jsx)("h3",{className:"mb-3",children:n.steps[n.currentStep-1].label})," ",t," ",(0,ex.jsx)(xH,{})]})})})},SH=()=>{const{state:e}=Oz(),t=e.steps[e.currentStep-1].component,n=e.steps[e.currentStep-1].props;return(0,ex.jsx)(EH,{children:(0,ex.jsx)(t,{...n})})},TH=e=>{let{steps:t}=e;return(0,ex.jsx)(UU,{children:(0,ex.jsx)(Pz,{steps:t,children:(0,ex.jsx)(SH,{})})})},CH=new WeakMap,AH=(e,t)=>{if(!e||!t)return;const n=CH.get(t)||new Map;CH.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function kH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const n=AH(e,t),[i,o]=(0,r.useState)((()=>!!n&&n.matches));return VE((()=>{let n=AH(e,t);if(!n)return o(!1);let r=CH.get(t);const i=()=>{o(n.matches)};return n.refCount++,n.addListener(i),i(),()=>{n.removeListener(i),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),i}const PH=function(e){const t=Object.keys(e);function n(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(n){const r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n);let i=e[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(t,o,s){let a;return"object"===typeof t?(a=t,s=o,o=!0):a={[t]:o=o||!0},kH((0,r.useMemo)((()=>Object.entries(a).reduce(((t,r)=>{let[o,s]=r;return"up"!==s&&!0!==s||(t=n(t,function(t){let n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(o))),"down"!==s&&!0!==s||(t=n(t,i(o))),t}),"")),[JSON.stringify(a)]),s)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),OH=PH,IH=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"offcanvas-body"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));IH.displayName="OffcanvasBody";const RH=IH,NH={[mS]:"show",[gS]:"show"},LH=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,in:s=!1,mountOnEnter:a=!1,unmountOnExit:l=!1,appear:c=!1,...u}=e;return n=mx(n,"offcanvas"),(0,ex.jsx)(CS,{ref:t,addEndListener:xS,in:s,mountOnEnter:a,unmountOnExit:l,appear:c,...u,childRef:o.ref,children:(e,t)=>r.cloneElement(o,{...t,className:ox()(i,o.props.className,(e===mS||e===vS)&&"".concat(n,"-toggling"),NH[e])})})}));LH.displayName="OffcanvasToggling";const DH=LH,MH=r.createContext(null);MH.displayName="NavbarContext";const jH=MH,FH=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...s}=e;return n=mx(n,"offcanvas-header"),(0,ex.jsx)(BS,{ref:t,...s,className:ox()(r,n),closeLabel:i,closeButton:o})}));FH.displayName="OffcanvasHeader";const zH=FH,UH=qS("h5"),BH=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=UH,...o}=e;return r=mx(r,"offcanvas-title"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));BH.displayName="OffcanvasTitle";const VH=BH;function HH(e){return(0,ex.jsx)(DH,{...e})}function qH(e){return(0,ex.jsx)(PS,{...e})}const WH=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,children:o,"aria-labelledby":s,placement:a="start",responsive:l,show:c=!1,backdrop:u=!0,keyboard:h=!0,scroll:d=!1,onEscapeKeyDown:f,onShow:p,onHide:m,container:g,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:_=!0,restoreFocusOptions:b,onEntered:w,onExit:x,onExiting:E,onEnter:S,onEntering:T,onExited:C,backdropClassName:A,manager:k,renderStaticNode:P=!1,...O}=e;const I=(0,r.useRef)();n=mx(n,"offcanvas");const{onToggle:R}=(0,r.useContext)(jH)||{},[N,L]=(0,r.useState)(!1),D=OH(l||"xs","up");(0,r.useEffect)((()=>{L(l?c&&!D:c)}),[c,l,D]);const M=gE((()=>{null==R||R(),null==m||m()})),j=(0,r.useMemo)((()=>({onHide:M})),[M]);const F=(0,r.useCallback)((e=>(0,ex.jsx)("div",{...e,className:ox()("".concat(n,"-backdrop"),A)})),[A,n]),z=e=>(0,ex.jsx)("div",{...e,...O,className:ox()(i,l?"".concat(n,"-").concat(l):n,"".concat(n,"-").concat(a)),"aria-labelledby":s,children:o});return(0,ex.jsxs)(ex.Fragment,{children:[!N&&(l||P)&&z({}),(0,ex.jsx)(RS.Provider,{value:j,children:(0,ex.jsx)(XE,{show:N,ref:t,backdrop:u,container:g,keyboard:h,autoFocus:v,enforceFocus:y&&!d,restoreFocus:_,restoreFocusOptions:b,onEscapeKeyDown:f,onShow:p,onHide:M,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==S||S(e,...n)},onEntering:T,onEntered:w,onExit:x,onExiting:E,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C(...n)},manager:k||(d?(I.current||(I.current=new lS({handleContainerOverflow:!1})),I.current):aS()),transition:HH,backdropTransition:qH,renderBackdrop:F,renderDialog:z})})]})}));WH.displayName="Offcanvas";const KH=Object.assign(WH,{Body:RH,Header:zH,Title:VH});n(573);const ZH=r.createContext(null);ZH.displayName="NavContext";const GH=ZH,QH=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},YH=r.createContext(null),XH=r.createContext(null),JH=["as","active","eventKey"];function $H(e){let{key:t,onClick:n,active:i,id:o,role:s,disabled:a}=e;const l=(0,r.useContext)(YH),c=(0,r.useContext)(GH),u=(0,r.useContext)(XH);let h=i;const d={role:s};if(c){s||"tablist"!==c.role||(d.role="tab");const e=c.getControllerId(null!=t?t:null),n=c.getControlledId(null!=t?t:null);d[LE("event-key")]=t,d.id=e||o,h=null==i&&null!=t?c.activeKey===t:i,!h&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(d["aria-controls"]=n)}return"tab"===d.role&&(d["aria-selected"]=h,h||(d.tabIndex=-1),a&&(d.tabIndex=-1,d["aria-disabled"]=!0)),d.onClick=gE((e=>{a||(null==n||n(e),null!=t&&l&&!e.isPropagationStopped()&&l(t,e))})),[d,{isActive:h}]}const eq=r.forwardRef(((e,t)=>{let{as:n=cx,active:r,eventKey:i}=e,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,JH);const[s,a]=$H(Object.assign({key:QH(i,o.href),active:r},o));return s[LE("active")]=a.isActive,(0,ex.jsx)(n,Object.assign({},o,s,{ref:t}))}));eq.displayName="NavItem";const tq=eq,nq=["as","onSelect","activeKey","role","onKeyDown"];const rq=()=>{},iq=LE("event-key"),oq=r.forwardRef(((e,t)=>{let{as:n="div",onSelect:i,activeKey:o,role:s,onKeyDown:a}=e,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,nq);const c=function(){const[,e]=(0,r.useReducer)((e=>!e),!1);return e}(),u=(0,r.useRef)(!1),h=(0,r.useContext)(YH),d=(0,r.useContext)(XH);let f,p;d&&(s=s||"tablist",o=d.activeKey,f=d.getControlledId,p=d.getControllerId);const m=(0,r.useRef)(null),g=e=>{const t=m.current;if(!t)return null;const n=eS(t,"[".concat(iq,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let o=i+e;return o>=n.length&&(o=0),o<0&&(o=n.length-1),n[o]},v=(e,t)=>{null!=e&&(null==i||i(e,t),null==h||h(e,t))};(0,r.useEffect)((()=>{if(m.current&&u.current){const e=m.current.querySelector("[".concat(iq,"][aria-selected=true]"));null==e||e.focus()}u.current=!1}));const y=yE(t,m);return(0,ex.jsx)(YH.Provider,{value:v,children:(0,ex.jsx)(GH.Provider,{value:{role:s,activeKey:QH(o),getControlledId:f||rq,getControllerId:p||rq},children:(0,ex.jsx)(n,Object.assign({},l,{onKeyDown:e=>{if(null==a||a(e),!d)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}var n;t&&(e.preventDefault(),v(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),u.current=!0,c())},ref:y,role:s}))})})}));oq.displayName="Nav";const sq=Object.assign(oq,{Item:tq}),aq=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"nav-item"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));aq.displayName="NavItem";const lq=aq,cq=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=MP,active:o,eventKey:s,disabled:a=!1,...l}=e;n=mx(n,"nav-link");const[c,u]=$H({key:QH(s,l.href),active:o,disabled:a,...l});return(0,ex.jsx)(i,{...l,...c,ref:t,disabled:a,className:ox()(r,n,a&&"disabled",u.isActive&&"active")})}));cq.displayName="NavLink";const uq=cq,hq=r.forwardRef(((e,t)=>{const{as:n="div",bsPrefix:i,variant:o,fill:s=!1,justify:a=!1,navbar:l,navbarScroll:c,className:u,activeKey:h,...d}=AP(e,{activeKey:"onSelect"}),f=mx(i,"nav");let p,m,g=!1;const v=(0,r.useContext)(jH),y=(0,r.useContext)(PC);return v?(p=v.bsPrefix,g=null==l||l):y&&({cardHeaderBsPrefix:m}=y),(0,ex.jsx)(sq,{as:n,ref:t,activeKey:h,className:ox()(u,{[f]:!g,["".concat(p,"-nav")]:g,["".concat(p,"-nav-scroll")]:g&&c,["".concat(m,"-").concat(o)]:!!m,["".concat(f,"-").concat(o)]:!!o,["".concat(f,"-fill")]:s,["".concat(f,"-justified")]:a}),...d})}));hq.displayName="Nav";const dq=Object.assign(hq,{Item:lq,Link:uq});var fq=["color","size","title"];function pq(){return pq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pq.apply(this,arguments)}function mq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var gq=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=mq(e,fq);return r.createElement("svg",pq({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M4.978.855a.5.5 0 1 0-.956.29l.41 1.352A4.985 4.985 0 0 0 3 6h10a4.985 4.985 0 0 0-1.432-3.503l.41-1.352a.5.5 0 1 0-.956-.29l-.291.956A4.978 4.978 0 0 0 8 1a4.979 4.979 0 0 0-2.731.811l-.29-.956z"}),r.createElement("path",{d:"M13 6v1H8.5v8.975A5 5 0 0 0 13 11h.5a.5.5 0 0 1 .5.5v.5a.5.5 0 1 0 1 0v-.5a1.5 1.5 0 0 0-1.5-1.5H13V9h1.5a.5.5 0 0 0 0-1H13V7h.5A1.5 1.5 0 0 0 15 5.5V5a.5.5 0 0 0-1 0v.5a.5.5 0 0 1-.5.5H13zm-5.5 9.975V7H3V6h-.5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 0-1 0v.5A1.5 1.5 0 0 0 2.5 7H3v1H1.5a.5.5 0 0 0 0 1H3v1h-.5A1.5 1.5 0 0 0 1 11.5v.5a.5.5 0 1 0 1 0v-.5a.5.5 0 0 1 .5-.5H3a5 5 0 0 0 4.5 4.975z"}))}));gq.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},gq.defaultProps={color:"currentColor",size:"1em",title:null};const vq=gq;var yq=["color","size","title"];function _q(){return _q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_q.apply(this,arguments)}function bq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var wq=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=bq(e,yq);return r.createElement("svg",_q({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"}))}));wq.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},wq.defaultProps={color:"currentColor",size:"1em",title:null};const xq=wq;var Eq=["color","size","title"];function Sq(){return Sq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sq.apply(this,arguments)}function Tq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Cq=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=Tq(e,Eq);return r.createElement("svg",Sq({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),r.createElement("path",{fillRule:"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"}))}));Cq.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},Cq.defaultProps={color:"currentColor",size:"1em",title:null};const Aq=Cq,kq=e=>{let{show:t,onHide:n}=e;const[i,o]=(0,r.useState)("");return(0,ex.jsxs)(XS,{show:t,onHide:n,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,children:(0,ex.jsx)(XS.Title,{children:"Signaler un bug"})}),(0,ex.jsx)(XS.Body,{children:(0,ex.jsx)(NT,{children:(0,ex.jsxs)(NT.Group,{controlId:"bugDescription",children:[(0,ex.jsx)(NT.Label,{children:"Description du bug"}),(0,ex.jsx)(NT.Control,{as:"textarea",rows:3,value:i,onChange:e=>o(e.target.value)})]})})}),(0,ex.jsxs)(XS.Footer,{children:[(0,ex.jsx)(bx,{variant:"secondary",onClick:n,children:"Annuler"}),(0,ex.jsx)(bx,{variant:"primary",onClick:()=>{console.log("Bug description:",i),o(""),n()},children:"Soumettre"})]})]})};function Pq(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),{currentUser:o,signOut:s,setActiveView:a,activeView:l}=(0,r.useContext)(tx),c=J(),u=[{name:"profile",icon:(0,ex.jsx)(rC,{size:24}),label:"Profil"},{name:"announcements",icon:(0,ex.jsx)(fC,{size:24}),label:"Annonces"},{name:"reportings",icon:(0,ex.jsx)(yC,{size:24}),label:"Signalements"},{name:"map",icon:(0,ex.jsx)(lC,{size:24}),label:"Carte"},{name:"info",icon:(0,ex.jsx)(EC,{size:24}),label:"Infos"},{name:"bugReport",icon:(0,ex.jsx)(vq,{size:24}),label:"Signaler un bug"}],h=()=>t(!1),d={hidden:{x:-50},visible:e=>({x:0,transition:{delay:.1+.04*e}})};return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(wz.div,{onClick:()=>t(!0),className:"d-inline-flex align-items-center btn-dark clickable mt-2",style:{cursor:"pointer"},initial:"visible",animate:e?"visible":"hidden",variants:{visible:{x:-20},hidden:{x:8,transition:{delay:.15}}},children:(0,ex.jsx)(xq,{size:32,color:"white"})}),(0,ex.jsxs)(KH,{show:e,onHide:h,placement:"start",className:"bg-dark",style:{width:"80px"},children:[(0,ex.jsx)(KH.Header,{closeButton:!0,className:"bg-dark text-secondary mx-auto"}),(0,ex.jsx)(KH.Body,{className:"bg-dark text-light d-flex flex-column align-items-center justify-content-center p-0",children:(0,ex.jsxs)(dq,{className:"flex-column gap-4 p-0 shadow rounded py-3",children:[u.map(((e,t)=>(0,ex.jsx)(wz.div,{custom:t,variants:d,initial:"hidden",animate:"visible",children:(0,ex.jsx)(dq.Link,{onClick:()=>{var t;"bugReport"===(t=e.name)?i(!0):(a(t),h())},children:r.cloneElement(e.icon,{className:l===e.name?"active-link":"text-secondary"})})},e.name))),o&&(0,ex.jsx)(wz.div,{variants:d,custom:u.length,initial:"hidden",animate:"visible",children:(0,ex.jsx)(dq.Link,{onClick:async()=>{try{await s(),h(),c("/")}catch(e){console.error("Erreur lors de la d\xe9connexion",e)}},className:"mt-5",children:(0,ex.jsx)(Aq,{size:24,className:"logout"===l?"active-link":"text-secondary"})})})]})})]}),(0,ex.jsx)(kq,{show:n,onHide:()=>{i(!1),h()}})]})}const Oq=e=>{let{icon:t,title:n}=e;return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)("style",{children:"\n          .inset-shadow {\n            box-shadow: inset 0 0 15px 1px rgba(0, 0, 0, 0.2);\n          }\n        "}),(0,ex.jsxs)("h1",{className:"display-5 text-light mb-4 text-center inset-shadow rounded-top py-2 pb-3 d-flex align-items-baseline justify-content-center",children:[(0,ex.jsx)(t,{size:32,className:"me-5 bg-dark shadow"}),n]})]})};var Iq=["color","size","title"];function Rq(){return Rq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rq.apply(this,arguments)}function Nq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Lq=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=Nq(e,Iq);return r.createElement("svg",Rq({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"}),r.createElement("path",{d:"M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}))}));Lq.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},Lq.defaultProps={color:"currentColor",size:"1em",title:null};const Dq=Lq;var Mq=["color","size","title"];function jq(){return jq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jq.apply(this,arguments)}function Fq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var zq=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=Fq(e,Mq);return r.createElement("svg",jq({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"}))}));zq.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},zq.defaultProps={color:"currentColor",size:"1em",title:null};const Uq=zq;var Bq=["color","size","title"];function Vq(){return Vq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vq.apply(this,arguments)}function Hq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var qq=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=Hq(e,Bq);return r.createElement("svg",Vq({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M8 0c-.69 0-1.843.265-2.928.56-1.11.3-2.229.655-2.887.87a1.54 1.54 0 0 0-1.044 1.262c-.596 4.477.787 7.795 2.465 9.99a11.777 11.777 0 0 0 2.517 2.453c.386.273.744.482 1.048.625.28.132.581.24.829.24s.548-.108.829-.24a7.159 7.159 0 0 0 1.048-.625 11.775 11.775 0 0 0 2.517-2.453c1.678-2.195 3.061-5.513 2.465-9.99a1.541 1.541 0 0 0-1.044-1.263 62.467 62.467 0 0 0-2.887-.87C9.843.266 8.69 0 8 0zm0 5a1.5 1.5 0 0 1 .5 2.915l.385 1.99a.5.5 0 0 1-.491.595h-.788a.5.5 0 0 1-.49-.595l.384-1.99A1.5 1.5 0 0 1 8 5z"}))}));qq.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},qq.defaultProps={color:"currentColor",size:"1em",title:null};const Wq=qq,Kq={[mS]:"showing",[vS]:"showing show"},Zq=r.forwardRef(((e,t)=>(0,ex.jsx)(PS,{...e,ref:t,transitionClasses:Kq})));Zq.displayName="ToastFade";const Gq=Zq,Qq=r.createContext({onClose(){}}),Yq=r.forwardRef(((e,t)=>{let{bsPrefix:n,closeLabel:i="Close",closeVariant:o,closeButton:s=!0,className:a,children:l,...c}=e;n=mx(n,"toast-header");const u=(0,r.useContext)(Qq),h=gE((e=>{null==u||null==u.onClose||u.onClose(e)}));return(0,ex.jsxs)("div",{ref:t,...c,className:ox()(n,a),children:[l,s&&(0,ex.jsx)(zS,{"aria-label":i,variant:o,onClick:h,"data-dismiss":"toast"})]})}));Yq.displayName="ToastHeader";const Xq=Yq,Jq=r.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=mx(r,"toast-body"),(0,ex.jsx)(i,{ref:t,className:ox()(n,r),...o})}));Jq.displayName="ToastBody";const $q=Jq,eW=r.forwardRef(((e,t)=>{let{bsPrefix:n,className:i,transition:o=Gq,show:s=!0,animation:a=!0,delay:l=5e3,autohide:c=!1,onClose:u,onEntered:h,onExit:d,onExiting:f,onEnter:p,onEntering:m,onExited:g,bg:v,...y}=e;n=mx(n,"toast");const _=(0,r.useRef)(l),b=(0,r.useRef)(u);(0,r.useEffect)((()=>{_.current=l,b.current=u}),[l,u]);const w=eO(),x=!(!c||!s),E=(0,r.useCallback)((()=>{x&&(null==b.current||b.current())}),[x]);(0,r.useEffect)((()=>{w.set(E,_.current)}),[w,E]);const S=(0,r.useMemo)((()=>({onClose:u})),[u]),T=!(!o||!a),C=(0,ex.jsx)("div",{...y,ref:t,className:ox()(n,i,v&&"bg-".concat(v),!T&&(s?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,ex.jsx)(Qq.Provider,{value:S,children:T&&o?(0,ex.jsx)(o,{in:s,onEnter:p,onEntering:m,onEntered:h,onExit:d,onExiting:f,onExited:g,unmountOnExit:!0,children:C}):C})}));eW.displayName="Toast";const tW=Object.assign(eW,{Body:$q,Header:Xq}),nW=(0,r.createContext)(null),rW=e=>{let{children:t}=e;const[n,i]=(0,r.useState)([]),o=e=>{i((t=>t.filter((t=>t.id!==e))))};return(0,ex.jsxs)(nW.Provider,{value:{addToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n=Math.random().toString(36).substring(2,11);i((r=>[...r,{id:n,message:e,type:t}])),setTimeout((()=>o(n)),3e3)},removeToast:o},children:[t,(0,ex.jsx)(oW,{toasts:n,removeToast:o})]})},iW=()=>{const e=(0,r.useContext)(nW);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},oW=e=>{let{toasts:t,removeToast:n}=e;return(0,ex.jsx)(ex.Fragment,{children:(0,ex.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"toast-container position-fixed bottom-0 start-50 translate-middle-x",style:{zIndex:1100},children:t.map((e=>(0,ex.jsx)(tW,{onClose:()=>n(e.id),show:!0,delay:3e3,autohide:!0,className:"mb-3",bg:"info"===e.type?"primary":"success"===e.type?"success":"danger",children:(0,ex.jsx)(tW.Body,{children:e.message})},e.id)))})})},sW=e=>{let{icon:t,...n}=e;return(0,ex.jsxs)(zT,{className:"mb-3",children:[(0,ex.jsx)(zT.Text,{children:t}),(0,ex.jsx)(NT.Control,{...n})]})},aW=e=>{let{showModal:t,handleClose:n}=e;const{reauthenticateWithCredential:i,changePassword:o}=(0,r.useContext)(tx),{addToast:s}=iW(),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),f=()=>{l(""),u(""),d("")};return(0,ex.jsx)(ex.Fragment,{children:(0,ex.jsxs)(XS,{show:t,onHide:()=>{f(),n()},centered:!0,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,className:"bg-dark text-light",children:(0,ex.jsx)(XS.Title,{children:"Changer de mot de passe"})}),(0,ex.jsx)(XS.Body,{children:(0,ex.jsxs)(NT,{onSubmit:async e=>{if(e.preventDefault(),c===h)try{await i(a),await o(c),s("Votre mot de passe a \xe9t\xe9 chang\xe9 avec succ\xe8s !","success"),f(),n()}catch(t){s("Une erreur s'est produite lors du changement de mot de passe. Assurez-vous que votre mot de passe actuel est correct.","danger")}else s("Les nouveaux mots de passe ne correspondent pas.","danger")},children:[(0,ex.jsx)(sW,{icon:(0,ex.jsx)(Wq,{}),type:"password",placeholder:"Mot de passe actuel",value:a,onChange:e=>l(e.target.value),required:!0}),(0,ex.jsx)(sW,{icon:(0,ex.jsx)(QT,{}),type:"password",placeholder:"Nouveau mot de passe",value:c,onChange:e=>u(e.target.value),required:!0}),(0,ex.jsx)(sW,{icon:(0,ex.jsx)(QT,{}),type:"password",placeholder:"Confirmer le nouveau mot de passe",value:h,onChange:e=>d(e.target.value),required:!0}),(0,ex.jsx)(bx,{variant:"secondary",type:"submit",children:"Valider"})]})})]})})};var lW=["color","size","title"];function cW(){return cW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cW.apply(this,arguments)}function uW(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var hW=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=uW(e,lW);return r.createElement("svg",cW({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),r.createElement("path",{fillRule:"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"}))}));hW.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},hW.defaultProps={color:"currentColor",size:"1em",title:null};const dW=hW,fW={hidden:{x:-40,opacity:0},visible:e=>({x:0,opacity:1,transition:{delay:.02*e}})},pW={hidden:{x:-40},visible:{x:0}},mW={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.15}}},gW=e=>{let{editMode:t,userProfile:n,handleCancel:i,setEditMode:o,setUserProfile:s}=e;const[a,l]=(0,r.useState)(n.displayName),{addToast:c}=iW();return t?(0,ex.jsx)(wz.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:pW,transition:{duration:.2},children:(0,ex.jsxs)(zT,{children:[(0,ex.jsx)(NT.Control,{style:{height:"40px"},autoFocus:!0,className:"me-0",value:a,onChange:e=>l(e.target.value)}),(0,ex.jsx)(bx,{variant:"secondary",onClick:async e=>{e.preventDefault();try{await async function(e,t){const n=Lg(Kv,"users",e);try{await jv(n,{displayName:t})}catch(Yv){throw console.error("Error updating user display name: ",Yv),Yv}}(n.userID,a),s({...n,displayName:a}),c("Le nom d\u2019affichage a \xe9t\xe9 mis \xe0 jour avec succ\xe8s.","success")}catch(t){c("\xc9chec de la mise \xe0 jour du nom d\u2019affichage.","danger")}o(!1)},children:"Ok"}),(0,ex.jsx)(bx,{variant:"dark",onClick:i,children:"Annuler"})]})},"editMode"):(0,ex.jsxs)(wz.div,{initial:"hidden",animate:"visible",variants:pW,className:"d-flex justify-content-between w-100 align-items-center py-1",style:{height:"40px"},children:[(0,ex.jsx)("div",{className:"bg-primary rounded p-1",children:(0,ex.jsx)(dW,{size:24})}),(0,ex.jsx)("span",{children:n.displayName}),(0,ex.jsx)(bx,{variant:"secondary",className:"py-1 px-2 text-d-flex justify-content-center",onClick:()=>o(!0),children:(0,ex.jsx)(aR,{className:"ms-0 text-start",size:18,style:{cursor:"pointer",marginLeft:"10px"}})})]})},vW=e=>{let{children:t,variants:n,...r}=e;return(0,ex.jsx)(wz.div,{initial:"hidden",animate:"visible",variants:n,...r,children:t})},yW=e=>{let{icon:t,label:n,value:r,index:i}=e;return(0,ex.jsxs)(vW,{variants:mW,className:"d-flex align-items-center py-2",children:[(0,ex.jsx)(t,{size:28,className:"me-2 bg-primary rounded p-1"}),n,": ",r]})},_W=()=>{const[e,t]=(0,r.useState)(!1),{userProfile:n,setUserProfile:i,isPasswordSignIn:o}=(0,r.useContext)(tx),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(0),u=()=>{t((e=>!e))};return(0,r.useEffect)((()=>{(async()=>{if(null!==n&&void 0!==n&&n.userID)try{const e=await $w.observations.where("userID").equals(n.userID).count();c(e)}catch(e){console.error("Failed to fetch observation count:",e)}})()}),[n]),(0,ex.jsxs)(ZC,{className:"bg-dark text-light shadow mt-5",style:{maxWidth:"30rem",margin:"auto"},children:[(0,ex.jsx)(vW,{variants:fW,custom:0,children:(0,ex.jsx)(ZC.Header,{as:"h5",className:"d-flex justify-content-between align-items-center mb-5",children:(0,ex.jsx)(gW,{editMode:s,userProfile:n,handleCancel:()=>{a(!1)},setEditMode:a,setUserProfile:i})})}),(0,ex.jsxs)(ZC.Body,{children:[(0,ex.jsx)(vW,{variants:fW,custom:1,children:(0,ex.jsx)(yW,{icon:zx,label:"Email",value:n.email})}),(0,ex.jsx)(vW,{variants:fW,custom:2,children:(0,ex.jsx)(yW,{icon:Dq,label:"Date d'inscription",value:new Date(n.joinedDate).toLocaleDateString("fr-FR")})}),(0,ex.jsx)(vW,{variants:fW,custom:3,children:(0,ex.jsx)(yW,{icon:fC,label:"Nombre d'\xe9co-signalements ",value:l})}),o&&(0,ex.jsxs)(vW,{variants:fW,custom:4,children:[(0,ex.jsxs)("div",{className:"d-flex align-items-center py-2",onClick:u,style:{cursor:"pointer"},children:[(0,ex.jsx)(Uq,{size:24,className:"me-2"}),"Changer mon mot de passe"]}),(0,ex.jsx)(aW,{showModal:e,handleClose:u})]})]})]})};const bW=function(e){let{center:t,zoom:n,markersData:i}=e;const o=(0,r.useRef)(null),s=(0,r.useRef)(null),a=qU().icon({iconUrl:WU,shadowUrl:KU,iconSize:[25,41],iconAnchor:[12,41],shadowSize:[41,41]}),l=qU().divIcon({className:"custom-marker-icon",html:'<div style="background-color: red; width: 25px; height: 25px; border-radius: 50%; border: 2px solid white;"></div>'});return(0,r.useEffect)((()=>{const e=qU().map(o.current).setView(t,n);return s.current=e,qU().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),()=>{e.remove()}}),[t,n]),(0,r.useEffect)((()=>{const e=s.current;if(!e||!i)return;let r=null;i.forEach((t=>{const n=t.isLastObservation?l:a,i=qU().marker(t.markerCoords,{icon:n}).addTo(e);if(t.isLastObservation&&(r=t.markerCoords),i.on("click",(()=>{setTimeout((()=>{e.setView(t.markerCoords,15)}),10)})),t.companyName){const e='\n          <div style="display: flex; flex-direction: column; align-items: start; justify-content: center; min-width: 80px; text-align:center;">\n          <p style="margin-top: 5px;margin-bottom: 5px;">'.concat(t.companyName,'</p>\n            <img src="').concat(t.imageURL,'" alt="Image associ\xe9e" style="max-width: 80px; max-height: 100px;">\n          </div>\n        ');i.bindPopup(e)}})),r?e.setView(r,n):e.setView(t,n)}),[i,t,n,a,l]),(0,ex.jsx)("div",{className:"rounded",ref:o,style:{width:"100%",height:"400px"}})},wW=()=>{const{currentUser:e}=(0,r.useContext)(tx),[t,n]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=await $w.observations.where("userID").equals(e.uid).toArray();t.sort(((e,t)=>new Date("".concat(t.date,"T").concat(t.time))-new Date("".concat(e.date,"T").concat(e.time))));const r=await Promise.all(t.map((async e=>{const t=await $w.establishments.get(e.establishmentRef);return{...e,establishment:t||{}}})));n(r)}catch(t){console.error("Failed to fetch observations from IndexedDB:",t)}})()}),[e]);const i=t.length>0?t[0]:null,o=t.map((e=>{var t,n;const r=null===(t=e.establishment)||void 0===t?void 0:t.coordinates;return{markerCoords:r?[r.latitude,r.longitude]:null,companyName:(null===(n=e.establishment)||void 0===n?void 0:n.establishmentName)||"Inconnu",imageURL:e.photoURLs&&e.photoURLs.length>0?e.photoURLs[0]:xP,isLastObservation:e===i}})).filter((e=>e.markerCoords));return(0,ex.jsxs)("div",{className:"map-view text-light",children:[(0,ex.jsx)("p",{children:"Vue de la carte interactive."}),(0,ex.jsx)(bW,{center:[48.9562,4.3631],zoom:14,markersData:o})]})};const xW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},EW={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function SW(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=EW[e];return n+parseInt(TE(t,r[0]),10)+parseInt(TE(t,r[1]),10)}const TW={[pS]:"collapse",[vS]:"collapsing",[mS]:"collapsing",[gS]:"collapse show"},CW=r.forwardRef(((e,t)=>{let{onEnter:n,onEntering:i,onEntered:o,onExit:s,onExiting:a,className:l,children:c,dimension:u="height",in:h=!1,timeout:d=300,mountOnEnter:f=!1,unmountOnExit:p=!1,appear:m=!1,getDimensionValue:g=SW,...v}=e;const y="function"===typeof u?u():u,_=(0,r.useMemo)((()=>xW((e=>{e.style[y]="0"}),n)),[y,n]),b=(0,r.useMemo)((()=>xW((e=>{const t="scroll".concat(y[0].toUpperCase()).concat(y.slice(1));e.style[y]="".concat(e[t],"px")}),i)),[y,i]),w=(0,r.useMemo)((()=>xW((e=>{e.style[y]=null}),o)),[y,o]),x=(0,r.useMemo)((()=>xW((e=>{e.style[y]="".concat(g(y,e),"px"),ES(e)}),s)),[s,g,y]),E=(0,r.useMemo)((()=>xW((e=>{e.style[y]=null}),a)),[y,a]);return(0,ex.jsx)(CS,{ref:t,addEndListener:xS,...v,"aria-expanded":v.role?h:null,onEnter:_,onEntering:b,onEntered:w,onExit:x,onExiting:E,childRef:c.ref,in:h,timeout:d,mountOnEnter:f,unmountOnExit:p,appear:m,children:(e,t)=>r.cloneElement(c,{...t,className:ox()(l,c.props.className,TW[e],"width"===y&&"collapse-horizontal")})})})),AW=CW;function kW(e,t){return Array.isArray(e)?e.includes(t):e===t}const PW=r.createContext({});PW.displayName="AccordionContext";const OW=PW,IW=r.forwardRef(((e,t)=>{let{as:n="div",bsPrefix:i,className:o,children:s,eventKey:a,...l}=e;const{activeEventKey:c}=(0,r.useContext)(OW);return i=mx(i,"accordion-collapse"),(0,ex.jsx)(AW,{ref:t,in:kW(c,a),...l,className:ox()(o,i),children:(0,ex.jsx)(n,{children:r.Children.only(s)})})}));IW.displayName="AccordionCollapse";const RW=IW,NW=r.createContext({eventKey:""});NW.displayName="AccordionItemContext";const LW=NW,DW=r.forwardRef(((e,t)=>{let{as:n="div",bsPrefix:i,className:o,onEnter:s,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:h,...d}=e;i=mx(i,"accordion-body");const{eventKey:f}=(0,r.useContext)(LW);return(0,ex.jsx)(RW,{eventKey:f,onEnter:s,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:h,children:(0,ex.jsx)(n,{ref:t,...d,className:ox()(o,i)})})}));DW.displayName="AccordionBody";const MW=DW;function jW(e,t){const{activeEventKey:n,onSelect:i,alwaysOpen:o}=(0,r.useContext)(OW);return r=>{let s=e===n?null:e;o&&(s=Array.isArray(n)?n.includes(e)?n.filter((t=>t!==e)):[...n,e]:[e]),null==i||i(s,r),null==t||t(r)}}const FW=r.forwardRef(((e,t)=>{let{as:n="button",bsPrefix:i,className:o,onClick:s,...a}=e;i=mx(i,"accordion-button");const{eventKey:l}=(0,r.useContext)(LW),c=jW(l,s),{activeEventKey:u}=(0,r.useContext)(OW);return"button"===n&&(a.type="button"),(0,ex.jsx)(n,{ref:t,onClick:c,...a,"aria-expanded":Array.isArray(u)?u.includes(l):l===u,className:ox()(o,i,!kW(u,l)&&"collapsed")})}));FW.displayName="AccordionButton";const zW=FW,UW=r.forwardRef(((e,t)=>{let{as:n="h2",bsPrefix:r,className:i,children:o,onClick:s,...a}=e;return r=mx(r,"accordion-header"),(0,ex.jsx)(n,{ref:t,...a,className:ox()(i,r),children:(0,ex.jsx)(zW,{onClick:s,children:o})})}));UW.displayName="AccordionHeader";const BW=UW,VW=r.forwardRef(((e,t)=>{let{as:n="div",bsPrefix:i,className:o,eventKey:s,...a}=e;i=mx(i,"accordion-item");const l=(0,r.useMemo)((()=>({eventKey:s})),[s]);return(0,ex.jsx)(LW.Provider,{value:l,children:(0,ex.jsx)(n,{ref:t,...a,className:ox()(o,i)})})}));VW.displayName="AccordionItem";const HW=VW,qW=r.forwardRef(((e,t)=>{const{as:n="div",activeKey:i,bsPrefix:o,className:s,onSelect:a,flush:l,alwaysOpen:c,...u}=AP(e,{activeKey:"onSelect"}),h=mx(o,"accordion"),d=(0,r.useMemo)((()=>({activeEventKey:i,onSelect:a,alwaysOpen:c})),[i,a,c]);return(0,ex.jsx)(OW.Provider,{value:d,children:(0,ex.jsx)(n,{ref:t,...u,className:ox()(s,h,l&&"".concat(h,"-flush"))})})}));qW.displayName="Accordion";const WW=Object.assign(qW,{Button:zW,Collapse:RW,Item:HW,Header:BW,Body:MW});var KW=["color","size","title"];function ZW(){return ZW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZW.apply(this,arguments)}function GW(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var QW=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=GW(e,KW);return r.createElement("svg",ZW({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"}))}));QW.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},QW.defaultProps={color:"currentColor",size:"1em",title:null};const YW=QW,XW=e=>{let{onClick:t}=e;return(0,ex.jsx)(bx,{variant:"link",onClick:t,className:"text-light",children:(0,ex.jsx)(YW,{size:"32"})})},JW=e=>{let{show:t,onHide:n,title:r,handleAddObservation:i,isLoading:o,setIsLoading:s}=e;const{dispatch:a,state:l}=Oz(),c=o||!l.formData.dateOfObservation||!l.formData.timeOfObservation;return(0,ex.jsxs)(XS,{show:t,onHide:()=>{setTimeout((()=>{a({type:"RESET_TO_DEFAULT_PHOTO"}),a({type:"RESET_DATE_TIME"}),a({type:"RESET_COMPANY_ADDRESS"}),a({type:"RESET_COMPANY_NAME_MODAL"}),a({type:"SET_ESTABLISHMENT_EXISTS",payload:!1}),a({type:"RESET_NOTES"}),a({type:"SET_CURRENT_ESTABLISHMENT_ID",payload:null})}),500),n()},centered:!0,children:[(0,ex.jsx)(XS.Header,{closeButton:!0,className:"bg-dark text-light",children:(0,ex.jsx)(XS.Title,{children:r})}),(0,ex.jsx)(XS.Body,{className:"bg-dark text-light",children:(0,ex.jsxs)(NT,{onSubmit:i,children:[(0,ex.jsx)(Yk,{}),(0,ex.jsxs)("div",{className:"d-flex gap-3",children:[(0,ex.jsx)(bR,{}),(0,ex.jsx)(xz,{})]})]})}),(0,ex.jsx)(XS.Footer,{className:"bg-dark text-light text-start",children:(0,ex.jsx)(bx,{variant:"primary",type:"submit",onClick:()=>{s(!0),i()},disabled:c,children:o?(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(VP,{animation:"border",size:"sm"})," Chargement..."]}):"Soumettre"})})]})};var $W=["color","size","title"];function eK(){return eK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eK.apply(this,arguments)}function tK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var nK=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=tK(e,$W);return r.createElement("svg",eK({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"}))}));nK.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},nK.defaultProps={color:"currentColor",size:"1em",title:null};const rK=nK,iK="ReportingsView_customToggle__N7Q4D",oK=e=>{let{children:t,eventKey:n,activeKey:r,setActiveKey:i}=e;const o=jW(n,(()=>{i((e=>e===n?null:n))})),s=r===n,a={transform:s?"rotate(180deg)":"none",transition:"transform 0.3s ease"};return(0,ex.jsxs)(bx,{variant:"link",onClick:o,className:"text-start ".concat(iK),"aria-expanded":s,children:[(0,ex.jsx)("span",{children:t}),(0,ex.jsx)(rK,{size:24,className:"bg-primary rounded p-1",style:a})]})};var sK=["color","size","title"];function aK(){return aK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aK.apply(this,arguments)}function lK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var cK=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=lK(e,sK);return r.createElement("svg",aK({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"}))}));cK.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},cK.defaultProps={color:"currentColor",size:"1em",title:null};const uK=cK;var hK=["color","size","title"];function dK(){return dK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dK.apply(this,arguments)}function fK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var pK=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,s=fK(e,hK);return r.createElement("svg",dK({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},s),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"}),r.createElement("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"}))}));pK.propTypes={color:xx().string,size:xx().oneOfType([xx().string,xx().number]),title:xx().string},pK.defaultProps={color:"currentColor",size:"1em",title:null};const mK=pK,gK=e=>{let{observation:t,isImageLoaded:n,handleImageLoaded:r}=e;return(0,ex.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[(0,ex.jsxs)("div",{className:"flex-grow-1 d-flex flex-column",children:[(0,ex.jsxs)("div",{className:"mb-1",children:[(0,ex.jsx)(uK,{size:"18",className:"me-2"}),(0,ex.jsx)("span",{children:(i=t.date,new Date(i).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]}),(0,ex.jsxs)("div",{children:[(0,ex.jsx)(mK,{size:"18",className:"me-2"}),(0,ex.jsx)("span",{children:t.time})]})]}),t.photoURLs&&t.photoURLs.map(((e,t)=>(0,ex.jsxs)("div",{style:{width:"50px",height:"50px"},children:[!n(t)&&(0,ex.jsx)(VP,{animation:"border"}),(0,ex.jsx)("img",{src:e,alt:"Observation ".concat(t+1),className:"img-fluid rounded",style:{maxWidth:"50px",display:n(t)?"block":"none"},onLoad:()=>r(t)})]},t)))]});var i},vK=()=>{const{currentUser:e}=(0,r.useContext)(tx),[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)({}),{dispatch:d}=Oz(),[f,p]=(0,r.useState)(!1),m=(0,r.useCallback)((async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=await $w.observations.where("userID").equals(e.uid).toArray();t.sort(((e,t)=>new Date("".concat(t.date,"T").concat(t.time))-new Date("".concat(e.date,"T").concat(e.time))));const r=await Promise.all(t.map((async e=>{const t=await $w.establishments.get(e.establishmentRef);return{...e,establishment:t||{},photoURLs:e.photoURLs&&e.photoURLs.length>0?e.photoURLs:[xP]}})));n(r)}catch(t){console.error("Failed to fetch observations from IndexedDB:",t)}}),[e]);(0,r.useEffect)((()=>{m()}),[e,m]);const{handleSubmitClick:g,showModal:v,handleCloseModal:y}=mH(p,a,m),_=e=>{h((t=>({...t,[e]:!0})))},b=e=>u[e],w=t.reduce(((e,t)=>{if(t.establishment){const n=t.establishmentRef;e[n]||(e[n]={name:t.establishment.establishmentName,address:t.establishment.address,observations:[]}),e[n].observations.push({date:t.date,time:t.time,photoURLs:t.photoURLs,additionalNotes:t.additionalNotes})}else console.error("Establishment details are missing for observation",t);return e}),{});for(const r in w)w[r].observations&&w[r].observations.sort(((e,t)=>new Date("".concat(t.date,"T").concat(t.time))-new Date("".concat(e.date,"T").concat(e.time))));return(0,ex.jsxs)("div",{className:"reporting-view text-light",children:[(0,ex.jsx)(WW,{activeKey:i,children:Object.entries(w).map(((e,t)=>{let[n,{name:r,address:s,observations:l}]=e;return(0,ex.jsxs)(ZC,{className:"mb-3 bg-dark ",children:[(0,ex.jsx)(wz.div,{initial:{x:-60},animate:{x:0},transition:{delay:.1+.04*t,duration:.15},className:"card-header bg-dark text-light rounded shadow",children:(0,ex.jsxs)(oK,{eventKey:"".concat(t),activeKey:i,setActiveKey:o,children:[(0,ex.jsx)("h3",{children:r}),(0,ex.jsx)("div",{children:s.split(",")[0]})]})}),(0,ex.jsx)(WW.Collapse,{eventKey:"".concat(t),children:(0,ex.jsxs)(ZC.Body,{className:"bg-dark text-light rounded",children:[l.map(((e,t)=>(0,ex.jsx)(gK,{observation:e,isImageLoaded:b,handleImageLoaded:_},t))),(0,ex.jsx)("div",{className:"text-center",children:(0,ex.jsx)(XW,{onClick:()=>{return e=n,a(!0),void $w.establishments.get(e).then((t=>{t?(c(t.establishmentName),d({type:"UPDATE_COMPANY_NAME_MODAL",payload:{companyName:t.establishmentName,normalizedCompanyName:t.normalizedEstablishmentName}}),d({type:"UPDATE_COMPANY_ADDRESS",payload:t.address}),d({type:"SET_COMPANY_COORDINATES",payload:[t.coordinates.latitude,t.coordinates.longitude]}),d({type:"SET_ESTABLISHMENT_EXISTS",payload:!0}),d({type:"SET_CURRENT_ESTABLISHMENT_ID",payload:e})):(c("Inconnu"),d({type:"RESET_COMPANY_ADDRESS"}),d({type:"RESET_COMPANY_NAME_MODAL"}),d({type:"SET_ESTABLISHMENT_EXISTS",payload:!1}),d({type:"SET_CURRENT_ESTABLISHMENT_ID",payload:null}))}));var e}})})]})})]},n)}))}),(0,ex.jsx)(JW,{isLoading:f,setIsLoading:p,show:s,onHide:()=>a(!1),title:"Ajouter \xe0 ".concat(l),handleAddObservation:g}),(0,ex.jsx)(wH,{show:v,handleClose:y})]})},yK=()=>{const[e,t]=(0,r.useState)(null),n=[{title:"Les couleurs",content:(0,ex.jsxs)("div",{children:[(0,ex.jsxs)("p",{children:["La loi impose des restrictions sur la temp\xe9rature de couleur des \xe9clairages ext\xe9rieurs afin de r\xe9duire les nuisances lumineuses. Il est recommand\xe9 d'utiliser des \xe9clairages dont la temp\xe9rature de couleur ne d\xe9passe pas ",(0,ex.jsx)("strong",{children:"3000 Kelvin"}),". Cela permet de limiter les \xe9missions de lumi\xe8re bleue, qui ont un impact n\xe9gatif sur la faune et la flore, ainsi que sur le cycle veille-sommeil des humains. En pratique, la couleur doit \xeatre similaire \xe0 celle de l'\xe9clairage public, qui est g\xe9n\xe9ralement"," ",(0,ex.jsx)("strong",{children:"jaune \xe0 blanc chaud"}),"."]}),(0,ex.jsx)("div",{style:{height:"60px",background:"linear-gradient(to right, #ff9300, #ffffff, #00bfff)",margin:"10px 0"},children:(0,ex.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",color:"#ffffff",position:"relative",width:"100%"},children:[(0,ex.jsx)("span",{style:{position:"absolute",left:"0%",color:"white"},children:"500K"}),(0,ex.jsx)("span",{style:{position:"absolute",left:"37%",color:"green"},children:"3000K"}),(0,ex.jsx)("span",{style:{position:"absolute",left:"100%",transform:"translateX(-100%)",color:"black"},children:"8000K"})]})}),(0,ex.jsx)("p",{children:(0,ex.jsx)("a",{href:"https://www.legifrance.gouv.fr/loda/article_lc/LEGIARTI000041461568",target:"_blank",rel:"noopener noreferrer",children:"Arr\xeat\xe9 de 2018 relatif \xe0 la r\xe9duction des nuisances lumineuses, Article 3"})})]})},{title:"La vitrine",content:(0,ex.jsx)("div",{children:(0,ex.jsxs)("p",{children:["Les prescriptions horaires pour l'\xe9clairage des vitrines sont strictement d\xe9finies par la loi pour r\xe9duire les nuisances lumineuses. L'\xe9clairage des vitrines doit \xeatre \xe9teint au plus tard \xe0"," ",(0,ex.jsx)("strong",{children:"1 heure du matin"}),", ou"," ",(0,ex.jsx)("strong",{children:"une heure apr\xe8s la fermeture"}),"de l'\xe9tablissement si celui-ci ferme plus tard. Cela permet de diminuer la pollution lumineuse nocturne et de pr\xe9server la qualit\xe9 de vie des riverains.",(0,ex.jsx)("br",{}),(0,ex.jsx)("br",{}),(0,ex.jsx)("a",{href:"https://www.legifrance.gouv.fr/loda/article_lc/LEGIARTI000038748395",target:"_blank",rel:"noopener noreferrer",children:"Arr\xeat\xe9 de 2018 relatif \xe0 la r\xe9duction des nuisances lumineuses, Article 2"})]})})},{title:"L'enseigne",content:(0,ex.jsx)("div",{children:(0,ex.jsxs)("p",{children:["Les enseignes lumineuses doivent \xe9galement respecter des prescriptions horaires afin de minimiser les nuisances lumineuses. Elles doivent \xeatre \xe9teintes entre"," ",(0,ex.jsx)("strong",{children:"1 heure et 6 heures du matin"}),", sauf si l'activit\xe9 signal\xe9e se poursuit apr\xe8s 1 heure du matin. Dans ce cas, elles doivent \xeatre \xe9teintes au plus tard"," ",(0,ex.jsx)("strong",{children:"une heure apr\xe8s la fin de cette activit\xe9"}),". Ces mesures visent \xe0 r\xe9duire l'impact de la lumi\xe8re artificielle sur l'environnement nocturne.",(0,ex.jsx)("br",{}),(0,ex.jsx)("br",{}),(0,ex.jsx)("a",{href:"https://www.legifrance.gouv.fr/jorf/id/JORFTEXT000037660989",target:"_blank",rel:"noopener noreferrer",children:"Arr\xeat\xe9 de 2018 relatif \xe0 la r\xe9duction des nuisances lumineuses, Article 4"})]})})},{title:"Le local",content:(0,ex.jsx)("div",{children:(0,ex.jsxs)("p",{children:["Les prescriptions horaires de l'\xe9clairage des locaux commerciaux ou professionnels sont \xe9tablies pour limiter les nuisances lumineuses. L'\xe9clairage int\xe9rieur visible depuis l'ext\xe9rieur doit \xeatre \xe9teint au plus tard"," ",(0,ex.jsx)("strong",{children:"une heure apr\xe8s la fin de l'occupation des locaux"})," ","et sont allum\xe9s \xe0 ",(0,ex.jsx)("strong",{children:"7 heures du matin"})," au plus t\xf4t ou 1 heure avant le d\xe9but de l'activit\xe9 si celle-ci s'exerce plus t\xf4t. Cette r\xe8gle contribue \xe0 la r\xe9duction de la pollution lumineuse et aide \xe0 pr\xe9server l'environnement nocturne.",(0,ex.jsx)("br",{}),(0,ex.jsx)("br",{}),(0,ex.jsx)("a",{href:"https://www.legifrance.gouv.fr/loda/article_lc/LEGIARTI000038748395",target:"_blank",rel:"noopener noreferrer",children:"Arr\xeat\xe9 de 2018 relatif \xe0 la r\xe9duction des nuisances lumineuses, Article 2"})]})})}];return(0,ex.jsxs)("div",{children:[(0,ex.jsxs)("p",{style:{color:"#ffffff"},children:["Le principe fondamental est que les installations d'\xe9clairage ne doivent jamais \xe9mettre de lumi\xe8re intrusive excessive dans les logements, quelle que soit la source de cette lumi\xe8re.",(0,ex.jsx)("br",{}),(0,ex.jsx)("br",{}),(0,ex.jsx)("a",{href:"https://www.legifrance.gouv.fr/loda/article_lc/LEGIARTI000041461568",target:"_blank",rel:"noopener noreferrer",children:"Article 3 de l'Arr\xeat\xe9 du 27 d\xe9cembre 2018 relatif \xe0 la pr\xe9vention des nuisances lumineuses"})]}),(0,ex.jsx)(WW,{activeKey:e,children:n.map(((n,r)=>(0,ex.jsxs)(ZC,{className:"mb-3 bg-dark",children:[(0,ex.jsx)(wz.div,{initial:{x:-60},animate:{x:0},transition:{delay:.1+.04*r,duration:.15},className:"card-header bg-dark text-light rounded shadow",children:(0,ex.jsx)(oK,{eventKey:"".concat(r),activeKey:e,setActiveKey:t,children:(0,ex.jsx)("h3",{children:n.title})})}),(0,ex.jsx)(WW.Collapse,{eventKey:"".concat(r),children:(0,ex.jsx)(ZC.Body,{className:"bg-dark text-light rounded",children:n.content})})]},r)))})]})},_K={initial:{opacity:0,y:-50},in:{opacity:1,y:0},out:{opacity:0,y:50}},bK={type:"tween",ease:"anticipate",duration:.3};function wK(){const{activeView:e}=(0,r.useContext)(tx),t={profile:{title:"Profil",Icon:rC},map:{title:"Mes signalements",Icon:lC},announcements:{title:"\xc9co-veille",Icon:fC},reportings:{title:"Mes signalements",Icon:yC},info:{title:"Que dit la Loi",Icon:EC}};let n;switch(e){case"profile":default:n=(0,ex.jsx)(_W,{});break;case"map":n=(0,ex.jsx)(wW,{});break;case"reportings":n=(0,ex.jsx)(vK,{});break;case"announcements":n=(0,ex.jsx)(TH,{});break;case"info":n=(0,ex.jsx)(yK,{})}const{Icon:i,title:o}=t[e]||t.announcements;return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(Pq,{}),(0,ex.jsx)("div",{className:"container shadow-sm pt-5 pb-5 rounded-bottom",style:{maxWidth:"800px"},children:(0,ex.jsx)(Pz,{children:(0,ex.jsxs)(wz.div,{variants:_K,initial:"initial",animate:"in",exit:"out",transition:bK,children:[(0,ex.jsx)(Oq,{icon:i,title:o}),n]},e)})})]})}class xK extends r.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?(0,ex.jsx)("h1",{children:"Quelque chose s'est mal pass\xe9."}):this.props.children}}const EK=xK,SK="Footer_link__wn7HO",TK="Footer_tradeMark__f6FzL",CK="Footer_noUnderline__ehKoY",AK=()=>{const e=(new Date).getFullYear();return(0,ex.jsxs)("footer",{className:"bg-dark text-light fixed-bottom shadow p-0 p-3 text-center",children:[(0,ex.jsx)("small",{children:(0,ex.jsxs)("a",{href:"https://www.facebook.com/profile.php?id=61552019534082",target:"_blank",rel:"noopener noreferrer",className:"text-light ".concat(SK," ").concat(CK),children:[(0,ex.jsx)(Nx,{className:"me-2"}),"Acclpl\u2122"]})})," ",(0,ex.jsxs)("small",{className:"text-light ".concat(TK),children:["\xa9 ",e," Tous droits r\xe9serv\xe9s."]})]})};const kK=function(){const{currentUser:e}=(0,r.useContext)(tx);return(0,r.useEffect)((()=>{e&&((async()=>{try{const e=Ng(Kv,"establishments"),t=Ng(Kv,"observations");zv(e,(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));$w.establishments.bulkPut(t),console.log("Establishments updated in IndexedDB")})),zv(t,(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));$w.observations.bulkPut(t),console.log("Observations updated in IndexedDB")}))}catch(e){throw console.error("Error syncing with Firestore:",e),new Error("Failed to initialize data from Firestore.")}})().catch(console.error),(async()=>{try{const e=await $w.establishments.toArray();console.log("Donn\xe9es actuelles des \xe9tablissements dans IndexedDB:",e);const t=await $w.observations.toArray();console.log("Donn\xe9es actuelles des observations dans IndexedDB:",t)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es IndexedDB:",e)}})())}),[e]),(0,ex.jsx)(EK,{children:(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(YT,{}),(0,ex.jsx)(XT,{}),!e&&(0,ex.jsx)(iE,{}),(0,ex.jsxs)(ge,{children:[(0,ex.jsx)(pe,{path:"/",element:(0,ex.jsx)(Kx,{})}),(0,ex.jsx)(pe,{path:"/private",element:(0,ex.jsx)(JT,{}),children:(0,ex.jsx)(pe,{path:"/private/private-home",element:(0,ex.jsx)(wK,{})})})]}),(0,ex.jsx)(AK,{})]})})},PK=document.getElementById("root");(0,o.s)(PK).render((0,ex.jsx)(r.StrictMode,{children:(0,ex.jsx)(Xx,{children:(0,ex.jsx)(nx,{children:(0,ex.jsxs)(rW,{children:[" ",(0,ex.jsx)(kK,{})]})})})}))})()})();
//# sourceMappingURL=main.ceb22ed2.js.map